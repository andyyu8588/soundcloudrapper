{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/add-post/add-post.component.ts","webpack:///src/app/components/add-post/add-post.component.html","webpack:///src/app/components/add-post/mime-type.validator.ts","webpack:///src/app/components/add-tag/add-tag.component.ts","webpack:///src/app/components/add-tag/add-tag.component.html","webpack:///src/app/components/chatsystem/chatsystem.component.ts","webpack:///src/app/components/chatsystem/chatsystem.component.html","webpack:///src/app/components/chatsystem/chatwidget/chatwidget.component.ts","webpack:///src/app/components/chatsystem/chatwidget/chatwidget.component.html","webpack:///src/app/components/chatsystem/friendlist/friend/friend.component.ts","webpack:///src/app/components/chatsystem/friendlist/friend/friend.component.html","webpack:///src/app/components/chatsystem/friendlist/friendlist.component.ts","webpack:///src/app/components/chatsystem/friendlist/friendlist.component.html","webpack:///src/app/components/city-search/city-search.component.ts","webpack:///src/app/components/city-search/city-search.component.html","webpack:///src/app/components/comment-section/comment-section.component.ts","webpack:///src/app/components/comment-section/comment-section.component.html","webpack:///src/app/components/comment/comment.component.ts","webpack:///src/app/components/comment/comment.component.html","webpack:///src/app/components/display-posts/display-posts.component.ts","webpack:///src/app/components/display-posts/display-posts.component.html","webpack:///src/app/components/edit-comment/edit-comment.component.ts","webpack:///src/app/components/edit-comment/edit-comment.component.html","webpack:///src/app/components/filter/filter.component.ts","webpack:///src/app/components/filter/filter.component.html","webpack:///src/app/components/header/header.component.ts","webpack:///src/app/components/header/header.component.html","webpack:///src/app/components/loginpage/loginpage.component.ts","webpack:///src/app/components/loginpage/loginpage.component.html","webpack:///src/app/components/logout/logout.component.ts","webpack:///src/app/components/logout/logout.component.html","webpack:///src/app/components/map/map.component.ts","webpack:///src/app/components/map/map.component.html","webpack:///src/app/components/myaccount/myaccount.component.ts","webpack:///src/app/components/myaccount/myaccount.component.html","webpack:///src/app/components/profile/mime-type.validator.ts","webpack:///src/app/components/profile/profile.component.ts","webpack:///src/app/components/profile/profile.component.html","webpack:///src/app/components/profile/proprety/proprety.component.ts","webpack:///src/app/components/profile/proprety/proprety.component.html","webpack:///src/app/components/registration-process/country-selector/country-selector.component.ts","webpack:///src/app/components/registration-process/country-selector/country-selector.component.html","webpack:///src/app/components/registration-process/registration-process.component.ts","webpack:///src/app/components/registration-process/registration-process.component.html","webpack:///src/app/components/registration-process/registrationpage/registrationpage.component.ts","webpack:///src/app/components/registration-process/registrationpage/registrationpage.component.html","webpack:///src/app/components/search-bar/search-bar.component.ts","webpack:///src/app/components/search-bar/search-bar.component.html","webpack:///src/app/components/search-posts/search-posts.component.ts","webpack:///src/app/components/search-posts/search-posts.component.html","webpack:///src/app/components/share/share.component.ts","webpack:///src/app/components/share/share.component.html","webpack:///src/app/components/sidebar/scroll-to-top/scroll-to-top.component.ts","webpack:///src/app/components/sidebar/scroll-to-top/scroll-to-top.component.html","webpack:///src/app/components/sidebar/sidebar.component.ts","webpack:///src/app/components/sidebar/sidebar.component.html","webpack:///src/app/components/tabs/home/home.component.ts","webpack:///src/app/components/tabs/home/home.component.html","webpack:///src/app/components/tabs/mytrip/add-venue-popover/add-venue-popover.component.ts","webpack:///src/app/components/tabs/mytrip/add-venue-popover/add-venue-popover.component.html","webpack:///src/app/components/tabs/mytrip/mytrip.component.ts","webpack:///src/app/components/tabs/mytrip/mytrip.component.html","webpack:///src/app/components/tabs/mytrip/tripmodal/tripmodal.component.ts","webpack:///src/app/components/tabs/mytrip/tripmodal/tripmodal.component.html","webpack:///src/app/components/tabs/searchresults/VenueButton/VenueButton.component.ts","webpack:///src/app/components/tabs/searchresults/VenueButton/venueButton.component.html","webpack:///src/app/components/tabs/searchresults/add-to-trip-popover/add-to-trip-popover.component.ts","webpack:///src/app/components/tabs/searchresults/add-to-trip-popover/add-to-trip-popover.component.html","webpack:///src/app/components/tabs/searchresults/searchresults.component.ts","webpack:///src/app/components/tabs/searchresults/searchresults.component.html","webpack:///src/app/components/tabs/searchresults/userbutton/userbutton.component.ts","webpack:///src/app/components/tabs/searchresults/userbutton/userbutton.component.html","webpack:///src/app/components/userprofile/userprofile.component.ts","webpack:///src/app/components/userprofile/userprofile.component.html","webpack:///src/app/components/venue/venue.component.ts","webpack:///src/app/components/venue/venue.component.html","webpack:///src/app/models/Room_Widget.model.ts","webpack:///src/app/models/coordinates.ts","webpack:///src/app/models/geocodeResp.model.ts","webpack:///src/app/models/trip.model.ts","webpack:///src/app/pipes/array-to-pipe.pipe.ts","webpack:///src/app/pipes/list-object.pipe.ts","webpack:///src/app/pipes/null.pipe.ts","webpack:///src/app/services/add-post.service.ts","webpack:///src/app/services/chatsystem/friendlist.service.ts","webpack:///src/app/services/chatsystem/socket.service.ts","webpack:///src/app/services/comments.service.ts","webpack:///src/app/services/http.service.ts","webpack:///src/app/services/map/foursquare.service.ts","webpack:///src/app/services/map/map.service.ts","webpack:///src/app/services/map/openstreetmap.service.ts","webpack:///src/app/services/search.service.ts","webpack:///src/app/services/session.service.ts","webpack:///src/app/services/trip.service.ts","webpack:///src/environments/environment.dev.ts","webpack:///src/environments/environment.prod.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","map","webpackContext","webpackContextResolve","__webpack_require__","o","webpackContextKeys","Object","routes","path","component","children","redirectTo","pathMatch","AppRoutingModule","forRoot","imports","AppComponent","FriendlistService","SessionService","SocketService","MapService","title","user","sessionStorage","getItem","localStorage","emit","username","data","res","setItem","session","err","console","log","clear","openChatWidgetsSub","openWidgets","subscribe","x","openChatWidgets","sessionStateSub","sessionState","windowHeight","window","innerHeight","resizeWindow","innerWidth","getFakeCenter","unsubscribe","selector","templateUrl","styleUrls","AppModule","declarations","providers","bootstrap","AddPostComponent","postsService","route","enteredTitle","enteredContent","isLoading","mode","visible","selectable","removable","addOnBlur","separatorKeysCodes","tags","clickedOption","checkedOnce","form","validators","required","minLength","location","content","image","asyncValidators","paramMap","has","postId","get","getPost","postData","post","_id","author","date","likes","imagePath","comments","setValue","imagePreview","CitySearchComponent","clickedOption_sub","city","event","file","target","files","patchValue","updateValueAndValidity","reader","FileReader","onload","result","readAsDataURL","onAddLocation","name","invalid","newPost","Date","toLocaleString","value","addPost","updatePost","reset","input","trim","push","tag","index","indexOf","splice","mimeType","control","fileReader","frObs","create","observer","addEventListener","arr","Uint8Array","subarray","header","isValid","i","length","toString","next","invalidMimeType","complete","readAsArrayBuffer","AddTagComponent","http","onAddTag","put","response","onSubmit","ChatsystemComponent","openChatWidgets_sub","sessionState_sub","getNotifications","roomId","selectChatwidget","ChatwidgetComponent","friendlistService","renderer","socketService","sessionService","typeArea","sessionSub","isLoggedIn","roomSub","roomModel","room","sessionRoomName","getRoomName","roomName","messages","forEach","message","ul","createElement","innerHTML","sender","appendChild","div","nativeElement","listen","key","preventDefault","sendMessage","getRoomWidget","toggleChatWidget","ngOnDestroy","remove","FriendComponent","friend","FriendlistComponent","friends","friendsSub","chatroomList","getList","split","CreateChatroom","myControl","OpenstreetmapService","ActivatedRoute","locationAdded","_autoSuggested","autoSuggested","asObservable","_clickedOptionLocal","_clickedOption","citySearchPresent","queryParams","params","lng","reverseSearch","lat","features","removeMiddle","properties","display_name","geometry","coordinates","searched","valueChanges","clearTimeout","timeout","setTimeout","openstreetmap_sub","citySearch","searchResults","element","getFakeCenterCity","fakeCenterCity_sub","fakeCenterCity","placeholder","string","keep","nothing","shift","slice","concat","country","clearOnSearch","CommentSectionComponent","commentsService","newComment","addComment","onAddComment","CommentComponent","dialog","displayEdits","replyField","showReplies","newReply","replyContent","commentId","comment","reply","likeContent","replyId","likeComment","deleteContent","deleteComment","commentInfo","dialogRef","open","commentData","afterClosed","likeTreeComment","replyBoolean","DisplayPostsComponent","HttpService","posts","likeShow","searchPosts","postsSub","getPostUpdateListener","getRelevantPosts","follows","following","deletePost","likePost","timeoutHandler","clearInterval","setInterval","showLikes","EditCommentComponent","CommentsService","edited","edit","editComment","closeDialog","close","FilterComponent","SearchService","TripService","panelOpenState","categoriesTree","categoriesSet","allComplete","count","treeControl","node","categories","_selectedNodes","selectedNodes","hasChild","_","categoriesSet_sub","categorySet","set","categoriesTree_sub","categoryTree","tree","category","child","uncheckAll","checkAll","checked","modifyIdSet","updateCategoryTree","allChecked","initiateChildrenChecker","treeValues","add","sub","updateCategorySet","state","allChildrenChecked","atLeastOneChecked","HeaderComponent","link","loginComponent","modalService","modal","openModal","LoginComponent","router","login_err","hide","loginForm","credentials","email","password","token","dismissAll","navigate","removeItem","loginClicked","LogoutComponent","sessionSate_sub","reload","MapComponent","buildMap","MyaccountComponent","httpService","picture","imageData","FormData","append","onImagePicked","ProfileComponent","Router","getProfile","User","firstname","lastname","birthdate","gender","propreties","values","formData","PropretyComponent","proprety","changeForm","propretyValue","changing","requestedChange","newProprety","valid","patch","CountrySelectorComponent","Http","citySearchAppearance","citySearchPlaceholder","allPlaces","continent","places","clickLocation_sub","clickLocation","progressUpdate","mapbox","geocoding","headers","access_token","types","language","placeName","place_name","chip","citySearchComponent","getKey","short_code","toUpperCase","includes","showMarker","query","optionClick_sub","countryName","substring","reject","find","place","placesArr","removeMarker","RegistrationProcessComponent","_formBuilder","editable","_progressUpdate","isSaving","isDone","firstFormGroup","group","firstCtrl","secondFormGroup","secondCtrl","step1","stepControl","registration","registrationForm","stepper","selectedIndex","stepper_sub","selectionChange","steps","all","selector1","onSumbit","selector2","responses","alert","savePreferences","RegistrationComponent","FoursquareService","hide1","currentTime","toISOString","checkPasswordValidity","maxLength","checkPasswordsMatch","bind","forbiddenUsernames","errors","dirty","pass","confirm","birth","now","difference","diff","isOld","searchBarForm","SearchBarComponent","submission","isChild","loading","fakeCenter","filterOptions","defaultFilter","defaultCategory","returnTab_sub","searchTab","tab","openTab","fakeCenter_sub","coord","montrealCoord","foursquareCategory_sub","cats","address","currentSearch","getCenter","enterSearch","mainSearch","filter","changeFilter","parseInt","SearchPostsComponent","onSearchPost","ShareComponent","shareForm","copied","UrlLink","onCopyClick","ScrollToTopComponent","duration","interval","move","el","scrollTop","pipe","acc","curr","position","val","scrollToTop","SidebarComponent","width","Styles","showFiller","tabs","url","substr","windowSub","windowSize","windowWidth","drawer","_width","MIN_DIMENSIONS_PX","maxWidth","rectangle","height","updateSidebarWidth","openTabSub","onResizeEnd","HomeComponent","AddVenuePopoverComponent","allTrips","venueCategories","isErr","tripIndex","dayIndex","scheduleIndex","venueIndex","isLoaded","trips_sub","trips","mapCenter_sub","searchUrlCoord","searchVenueForm","customVenueForm","schedule","venues","venueAddress","price","selectedOption_sub","selectedOption","venueCity","icon","prefix","suffix","venueCoord","modifyBackend","updateLocal","onSubmitCustom","TripAccordion","MytripComponent","MatDialog","isSuccess","sharedTrip","sharingUrl","tableDataSource","displayedColumns","d","weekday","Array","getDay","obj","total","getDayPrice","getDayVenues","shared","dist","lastCoord","venue","distanceTo","toFixed","source","sort","tripId","trip","_tripSub","table","renderRows","travelnetURL","start","end","venueName","venuePrice","previousIndex","currentIndex","getSource","removeLayer","removeSource","day","addSource","addLayer","moveLayer","venueOnDestroy","addMarker","TripmodalComponent","minDate","nameErr","modalForm","checkName","tripName","onCancel","VenueButtonComponent","searchResult","pathID","triparr","formatDetails","option","formattedAddress","join","canonicalUrl","AddToTripPopoverComponent","onSubmitEvent","trip_sub","MatSelectionList","selectedOptions","selected","SearchresultsComponent","filter_sub","filterNumber","number","_categoriesSet_sub","type","UserbuttonComponent","searchservice","selfUsername","followed","followers","unfollowed","UserprofileComponent","replace","searchUser","users","userSearch","VenueComponent","ogUrl","rating","ratingColor","displayContent","RoomWidget","unread","CustomCoordinates","order","geocodeResponseModel","tripModel","isPrivate","final","dateRange","toDate","ArrayToPipePipe","fill","ListObjectPipe","NullPipe","parent","returnNull","transform","AddPostService","postsUpdated","formattedComment","formattedReply","transformedPosts","UserPref","authorization","responseData","Title","updatedPosts","oldPostIndex","findIndex","p","updatedPostIndex","providedIn","roomarr","widgetarr","idarr","_chatroomList","_openWidgets","_windowSize","_roomModel","array","polishedarr","a","b","lastIndex","seen","roomNames","roomIds","action","CHATWIDGETWIDTH","FRIENDLISTWIDTH","MAXNUM","Math","floor","removedRoomId","uri","socket","eventName","on","ack","once","removeListener","disconnect","PostService","travelnetCommentURL","replies","postIndex","updatePosts","transformedComments","commentIndex","c","editContent","replyIndex","r","newPosts","serverURL","serverRoute","latLng","near","foursquare","venuesExplore","clientId","clientSecret","getCurrentDate","venueDetails","userAuth","getCategories","dt","month","getMonth","getFullYear","featureGEOJSONModel","_fakeCenter","_fakeCenterCity","_clickLocation","Places","sidebarWidth_sub","sidebarWidth","w","container","style","center","zoom","failIfMajorPerformanceCaveat","pitchWithRotate","dragRotate","lngLat","layout","paint","venueLocation","setLngLat","addTo","lngOffset","flyTo","sidebar","centerPoints","unproject","realCenter","setData","getLayer","bbox","openstreetmap","searchNodes","nominatim","search","reverse","HttpClient","foursquareService","_searchTab","_filterNumber","_categoryTree","_categorySet","categoriesCollection","Set","updateCategories","searchVenues","toStringReorder","travelnet","searchUsers","getDetails","foursquareSearchVenues","searchType","resetSearchContent","totalResults","groups","items","initiateTree","newData","_sessionState","_sidebarWidth","searchedVenue","_trips","environment","production","v","venuesSearch","searchRealNode","getUserInfo","bootstrapModule","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,eAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,eAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,cAAIC,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,WAAC,CAACE,IAAF,GAAS,kBAAT;AACA,gBAAMF,CAAN;AACA,SAJM,CAAP;AAKA;;AACDL,8BAAwB,CAACQ,IAAzB,GAAgC,YAAW;AAAE,eAAO,EAAP;AAAY,OAAzD;;AACAR,8BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAS,YAAM,CAACC,OAAP,GAAiBV,wBAAjB;AACAA,8BAAwB,CAACW,EAAzB,GAA8B,yCAA9B;;;;;;;;;;;;;;ACZA,UAAIC,GAAG,GAAG;AACT,gBAAQ,oCADC;AAET,mBAAW,oCAFF;AAGT,gBAAQ,oCAHC;AAIT,mBAAW,uCAJF;AAKT,sBAAc,uCALL;AAMT,mBAAW,uCANF;AAOT,sBAAc,uCAPL;AAQT,mBAAW,uCARF;AAST,sBAAc,uCATL;AAUT,mBAAW,uCAVF;AAWT,sBAAc,uCAXL;AAYT,mBAAW,uCAZF;AAaT,sBAAc,uCAbL;AAcT,mBAAW,uCAdF;AAeT,sBAAc,uCAfL;AAgBT,mBAAW,oCAhBF;AAiBT,gBAAQ,oCAjBC;AAkBT,mBAAW,oCAlBF;AAmBT,gBAAQ,oCAnBC;AAoBT,mBAAW,oCApBF;AAqBT,gBAAQ,oCArBC;AAsBT,mBAAW,oCAtBF;AAuBT,gBAAQ,oCAvBC;AAwBT,mBAAW,oCAxBF;AAyBT,gBAAQ,oCAzBC;AA0BT,mBAAW,oCA1BF;AA2BT,gBAAQ,oCA3BC;AA4BT,mBAAW,oCA5BF;AA6BT,gBAAQ,oCA7BC;AA8BT,mBAAW,oCA9BF;AA+BT,gBAAQ,oCA/BC;AAgCT,mBAAW,oCAhCF;AAiCT,gBAAQ,oCAjCC;AAkCT,mBAAW,oCAlCF;AAmCT,gBAAQ,oCAnCC;AAoCT,mBAAW,oCApCF;AAqCT,gBAAQ,oCArCC;AAsCT,mBAAW,oCAtCF;AAuCT,gBAAQ,oCAvCC;AAwCT,mBAAW,oCAxCF;AAyCT,gBAAQ,oCAzCC;AA0CT,mBAAW,oCA1CF;AA2CT,gBAAQ,oCA3CC;AA4CT,mBAAW,uCA5CF;AA6CT,sBAAc,uCA7CL;AA8CT,mBAAW,uCA9CF;AA+CT,sBAAc,uCA/CL;AAgDT,mBAAW,oCAhDF;AAiDT,gBAAQ,oCAjDC;AAkDT,mBAAW,oCAlDF;AAmDT,gBAAQ,oCAnDC;AAoDT,mBAAW,oCApDF;AAqDT,mBAAW,uCArDF;AAsDT,sBAAc,uCAtDL;AAuDT,mBAAW,uCAvDF;AAwDT,sBAAc,uCAxDL;AAyDT,mBAAW,uCAzDF;AA0DT,sBAAc,uCA1DL;AA2DT,mBAAW,uCA3DF;AA4DT,sBAAc,uCA5DL;AA6DT,mBAAW,uCA7DF;AA8DT,sBAAc,uCA9DL;AA+DT,mBAAW,uCA/DF;AAgET,sBAAc,uCAhEL;AAiET,mBAAW,uCAjEF;AAkET,sBAAc,uCAlEL;AAmET,mBAAW,uCAnEF;AAoET,sBAAc,uCApEL;AAqET,gBAAQ,oCArEC;AAsET,mBAAW,oCAtEF;AAuET,gBAAQ,oCAvEC;AAwET,mBAAW,uCAxEF;AAyET,sBAAc,uCAzEL;AA0ET,mBAAW,uCA1EF;AA2ET,sBAAc,uCA3EL;AA4ET,mBAAW,oCA5EF;AA6ET,gBAAQ,oCA7EC;AA8ET,mBAAW,oCA9EF;AA+ET,gBAAQ,oCA/EC;AAgFT,mBAAW,oCAhFF;AAiFT,gBAAQ,oCAjFC;AAkFT,mBAAW,oCAlFF;AAmFT,gBAAQ,oCAnFC;AAoFT,mBAAW,oCApFF;AAqFT,iBAAS,qCArFA;AAsFT,oBAAY,qCAtFH;AAuFT,gBAAQ,oCAvFC;AAwFT,mBAAW,oCAxFF;AAyFT,gBAAQ,oCAzFC;AA0FT,mBAAW,uCA1FF;AA2FT,sBAAc,uCA3FL;AA4FT,mBAAW,uCA5FF;AA6FT,sBAAc,uCA7FL;AA8FT,mBAAW,oCA9FF;AA+FT,gBAAQ,oCA/FC;AAgGT,mBAAW,oCAhGF;AAiGT,gBAAQ,oCAjGC;AAkGT,mBAAW,oCAlGF;AAmGT,gBAAQ,oCAnGC;AAoGT,mBAAW,oCApGF;AAqGT,gBAAQ,oCArGC;AAsGT,mBAAW,oCAtGF;AAuGT,sBAAc,0CAvGL;AAwGT,yBAAiB,0CAxGR;AAyGT,sBAAc,0CAzGL;AA0GT,yBAAiB,0CA1GR;AA2GT,gBAAQ,oCA3GC;AA4GT,mBAAW,oCA5GF;AA6GT,gBAAQ,oCA7GC;AA8GT,mBAAW,oCA9GF;AA+GT,gBAAQ,oCA/GC;AAgHT,mBAAW,oCAhHF;AAiHT,gBAAQ,oCAjHC;AAkHT,mBAAW,oCAlHF;AAmHT,gBAAQ,oCAnHC;AAoHT,mBAAW,oCApHF;AAqHT,mBAAW,uCArHF;AAsHT,sBAAc,uCAtHL;AAuHT,gBAAQ,oCAvHC;AAwHT,mBAAW,oCAxHF;AAyHT,gBAAQ,oCAzHC;AA0HT,mBAAW,oCA1HF;AA2HT,gBAAQ,oCA3HC;AA4HT,mBAAW,uCA5HF;AA6HT,sBAAc,uCA7HL;AA8HT,mBAAW,oCA9HF;AA+HT,gBAAQ,oCA/HC;AAgIT,mBAAW,oCAhIF;AAiIT,gBAAQ,oCAjIC;AAkIT,mBAAW,oCAlIF;AAmIT,gBAAQ,oCAnIC;AAoIT,mBAAW,oCApIF;AAqIT,gBAAQ,oCArIC;AAsIT,mBAAW,oCAtIF;AAuIT,gBAAQ,oCAvIC;AAwIT,mBAAW,oCAxIF;AAyIT,gBAAQ,oCAzIC;AA0IT,mBAAW,oCA1IF;AA2IT,gBAAQ,oCA3IC;AA4IT,mBAAW,oCA5IF;AA6IT,gBAAQ,oCA7IC;AA8IT,mBAAW,oCA9IF;AA+IT,gBAAQ,oCA/IC;AAgJT,mBAAW,oCAhJF;AAiJT,gBAAQ,oCAjJC;AAkJT,mBAAW,oCAlJF;AAmJT,gBAAQ,oCAnJC;AAoJT,mBAAW,oCApJF;AAqJT,gBAAQ,oCArJC;AAsJT,mBAAW,oCAtJF;AAuJT,gBAAQ,oCAvJC;AAwJT,mBAAW,oCAxJF;AAyJT,gBAAQ,oCAzJC;AA0JT,mBAAW,oCA1JF;AA2JT,gBAAQ,oCA3JC;AA4JT,mBAAW,oCA5JF;AA6JT,gBAAQ,oCA7JC;AA8JT,mBAAW,oCA9JF;AA+JT,gBAAQ,oCA/JC;AAgKT,mBAAW,oCAhKF;AAiKT,gBAAQ,oCAjKC;AAkKT,mBAAW,oCAlKF;AAmKT,gBAAQ,oCAnKC;AAoKT,mBAAW,oCApKF;AAqKT,gBAAQ,oCArKC;AAsKT,mBAAW,uCAtKF;AAuKT,sBAAc,uCAvKL;AAwKT,mBAAW,oCAxKF;AAyKT,gBAAQ,oCAzKC;AA0KT,mBAAW,oCA1KF;AA2KT,gBAAQ,oCA3KC;AA4KT,mBAAW,oCA5KF;AA6KT,gBAAQ,oCA7KC;AA8KT,mBAAW,oCA9KF;AA+KT,gBAAQ,oCA/KC;AAgLT,mBAAW,oCAhLF;AAiLT,gBAAQ,oCAjLC;AAkLT,mBAAW,uCAlLF;AAmLT,sBAAc,uCAnLL;AAoLT,mBAAW,oCApLF;AAqLT,gBAAQ,oCArLC;AAsLT,mBAAW,oCAtLF;AAuLT,oBAAY,wCAvLH;AAwLT,uBAAe,wCAxLN;AAyLT,mBAAW,uCAzLF;AA0LT,sBAAc,uCA1LL;AA2LT,gBAAQ,oCA3LC;AA4LT,mBAAW,oCA5LF;AA6LT,gBAAQ,oCA7LC;AA8LT,mBAAW,uCA9LF;AA+LT,sBAAc,uCA/LL;AAgMT,mBAAW,oCAhMF;AAiMT,gBAAQ,oCAjMC;AAkMT,mBAAW,oCAlMF;AAmMT,gBAAQ,oCAnMC;AAoMT,mBAAW,oCApMF;AAqMT,gBAAQ,oCArMC;AAsMT,mBAAW,oCAtMF;AAuMT,gBAAQ,oCAvMC;AAwMT,mBAAW,oCAxMF;AAyMT,gBAAQ,oCAzMC;AA0MT,mBAAW,oCA1MF;AA2MT,gBAAQ,oCA3MC;AA4MT,mBAAW,oCA5MF;AA6MT,gBAAQ,oCA7MC;AA8MT,mBAAW,oCA9MF;AA+MT,gBAAQ,oCA/MC;AAgNT,mBAAW,oCAhNF;AAiNT,gBAAQ,oCAjNC;AAkNT,qBAAa,yCAlNJ;AAmNT,wBAAgB,yCAnNP;AAoNT,mBAAW,oCApNF;AAqNT,gBAAQ,oCArNC;AAsNT,mBAAW,oCAtNF;AAuNT,gBAAQ,oCAvNC;AAwNT,mBAAW,oCAxNF;AAyNT,gBAAQ,oCAzNC;AA0NT,mBAAW,oCA1NF;AA2NT,gBAAQ,oCA3NC;AA4NT,mBAAW,oCA5NF;AA6NT,gBAAQ,oCA7NC;AA8NT,mBAAW,oCA9NF;AA+NT,iBAAS,qCA/NA;AAgOT,oBAAY,qCAhOH;AAiOT,gBAAQ,oCAjOC;AAkOT,mBAAW,oCAlOF;AAmOT,gBAAQ,oCAnOC;AAoOT,mBAAW,oCApOF;AAqOT,gBAAQ,oCArOC;AAsOT,mBAAW,oCAtOF;AAuOT,mBAAW,uCAvOF;AAwOT,sBAAc,uCAxOL;AAyOT,iBAAS,qCAzOA;AA0OT,oBAAY,qCA1OH;AA2OT,gBAAQ,oCA3OC;AA4OT,mBAAW,oCA5OF;AA6OT,iBAAS,qCA7OA;AA8OT,oBAAY,qCA9OH;AA+OT,iBAAS,qCA/OA;AAgPT,sBAAc,0CAhPL;AAiPT,yBAAiB,0CAjPR;AAkPT,oBAAY,qCAlPH;AAmPT,mBAAW,uCAnPF;AAoPT,sBAAc,uCApPL;AAqPT,gBAAQ,oCArPC;AAsPT,mBAAW,oCAtPF;AAuPT,gBAAQ,oCAvPC;AAwPT,mBAAW,oCAxPF;AAyPT,gBAAQ,oCAzPC;AA0PT,qBAAa,yCA1PJ;AA2PT,wBAAgB,yCA3PP;AA4PT,mBAAW,oCA5PF;AA6PT,gBAAQ,oCA7PC;AA8PT,mBAAW,oCA9PF;AA+PT,sBAAc,0CA/PL;AAgQT,yBAAiB,0CAhQR;AAiQT,gBAAQ,oCAjQC;AAkQT,mBAAW,oCAlQF;AAmQT,mBAAW,uCAnQF;AAoQT,sBAAc,uCApQL;AAqQT,mBAAW,uCArQF;AAsQT,sBAAc,uCAtQL;AAuQT,mBAAW,uCAvQF;AAwQT,sBAAc,uCAxQL;AAyQT,mBAAW,uCAzQF;AA0QT,sBAAc;AA1QL,OAAV;;AA8QA,eAASC,cAAT,CAAwBZ,GAAxB,EAA6B;AAC5B,YAAIU,EAAE,GAAGG,qBAAqB,CAACb,GAAD,CAA9B;AACA,eAAOc,mBAAmB,CAACJ,EAAD,CAA1B;AACA;;AACD,eAASG,qBAAT,CAA+Bb,GAA/B,EAAoC;AACnC,YAAG,CAACc,mBAAmB,CAACC,CAApB,CAAsBJ,GAAtB,EAA2BX,GAA3B,CAAJ,EAAqC;AACpC,cAAII,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,WAAC,CAACE,IAAF,GAAS,kBAAT;AACA,gBAAMF,CAAN;AACA;;AACD,eAAOO,GAAG,CAACX,GAAD,CAAV;AACA;;AACDY,oBAAc,CAACL,IAAf,GAAsB,SAASS,kBAAT,GAA8B;AACnD,eAAOC,MAAM,CAACV,IAAP,CAAYI,GAAZ,CAAP;AACA,OAFD;;AAGAC,oBAAc,CAACV,OAAf,GAAyBW,qBAAzB;AACAL,YAAM,CAACC,OAAP,GAAiBG,cAAjB;AACAA,oBAAc,CAACF,EAAf,GAAoB,wDAApB;;;;;;;;;;;;;;;;AC/RA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAgBA,UAAMQ,MAAM,GAAW,CACrB;AAAEC,YAAI,EAAE,QAAR;AAAkBC,iBAAS,EAAE;AAA7B,OADqB,EAErB;AAAED,YAAI,EAAE,cAAR;AAAwBC,iBAAS,EAAG;AAApC,OAFqB,EAGrB;AAAED,YAAI,EAAE,OAAR;AAAiBC,iBAAS,EAAE;AAA5B,OAHqB,EAIrB;AAAED,YAAI,EAAE,UAAR;AAAoBC,iBAAS,EAAE;AAA/B,OAJqB,EAKrB;AAAED,YAAI,EAAE,SAAR;AAAmBC,iBAAS,EAAE;AAA9B,OALqB,EAMrB;AAAED,YAAI,EAAE,MAAR;AAAgBC,iBAAS,EAAE;AAA3B,OANqB,EAOrB;AAAED,YAAI,EAAE,aAAR;AAAuBC,iBAAS,EAAE;AAAlC,OAPqB,EAQrB;AAAED,YAAI,EAAE,QAAR;AAAkBC,iBAAS,EAAE,wFAA7B;AAA8CC,gBAAQ,EAAE,CACpD;AAACF,cAAI,EAAE,IAAP;AAAaC,mBAAS,EAAE;AAAxB,SADoD;AAAxD,OARqB,EAWrB;AAAED,YAAI,EAAE,WAAR;AAAqBC,iBAAS,EAAE;AAAhC,OAXqB,EAYrB;AAAED,YAAI,EAAE,QAAR;AAAkBC,iBAAS,EAAE,+FAA7B;AAAiDC,gBAAQ,EAAE,CACzD;AAAEF,cAAI,EAAE,cAAR;AAAwBC,mBAAS,EAAE;AAAnC,SADyD,EAEzD;AAAED,cAAI,EAAE,aAAR;AAAuBC,mBAAS,EAAE;AAAlC,SAFyD,EAGzD;AAAED,cAAI,EAAE,IAAR;AAAcC,mBAAS,EAAE;AAAzB,SAHyD;AAA3D,OAZqB,EAiBrB;AAACD,YAAI,EAAE,EAAP;AAAWG,kBAAU,EAAE,MAAvB;AAA+BC,iBAAS,EAAE;AAA1C,OAjBqB,CAAvB;;UAwBaC,gB;;;;;cAAAA;;;;2BAAAA,gB;AAAgB,S;AAAA,kBAHlB,CAAC,6DAAaC,OAAb,CAAqBP,MAArB,CAAD,CAGkB,EAFjB,4DAEiB;;;;4HAAhBM,gB,EAAgB;AAAA;AAAA,oBAFjB,4DAEiB;AAAA,S;AAFL,O;;;;;wEAEXA,gB,EAAgB;gBAJ5B,sDAI4B;iBAJnB;AACRE,mBAAO,EAAE,CAAC,6DAAaD,OAAb,CAAqBP,MAArB,CAAD,CADD;AAERT,mBAAO,EAAE,CAAC,4DAAD;AAFD,W;AAImB,U;;;;;;;;;;;;;;;;;;ACrC7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASakB,Y;AAUX,8BACUC,iBADV,EAEUC,cAFV,EAGUC,aAHV,EAIUC,UAJV,EAIgC;AAAA;;AAAA;;AAHtB,eAAAH,iBAAA,GAAAA,iBAAA;AACA,eAAAC,cAAA,GAAAA,cAAA;AACA,eAAAC,aAAA,GAAAA,aAAA;AACA,eAAAC,UAAA,GAAAA,UAAA;AAZV,eAAAC,KAAA,GAAQ,UAAR;AAEA,eAAAC,IAAA,GAAOC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAP,CAUgC,CAE9B;;AACAC,sBAAY,CAACD,OAAb,CAAqB,UAArB,IACA,KAAKL,aAAL,CAAmBO,IAAnB,CAAwB,aAAxB,EAAuC;AAACC,oBAAQ,EAAEF,YAAY,CAACD,OAAb,CAAqB,UAArB;AAAX,WAAvC,EAAqF,UAACI,IAAD,EAAU;AAC7F,gBAAGA,IAAI,CAACC,GAAR,EAAY;AACVN,4BAAc,CAACO,OAAf,CAAuB,UAAvB,EAAmCF,IAAI,CAACC,GAAxC;AACAX,4BAAc,CAACa,OAAf;AACD,aAHD,MAGO,IAAIH,IAAI,CAACI,GAAT,EAAa;AAClBC,qBAAO,CAACC,GAAR,CAAYN,IAAI,CAACI,GAAjB;AACAP,0BAAY,CAACU,KAAb;AACAZ,4BAAc,CAACY,KAAf;AACAjB,4BAAc,CAACa,OAAf;AACD;AACF,WAVD,CADA,GAYE,EAZF,CAH8B,CAiB9B;;AACA,eAAKK,kBAAL,GAA0B,KAAKnB,iBAAL,CAAuBoB,WAAvB,CAAmCC,SAAnC,CAA6C,UAAAC,CAAC;AAAA,mBAAI,KAAI,CAACC,eAAL,GAAuBD,CAA3B;AAAA,WAA9C,CAA1B;AACA,eAAKE,eAAL,GAAuB,KAAKvB,cAAL,CAAoBwB,YAApB,CAAiCJ,SAAjC,CAA2C,UAAAC,CAAC,EAAI;AACrE,iBAAI,CAACG,YAAL,GAAoBH,CAApB;;AACA,gBAAI,KAAI,CAACG,YAAT,EAAuB,CACrB;AACD;AACF,WALsB,CAAvB;AAMD;;;;qCAEU,CACT;AACD;;;sCAEW,CACV;AACD;;;yCAEW;AACV,iBAAKC,YAAL,GAAoBC,MAAM,CAACC,WAA3B;AACA,iBAAK5B,iBAAL,CAAuB6B,YAAvB,CAAoCF,MAAM,CAACG,UAA3C;AACA,iBAAK3B,UAAL,CAAgB4B,aAAhB;AACD;;;wCAEa;AACZ,iBAAKZ,kBAAL,CAAwBa,WAAxB;AACA,iBAAKR,eAAL,CAAqBQ,WAArB;AACD;;;;;;;yBA1DUjC,Y,EAAY,0J,EAAA,yI,EAAA,yJ,EAAA,qI;AAAA,O;;;cAAZA,Y;AAAY,iC;AAAA,iB;AAAA,e;AAAA,yO;AAAA;AAAA;ACXzB;;AACA;;AAEE;;AAcA;;AAEF;;AAEA;;AAAM;AAAA,qBAAiB,IAAA8B,YAAA,EAAjB;AAA+B,aAA/B,EAA+B,KAA/B,EAA+B,6DAA/B;;AAEJ;;AAEA;;AAEA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACF;;AACA;;;;AAhBuC;;AAAA;;;;;;;;;wEDV1B9B,Y,EAAY;gBALxB,uDAKwB;iBALd;AACTkC,oBAAQ,EAAE,UADD;AAETC,uBAAW,EAAE,sBAFJ;AAGTC,qBAAS,EAAE,CAAC,sBAAD;AAHF,W;AAKc,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEZzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAgMaC,S;;;;;cAAAA,S;AAAS,oBAFR,2DAEQ;;;;2BAATA,S;AAAS,S;AAAA,mBAHT,E;AAAE,kBAtDJ,CACP,uEADO,EAEP,oEAFO,EAGP,0DAHO,EAIP,kEAJO,EAKP,sFALO,EAMP,qEANO,EAOP,6FAPO,EAQP,gFARO,EASP,uEATO,EAUP,qEAVO,EAWP,6EAXO,EAYP,yEAZO,EAaP,uEAbO,EAcP,0EAdO,EAeP,qFAfO,EAgBP,uEAhBO,EAiBP,oFAjBO,EAkBP,yEAlBO,EAmBP,sFAnBO,EAoBP,qEApBO,EAqBP,6EArBO,EAsBP,uEAtBO,EAuBP,2EAvBO,EAwBP,iFAxBO,EAyBP,yEAzBO,EA0BP,2EA1BO,EA2BP,+EA3BO,EA4BP,8EA5BO,EA6BP,qEA7BO,EA8BP,uEA9BO,EA+BP,qEA/BO,EAgCP,qEAhCO,EAiCP,2EAjCO,EAkCP,+EAlCO,EAmCP,oFAnCO,EAoCP,4FApCO,EAqCP,uEArCO,EAsCP,uEAtCO,EAuCP,yEAvCO,EAwCP,2EAxCO,EAyCP,yEAzCO,EA0CP,oFA1CO,EA2CP,8EA3CO,EA4CP,qEA5CO,EA6CP,uEA7CO,EA8CP,qEA9CO,EA+CP,2EA/CO,EAgDP,2EAhDO,EAiDP,qEAjDO,EAkDP,qEAlDO,EAmDP,sEAnDO,EAoDP,uEApDO,CAsDI;;;;4HAGFA,S,EAAS;AAAA,yBApGlB,2DAoGkB,EAnGlB,kIAmGkB,EAlGlB,wFAkGkB,EAjGlB,mFAiGkB,EAhGlB,0GAgGkB,EA/FlB,2GA+FkB,EA9FlB,oFA8FkB,EA7FlB,0GA6FkB,EA5FlB,2EA4FkB,EA3FlB,wFA2FkB,EA1FlB,gGA0FkB,EAzFlB,uFAyFkB,EAxFlB,uFAwFkB,EAvFlB,kGAuFkB,EAtFlB,6HAsFkB,EArFlB,8GAqFkB,EApFlB,mFAoFkB,EAnFlB,6FAmFkB,EAlFlB,yFAkFkB,EAjFlB,sIAiFkB,EAhFlB,sHAgFkB,EA/ElB,yGA+EkB,EA9ElB,iFA8EkB,EA7ElB,+FA6EkB,EA5ElB,uEA4EkB,EA3ElB,0DA2EkB,EA1ElB,mGA0EkB,EAzElB,mHAyEkB,EAxElB,+HAwEkB,EAvElB,kGAuEkB,EAtElB,oFAsEkB,EArElB,+GAqEkB,EApElB,yFAoEkB,EAnElB,wGAmEkB,EAlElB,8GAkEkB,EAjElB,uFAiEkB,EAhElB,2IAgEkB,EA/DlB,0EA+DkB,EA9DlB,qGA8DkB,EA7DlB,iFA6DkB,EA5DlB,qGA4DkB,EA3DlB,sFA2DkB;AA3DH,oBAGf,uEAHe,EAIf,oEAJe,EAKf,0DALe,EAMf,kEANe,EAOf,sFAPe,EAQf,qEARe,EASf,6FATe,EAUf,gFAVe,EAWf,uEAXe,EAYf,qEAZe,EAaf,6EAbe,EAcf,yEAde,EAef,uEAfe,EAgBf,0EAhBe,EAiBf,qFAjBe,EAkBf,uEAlBe,EAmBf,oFAnBe,EAoBf,yEApBe,EAqBf,sFArBe,EAsBf,qEAtBe,EAuBf,6EAvBe,EAwBf,uEAxBe,EAyBf,2EAzBe,EA0Bf,iFA1Be,EA2Bf,yEA3Be,EA4Bf,2EA5Be,EA6Bf,+EA7Be,EA8Bf,8EA9Be,EA+Bf,qEA/Be,EAgCf,uEAhCe,EAiCf,qEAjCe,EAkCf,qEAlCe,EAmCf,2EAnCe,EAoCf,+EApCe,EAqCf,oFArCe,EAsCf,4FAtCe,EAuCf,uEAvCe,EAwCf,uEAxCe,EAyCf,yEAzCe,EA0Cf,2EA1Ce,EA2Cf,yEA3Ce,EA4Cf,oFA5Ce,EA6Cf,8EA7Ce,EA8Cf,qEA9Ce,EA+Cf,uEA/Ce,EAgDf,qEAhDe,EAiDf,2EAjDe,EAkDf,2EAlDe,EAmDf,qEAnDe,EAoDf,qEApDe,EAqDf,sEArDe,EAsDf,uEAtDe;AA2DG,S;AALH,O;;;;;wEAKNA,S,EAAS;gBAtGrB,sDAsGqB;iBAtGZ;AACRC,wBAAY,EAAE,CACZ,2DADY,EAEZ,kIAFY,EAGZ,wFAHY,EAIZ,mFAJY,EAKZ,0GALY,EAMZ,2GANY,EAOZ,oFAPY,EAQZ,0GARY,EASZ,2EATY,EAUZ,wFAVY,EAWZ,gGAXY,EAYZ,uFAZY,EAaZ,uFAbY,EAcZ,kGAdY,EAeZ,6HAfY,EAgBZ,8GAhBY,EAiBZ,mFAjBY,EAkBZ,6FAlBY,EAmBZ,yFAnBY,EAoBZ,sIApBY,EAqBZ,sHArBY,EAsBZ,yGAtBY,EAuBZ,iFAvBY,EAwBZ,+FAxBY,EAyBZ,uEAzBY,EA0BZ,0DA1BY,EA2BZ,mGA3BY,EA4BZ,mHA5BY,EA6BZ,+HA7BY,EA8BZ,kGA9BY,EA+BZ,oFA/BY,EAgCZ,+GAhCY,EAiCZ,yFAjCY,EAkCZ,wGAlCY,EAmCZ,8GAnCY,EAoCZ,uFApCY,EAqCZ,2IArCY,EAsCZ,0EAtCY,EAuCZ,qGAvCY,EAwCZ,iFAxCY,EAyCZ,qGAzCY,EA0CZ,sFA1CY,CADN;AA6CRvC,mBAAO,EAAE,CACP,uEADO,EAEP,oEAFO,EAGP,0DAHO,EAIP,kEAJO,EAKP,sFALO,EAMP,qEANO,EAOP,6FAPO,EAQP,gFARO,EASP,uEATO,EAUP,qEAVO,EAWP,6EAXO,EAYP,yEAZO,EAaP,uEAbO,EAcP,0EAdO,EAeP,qFAfO,EAgBP,uEAhBO,EAiBP,oFAjBO,EAkBP,yEAlBO,EAmBP,sFAnBO,EAoBP,qEApBO,EAqBP,6EArBO,EAsBP,uEAtBO,EAuBP,2EAvBO,EAwBP,iFAxBO,EAyBP,yEAzBO,EA0BP,2EA1BO,EA2BP,+EA3BO,EA4BP,8EA5BO,EA6BP,qEA7BO,EA8BP,uEA9BO,EA+BP,qEA/BO,EAgCP,qEAhCO,EAiCP,2EAjCO,EAkCP,+EAlCO,EAmCP,oFAnCO,EAoCP,4FApCO,EAqCP,uEArCO,EAsCP,uEAtCO,EAuCP,yEAvCO,EAwCP,2EAxCO,EAyCP,yEAzCO,EA0CP,oFA1CO,EA2CP,8EA3CO,EA4CP,qEA5CO,EA6CP,uEA7CO,EA8CP,qEA9CO,EA+CP,2EA/CO,EAgDP,2EAhDO,EAiDP,qEAjDO,EAkDP,qEAlDO,EAmDP,sEAnDO,EAoDP,uEApDO,CA7CD;AAmGRwC,qBAAS,EAAE,EAnGH;AAoGRC,qBAAS,EAAE,CAAC,2DAAD;AApGH,W;AAsGY,U;;;;;;;;;;;;;;;;;;AChMtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACCE;;;;;;AAKI;;AAA6C;;AAA0B;;;;;;AAavE;;AAA+C;;AAAsB;;;;;;AAQvE;;AACE;;AACF;;;;;;AADO;;AAAA,4JAAoB,KAApB,EAAoB,uBAApB;;;;;;AAQD;;AAA0C;;AAAM;;;;;;;;AAHlD;;AACiC;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAC/B;;AACA;;AACF;;;;;;;;AAJmC,oGAAyB,WAAzB,EAAyB,gBAAzB;;AAEjC;;AAAA;;AACwB;;AAAA;;;;;;;;AAlChC;;AAAyB;AAAA;;AAAA;;AAAA;AAAA;;AAEvB;;AACE;;AACA;;AACF;;AAOA;;AAAiB;AAAA;;AAAA;;AAAA;AAAA;;AACjB;;AAEA;;AACE;;AACA;;AACF;;AAEA;;AACE;;AAAyC;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAA2B,WAA3B;;AAA6B;;AAAU;;AAChF;;AAA8C;AAAA;;AAAA;;AAAA;AAAA;;AAA9C;;AACF;;AAEA;;AAIA;;AACE;;AACE;;AAKA;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAJF;;AAKF;;AACF;;AAGA;;AACA;;AAAuD;;AAAS;;AAClE;;;;;;;;AA/CM;;AAIS;;AAAA;;AAQ4C;;AAAA,8FAA0B,aAA1B,EAA0B,QAA1B;;AAK5C;;AAAA;;AAQc;;AAAA;;AAMb;;AAAA;;AAMR;;AAAA,2FAA4B,+BAA5B,EAA4B,yBAA5B,EAA4B,uBAA5B,EAA4B,gBAA5B;;;;UDrBGC,gB;AAyBX,kCACSC,YADT,EAESC,KAFT,EAE8B;AAAA;;AADrB,eAAAD,YAAA,GAAAA,YAAA;AACA,eAAAC,KAAA,GAAAA,KAAA;AA1BT,eAAAC,YAAA,GAAe,EAAf;AACA,eAAAC,cAAA,GAAiB,EAAjB;AAEA,eAAAC,SAAA,GAAY,KAAZ;AAGQ,eAAAC,IAAA,GAAO,QAAP,CAoBsB,CAhB9B;;AACA,eAAAC,OAAA,GAAU,IAAV;AACA,eAAAC,UAAA,GAAa,IAAb;AACA,eAAAC,SAAA,GAAY,IAAZ;AACA,eAAAC,SAAA,GAAY,IAAZ;AACS,eAAAC,kBAAA,GAA+B,CAAC,2DAAD,EAAQ,2DAAR,CAA/B;AACT,eAAAC,IAAA,GAAiB,EAAjB;AAIA,eAAAC,aAAA,GAAsC,IAAtC;AAEA,eAAAC,WAAA,GAAc,KAAd;AAKI;;;;qCAGO;AAAA;;AACT,iBAAKC,IAAL,GAAY,IAAI,wDAAJ,CAAc;AACxBnD,mBAAK,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAACoD,0BAAU,EAAE,CAAC,0DAAWC,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB;AAAb,eAAtB,CADiB;AAExBC,sBAAQ,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAAEH,0BAAU,EAAE,CAAC,0DAAWC,QAAZ;AAAd,eAAtB,CAFc;AAGxBG,qBAAO,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAAEJ,0BAAU,EAAE,CAAC,0DAAWC,QAAZ;AAAd,eAAtB,CAHe;AAIxBL,kBAAI,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAAEI,0BAAU,EAAE,CAAC,0DAAWC,QAAZ;AAAd,eAAtB,CAJkB;AAKxBI,mBAAK,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAC3BL,0BAAU,EAAE,CAAC,0DAAWC,QAAZ,CADe;AAE3BK,+BAAe,EAAE,CAAC,6DAAD;AAFU,eAAtB;AALiB,aAAd,CAAZ;AAUA,iBAAKpB,KAAL,CAAWqB,QAAX,CAAoB1C,SAApB,CAA8B,UAAC0C,QAAD,EAAwB;AACpD,kBAAIA,QAAQ,CAACC,GAAT,CAAa,QAAb,CAAJ,EAA4B;AAC1B,sBAAI,CAAClB,IAAL,GAAY,MAAZ;AACA,sBAAI,CAACmB,MAAL,GAAcF,QAAQ,CAACG,GAAT,CAAa,QAAb,CAAd;AACA,sBAAI,CAACrB,SAAL,GAAiB,IAAjB;;AACA,sBAAI,CAACJ,YAAL,CAAkB0B,OAAlB,CAA0B,MAAI,CAACF,MAA/B,EAAuC5C,SAAvC,CAAiD,UAAA+C,QAAQ,EAAI;AAC3D,wBAAI,CAACvB,SAAL,GAAiB,KAAjB;AACA,wBAAI,CAACwB,IAAL,GAAY;AACVC,uBAAG,EAAEF,QAAQ,CAACE,GADJ;AAEVC,0BAAM,EAAEH,QAAQ,CAACG,MAFP;AAGVC,wBAAI,EAAEJ,QAAQ,CAACI,IAHL;AAIVb,4BAAQ,EAAES,QAAQ,CAACT,QAJT;AAKVc,yBAAK,EAAEL,QAAQ,CAACK,KALN;AAMVrE,yBAAK,EAAEgE,QAAQ,CAAChE,KANN;AAOVwD,2BAAO,EAAEQ,QAAQ,CAACR,OAPR;AAQVc,6BAAS,EAAEN,QAAQ,CAACM,SARV;AASVtB,wBAAI,EAAEgB,QAAQ,CAAChB,IATL;AAUVuB,4BAAQ,EAAEP,QAAQ,CAACO;AAVT,mBAAZ;;AAYA,wBAAI,CAACpB,IAAL,CAAUqB,QAAV,CAAmB;AACjBjB,4BAAQ,EAAE,MAAI,CAACU,IAAL,CAAUV,QADH;AAEjBvD,yBAAK,EAAE,MAAI,CAACiE,IAAL,CAAUjE,KAFA;AAGjBwD,2BAAO,EAAE,MAAI,CAACS,IAAL,CAAUT,OAHF;AAIjBC,yBAAK,EAAE,MAAI,CAACQ,IAAL,CAAUK,SAJA;AAKjBtB,wBAAI,EAAE,MAAI,CAACiB,IAAL,CAAUjB;AALC,mBAAnB;;AAOA,wBAAI,CAACyB,YAAL,GAAoB,MAAI,CAACR,IAAL,CAAUK,SAA9B;AACA,wBAAI,CAACtB,IAAL,GAAY,MAAI,CAACiB,IAAL,CAAUjB,IAAtB;AACA,wBAAI,CAACO,QAAL,GAAgB,MAAI,CAACU,IAAL,CAAUV,QAA1B;AACD,iBAxBD;AAyBD,eA7BD,MA6BO;AACL,sBAAI,CAACb,IAAL,GAAY,QAAZ;AACA,sBAAI,CAACmB,MAAL,GAAc,IAAd;AACD;AACF,aAlCD;AAmCD;;;+CAEiB;AAAA;;AAChB,gBAAI,KAAKa,mBAAL,IAA4B,CAAC,KAAKxB,WAAtC,EAAkD;AAChD,mBAAKyB,iBAAL,GAAyB,KAAKD,mBAAL,CAAyBzB,aAAzB,CAAuChC,SAAvC,CAAiD,UAAC2D,IAAD,EAAgC;AAC1G,oBAAIA,IAAJ,EAAU;AACR,wBAAI,CAAC3B,aAAL,GAAqB2B,IAArB;AACD,iBAFD,MAEO;AACL,wBAAI,CAAC3B,aAAL,GAAqB,IAArB;AACD;AACA,eANwB,CAAzB;AAOD,aARD,MASK,IAAI,CAAC,KAAKyB,mBAAV,EAA8B,CAElC,CAFI,MAGD;AACF,mBAAKxB,WAAL,GAAmB,IAAnB;AACD;AACF;;;wCAEa2B,K,EAAc;AAAA;;AAC1B,gBAAMC,IAAI,GAAID,KAAK,CAACE,MAAN,CAAkCC,KAAlC,CAAwC,CAAxC,CAAd;AACA,iBAAK7B,IAAL,CAAU8B,UAAV,CAAqB;AAAExB,mBAAK,EAAEqB;AAAT,aAArB;AACA,iBAAK3B,IAAL,CAAUW,GAAV,CAAc,OAAd,EAAuBoB,sBAAvB;AACA,gBAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,kBAAM,CAACE,MAAP,GAAgB,YAAM;AACpB,oBAAI,CAACZ,YAAL,GAAoBU,MAAM,CAACG,MAA3B;AACD,aAFD;;AAGAH,kBAAM,CAACI,aAAP,CAAqBT,IAArB;AACD;;;uCAEY;AACX,iBAAKU,aAAL,CAAmB,KAAKvC,aAAL,CAAmBwC,IAAtC;;AACA,gBAAI,KAAKtC,IAAL,CAAUuC,OAAd,EAAuB;AACrB;AACD;;AACD,iBAAKjD,SAAL,GAAiB,IAAjB;;AACA,gBAAI,KAAKC,IAAL,KAAc,QAAlB,EAA4B;AAC1B,kBAAIiD,OAAO,GAAG;AACZvB,oBAAI,EAAE,IAAIwB,IAAJ,GAAWC,cAAX,EADM;AAEZtC,wBAAQ,EAAE,KAAKJ,IAAL,CAAU2C,KAAV,CAAgBvC,QAFd;AAGZY,sBAAM,EAAEjE,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAHI;AAIZH,qBAAK,EAAE,KAAKmD,IAAL,CAAU2C,KAAV,CAAgB9F,KAJX;AAKZwD,uBAAO,EAAE,KAAKL,IAAL,CAAU2C,KAAV,CAAgBtC,OALb;AAMZC,qBAAK,EAAE,KAAKN,IAAL,CAAU2C,KAAV,CAAgBrC,KANX;AAOZT,oBAAI,EAAE,KAAKG,IAAL,CAAU2C,KAAV,CAAgB9C;AAPV,eAAd;AASA,mBAAKX,YAAL,CAAkB0D,OAAlB,CAA0BJ,OAA1B;AACD,aAXD,MAWO;AACL,mBAAKtD,YAAL,CAAkB2D,UAAlB,CAA6B;AAC3B9B,mBAAG,EAAE,KAAKL,MADiB;AAE3BO,oBAAI,EAAE,KAAKH,IAAL,CAAUG,IAFW;AAG3Bb,wBAAQ,EAAE,KAAKJ,IAAL,CAAU2C,KAAV,CAAgBvC,QAHC;AAI3BY,sBAAM,EAAEjE,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAJmB;AAK3BkE,qBAAK,EAAE,KAAKJ,IAAL,CAAUI,KALU;AAM3BrE,qBAAK,EAAE,KAAKmD,IAAL,CAAU2C,KAAV,CAAgB9F,KANI;AAO3BwD,uBAAO,EAAE,KAAKL,IAAL,CAAU2C,KAAV,CAAgBtC,OAPE;AAQ3BC,qBAAK,EAAE,KAAKN,IAAL,CAAU2C,KAAV,CAAgBrC,KARI;AAS3BT,oBAAI,EAAE,KAAKG,IAAL,CAAU2C,KAAV,CAAgB9C,IATK;AAU3BuB,wBAAQ,EAAE,KAAKN,IAAL,CAAUM;AAVO,eAA7B;AAYD;;AACD,iBAAKpB,IAAL,CAAU8C,KAAV;AACD;;;iCAGMpB,K,EAAK;AACV,gBAAMqB,KAAK,GAAGrB,KAAK,CAACqB,KAApB;AACA,gBAAMJ,KAAK,GAAGjB,KAAK,CAACiB,KAApB,CAFU,CAIV;;AACA,gBAAI,CAACA,KAAK,IAAI,EAAV,EAAcK,IAAd,EAAJ,EAA0B;AACxB,mBAAKnD,IAAL,CAAUoD,IAAV,CAAeN,KAAK,CAACK,IAAN,EAAf;AACD,aAPS,CASV;;;AACA,gBAAID,KAAJ,EAAW;AACTA,mBAAK,CAACJ,KAAN,GAAc,EAAd;AACD;;AACD,iBAAK3C,IAAL,CAAU8B,UAAV,CAAqB;AAAEjC,kBAAI,EAAE,KAAKA;AAAb,aAArB;AACA,iBAAKG,IAAL,CAAUW,GAAV,CAAc,MAAd,EAAsBoB,sBAAtB;AAED;;;oCAESmB,G,EAAG;AACX,gBAAMC,KAAK,GAAG,KAAKtD,IAAL,CAAUuD,OAAV,CAAkBF,GAAlB,CAAd;;AACA,gBAAIC,KAAK,IAAI,CAAb,EAAgB;AACd,mBAAKtD,IAAL,CAAUwD,MAAV,CAAiBF,KAAjB,EAAwB,CAAxB;AACD;;AACD,iBAAKnD,IAAL,CAAU8B,UAAV,CAAqB;AAAEjC,kBAAI,EAAE,KAAKA;AAAb,aAArB;AACA,iBAAKG,IAAL,CAAUW,GAAV,CAAc,MAAd,EAAsBoB,sBAAtB;AACD;;;wCACa3B,Q,EAAgB;AAC5B,iBAAKA,QAAL,GAAgBA,QAAhB;AACA,iBAAKJ,IAAL,CAAU8B,UAAV,CAAqB;AAAE1B,sBAAQ,EAAEA;AAAZ,aAArB;AACA,iBAAKJ,IAAL,CAAUW,GAAV,CAAc,UAAd,EAA0BoB,sBAA1B;AACD;;;wCACU;AACT,iBAAKP,iBAAL,CAAuB/C,WAAvB;AACD;;;;;;;yBAhLUQ,gB,EAAgB,iJ,EAAA,+H;AAAA,O;;;cAAhBA,gB;AAAgB,qC;AAAA;AAAA;sEAsBhB,sF,EAAmB,I;;;;;;;;;;;;;;ACxChC;;AACE;;AACA;;AAgDF;;;;AAjDe;;AAAA;;AACoC;;AAAA;;;;;;;;;wEDgBtCA,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTP,oBAAQ,EAAE,cADD;AAETC,uBAAW,EAAE,2BAFJ;AAGTC,qBAAS,EAAE,CAAC,2BAAD;AAHF,W;AAKkB,U;;;;;;;;kBAsB1B,uD;mBAAU,sF;;;;;;;;;;;;;;;;;;;;AEvCb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAEO,UAAM0E,QAAQ,GAAG,SAAXA,QAAW,CACtBC,OADsB,EAEmD;AACzE,YAAI,OAAOA,OAAO,CAACZ,KAAf,KAA0B,QAA9B,EAAwC;AACtC,iBAAO,gDAAG,IAAH,CAAP;AACD;;AACD,YAAMhB,IAAI,GAAG4B,OAAO,CAACZ,KAArB;AACA,YAAMa,UAAU,GAAG,IAAIvB,UAAJ,EAAnB;AACA,YAAMwB,KAAK,GAAG,gDAAWC,MAAX,CACZ,UAACC,QAAD,EAAgD;AAC9CH,oBAAU,CAACI,gBAAX,CAA4B,SAA5B,EAAuC,YAAM;AAC3C,gBAAMC,GAAG,GAAG,IAAIC,UAAJ,CAA4BN,UAAU,CAACrB,MAAvC,EAA+C4B,QAA/C,CAAwD,CAAxD,EAA2D,CAA3D,CAAZ;AACA,gBAAIC,MAAM,GAAG,EAAb;AACA,gBAAIC,OAAO,GAAG,KAAd;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,GAAG,CAACM,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnCF,oBAAM,IAAIH,GAAG,CAACK,CAAD,CAAH,CAAOE,QAAP,CAAgB,EAAhB,CAAV;AACD;;AACD,oBAAQJ,MAAR;AACE,mBAAK,UAAL;AACEC,uBAAO,GAAG,IAAV;AACA;;AACF,mBAAK,UAAL;AACA,mBAAK,UAAL;AACA,mBAAK,UAAL;AACA,mBAAK,UAAL;AACA,mBAAK,UAAL;AACEA,uBAAO,GAAG,IAAV;AACA;;AACF;AACEA,uBAAO,GAAG,KAAV,CADF,CACmB;;AACjB;AAbJ;;AAeA,gBAAIA,OAAJ,EAAa;AACXN,sBAAQ,CAACU,IAAT,CAAc,IAAd;AACD,aAFD,MAEO;AACLV,sBAAQ,CAACU,IAAT,CAAc;AAAEC,+BAAe,EAAE;AAAnB,eAAd;AACD;;AACDX,oBAAQ,CAACY,QAAT;AACD,WA5BD;AA6BAf,oBAAU,CAACgB,iBAAX,CAA6B7C,IAA7B;AACD,SAhCW,CAAd;AAkCA,eAAO8B,KAAP;AACD,OA3CM;;;;;;;;;;;;;;;;;ACHP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAUagB,e;AAEX,iCAAoBC,IAApB,EAAsC;AAAA;;AAAlB,eAAAA,IAAA,GAAAA,IAAA;AAAqB;;;;qCACjC;AACN,iBAAK1E,IAAL,GAAY,IAAI,wDAAJ,CAAc;AACxBkD,iBAAG,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AACzBjD,0BAAU,EAAE;AADa,eAAtB;AADmB,aAAd,CAAZ;AAKD;;;qCACO;AACN,iBAAK0E,QAAL,CAAc5H,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAd,EAAiD,KAAKgD,IAAL,CAAUW,GAAV,CAAc,KAAd,EAAqBgC,KAAtE;AACD;;;mCACQxF,Q,EAAkB+F,G,EAAW;AACpC,iBAAKwB,IAAL,CACGE,GADH,CACO,kDADP,EAC2D;AAAC,0BAAYzH,QAAb;AAAuB,qBAAO+F;AAA9B,aAD3D,EAEGpF,SAFH,CAEa,UAAC+G,QAAD,EAA8C;AACvDpH,qBAAO,CAACC,GAAR,CAAYmH,QAAZ;AACH,aAJD;AAKD;;;;;;;yBAnBUJ,e,EAAe,gI;AAAA,O;;;cAAfA,e;AAAe,oC;AAAA,gB;AAAA,e;AAAA,oM;AAAA;AAAA;ACV5B;;AAAyB;AAAA,qBAAU,IAAAK,QAAA,EAAV;AAAoB,aAApB;;AACvB;;AACE;;AACF;;AACA;;AAAuD;;AAAG;;AAC5D;;;;AALM;;;;;;;;;wEDUOL,e,EAAe;gBAL3B,uDAK2B;iBALjB;AACT/F,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAKiB,U;;;;;;;;;;;;;;;;;;;;;;AEP5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACGU;;AACE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAIF;;;;;;;;;AAFE,0FAAmB,QAAnB,EAAmB,oCAAnB;;;;UDCCmG,mB;AASX,qCACUtI,iBADV,EAEUC,cAFV,EAEwC;AAAA;;AAAA;;AAD9B,eAAAD,iBAAA,GAAAA,iBAAA;AACA,eAAAC,cAAA,GAAAA,cAAA;AARV,eAAAI,IAAA,GAAOC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAP;AAUE,eAAKN,cAAL,CAAoBa,OAApB;AAEA,eAAKyH,mBAAL,GAA2B,KAAKvI,iBAAL,CAAuBoB,WAAvB,CAAmCC,SAAnC,CAA6C,UAAAC,CAAC,EAAI;AAC3E,kBAAI,CAACC,eAAL,GAAuBD,CAAvB;AACD,WAF0B,CAA3B;AAGA,eAAKkH,gBAAL,GAAwB,KAAKvI,cAAL,CAAoBwB,YAApB,CAAiCJ,SAAjC,CAA2C,UAAAC,CAAC,EAAI;AACtE,kBAAI,CAACG,YAAL,GAAoBH,CAApB;AACD,WAFuB,CAAxB;AAGD;;;;qCAEU;AACT,iBAAKtB,iBAAL,CAAuByI,gBAAvB;AACD;;;sCAEWC,M,EAAgB;AAC1B,iBAAK1I,iBAAL,CAAuB2I,gBAAvB,CAAwCD,MAAxC;AACD;;;wCAEa;AACZ,iBAAKH,mBAAL,CAAyBvG,WAAzB;AACA,iBAAKwG,gBAAL,CAAsBxG,WAAtB;AACD;;;;;;;yBAlCUsG,mB,EAAmB,iK,EAAA,yI;AAAA,O;;;cAAnBA,mB;AAAmB,uC;AAAA,gB;AAAA,e;AAAA,qU;AAAA;AAAA;ACVhC;;AACE;;AAEE;;AACE;;AACE;;AACE;;AAMF;;AACF;;AACF;;AAEA;;AACE;;AACF;;AAEF;;AACF;;;;AAbY;;AAAA;;;;;;;;;wEDECA,mB,EAAmB;gBAL/B,uDAK+B;iBALrB;AACTrG,oBAAQ,EAAE,gBADD;AAETC,uBAAW,EAAE,6BAFJ;AAGTC,qBAAS,EAAE,CAAC,6BAAD;AAHF,W;AAKqB,U;;;;;;;;;;;;;;;;;;;;;;;;AEPhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEE;;AACE;;AACA;;AACF;;;;;;;;AARF;;AAEE;;AAAkF;AAAA;;AAAA;;AAAA;AAAA;;AAA6B;;AAG/G;;AAMA;;AACE;;AAAM;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACJ;;AACE;;AAA0C;AAAA;;AAAA;;AAAA;AAAA,aAAsB,SAAtB,EAAsB;AAAA;;AAAA;;AAAA;AAAA,WAAtB;;AAAgF;;AAC1H;;AACF;;AACF;;AACF;;AAEF;;;;;;AAlBiC;;AAAA;;AAGK;;AAAA;;AASY;;AAAA;;;;UDDrCyG,mB;AAaX,qCAAoBC,iBAApB,EACoBC,QADpB,EAEoBC,aAFpB,EAGmBC,cAHnB,EAGmD;AAAA;;AAH/B,eAAAH,iBAAA,GAAAA,iBAAA;AACA,eAAAC,QAAA,GAAAA,QAAA;AACA,eAAAC,aAAA,GAAAA,aAAA;AACD,eAAAC,cAAA,GAAAA,cAAA;AAXnB,eAAAC,QAAA,GAAmB,EAAnB;AAKA,eAAAvI,QAAA,GAAmBJ,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAnB;AAMsD;;;;qCAE9C;AAAA;;AACN;AACA,iBAAK2I,UAAL,GAAkB,KAAKF,cAAL,CAAoBvH,YAApB,CAAiCJ,SAAjC,CAA2C,UAAC8H,UAAD,EAAgB;AAC3E,oBAAI,CAAC1H,YAAL,GAAoB0H,UAApB;AACD,aAFiB,CAAlB;AAIA,iBAAKC,OAAL,GAAe,KAAKP,iBAAL,CAAuBQ,SAAvB,CAAiChI,SAAjC,CAA2C,UAACiI,IAAD,EAAU;AAClE,oBAAI,CAACD,SAAL,GAAiBC,IAAjB;AACD,aAFc,CAAf;AAIA,iBAAKC,eAAL,GAAuB,KAAKP,cAAL,CAAoBQ,WAApB,CAAgC,KAAKC,QAArC,CAAvB,CAVM,CAYN;;AACA,iBAAKV,aAAL,CAAmBtI,IAAnB,CAAwB,cAAxB,EAAwC;AAAC3B,gBAAE,EAAE,KAAK4J,MAAV;AAAkBhI,sBAAQ,EAAE,KAAKA;AAAjC,aAAxC,EAAoF,UAACC,IAAD,EAAU;AAC5F,kBAAIA,IAAI,CAACI,GAAT,EAAc;AACZC,uBAAO,CAACC,GAAR,CAAYN,IAAI,CAACI,GAAjB;AACD,eAFD,MAEO;AACLJ,oBAAI,CAAC+I,QAAL,CAAcC,OAAd,CAAsB,UAACC,OAAD,EAAa;AACjC,sBAAMC,EAAE,GAAyB,MAAI,CAACf,QAAL,CAAcgB,aAAd,CAA4B,IAA5B,CAAjC;;AACAD,oBAAE,CAACE,SAAH,aAAkBH,OAAO,CAACI,MAAR,KAAmB,MAAI,CAACtJ,QAAxB,GAAmC,KAAnC,GAA2CkJ,OAAO,CAACI,MAArE,eAAgFJ,OAAO,CAAChG,OAAxF;;AACA,wBAAI,CAACkF,QAAL,CAAcmB,WAAd,CAA0B,MAAI,CAACC,GAAL,CAASC,aAAnC,EAAkDN,EAAlD;AACD,iBAJD;AAKD;AACF,aAVD;AAYA,iBAAKhB,iBAAL,CAAuBF,gBAAvB,CAAwC,KAAKD,MAA7C,EAzBM,CA2BN;;AACA,iBAAKK,aAAL,CAAmBqB,MAAnB,CAA0B,aAA1B,EAAyC/I,SAAzC,CAAmD,UAACV,IAAD,EAAe;AAChE,kBAAG,MAAI,CAAC+H,MAAL,IAAe/H,IAAI,CAACC,GAAL,CAAS8H,MAA3B,EAAkC;AAChC,oBAAMmB,EAAE,GAAyB,MAAI,CAACf,QAAL,CAAcgB,aAAd,CAA4B,IAA5B,CAAjC;;AACAD,kBAAE,CAACE,SAAH,aAAkBpJ,IAAI,CAACC,GAAL,CAASoJ,MAAT,KAAoB,MAAI,CAACtJ,QAAzB,GAAoC,KAApC,GAA4CC,IAAI,CAACC,GAAL,CAASoJ,MAAvE,eAAkFrJ,IAAI,CAACC,GAAL,CAASgD,OAA3F;;AACA,sBAAI,CAACkF,QAAL,CAAcmB,WAAd,CAA0B,MAAI,CAACC,GAAL,CAASC,aAAnC,EAAkDN,EAAlD;;AACA,sBAAI,CAACZ,QAAL;AACD,eALD,MAKO,CACN;AACF,aARD,EA5BM,CAsCN;;AACA,iBAAKF,aAAL,CAAmBqB,MAAnB,CAA0B,cAA1B,EAA0C/I,SAA1C,CAAoD,UAACV,IAAD,EAAe,CAElE,CAFD;AAGD,W,CAED;;;;gCACMsE,K,EAAsB;AAC1B,gBAAIA,KAAK,CAACoF,GAAN,IAAa,OAAjB,EAA0B;AACxBpF,mBAAK,CAACqF,cAAN;AACA,mBAAKC,WAAL,CAAiB,KAAKtB,QAAtB;AACA,mBAAKA,QAAL,GAAgB,EAAhB;AACD;AACF,W,CAED;;;;sCACYtI,I,EAAY;AACtB,gBAAIA,IAAI,IAAI,EAAZ,EAAgB;AACd,mBAAKoI,aAAL,CAAmBtI,IAAnB,CAAwB,SAAxB,EAAmC;AAACiI,sBAAM,EAAE,KAAKA,MAAd;AAAsBsB,sBAAM,EAAE,KAAKtJ,QAAnC;AAA6CkD,uBAAO,EAAEjD;AAAtD,eAAnC;AACD;AACF;;;6CAEe;AACd,iBAAKkI,iBAAL,CAAuB2B,aAAvB,CAAqC,KAAK9B,MAA1C;AACA,iBAAKG,iBAAL,CAAuB4B,gBAAvB,CAAwC,KAAKpB,SAA7C;AACA,iBAAKqB,WAAL;AACD;;;wCAEU;AACT,iBAAK3B,aAAL,CAAmB4B,MAAnB,CAA0B,aAA1B;AACA,iBAAK5B,aAAL,CAAmB4B,MAAnB,CAA0B,cAA1B;AACA,iBAAKvB,OAAL,CAAapH,WAAb;AACA,iBAAKkH,UAAL,CAAgBlH,WAAhB;AACD;;;;;;;yBAzFU4G,mB,EAAmB,iK,EAAA,wH,EAAA,yJ,EAAA,yI;AAAA,O;;;cAAnBA,mB;AAAmB,uC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;ACbhC;;;;AAAiC;;;;;;;;;wEDapBA,mB,EAAmB;gBAN/B,uDAM+B;iBANrB;AACT3G,oBAAQ,EAAE,gBADD;AAETC,uBAAW,EAAE,6BAFJ;AAGTC,qBAAS,EAAE,CAAC,6BAAD;AAHF,W;AAMqB,U;;;;;;;;;;;;kBAC7B;;;kBACA;;;kBACA,uD;mBAAU,U;;;;;;;;;;;;;;;;;;;;AEfb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAUayI,e;AAMX,iCAAqB/B,iBAArB,EACSG,cADT,EACyC;AAAA;;AADpB,eAAAH,iBAAA,GAAAA,iBAAA;AACZ,eAAAG,cAAA,GAAAA,cAAA;AAJT,eAAAtI,QAAA,GAAmBJ,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAnB;AAMC;;;;qCAEO;AACN,iBAAKgJ,eAAL,GAAuB,KAAKP,cAAL,CAAoBQ,WAApB,CAAgC,KAAKqB,MAAL,CAAYpB,QAA5C,CAAvB;AACD,W,CAED;;;;2CACiBoB,M,EAAoB;AACnC,iBAAKhC,iBAAL,CAAuB4B,gBAAvB,CAAwCI,MAAxC;AACA,iBAAKhC,iBAAL,CAAuBhH,YAAvB,CAAoCF,MAAM,CAACG,UAA3C;AACD;;;;;;;yBAnBU8I,e,EAAe,iK,EAAA,yI;AAAA,O;;;cAAfA,e;AAAe,mC;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,qE;AAAA;AAAA;ACX5B;;AAEI;AAAA,qBAAS,IAAAH,gBAAA,YAAT;AAAiC,aAAjC;;AACI;;AACR;;;;AAHI;;AAEI;;AAAA;;;;;;;;;wEDQKG,e,EAAe;gBAN3B,uDAM2B;iBANjB;AACT3I,oBAAQ,EAAE,YADD;AAETC,uBAAW,EAAE,yBAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAMiB,U;;;;;;;;kBAKzB;;;;;;;;;;;;;;;;;;;;AEbH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACAQ;;AACI;;AAEJ;;;;;;AAFgB;;AAAA;;;;;;;;AAJxB;;AAEI;;AACI;;AAIJ;;AAGA;;AAAM;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACF;;AAAyD;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAzD;;AACJ;;AACJ;;;;;;AAV2B;;AAAA;;;;UDSd2I,mB;AAMX,qCAAoBjC,iBAApB,EACU5I,cADV,EAC0C;AAAA;;AADtB,eAAA4I,iBAAA,GAAAA,iBAAA;AACV,eAAA5I,cAAA,GAAAA,cAAA;AALV,eAAA8K,OAAA,GAAwB,EAAxB;AAK6C;;;;qCAErC;AAAA;;AACN;AACA,iBAAK7B,UAAL,GAAkB,KAAKjJ,cAAL,CAAoBwB,YAApB,CAAiCJ,SAAjC,CAA2C,UAAC8H,UAAD,EAAgB;AAC3E,oBAAI,CAAC1H,YAAL,GAAoB0H,UAApB;;AAEA,kBAAIA,UAAJ,EAAgB;AACd,sBAAI,CAAC6B,UAAL,GAAkB,MAAI,CAACnC,iBAAL,CAAuBoC,YAAvB,CAAoC5J,SAApC,CAA8C,UAAC0J,OAAD;AAAA,yBAAa,MAAI,CAACA,OAAL,GAAeA,OAA5B;AAAA,iBAA9C,CAAlB;;AACA,sBAAI,CAAClC,iBAAL,CAAuBqC,OAAvB,CAA+B,EAA/B;AACD,eAHD,MAGO;AACLlK,uBAAO,CAACC,GAAR;AACD;AACF,aATiB,CAAlB;AAUD,W,CAED;;;;gCACMN,I,EAAc;AAClB,gBAAIA,IAAI,KAAK,EAAb,EAAiB;AACf,mBAAKkI,iBAAL,CAAuBqC,OAAvB,CAA+B,CAAC5K,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAD,CAA/B;AACD,aAFD,MAEO;AACL,kBAAI6G,GAAG,GAAazG,IAAI,CAACwK,KAAL,CAAW,GAAX,CAApB;AACA,mBAAKtC,iBAAL,CAAuBqC,OAAvB,CAA+B9D,GAA/B;AACD;AACF,W,CAED;;;;mCACSzG,I,EAAc;AACrB,iBAAKkI,iBAAL,CAAuBuC,cAAvB,CAAsCzK,IAAtC;AACD;;;wCAEU;AACT,iBAAKqK,UAAL,CAAgBhJ,WAAhB;AACA,iBAAKkH,UAAL,CAAgBlH,WAAhB;AACD;;;;;;;yBAzCU8I,mB,EAAmB,iK,EAAA,yI;AAAA,O;;;cAAnBA,mB;AAAmB,uC;AAAA,gB;AAAA,e;AAAA,mW;AAAA;AAAA;ACZhC;;;;AAAK;;;;;;;;;wEDYQA,mB,EAAmB;gBAN/B,uDAM+B;iBANrB;AACT7I,oBAAQ,EAAE,gBADD;AAETC,uBAAW,EAAE,6BAFJ;AAGTC,qBAAS,EAAE,CAAC,6BAAD;AAHF,W;AAMqB,U;;;;;;;;;;;;;;;;;;;;;;;;AEVhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACOI;;AAAwF;AAAA;;AAAA;;AAAS,mBAAAkJ,SAAA,YAAqB,EAArB;AAA0B,mBAAF,6BAAwB,IAAtB;AAA0B,WAA7D;;AACpF;;AAAU;;AAAK;;AACnB;;;;;;AACA;;AAA6E;;AAA0B;;;;;;AAEnG;;;;;;;;AACA;;AAAiF;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAC7E;;AAAM;;AAAkB;;AAC5B;;;;;;AAF0D;;AAChD;;AAAA;;;;UDDLvG,mB;AA+BX,qCAAoBwG,oBAApB,EACoBnL,UADpB,EAEoBoL,cAFpB,EAEoD;AAAA;;AAFhC,eAAAD,oBAAA,GAAAA,oBAAA;AACA,eAAAnL,UAAA,GAAAA,UAAA;AACA,eAAAoL,cAAA,GAAAA,cAAA,CAAgC,CAzBpD;;AACU,eAAAC,aAAA,GAAgB,IAAI,0DAAJ,EAAhB,CAwB0C,CAtBpD;;AACA,eAAAH,SAAA,GAAyB,IAAI,0DAAJ,CAAgB,IAAhB,CAAzB;AAIA,eAAAxI,SAAA,GAAqB,KAArB,CAiBoD,CAXpD;;AACQ,eAAA4I,cAAA,GAA+D,IAAI,oDAAJ,CAAoB,EAApB,CAA/D;AACR,eAAAC,aAAA,GAAyD,KAAKD,cAAL,CAAoBE,YAApB,EAAzD,CASoD,CAPpD;;AACA,eAAAC,mBAAA,GAA4C,IAA5C;AACQ,eAAAC,cAAA,GAAwD,IAAI,oDAAJ,CAAoB,KAAKD,mBAAzB,CAAxD;AACR,eAAAvI,aAAA,GAAkD,KAAKwI,cAAL,CAAoBF,YAApB,EAAlD;AAIuD;;;;qCAE/C;AAAA;;AACN,iBAAKxL,UAAL,CAAgB2L,iBAAhB,GAAoC,IAApC;AAEA,iBAAKP,cAAL,CAAoBQ,WAApB,CAAgC1K,SAAhC,CAA0C,UAAC2K,MAAD,EAA0B;AAClE,kBAAIA,MAAM,CAACC,GAAX,EAAgB;AACd,sBAAI,CAACX,oBAAL,CAA0BY,aAA1B,CAAwCF,MAAM,CAACC,GAA/C,EAAoDD,MAAM,CAACG,GAA3D,EACC9K,SADD,CACW,UAACT,GAAD,EAAS;AAClB,sBAAIA,GAAG,CAACwL,QAAJ,CAAa,CAAb,CAAJ,EAAqB;AACnB,0BAAI,CAACf,SAAL,CAAehG,UAAf,CAA0B,MAAI,CAACgH,YAAL,CAAkBzL,GAAG,CAACwL,QAAJ,CAAa,CAAb,EAAgBE,UAAhB,CAA2BC,YAA7C,EAA2D,CAA3D,CAA1B;;AACA,0BAAI,CAACX,mBAAL,GAA2B,IAAI,8EAAJ,CAAyB,MAAI,CAACP,SAAL,CAAenF,KAAxC,EAA+CtF,GAAG,CAACwL,QAAJ,CAAa,CAAb,EAAgBI,QAAhB,CAAyBC,WAAxE,CAA3B;;AACA,0BAAI,CAACZ,cAAL,CAAoBjE,IAApB,CAAyB,MAAI,CAACgE,mBAA9B;AACD;AACF,iBAPD;AAQD;AACF,aAXD,EAHM,CAgBN;;AACA,iBAAKc,QAAL,GAAgB,KAAKrB,SAAL,CAAesB,YAAf,CAA4BtL,SAA5B,CAAsC,UAAAC,CAAC,EAAI;AACzD,oBAAI,CAACsK,mBAAL,GAA2B,IAA3B;AACAgB,0BAAY,CAAC,MAAI,CAACC,OAAN,CAAZ;AACA,oBAAI,CAACA,OAAL,GAAeC,UAAU,CAAC,YAAM;AAC9B,sBAAI,CAACjK,SAAL,GAAiB,IAAjB;;AACA,sBAAI,CAAC4I,cAAL,CAAoB7D,IAApB,CAAyB,CAAC,EAAD,CAAzB;;AACA,sBAAI,CAACmF,iBAAL,GAAyB,MAAI,CAACzB,oBAAL,CAA0B0B,UAA1B,CAAqC1L,CAAC,CAACqG,QAAF,EAArC,EAAmDtG,SAAnD,CAA6D,UAAA+G,QAAQ,EAAI;AAChG,wBAAI,CAACvF,SAAL,GAAiB,KAAjB;AACA,sBAAIoK,aAAa,GAAgC,EAAjD;AACA7E,0BAAQ,CAACgE,QAAT,CAAkBzC,OAAlB,CAA0B,UAAAuD,OAAO,EAAI;AACnC,wBAAIrH,IAAI,GAAG,MAAI,CAACwG,YAAL,CAAkBa,OAAO,CAACZ,UAAR,CAAmBC,YAArC,EAAmD,CAAnD,CAAX;;AACAU,iCAAa,CAACzG,IAAd,CAAmB;AAACX,0BAAI,EAAEA,IAAP;AAAajC,6BAAO,EAAEsJ;AAAtB,qBAAnB;AACD,mBAHD;;AAIA,wBAAI,CAACzB,cAAL,CAAoB7D,IAApB,CAAyBqF,aAAzB;AACD,iBARwB,EAQtB,UAAClM,GAAD,EAAS;AACV,wBAAI,CAAC8B,SAAL,GAAiB,KAAjB;AACA7B,yBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,iBAXwB,CAAzB;AAYD,eAfwB,EAetB,GAfsB,CAAzB;AAgBD,aAnBe,CAAhB;;AAqBA,gBAAI,KAAKoM,iBAAT,EAA4B;AAC1B;AACA,mBAAKC,kBAAL,GAA0B,KAAKjN,UAAL,CAAgBkN,cAAhB,CAA+BhM,SAA/B,CAAyC,UAACT,GAAD,EAAsE;AACvI,oBAAIA,GAAG,CAACwL,QAAR,EAAkB;AAChB,wBAAI,CAACkB,WAAL,GAAmB,QAAnB;;AACA,wBAAI,CAACjC,SAAL,CAAehG,UAAf,CAA0B,MAAI,CAACgH,YAAL,CAAkBzL,GAAG,CAACwL,QAAJ,CAAa,CAAb,EAAgBE,UAAhB,CAA2BC,YAA7C,EAA2D,CAA3D,CAA1B;;AACA,wBAAI,CAACX,mBAAL,GAA2B,IAAI,8EAAJ,CAAyB,MAAI,CAACP,SAAL,CAAenF,KAAxC,EAA+CtF,GAAG,CAACwL,QAAJ,CAAa,CAAb,EAAgBI,QAAhB,CAAyBC,WAAxE,CAA3B;;AACA,wBAAI,CAACZ,cAAL,CAAoBjE,IAApB,CAAyB,MAAI,CAACgE,mBAA9B;AACD,iBALD,MAKO;AACL,wBAAI,CAACP,SAAL,CAAehG,UAAf,CAA0B,EAA1B;;AACA,wBAAI,CAACiI,WAAL,GAAmB,eAAnB;AACD;AACF,eAVyB,CAA1B;AAWD;AACF;;;4CAEiB,CACjB;AAED;;;;8CACiB;AACf,gBAAI,CAAC,KAAK1B,mBAAN,IAA6B,KAAKP,SAAL,CAAenF,KAAf,IAAwB,EAAzD,EAA6D;AAC3D,qBAAO,IAAP;AACD,aAFD,MAEO;AACL,qBAAO,KAAP;AACD;AACF;AAED;;;;uCACaqH,M,EAAgBC,I,EAAY;AACvC,gBAAIpG,GAAG,GAAamG,MAAM,CAACpC,KAAP,CAAa,GAAb,CAApB;AACA,gBAAIsC,OAAO,GAAGrG,GAAG,CAACsG,KAAJ,EAAd;;AACA,iBAAK,IAAIpM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkM,IAApB,EAA0BlM,CAAC,EAA3B,EAA+B;AAC7B,kBAAI8F,GAAG,CAAC9F,CAAD,CAAH,IAAU8F,GAAG,CAACuG,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd,CAAd,EAAgC;AAC9BF,uBAAO,GAAGA,OAAO,CAACG,MAAR,CAAe,IAAf,EAAqBxG,GAAG,CAAC9F,CAAD,CAAxB,CAAV;AACD;AACF;;AACD,mBAAOmM,OAAO,CAACG,MAAR,CAAe,IAAf,EAAqBxG,GAAG,CAACA,GAAG,CAACM,MAAJ,GAAa,CAAd,CAAxB,CAAP;AACD;AAED;;;;wCACcmG,O,EAA+B;AAC3C,iBAAKjC,mBAAL,GAA2B,IAAI,8EAAJ,CAAyBiC,OAAO,CAAChI,IAAjC,EAAuCgI,OAAO,CAACjK,OAAR,CAAgB4I,QAAhB,CAAyBC,WAAhE,EAA6EoB,OAAO,CAACjK,OAArF,CAA3B;;AACA,iBAAKiI,cAAL,CAAoBjE,IAApB,CAAyB,KAAKgE,mBAA9B;;AACA,iBAAKkC,aAAL,GAAoB,KAAKzC,SAAL,CAAehG,UAAf,CAA0B,EAA1B,CAApB,GAAoD,IAApD,CAH2C,CAI3C;AACD;;;sCAEWL,I,EAAM;AAChBhE,mBAAO,CAACC,GAAR,CAAY+D,IAAZ;AACA,iBAAKwG,aAAL,CAAmB/K,IAAnB,CAAwBuE,IAAxB;AACA,iBAAK8I,aAAL,GAAoB,KAAKzC,SAAL,CAAehG,UAAf,CAA0B,EAA1B,CAApB,GAAoD,IAApD;AACD;;;wCAEa;AACZ,iBAAKlF,UAAL,CAAgB2L,iBAAhB,GAAoC,KAApC;AACA,iBAAKY,QAAL,CAAc1K,WAAd;AACA,iBAAKoL,kBAAL,GAAyB,KAAKA,kBAAL,CAAwBpL,WAAxB,EAAzB,GAAiE,IAAjE;AACA,iBAAK+K,iBAAL,GAAwB,KAAKA,iBAAL,CAAuB/K,WAAvB,EAAxB,GAA+D,IAA/D;AACD;;;;;;;yBApIU8C,mB,EAAmB,yJ,EAAA,qI,EAAA,+H;AAAA,O;;;cAAnBA,mB;AAAmB,wC;AAAA;AAAA;sEACnB,kE,EAAS,I;;;;;;;;;;;;;;;;;;;;;;;;AChBtB;;AACI;;AAAW;;AAAiB;;AAC5B;;AAOA;;AAGA;;AACA;;AACI;;AACA;;;;AAGJ;;AACJ;;;;;;;;AAnB0F;;AAA1B;;AACjD;;AAAA;;AAKX;;AAAA,6FAAwB,aAAxB,EAAwB,aAAxB;;AAGmB;;AAAA;;AAGZ;;AAAA;;AAEU;;AAAA;;AACD;;AAAA;;;;;;;;;;wEDAPA,mB,EAAmB;gBAL/B,uDAK+B;iBALrB;AACT7C,oBAAQ,EAAE,iBADD;AAETC,uBAAW,EAAE,8BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKqB,U;;;;;;;;;;kBAC7B,uD;mBAAU,kE;;;kBACV;;;kBACA;;;kBAEA;;;kBACA;;;kBACA;;;kBAEA;;;;;;;;;;;;;;;;;;;;AExBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACME;;;;;;;;AACA,0FAAmB,QAAnB,EAAmB,eAAnB;;;;UDMW4L,uB;AAMX,yCACUtL,YADV,EAEUC,KAFV,EAGUsL,eAHV,EAG0C;AAAA;;AAFhC,eAAAvL,YAAA,GAAAA,YAAA;AACA,eAAAC,KAAA,GAAAA,KAAA;AACA,eAAAsL,eAAA,GAAAA,eAAA;AACL;;;;qCAEG;AACN,iBAAKzK,IAAL,GAAY,IAAI,wDAAJ,CAAc;AACxBK,qBAAO,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAAEJ,0BAAU,EAAE,CAAC,0DAAWC,QAAZ;AAAd,eAAtB;AADe,aAAd,CAAZ;AAGD;;;yCAEc;AACb,gBAAI,KAAKF,IAAL,CAAUuC,OAAd,EAAuB;AACrB;AACD;;AACD,gBAAImI,UAAU,GAAG;AACfzJ,kBAAI,EAAE,IAAIwB,IAAJ,GAAWC,cAAX,EADS;AAEf1B,oBAAM,EAAEjE,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAFO;AAGfqD,qBAAO,EAAE,KAAKL,IAAL,CAAU2C,KAAV,CAAgBtC;AAHV,aAAjB;AAKA,iBAAKoK,eAAL,CAAqBE,UAArB,CAAgCD,UAAhC,EAA2C,KAAK5J,IAAL,CAAUC,GAArD;AACA,iBAAKf,IAAL,CAAU8C,KAAV;AACD;;;;;;;yBA7BU0H,uB,EAAuB,iJ,EAAA,+H,EAAA,kJ;AAAA,O;;;cAAvBA,uB;AAAuB,4C;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,0N;AAAA;AAAA;ACbpC;;AACE;;AAAyB;AAAA,qBAAU,IAAAI,YAAA,EAAV;AAAwB,aAAxB;;AACvB;;AACE;;AACF;;AACF;;AACA;;AAKF;;;;AAVQ;;AAAA;;AAKO;;AAAA;;;;;;;;;wEDOFJ,uB,EAAuB;gBALnC,uDAKmC;iBALzB;AACT9L,oBAAQ,EAAE,qBADD;AAETC,uBAAW,EAAE,kCAFJ;AAGTC,qBAAS,EAAE,CAAC,kCAAD;AAHF,W;AAKyB,U;;;;;;;;;;kBACjC;;;;;;;;;;;;;;;;;;;;AEdH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACOI;;AAAsD;AAAA;;AAAA;;AAAA;AAAA;;AAA8B;;AAAM;;;;;;;;AAC1F;;AAAsD;AAAA;;AAAA;;AAAA;AAAA;;AAA4B;;AAAI;;;;;;;;AACtF;;AAAuE;AAAA;;AAAA;;AAAA;AAAA;;AAA4B;;AAAM;;;;;;;;AAWnG;;AAAoD;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAiC;;AAAI;;;;;;;;AACzF;;AAAgG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA+B;;AAAM;;;;;;;;AAR3I;;AACE;;AAAkB;;AAChB;;AACE;;AAAmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAqC;;AAAI;;AAC5D;;AACA;;AAAoB;;AAAK;;AACzB;;AAAmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAuC;;AAAM;;AAChE;;AACA;;AACF;;AACF;;AACH;;;;;;;;AAVqB;;AAAA;;AAGd;;AAAA;;AAGQ;;AAAA;;AACY;;AAAA;;;;;;;;AAI1B;;AACI;;AAAyB;AAAA;;AAAA;;AAAA;AAAA;;AACvB;;AACE;;AACF;;AACF;;AACF;;;;;;AALQ;;AAAA;;;;;;AAdZ;;AACE;;AAYA;;AAOF;;;;;;AAnBY;;AAAA;;AAYL;;AAAA;;;;UDZIiM,gB;AAOX,kCACUJ,eADV,EAESK,MAFT,EAE0B;AAAA;;AADhB,eAAAL,eAAA,GAAAA,eAAA;AACD,eAAAK,MAAA,GAAAA,MAAA;AANT,eAAAC,YAAA,GAAe,KAAf;AACA,eAAAC,UAAA,GAAa,IAAb;AACA,eAAAC,WAAA,GAAc,KAAd;AAKK;;;;qCAEG;AACN,iBAAKjL,IAAL,GAAY,IAAI,wDAAJ,CAAc;AACxBK,qBAAO,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAAEJ,0BAAU,EAAE,CAAC,0DAAWC,QAAZ;AAAd,eAAtB;AADe,aAAd,CAAZ;AAGD;;;yCAEW;AACV,iBAAK8K,UAAL,GAAkB,CAAC,KAAKA,UAAxB;AACD;;;uCACS;AACR,gBAAI,KAAKhL,IAAL,CAAUuC,OAAd,EAAuB;AACrB;AACD;;AACD,gBAAI2I,QAAQ,GAAG;AACbjK,kBAAI,EAAE,IAAIwB,IAAJ,GAAWC,cAAX,EADO;AAEb1B,oBAAM,EAAEjE,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAFK;AAGbqD,qBAAO,EAAE,KAAKL,IAAL,CAAU2C,KAAV,CAAgBtC;AAHZ,aAAf;AAKA,gBAAI8K,YAAY,GAAG;AACjBzK,oBAAM,EAAE,KAAKA,MADI;AAEjB0K,uBAAS,EAAE,KAAKC,OAAL,CAAatK,GAFP;AAGjBuK,mBAAK,EAAEJ;AAHU,aAAnB;AAKA,iBAAKT,eAAL,CAAqBa,KAArB,CAA2BH,YAA3B;AACA,iBAAKnL,IAAL,CAAU8C,KAAV;AACD;;;4CACc;AACb,gBAAIyI,WAAW,GAAG;AAChB7K,oBAAM,EAAE,KAAKA,MADG;AAEhB0K,uBAAS,EAAE,KAAKC,OAAL,CAAatK,GAFR;AAGhB5D,sBAAQ,EAAEJ,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAHM;AAIhBwO,qBAAO,EAAE;AAJO,aAAlB;AAMA,iBAAKf,eAAL,CAAqBgB,WAArB,CAAiCF,WAAjC;AACD;;;0CACeC,O,EAAO;AACrB,gBAAID,WAAW,GAAG;AAChB7K,oBAAM,EAAE,KAAKA,MADG;AAEhB0K,uBAAS,EAAE,KAAKC,OAAL,CAAatK,GAFR;AAGhB5D,sBAAQ,EAAEJ,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAHM;AAIhBwO,qBAAO,EAAEA;AAJO,aAAlB;AAMA,iBAAKf,eAAL,CAAqBgB,WAArB,CAAiCF,WAAjC;AACD;;;8CACgB;AACf,gBAAIG,aAAa,GAAG;AAClBhL,oBAAM,EAAE,KAAKA,MADK;AAElB0K,uBAAS,EAAE,KAAKC,OAAL,CAAatK,GAFN;AAGlByK,qBAAO,EAAE;AAHS,aAApB;AAKA,iBAAKf,eAAL,CAAqBkB,aAArB,CAAmCD,aAAnC;AACD;;;4CACiBF,O,EAAO;AACvB,gBAAIE,aAAa,GAAG;AAClBhL,oBAAM,EAAE,KAAKA,MADK;AAElB0K,uBAAS,EAAE,KAAKC,OAAL,CAAatK,GAFN;AAGlByK,qBAAO,EAAEA;AAHS,aAApB;AAKA,iBAAKf,eAAL,CAAqBkB,aAArB,CAAmCD,aAAnC;AACD;;;4CACc;AACb,gBAAIE,WAAW,GAAG;AAChBlL,oBAAM,EAAE,KAAKA,MADG;AAEhB2K,qBAAO,EAAE,KAAKA,OAFE;AAGhBC,mBAAK,EAAE;AAHS,aAAlB;AAKA,gBAAMO,SAAS,GAAG,KAAKf,MAAL,CAAYgB,IAAZ,CAAiB,yFAAjB,EAAsC;AAAC1O,kBAAI,EAAC;AAAC2N,4BAAY,EAAE,KAAf;AAAsBgB,2BAAW,EAAEH;AAAnC;AAAN,aAAtC,CAAlB;AACAC,qBAAS,CAACG,WAAV,GAAwBlO,SAAxB;AAED;;;0CACewN,K,EAAK;AACnB,gBAAIM,WAAW,GAAG;AAChBlL,oBAAM,EAAE,KAAKA,MADG;AAEhB2K,qBAAO,EAAE,KAAKA,OAFE;AAGhBC,mBAAK,EAAEA;AAHS,aAAlB;AAKA,gBAAMO,SAAS,GAAG,KAAKf,MAAL,CAAYgB,IAAZ,CAAiB,yFAAjB,EAAsC;AAAC1O,kBAAI,EAAC;AAAC2N,4BAAY,EAAE,KAAf;AAAsBgB,2BAAW,EAAEH;AAAnC;AAAN,aAAtC,CAAlB;AACAC,qBAAS,CAACG,WAAV,GAAwBlO,SAAxB;AAED;;;4CACc;AACb,gBAAI8N,WAAW,GAAG;AAChBlL,oBAAM,EAAE,KAAKA,MADG;AAEhB2K,qBAAO,EAAE,KAAKA,OAFE;AAGhBC,mBAAK,EAAE;AAHS,aAAlB;AAKA,gBAAMO,SAAS,GAAG,KAAKf,MAAL,CAAYgB,IAAZ,CAAiB,yFAAjB,EAAsC;AAAC1O,kBAAI,EAAC;AAAC2N,4BAAY,EAAE,IAAf;AAAqBgB,2BAAW,EAAEH;AAAlC;AAAN,aAAtC,CAAlB;AACAC,qBAAS,CAACG,WAAV,GAAwBlO,SAAxB;AACD;;;wCACawN,K,EAAK;AACjB,gBAAIM,WAAW,GAAG;AAChBlL,oBAAM,EAAE,KAAKA,MADG;AAEhB2K,qBAAO,EAAEC,KAFO;AAGhBA,mBAAK,EAAE;AAHS,aAAlB;AAKA,gBAAMO,SAAS,GAAG,KAAKf,MAAL,CAAYgB,IAAZ,CAAiB,yFAAjB,EAAsC;AAAC1O,kBAAI,EAAC;AAAC2N,4BAAY,EAAE,IAAf;AAAqBgB,2BAAW,EAAEH;AAAlC;AAAN,aAAtC,CAAlB;AACAC,qBAAS,CAACG,WAAV,GAAwBlO,SAAxB;AACD;;;qCACUuC,O,EAAO;AAChB,gBAAGA,OAAO,CAACW,MAAR,KAAmBjE,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAtB,EAAyD;AACvD,qBAAO,IAAP;AACD;AACF;;;;;;;yBAlHU6N,gB,EAAgB,kJ,EAAA,mI;AAAA,O;;;cAAhBA,gB;AAAgB,oC;AAAA;AAAA;AAAA;AAAA,S;AAAA,iB;AAAA,e;AAAA,oR;AAAA;AAAA;ACZ7B;;AACE;;AACA;;AACE;;AAAmB;AAAA,qBAAS,IAAAoB,eAAA,EAAT;AAA0B,aAA1B;;AAA4B;;AAAI;;AACnD;;AACA;;AAAmB;AAAA,qBAAS,IAAAC,YAAA,EAAT;AAAuB,aAAvB;;AAAyB;;AAAK;;AACjD;;AACA;;AACA;;AACF;;AAEA;;AAsBA;;;;AAhCA;;AAAA;;AAGE;;AAAA;;AAEQ;;AAAA;;AACA;;AAAA;;AACW;;AAAA;;AAGhB;;AAAA;;;;;;;;;wEDCMrB,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTnM,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAKkB,U;;;;;;;;kBAC1B;;;kBACA;;;;;;;;;;;;;;;;;;;;AEfH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACIA;;;;;;;;;;AAUU;;AAA0F;;AAAI;;;;;;AAAvC;;;;;;;;AACvD;;AAAyD;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA6B;;AAAM;;;;;;;;AARpG;;AACE;;AACE;;AACE;;AACA;;AAAgB;;AAAiB;;AACjC;;AAAmB;;AAAY;;AAC/B;;AACE;;AACA;;AACF;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AAEA;;AACE;;AAAiC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAwB,WAAxB,EAAwB;AAAA;;AAAA;;AAAA;AAAA,WAAxB,EAAwB,SAAxB,EAAwB;AAAA;;AAAA;;AAAA;AAAA,WAAxB,EAAwB,YAAxB,EAAwB;AAAA;;AAAA;;AAAA;AAAA,WAAxB;;AAA8H;;AAA4B;;AAC3L;;AAAmB;;AAAK;;AAC1B;;AAGA;;AACF;;AAEF;;;;;;;;AA3BsB;;AAAA;;AAGX;;AAAA;;AACK;;AAAA;;AAIV;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAEkB;;AAAA,0JAAsB,KAAtB,EAAsB,aAAtB;;AAGiH;;AAAA;;AAA4B;;AAAA;;AAK5I;;AAAA;;;;;;AA7B3B;;AACE;;AAgCF;;;;;;AAhCO;;AAAA;;;;;;AAiCP;;AAAwE;;AAAmB;;;;UD1B9EuN,qB;AAeX,uCAAmBjN,YAAnB,EAAyDkN,WAAzD,EAA2FjN,KAA3F,EAAkH;AAAA;;AAA/F,eAAAD,YAAA,GAAAA,YAAA;AAAsC,eAAAkN,WAAA,GAAAA,WAAA;AAAkC,eAAAjN,KAAA,GAAAA,KAAA,CAAuB,CAblH;AACA;AACA;AACA;AACA;;AACA,eAAAkN,KAAA,GAAgB,EAAhB;AACA,eAAA/M,SAAA,GAAY,KAAZ;AAGA,eAAAgN,QAAA,GAAW,KAAX;AAIoH;;;;qCAEzG;AAAA;;AACT,iBAAKhN,SAAL,GAAiB,IAAjB;AACA,iBAAKH,KAAL,CAAWsJ,MAAX,CAAkB3K,SAAlB,CAA4B,UAAA2K,MAAM,EAAI;AACpC,oBAAI,CAAC1F,KAAL,GAAa0F,MAAM,CAAC,OAAD,CAAnB;;AACA,kBAAG,MAAI,CAAC1F,KAAR,EAAc;AACZ,sBAAI,CAAC7D,YAAL,CAAkBqN,WAAlB,CAA8B;AAACxJ,uBAAK,EAAE,MAAI,CAACA;AAAb,iBAA9B;;AACA,sBAAI,CAACyJ,QAAL,GAAgB,MAAI,CAACtN,YAAL,CAAkBuN,qBAAlB,GACf3O,SADe,CACL,UAACuO,KAAD,EAAmB;AAC5B,wBAAI,CAAC/M,SAAL,GAAiB,KAAjB;AACA,wBAAI,CAAC+M,KAAL,GAAaA,KAAb;AACD,iBAJe,CAAhB;AAMD,eARD,MASI;AACF,sBAAI,CAACD,WAAL,CAAiBzL,GAAjB,CAAqB,OAArB,EAA8B,IAA9B,EAAoC3F,IAApC,CAAyC,UAACqC,GAAD,EAAc;AACrD,wBAAI,CAACP,IAAL,GAAYO,GAAG,CAACP,IAAJ,CAAS,CAAT,CAAZ;;AACA,wBAAI,CAACoC,YAAL,CAAkBwN,gBAAlB,CAAmC;AAAC1L,0BAAM,EAAE,MAAI,CAAClE,IAAL,CAAUK,QAAnB;AAA6BwP,2BAAO,EAAE,MAAI,CAAC7P,IAAL,CAAU8P,SAAhD;AAA2D/M,wBAAI,EAAE,MAAI,CAAC/C,IAAL,CAAU+C,IAA3E;AAAiFO,4BAAQ,EAAE,MAAI,CAACtD,IAAL,CAAUsD;AAArG,mBAAnC;;AACA,wBAAI,CAACoM,QAAL,GAAgB,MAAI,CAACtN,YAAL,CAAkBuN,qBAAlB,GACf3O,SADe,CACL,UAACuO,KAAD,EAAmB;AAC5B,0BAAI,CAAC/M,SAAL,GAAiB,KAAjB;AACA,0BAAI,CAAC+M,KAAL,GAAaA,KAAb;AACD,mBAJe,CAAhB;AAKD,iBARD;AASD;AACF,aAtBD;AAuBD;;;mCAEQ3L,M,EAAgB;AACvB,iBAAKxB,YAAL,CAAkB2N,UAAlB,CAA6BnM,MAA7B;AACD;;;wCAEa;AACZ,iBAAK8L,QAAL,CAAc/N,WAAd;AACD;;;+BAEIiC,M,EAAc;AACjB,iBAAKxB,YAAL,CAAkB4N,QAAlB,CAA2BpM,MAA3B,EAAmC3D,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAnC;AACD;;;oCAEgB;AACf,gBAAI,KAAK+P,cAAT,EAAyB;AACvBC,2BAAa,CAAC,KAAKD,cAAN,CAAb;AACA,mBAAKA,cAAL,GAAsB,IAAtB;AACD;AACF;;;sCAEkB;AAAA;;AACjB,iBAAKA,cAAL,GAAsBE,WAAW,CAAC,YAAM;AACtC,qBAAI,CAACC,SAAL;;AACAzP,qBAAO,CAACC,GAAR,CAAY,OAAI,CAAC4O,QAAjB;AACD,aAHgC,EAG9B,GAH8B,CAAjC;AAID;;;sCAEQ;AACP,iBAAKA,QAAL,GAAgB,CAAC,KAAKA,QAAtB;AACD;;;wCAEajB,O,EAAO,CAEpB;;;qCACUvK,I,EAAI;AACb,gBAAG/D,cAAc,CAACC,OAAf,CAAuB,UAAvB,MAAuC8D,IAAI,CAACE,MAA/C,EAAsD;AACpD,qBAAO,IAAP;AACD;AACF;;;;;;;yBAjFUmL,qB,EAAqB,iJ,EAAA,0I,EAAA,+H;AAAA,O;;;cAArBA,qB;AAAqB,0C;AAAA,gB;AAAA,e;AAAA,ooB;AAAA;AAAA;ACdlC;;AACE;;AACA;;AACF;;AACA;;AAEA;;AAkCA;;;;AApCa;;AAAA;;AAER;;AAAA;;AAkC2B;;AAAA;;;;;;;;;wED1BnBA,qB,EAAqB;gBALjC,uDAKiC;iBALvB;AACTzN,oBAAQ,EAAE,mBADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,gCAAD;AAHF,W;AAKuB,U;;;;;;;;;;;;;;;;;;;;;;;;;;AEdlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACGI;;AAA+C;;AAAsB;;;;;;;;AAHzE;;AAAyB;AAAA;;AAAA;;AAAA;AAAA;;AACvB;;AACE;;AACA;;AACF;;AACA;;AAAuD;;AAAS;;AAChE;;AAAyC;AAAA;;AAAA;;AAAA;AAAA;;AAAwB;;AAAK;;AACxE;;;;;;AAPM;;AAGS;;AAAA;;;;;;AAOb;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;AAFJ;;AACE;;AAGF;;;;;;AAHO;;AAAA;;;;UDCMuO,oB;AAIX,sCACStB,SADT,EAEUuB,eAFV,EAGkChQ,IAHlC,EAG2C;AAAA;;AAFlC,eAAAyO,SAAA,GAAAA,SAAA;AACC,eAAAuB,eAAA,GAAAA,eAAA;AACwB,eAAAhQ,IAAA,GAAAA,IAAA;AAC7B;;;;qCAEG;AACN,gBAAG,CAAC,KAAKA,IAAL,CAAU2N,YAAd,EAA2B;AACzB,mBAAK/K,IAAL,GAAY,IAAI,wDAAJ,CAAc;AACtB,2BAAW,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAACC,4BAAU,EAAE,CAAC,0DAAWC,QAAZ;AAAb,iBAAtB;AADW,eAAd,CAAZ;;AAGE,kBAAG,KAAK9C,IAAL,CAAU2O,WAAV,CAAsBT,KAAzB,EAA+B;AAC7B,qBAAKtL,IAAL,CAAUqB,QAAV,CAAmB;AACjB,6BAAW,KAAKjE,IAAL,CAAU2O,WAAV,CAAsBT,KAAtB,CAA4BjL;AADtB,iBAAnB;AAGD,eAJD,MAKI;AACF,qBAAKL,IAAL,CAAUqB,QAAV,CAAmB;AACjB,6BAAW,KAAKjE,IAAL,CAAU2O,WAAV,CAAsBV,OAAtB,CAA8BhL;AADxB,iBAAnB;AAGD;;AACD,mBAAK0L,WAAL,GAAmB,KAAK3O,IAAL,CAAU2O,WAA7B;AACD;AACF;;;0CAGU;AACX,gBAAG,KAAK3O,IAAL,CAAU2O,WAAV,CAAsBT,KAAzB,EAA+B;AAC7B,mBAAKS,WAAL,CAAiBT,KAAjB,CAAuB+B,MAAvB,CAA8BpK,IAA9B,CAAmC;AAACqK,oBAAI,EAAE,KAAKvB,WAAL,CAAiBT,KAAjB,CAAuBjL,OAA9B;AAAuCY,oBAAI,EAACwB,IAAI,GAAGC,cAAP;AAA5C,eAAnC;AACA,mBAAKqJ,WAAL,CAAiBT,KAAjB,CAAuBjL,OAAvB,GAAiC,KAAKL,IAAL,CAAU2C,KAAV,CAAgB0I,OAAjD;AACA,mBAAK+B,eAAL,CAAqBG,WAArB,CAAiC,KAAKxB,WAAtC;AACD,aAJD,MAKI;AACF,mBAAKA,WAAL,CAAiBV,OAAjB,CAAyBgC,MAAzB,CAAgCpK,IAAhC,CAAqC;AAACqK,oBAAI,EAAE,KAAKvB,WAAL,CAAiBV,OAAjB,CAAyBhL,OAAhC;AAAyCY,oBAAI,EAACwB,IAAI,GAAGC,cAAP;AAA9C,eAArC;AACA,mBAAKqJ,WAAL,CAAiBV,OAAjB,CAAyBhL,OAAzB,GAAmC,KAAKL,IAAL,CAAU2C,KAAV,CAAgB0I,OAAnD;AACA,mBAAK+B,eAAL,CAAqBG,WAArB,CAAiC,KAAKxB,WAAtC;AACD;;AACD,iBAAKyB,WAAL;AACD;;;wCAEa;AACZ,iBAAK3B,SAAL,CAAe4B,KAAf;AACD;;;;;;;yBA9CUN,oB,EAAoB,sI,EAAA,kJ,EAAA,gEAOrB,wEAPqB,C;AAON,O;;;cAPdA,oB;AAAoB,yC;AAAA,gB;AAAA,e;AAAA,qU;AAAA;AAAA;ACXjC;;AASA;;;;AAToD;;AAS/C;;AAAA;;;;;;;;;wEDEQA,oB,EAAoB;gBALhC,uDAKgC;iBALtB;AACTzO,oBAAQ,EAAE,kBADD;AAETC,uBAAW,EAAE,+BAFJ;AAGTC,qBAAS,EAAE,CAAC,+BAAD;AAHF,W;AAKsB,U;;;;;;;;oBAO5B,oD;qBAAO,wE;;;;;;;;;;;;;;;;;;;;;AEfZ;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACDE;;AACE;;AAEE;;AACA;;AAEA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACE;;AACF;;AACF;;AACF;;;;;;AALI;;AAAA;;AAEE;;AAAA;;;;;;;;AAKN;;AACE;;AACE;;AACE;;AAEE;;AACE;;AACF;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACE;;AACJ;;AACF;;AACA;;AACE;;AACF;;AACF;;AACF;;;;;;;;AAhBc;;AAAA;;AAEJ;;AAAA;;AAIF;;AAAA,kIAAoD,eAApD,EAAoD,2GAApD;;AAGE;;AAAA;;AAGF;;AAAA;;;;UDfG8O,e;AAkBX,iCACUC,aADV,EAEUC,WAFV,EAGU5F,cAHV,EAGwC;AAAA;;AAF9B,eAAA2F,aAAA,GAAAA,aAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAA5F,cAAA,GAAAA,cAAA;AAlBV,eAAA6F,cAAA,GAAiB,KAAjB;AAEA,eAAAC,cAAA,GAAiC,IAAjC;AACA,eAAAC,aAAA,GAAqB,IAArB;AAIA,eAAAC,WAAA,GAA8B,IAA9B;AACA,eAAAC,KAAA,GAAQ,CAAR;AAEA,eAAAC,WAAA,GAAc,IAAI,mEAAJ,CAAoC,UAAAC,IAAI;AAAA,mBAAIA,IAAI,CAACC,UAAT;AAAA,WAAxC,CAAd;AAEQ,eAAAC,cAAA,GAA0C,IAAI,oDAAJ,CAAoB,IAApB,CAA1C;AACR,eAAAC,aAAA,GAAoC,KAAKD,cAAL,CAAoBjG,YAApB,EAApC;AAmCA;;AACA,eAAAmG,QAAA,GAAW,UAACC,CAAD,EAAYL,IAAZ;AAAA,mBAAmC,CAAC,CAACA,IAAI,CAACC,UAAP,IAAqBD,IAAI,CAACC,UAAL,CAAgBjK,MAAhB,GAAyB,CAAjF;AAAA,WAAX;AA9BK;;;;qCAEG;AAAA;;AACN,iBAAKsK,iBAAL,GAAyB,KAAKd,aAAL,CAAmBe,WAAnB,CAA+B5Q,SAA/B,CAAyC,UAAC6Q,GAAD;AAAA,qBAAmB,OAAI,CAACZ,aAAL,GAAqBY,GAAxC;AAAA,aAAzC,CAAzB;AAEA,iBAAKC,kBAAL,GAA0B,KAAKjB,aAAL,CAAmBkB,YAAnB,CAAgC/Q,SAAhC,CAA0C,UAACgR,IAAD,EAA0B;AAC5F,kBAAIA,IAAJ,EAAU;AACR,uBAAI,CAAChB,cAAL,GAAsBgB,IAAtB,CADQ,CAGR;;AACA,uBAAI,CAAC9G,cAAL,CAAoBQ,WAApB,CAAgC1K,SAAhC,CAA0C,UAAC2K,MAAD,EAA0B;AAClE,sBAAIA,MAAM,CAACsG,QAAX,EAAqB;AACnB,wBAAItG,MAAM,CAACsG,QAAP,KAAoB,KAAxB,EAA+B;AAC7B;AACD,qBAFD,MAEO;AACL,6BAAI,CAACjB,cAAL,CAAoB1H,OAApB,CAA4B,UAAC4I,KAAD,EAAyB;AACnD,4BAAIA,KAAK,CAAC1M,IAAN,IAAcmG,MAAM,CAACsG,QAAzB,EAAmC;AACjC,iCAAI,CAACE,UAAL,CAAgBD,KAAK,CAACZ,UAAtB;AACD,yBAFD,MAEO;AACL,iCAAI,CAACc,QAAL,CAAcF,KAAK,CAACZ,UAApB;AACD;AACF,uBAND;AAOD;AACF;AACF,iBAdD;AAeD;AACF,aArByB,CAA1B;AAsBD;AAKD;;;;wCACczE,O,EAAuB;AACnCA,mBAAO,CAACwF,OAAR,GAAkB,CAACxF,OAAO,CAACwF,OAA3B;AACA,iBAAKC,WAAL,CAAiBzF,OAAjB;AACA,iBAAKgE,aAAL,CAAmB0B,kBAAnB,CAAsC,KAAKvB,cAA3C;AACD;AAED;;;;iCACOiB,Q,EAAwB;AAC7B,gBAAIO,UAAU,GAAG,KAAKC,uBAAL,CAA6BR,QAAQ,CAACX,UAAtC,CAAjB;;AACA,gBAAG,CAACkB,UAAJ,EAAgB;AACd,mBAAK3B,aAAL,CAAmB6B,UAAnB,CAA8Bd,WAA9B,CAA0CjO,GAA1C,CAA8CsO,QAAQ,CAACxT,EAAvD,IAA4D,IAA5D,GAAmE,KAAKoS,aAAL,CAAmB6B,UAAnB,CAA8Bd,WAA9B,CAA0Ce,GAA1C,CAA8CV,QAAQ,CAACxT,EAAvD,CAAnE;AACA,mBAAK2T,QAAL,CAAcH,QAAQ,CAACX,UAAvB;AACD,aAHD,MAIK,IAAIkB,UAAJ,EAAgB;AACnB,mBAAK3B,aAAL,CAAmB6B,UAAnB,CAA8Bd,WAA9B,CAA0CjO,GAA1C,CAA8CsO,QAAQ,CAACxT,EAAvD,IAA4D,KAAKoS,aAAL,CAAmB6B,UAAnB,CAA8Bd,WAA9B,WAAiDK,QAAQ,CAACxT,EAA1D,CAA5D,GAA4H,IAA5H;AACA,mBAAK0T,UAAL,CAAgBF,QAAQ,CAACX,UAAzB;AACD;;AACD,iBAAKT,aAAL,CAAmB0B,kBAAnB,CAAsC,KAAKvB,cAA3C;AACD;AAED;;;;mCACSM,U,EAA4B;AAAA;;AACnCA,sBAAU,CAAChI,OAAX,CAAmB,UAACsJ,GAAD,EAAuB;AACxCA,iBAAG,CAACP,OAAJ,GAAc,IAAd;AACA,qBAAI,CAACxB,aAAL,CAAmB6B,UAAnB,CAA8Bd,WAA9B,CAA0CjO,GAA1C,CAA8CiP,GAAG,CAACnU,EAAlD,IAAuD,IAAvD,GAA8D,OAAI,CAACoS,aAAL,CAAmB6B,UAAnB,CAA8Bd,WAA9B,CAA0Ce,GAA1C,CAA8CC,GAAG,CAACnU,EAAlD,CAA9D;;AAEA,qBAAI,CAACoS,aAAL,CAAmBgC,iBAAnB,CAAqC,OAAI,CAAC5B,aAA1C,EAJwC,CAKxC;;;AAEA,kBAAI2B,GAAG,CAACtB,UAAJ,IAAkBsB,GAAG,CAACtB,UAAJ,CAAejK,MAAf,GAAwB,CAA9C,EAAiD;AAC/C,uBAAI,CAAC+K,QAAL,CAAcQ,GAAG,CAACtB,UAAlB;AACD;AACF,aAVD;AAWD;AAED;;;;qCACWA,U,EAA4B;AAAA;;AACrCA,sBAAU,CAAChI,OAAX,CAAmB,UAACsJ,GAAD,EAAuB;AACxCA,iBAAG,CAACP,OAAJ,GAAc,KAAd;AACA,qBAAI,CAACxB,aAAL,CAAmB6B,UAAnB,CAA8Bd,WAA9B,CAA0CjO,GAA1C,CAA8CiP,GAAG,CAACnU,EAAlD,IAAuD,OAAI,CAACoS,aAAL,CAAmB6B,UAAnB,CAA8Bd,WAA9B,WAAiDgB,GAAG,CAACnU,EAArD,CAAvD,GAAkH,IAAlH,CAFwC,CAIxC;;AACA,kBAAGmU,GAAG,CAACtB,UAAJ,IAAkBsB,GAAG,CAACtB,UAAJ,CAAejK,MAAf,GAAwB,CAA7C,EAA+C;AAC7C,uBAAI,CAAC8K,UAAL,CAAgBS,GAAG,CAACtB,UAApB;AACD;AACF,aARD;AASD;AAED;;;;kDACwBA,U,EAA0B;AAChD,gBAAIwB,KAAK,GAAG,IAAZ;AACAA,iBAAK,GAAG,KAAKC,kBAAL,CAAwBzB,UAAxB,EAAoCwB,KAApC,CAAR;AACA,mBAAOA,KAAP;AACD;AAED;;;;6CACmBxB,U,EAA4BwB,K,EAAc;AAAA;;AAC3DxB,sBAAU,CAAChI,OAAX,CAAmB,UAAC4I,KAAD,EAAyB;AAC1C,kBAAI,CAACY,KAAL,EAAY;AACV,uBAAOA,KAAP;AACD,eAFD,MAGK,IAAIA,KAAK,IAAIZ,KAAK,CAACZ,UAAf,IAA6BY,KAAK,CAACZ,UAAN,CAAiBjK,MAAjB,GAA0B,CAA3D,EAA8D;AACjEyL,qBAAK,GAAG,OAAI,CAACC,kBAAL,CAAwBb,KAAK,CAACZ,UAA9B,EAA0CwB,KAA1C,CAAR;AACD,eAFI,MAGA,IAAI,CAACZ,KAAK,CAACG,OAAX,EAAoB;AACvBS,qBAAK,GAAG,KAAR;AACA,uBAAOA,KAAP;AACD;AACF,aAXD;AAYA,mBAAOA,KAAP;AACD;AAED;;;;oDAC0BxB,U,EAA0B;AAClD,gBAAIwB,KAAK,GAAG,KAAZ;AACAA,iBAAK,GAAG,KAAKE,iBAAL,CAAuB1B,UAAvB,EAAmCwB,KAAnC,CAAR;AACA,mBAAOA,KAAP;AACD;AAED;;;;4CACkBxB,U,EAA4BwB,K,EAAc;AAAA;;AAC1DxB,sBAAU,CAAChI,OAAX,CAAmB,UAAC4I,KAAD,EAAyB;AAC1C,kBAAIY,KAAJ,EAAW;AACT,uBAAOA,KAAP;AACD,eAFD,MAGK,IAAI,CAACA,KAAD,IAAUZ,KAAK,CAACZ,UAAhB,IAA8BY,KAAK,CAACZ,UAAN,CAAiBjK,MAAjB,GAA0B,CAA5D,EAA+D;AAClEyL,qBAAK,GAAG,OAAI,CAACE,iBAAL,CAAuBd,KAAK,CAACZ,UAA7B,EAAyCwB,KAAzC,CAAR;AACD,eAFI,MAGA,IAAIZ,KAAK,CAACG,OAAV,EAAmB;AACtBS,qBAAK,GAAG,IAAR;AACA,uBAAOA,KAAP;AACD;AACF,aAXD;AAYA,mBAAOA,KAAP;AACD;AAED;;;;sCACYzB,I,EAAoB;AAC9B,gBAAIA,IAAI,CAACgB,OAAL,IAAgB,CAAE,KAAKpB,aAAN,CAAqBtN,GAArB,CAAyB0N,IAAI,CAAC5S,EAA9B,CAAjB,IAAsD4S,IAAI,CAACC,UAAL,CAAgBjK,MAAhB,KAA2B,CAArF,EAAwF;AACtF,mBAAK4J,aAAL,CAAmB0B,GAAnB,CAAuBtB,IAAI,CAAC5S,EAA5B;AACD,aAFD,MAEO,IAAI,CAAC4S,IAAI,CAACgB,OAAN,IAAiB,KAAKpB,aAAL,CAAmBtN,GAAnB,CAAuB0N,IAAI,CAAC5S,EAA5B,CAAjB,IAAoD4S,IAAI,CAACC,UAAL,CAAgBjK,MAAhB,KAA2B,CAAnF,EAAsF;AAC3F,mBAAK4J,aAAL,WAA0BI,IAAI,CAAC5S,EAA/B;AACD;;AACD,iBAAKoS,aAAL,CAAmBgC,iBAAnB,CAAqC,KAAK5B,aAA1C;AACD;;;wCAEa;AACZ,iBAAKa,kBAAL,CAAwBnQ,WAAxB;AACA,iBAAKgQ,iBAAL,CAAuBhQ,WAAvB;AACD;;;;;;;yBApKUiP,e,EAAe,8I,EAAA,mI,EAAA,+H;AAAA,O;;;cAAfA,e;AAAe,mC;AAAA,gB;AAAA,e;AAAA,yd;AAAA;AAAA;ACf5B;;AAEE;;AAYA;;AAqBF;;;;AAnCU,uGAA6B,aAA7B,EAA6B,eAA7B;;AAcc;;AAAA;;;;;;;;;wEDCXA,e,EAAe;gBAL3B,uDAK2B;iBALjB;AACThP,oBAAQ,EAAE,YADD;AAETC,uBAAW,EAAE,yBAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAKiB,U;;;;;;;;;;;;;;;;;;;;;;;;;;AEX5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;AC4CI;;AAAoE;;AAAK;;AAA6B;;;;;;AAExG;;AACE;;AACE;;AACA;;AACE;;AAAqE;;AAAO;;AAC5E;;AACF;;AACF;;AACF;;;;;;AANiH;;AAAA;;;;UDtCtGmR,e;AAOT,iCAAoBtK,cAApB,EAAmD;AAAA;;AAAA;;AAA/B,eAAAA,cAAA,GAAAA,cAAA;AAJpB,eAAAuK,IAAA,GAAe,ilRAAf;AAKI,eAAK/K,gBAAL,GAAwB,KAAKQ,cAAL,CAAoBvH,YAApB,CAAiCJ,SAAjC,CAA2C,UAACX,QAAD,EAAc;AAC7E,mBAAI,CAACe,YAAL,GAAoBf,QAApB;;AACA,gBAAIA,QAAJ,EAAc;AACV,qBAAI,CAACA,QAAL,GAAgBJ,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAhB;AACH,aAFD,MAEO;AACH,qBAAI,CAACG,QAAL,GAAgB,EAAhB;AACH;AACJ,WAPuB,CAAxB;AAQH;;;;qCAEU,CACV;;;wCAEa;AACV,iBAAK8H,gBAAL,CAAsBxG,WAAtB;AACH;;;;;;;yBAvBQsR,e,EAAe,gJ;AAAA,O;;;cAAfA,e;AAAe,sC;AAAA,gB;AAAA,e;AAAA,qhB;AAAA;AAAA;ACkCxB;;AAEF;;;;AAFK;;AAEA;;AAAA;;;;;;;;;wEDpCMA,e,EAAe;gBAN3B,uDAM2B;iBANjB;AACPrR,oBAAQ,EAAE,eADH;AAEPC,uBAAW,EAAC,yBAFL;AAGPC,qBAAS,EAAE,CAAC,yBAAD;AAHJ,W;AAMiB,U;;;;;;;;;;;;;;;;;;;;;;AEd5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACkCQ;;AAAoH;;AAAsB;;;;;;AAW1I;;AAAoH;;AAAsB;;;;UDhCrIqR,c;AAET,gCAAoBC,YAApB,EAAyC;AAAA;;AAArB,eAAAA,YAAA,GAAAA,YAAA;AADpB,eAAAC,KAAA,GAAQ,IAAR;AAEE,eAAKC,SAAL;AACD;;;;sCAEW;AACR,iBAAKD,KAAL,GAAa,KAAKD,YAAL,CAAkBpE,IAAlB,CAAuBuE,cAAvB,EAAsC,EAAtC,CAAb;AACH;;;;;;;yBARQJ,c,EAAc,oI;AAAA,O;;;cAAdA,c;AAAc,kC;AAAA,gB;AAAA,e;AAAA,8D;AAAA;;;;;wEAAdA,c,EAAc;gBAN1B,uDAM0B;iBANhB;AACPvR,oBAAQ,EAAE,WADH;AAEPC,uBAAW,EAAC,wBAFL;AAGPC,qBAAS,EAAE,CAAC,4BAAD;AAHJ,W;AAMgB,U;;;;;;;UAmBdyR,c;AAKT,gCAAoB1T,aAApB,EACoB8I,cADpB,EAEoByK,YAFpB,EAGoBI,MAHpB,EAGmC;AAAA;;AAHf,eAAA3T,aAAA,GAAAA,aAAA;AACA,eAAA8I,cAAA,GAAAA,cAAA;AACA,eAAAyK,YAAA,GAAAA,YAAA;AACA,eAAAI,MAAA,GAAAA,MAAA;AANpB,eAAAC,SAAA,GAAqB,KAArB;AACA,eAAAC,IAAA,GAAgB,IAAhB;AAKsC;;;;qCAE3B;AACP,iBAAKC,SAAL,GAAiB,IAAI,wDAAJ,CAAc;AAC3B,0BAAY,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWvQ,QAAjC,CADe;AAE3B,0BAAY,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWA,QAAjC;AAFe,aAAd,CAAjB;AAIH,W,CAED;;;;yCACe;AAAA;;AACX,gBAAI,CAAEnD,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAN,EAA2C;AACvC,kBAAI0T,WAAW,GAAG;AACdC,qBAAK,EAAE,KAAKF,SAAL,CAAe9P,GAAf,CAAmB,UAAnB,EAA+BgC,KADxB;AAEdiO,wBAAQ,EAAE,KAAKH,SAAL,CAAe9P,GAAf,CAAmB,UAAnB,EAA+BgC;AAF3B,eAAlB;AAIA,mBAAK4N,SAAL,GAAiB,KAAjB;AACA,mBAAK5T,aAAL,CAAmBO,IAAnB,CAAwB,OAAxB,EAAiCwT,WAAjC,EAA8C,UAACtT,IAAD,EAAe;AACzD,oBAAIA,IAAI,CAACI,GAAL,IAAYJ,IAAI,KAAK,EAAzB,EAA6B;AACzBK,yBAAO,CAACC,GAAR,CAAYN,IAAI,CAACI,GAAjB;AACA,yBAAI,CAAC+S,SAAL,GAAiB,IAAjB;;AACA,yBAAI,CAACE,SAAL,CAAe9P,GAAf,CAAmB,UAAnB,EAA+BmC,KAA/B;AACH,iBAJD,MAKK,IAAI1F,IAAI,CAACC,GAAT,EAAc;AACfN,gCAAc,CAACO,OAAf,CAAuB,UAAvB,EAAmCF,IAAI,CAACC,GAAxC;AACAJ,8BAAY,CAACK,OAAb,CAAqB,OAArB,EAA8BF,IAAI,CAACyT,KAAnC;AACA5T,8BAAY,CAACK,OAAb,CAAqB,UAArB,EAAiCF,IAAI,CAACC,GAAtC;;AACA,yBAAI,CAAC6S,YAAL,CAAkBY,UAAlB;;AACA,yBAAI,CAACrL,cAAL,CAAoBlI,OAApB;;AACA,yBAAI,CAAC+S,MAAL,CAAYS,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACH,iBAPI,MAOE;AACHtT,yBAAO,CAACC,GAAR,CAAY,YAAZ;AACH;AACJ,eAhBD;AAiBH,aAvBD,MAuBO;AACHX,4BAAc,CAACiU,UAAf,CAA0B,UAA1B;AACA,mBAAKC,YAAL;AACH;AACJ;;;wCAEU,CACP;AACH;;;;;;;yBAlDQZ,c,EAAc,yJ,EAAA,gJ,EAAA,oI,EAAA,uH;AAAA,O;;;cAAdA,c;AAAc,sC;AAAA,oFAHb,CAAC,yEAAD,EAAiB,mEAAjB,CAGa,E;AAHa,iB;AAAA,e;AAAA,48B;AAAA;AAAA;ACZxC;;AACA;;AAEA;;AACE;;AACE;;AAIA;AAAA,qBAAY,IAAAY,YAAA,EAAZ;AAA0B,aAA1B;;AAEE;;AAAwB;;AAAK;;AAC7B;;AAEA;;AACE;;AAA0B;;AAAiB;;AAC3C;;AACA;;AACF;;AAGA;;AACE;;AAA0B;;AAAQ;;AAClC;;AAKA;;AACA;;AAE4B;AAAA;AAAA;;AAC1B;;AAAU;;AAA0C;;AACtD;;AACF;;AACA;;AAAyF;;AAAK;;AAChG;;AACF;;AACF;;AACA;;AACA;;AACE;;AACE;;AAA6E;;AAAQ;;AACvF;;AACF;;;;AAlCI;;AAAA;;AAO0C;;AAAA;;AASpC;;AAAA;;AAEoC;;AAAA;;AAGa;;AAAA,qGAAmC,cAAnC,EAAmC,QAAnC;;AACvC;;AAAA;;;;;;;;;wEDjBPZ,c,EAAc;gBAP1B,uDAO0B;iBAPhB;AACP3R,oBAAQ,EAAE,eADH;AAEPC,uBAAW,EAAC,4BAFL;AAGPC,qBAAS,EAAE,CAAC,4BAAD,CAHJ;AAIPG,qBAAS,EAAC,CAAC,yEAAD,EAAiB,mEAAjB;AAJH,W;AAOgB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;AE7B3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACHA;;AAAwB;AAAA;;AAAA;;AAAA;AAAA;;AACpB;;AACJ;;;;UDSamS,e;AAIX,iCAAoBxU,cAApB,EACoBC,aADpB,EAEoB2T,MAFpB,EAEoC;AAAA;;AAAA;;AAFhB,eAAA5T,cAAA,GAAAA,cAAA;AACA,eAAAC,aAAA,GAAAA,aAAA;AACA,eAAA2T,MAAA,GAAAA,MAAA;AAClB,eAAKa,eAAL,GAAuB,KAAKzU,cAAL,CAAoBwB,YAApB,CAAiCJ,SAAjC,CAA2C,UAACC,CAAD;AAAA,mBAAgB,OAAI,CAACG,YAAL,GAAoBH,CAApC;AAAA,WAA3C,CAAvB;AACD;;;;qCAEO,CAEP,C,CAED;;;;mCACS;AAAA;;AACP,gBAAIhB,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAJ,EAAwC;AACtC,mBAAKL,aAAL,CAAmBO,IAAnB,CAAwB,QAAxB,EAAkCH,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAlC,EAAsE,UAACI,IAAD,EAAU;AAC9E,oBAAIA,IAAI,CAACC,GAAT,EAAc;AACZ,yBAAI,CAACX,cAAL,CAAoBa,OAApB;AACD;AACF,eAJD;AAKD;;AACDN,wBAAY,CAAC+T,UAAb,CAAwB,UAAxB;AACAjU,0BAAc,CAACY,KAAf;AACAS,kBAAM,CAACgC,QAAP,CAAgBgR,MAAhB;AACD;;;wCAEa;AACZ,iBAAKD,eAAL,CAAqB1S,WAArB;AACD;;;;;;;yBA9BUyS,e,EAAe,gJ,EAAA,yJ,EAAA,uH;AAAA,O;;;cAAfA,e;AAAe,mC;AAAA,gB;AAAA,e;AAAA,6K;AAAA;AAAA;ACX5B;;;;AAA2C;;;;;;;;;wEDW9BA,e,EAAe;gBAL3B,uDAK2B;iBALjB;AACTxS,oBAAQ,EAAE,YADD;AAETC,uBAAW,EAAE,yBAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAKiB,U;;;;;;;;;;;;;;;;;;;;;;;;;;AEX5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASayS,Y;AAIX,8BAAoB5L,cAApB,EAA2DjK,GAA3D,EAA2E;AAAA;;AAAvD,eAAAiK,cAAA,GAAAA,cAAA;AAAuC,eAAAjK,GAAA,GAAAA,GAAA;AAF3D,eAAA+B,OAAA,GAAmB,KAAKkI,cAAL,CAAoBlI,OAApB,EAAnB;AAE6E;;;;qCAErE;AACN,iBAAK/B,GAAL,CAAS8V,QAAT;AACD;;;;;;;yBARUD,Y,EAAY,gJ,EAAA,4I;AAAA,O;;;cAAZA,Y;AAAY,gC;AAAA,gB;AAAA,e;AAAA,6H;AAAA;AAAA;ACTzB;;AACA;;;;;;;;wEDQaA,Y,EAAY;gBANxB,uDAMwB;iBANd;AACT3S,oBAAQ,EAAE,SADD;AAETC,uBAAW,EAAE,sBAFJ;AAGTC,qBAAS,EAAE,CAAC,sBAAD;AAHF,W;AAMc,U;;;;;;;;;;;;;;;;;;;;;;;;AERzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACKI;;AACI;;AACA;;AAA8C;;AAAsB;;AACxE;;;;;;AAFS;;AAAA;;;;UDEA2S,kB;AAKX,oCAAoBC,WAApB,EAA8C;AAAA;;AAA1B,eAAAA,WAAA,GAAAA,WAAA;AAA6B;;;;qCAEzC;AACN,iBAAKxR,IAAL,GAAY,IAAI,wDAAJ,CAAc;AACxByR,qBAAO,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,EAAtB;AADe,aAAd,CAAZ;AAGD;;;wCAEa/P,K,EAAc;AAAA;;AAC1B,gBAAMC,IAAI,GAAID,KAAK,CAACE,MAAN,CAAkCC,KAAlC,CAAwC,CAAxC,CAAd;AACA,iBAAK7B,IAAL,CAAU8B,UAAV,CAAqB;AAAC2P,qBAAO,EAAE9P;AAAV,aAArB;AACA,iBAAK3B,IAAL,CAAUW,GAAV,CAAc,SAAd,EAAyBoB,sBAAzB;AACA,gBAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,kBAAM,CAACE,MAAP,GAAgB,YAAM;AACpB,qBAAI,CAACZ,YAAL,GAAoBU,MAAM,CAACG,MAAP,CAAciC,QAAd,EAApB;AACD,aAFD;;AAGA3G,mBAAO,CAACC,GAAR,CAAY,KAAKsC,IAAjB;AACAgC,kBAAM,CAACI,aAAP,CAAqBT,IAArB;AACD;;;qCAEU;AACT,gBAAI+P,SAAS,GAAG,IAAIC,QAAJ,EAAhB;AACAD,qBAAS,CAACE,MAAV,CAAiB,UAAjB,EAA6B7U,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAA7B;AACA0U,qBAAS,CAACE,MAAV,CAAiB,OAAjB,EAA0B,KAAK5R,IAAL,CAAU2C,KAAV,CAAgB8O,OAA1C,EAAmD,gBAAnD;AACA,iBAAKD,WAAL,CAAiB1Q,IAAjB,CAAsB,sBAAtB,EAA8C4Q,SAA9C,EAAyD1W,IAAzD,CAA8D,UAACqC,GAAD,EAAS;AACrEI,qBAAO,CAACC,GAAR,CAAY,sCAAZ,EADqE,CAErE;AACD,aAHD,WAGS,UAACF,GAAD,EAAS;AAChBC,qBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,aALD;AAMD;;;;;;;yBAnCU+T,kB,EAAkB,0I;AAAA,O;;;cAAlBA,kB;AAAkB,sC;AAAA,iB;AAAA,e;AAAA,gW;AAAA;AAAA;;;ACR/B;;AAAI;;AAAsB;;AAE1B;;AAAyB;AAAA,qBAAY,IAAAzM,QAAA,EAAZ;AAAsB,aAAtB;;AACrB;;AAAoD;AAAA;;AAAA;;AAAA,qBAAS,WAAT;AAA2B,aAA3B;;AAA6B;;AAAsB;;AACvG;;AAAgE;AAAA,qBAAU,IAAA+M,aAAA,QAAV;AAA+B,aAA/B;;AAAhE;;AACA;;AAIJ;;AAGA;;AAAI;;AAAkB;;;;AAVhB;;AAAA;;AAGyB;;AAAA;;;;;;;;;wEDGlBN,kB,EAAkB;gBAL9B,uDAK8B;iBALpB;AACT7S,oBAAQ,EAAE,eADD;AAETC,uBAAW,EAAE,4BAFJ;AAGTC,qBAAS,EAAE,CAAC,4BAAD;AAHF,W;AAKoB,U;;;;;;;;;;;;;;;;;;;;;;AER/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAEO,UAAM0E,QAAQ,GAAG,SAAXA,QAAW,CACtBC,OADsB,EAEmD;AACzE,YAAI,OAAOA,OAAO,CAACZ,KAAf,KAA0B,QAA9B,EAAwC;AACtC,iBAAO,gDAAG,IAAH,CAAP;AACD;;AACD,YAAMhB,IAAI,GAAG4B,OAAO,CAACZ,KAArB;AACA,YAAMa,UAAU,GAAG,IAAIvB,UAAJ,EAAnB;AACA,YAAMwB,KAAK,GAAG,gDAAWC,MAAX,CACZ,UAACC,QAAD,EAAgD;AAC9CH,oBAAU,CAACI,gBAAX,CAA4B,SAA5B,EAAuC,YAAM;AAC3C,gBAAMC,GAAG,GAAG,IAAIC,UAAJ,CAA4BN,UAAU,CAACrB,MAAvC,EAA+C4B,QAA/C,CAAwD,CAAxD,EAA2D,CAA3D,CAAZ;AACA,gBAAIC,MAAM,GAAG,EAAb;AACA,gBAAIC,OAAO,GAAG,KAAd;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,GAAG,CAACM,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnCF,oBAAM,IAAIH,GAAG,CAACK,CAAD,CAAH,CAAOE,QAAP,CAAgB,EAAhB,CAAV;AACD;;AACD,oBAAQJ,MAAR;AACE,mBAAK,UAAL;AACEC,uBAAO,GAAG,IAAV;AACA;;AACF,mBAAK,UAAL;AACA,mBAAK,UAAL;AACA,mBAAK,UAAL;AACA,mBAAK,UAAL;AACA,mBAAK,UAAL;AACEA,uBAAO,GAAG,IAAV;AACA;;AACF;AACEA,uBAAO,GAAG,KAAV,CADF,CACmB;;AACjB;AAbJ;;AAeA,gBAAIA,OAAJ,EAAa;AACXN,sBAAQ,CAACU,IAAT,CAAc,IAAd;AACD,aAFD,MAEO;AACLV,sBAAQ,CAACU,IAAT,CAAc;AAAEC,+BAAe,EAAE;AAAnB,eAAd;AACD;;AACDX,oBAAQ,CAACY,QAAT;AACD,WA5BD;AA6BAf,oBAAU,CAACgB,iBAAX,CAA6B7C,IAA7B;AACD,SAhCW,CAAd;AAkCA,eAAO8B,KAAP;AACD,OA3CM;;;;;;;;;;;;;;;;;ACHP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACMQ;;;;;;;;;AAAiE,qGAA0B,UAA1B,EAA0B,WAA1B,EAA0B,eAA1B,EAA0B,mBAA1B;;;;;;AAY7D;;AACI;;AACJ;;;;;;AADS;;AAAA,4JAAoB,KAApB,EAAoB,uBAApB;;;;;;AAGT;;AAA+E;;AAAM;;;;;;AAI7F;;AACI;;AACJ;;;;;;;;AAzBA;;AAGI;;AACA;;AACI;;AAA+B;AAAA;;AAAA;;AAAA;AAAA;;AAAqB;;AAAc;;AACtE;;AAGA;;AAAyB;AAAA;;AAAA;;AAAA;AAAA;;AACrB;;AACI;;AAA6C;AAAA;;AAAA;;AAAA,mBAAS,WAAT;AAA2B,WAA3B;;AAA6B;;AAAsB;;AAChG;;AAA8C;AAAA;;AAAA;;AAAA;AAAA;;AAA9C;;AACJ;;AAEA;;AAIA;;AACJ;;AAGJ;;AAGA;;AAAkC;AAAA;;AAAA;;AAAA;AAAA;;AAAmB;;AAAI;;AAC7D;;;;;;AAxBsB;;AAAA;;AAMR;;AAAA;;AAMyB;;AAAA;;AAInB;;AAAA;;AAIX;;AAAA;;;;UDZIqO,gB;AAeX,kCAAoBtM,aAApB,EACoBC,cADpB,EAEoBsM,MAFpB,EAGoBP,WAHpB,EAG8C;AAAA;;AAH1B,eAAAhM,aAAA,GAAAA,aAAA;AACA,eAAAC,cAAA,GAAAA,cAAA;AACA,eAAAsM,MAAA,GAAAA,MAAA;AACA,eAAAP,WAAA,GAAAA,WAAA;AAA6B;;;;qCAEzC;AACN;AACA,iBAAKQ,UAAL;AACA,iBAAKhS,IAAL,GAAY,IAAI,wDAAJ,CAAc;AACxBM,mBAAK,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAC3BL,0BAAU,EAAE,CAAC,0DAAWC,QAAZ,CADe;AAE3BK,+BAAe,EAAE,CAAC,6DAAD;AAFU,eAAtB;AADiB,aAAd,CAAZ;AAMD;;;uCAEY;AAAA;;AACX,iBAAKiR,WAAL,CAAiB7Q,GAAjB,CAAqB,OAArB,EAA8B,IAA9B,EAAoC3F,IAApC,CAAyC,UAACqC,GAAD,EAAc;AACrD,qBAAI,CAAC4U,IAAL,GAAa;AAAA,oBAAE9U,QAAF,QAAEA,QAAF;AAAA,oBAAYyT,QAAZ,QAAYA,QAAZ;AAAA,oBAAsBD,KAAtB,QAAsBA,KAAtB;AAAA,oBAA6BuB,SAA7B,QAA6BA,SAA7B;AAAA,oBAAwCC,QAAxC,QAAwCA,QAAxC;AAAA,oBAAkDC,SAAlD,QAAkDA,SAAlD;AAAA,oBAA6DC,MAA7D,QAA6DA,MAA7D;AAAA,uBACR;AAAClV,0BAAQ,EAARA,QAAD;AAAWyT,0BAAQ,EAARA,QAAX;AAAqBD,uBAAK,EAALA,KAArB;AAA4BuB,2BAAS,EAATA,SAA5B;AAAuCC,0BAAQ,EAARA,QAAvC;AAAiDC,2BAAS,EAATA,SAAjD;AAA4DC,wBAAM,EAANA;AAA5D,iBADQ;AAAA,eAAD,CAC+DhV,GAAG,CAACP,IAAJ,CAAS,CAAT,CAD/D,CAAZ,CADqD,CAIrD;;;AACA,qBAAI,CAACwV,UAAL,GAAkBxW,MAAM,CAACV,IAAP,CAAY,OAAI,CAAC6W,IAAjB,CAAlB;AACA,qBAAI,CAACM,MAAL,GAAczW,MAAM,CAACyW,MAAP,CAAc,OAAI,CAACN,IAAnB,CAAd,CANqD,CAQrD;;AACA,qBAAI,CAACK,UAAL,CAAgBnI,KAAhB;;AACA,qBAAI,CAACoI,MAAL,CAAYpI,KAAZ;AACD,aAXD,WAWS,UAAC3M,GAAD,EAAS;AAChBC,qBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,aAbD;AAcD,W,CAED;;;;qCACW;AAAA;;AACP,iBAAKuU,MAAL,CAAYhB,QAAZ,CAAqB,CAAC,IAAD,CAArB;AACA,iBAAKvL,aAAL,CAAmBtI,IAAnB,CAAwB,YAAxB,EAAsCH,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAtC,EAA0E,UAACI,IAAD,EAAU;AACpF,kBAAIA,IAAI,CAACI,GAAT,EAAc;AACZC,uBAAO,CAACC,GAAR,CAAYN,IAAI,CAACI,GAAjB;AACD,eAFD,MAEO;AACLC,uBAAO,CAACC,GAAR,CAAYN,IAAI,CAACC,GAAjB;AACAJ,4BAAY,CAAC+T,UAAb,CAAwB,UAAxB;AACAjU,8BAAc,CAACiU,UAAf,CAA0B,UAA1B;;AACA,uBAAI,CAACvL,cAAL,CAAoBlI,OAApB;;AACAa,sBAAM,CAACgC,QAAP,CAAgBgR,MAAhB;AACA3T,uBAAO,CAACC,GAAR,CAAY,iBAAZ;AACD;AACF,aAXC;AAYH,W,CAED;;;;wCACcgE,K,EAAc;AAAA;;AAC1B,gBAAMC,IAAI,GAAID,KAAK,CAACE,MAAN,CAAkCC,KAAlC,CAAwC,CAAxC,CAAd;AACA,iBAAK7B,IAAL,CAAU8B,UAAV,CAAqB;AAAExB,mBAAK,EAAEqB;AAAT,aAArB;AACA,iBAAK3B,IAAL,CAAUW,GAAV,CAAc,OAAd,EAAuBoB,sBAAvB;AACA,gBAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,kBAAM,CAACE,MAAP,GAAgB,YAAM;AACpB,qBAAI,CAACZ,YAAL,GAAoBU,MAAM,CAACG,MAA3B;AACD,aAFD;;AAGAH,kBAAM,CAACI,aAAP,CAAqBT,IAArB;AACD,W,CAED;;;;qCACW;AACT,gBAAI,KAAK3B,IAAL,CAAUuC,OAAd,EAAuB;AACrB;AACD;;AACD,gBAAIiQ,QAAQ,GAAG,IAAIb,QAAJ,EAAf;AACAa,oBAAQ,CAACZ,MAAT,CAAgB,OAAhB,EAAyB,KAAK5R,IAAL,CAAU2C,KAAV,CAAgBrC,KAAzC;AACAkS,oBAAQ,CAACZ,MAAT,CAAgB,UAAhB,EAA4B3U,YAAY,CAACD,OAAb,CAAqB,UAArB,CAA5B;AACA,iBAAKwU,WAAL,CAAiB1Q,IAAjB,CAAsB,sBAAtB,EAA8C0R,QAA9C,EACExX,IADF,CACO,UAACqC,GAAD,EAAc,CAEpB,CAHD,WAGS,UAACG,GAAD,EAAS;AAChBC,qBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,aALD;AAMA,iBAAKwC,IAAL,CAAU8C,KAAV;AACD,W,CAED;;;;mCACS;AACP,iBAAKqE,WAAL;AACD;;;wCAEa;AACZ,iBAAK4K,MAAL,CAAYhB,QAAZ,CAAqB,CAAC,IAAD,CAArB;AACD;;;;;;;yBArGUe,gB,EAAgB,yJ,EAAA,gJ,EAAA,uH,EAAA,0I;AAAA,O;;;cAAhBA,gB;AAAgB,oC;AAAA,gB;AAAA,e;AAAA,kpB;AAAA;AAAA;ACd7B;;AAGI;;AAHJ;;;;AAGS;;AAAA;;;;;;;;;wEDWIA,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTpT,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAKkB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEX7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACDI;;AACI;;;;AACA;;AACA;;AACJ;;;;;;AAHI;;AAAA;;AAEA;;AAAA;;;;;;AAQI;;AACI;;AAA8B;;;;AAA8B;;AAC5D;;AACJ;;;;;;AAFkC;;AAAA;;;;;;AAMlC;;AACI;;;;AACA;;AACJ;;;;;;AAFI;;AAAA;;;;;;AAKJ;;;;;;;;;;;;;;;;;;;;;;;;AAGA;;AACI;;AAC4D;AAAA;;AAAA;;AAAA;AAAA;;AAD5D;;AAEA;;AACI;;AACA;AAAA;;AAAA;;AAAA,mBAAS,aAAT;AAAmB,WAAnB;;AAAmC;;AAAU;;AAAc;;AAAW;;AAC1E;;AACJ;;;;;;AANW;;AAAA,qJAA0C,SAA1C,EAA0C,qEAA1C,EAA0C,SAA1C,EAA0C,YAA1C;;;;;;AASX;;AACI;;AAEE;;AAA6C;;AAAI;;AACjD;;AAA+C;;AAAM;;AACrD;;AAA8C;;AAAK;;AACrD;;AACJ;;;;;;AAGJ;;AAA8D;;AAAO;;;;;;;;AACrE;;AAA2D;AAAA;;AAAA;;AAAA;AAAA;;AAAoB;;AAAM;;;;;;;;AAzCzF;;AAAgD;AAAA;;AAAA;;AAAA;AAAA;;AAC5C;;AAGI;;AAMA;;AAA8B;;;;AAA8B;;AAC5D;;AAMA;;AAGA;;AAUA;;AASJ;;AACA;;AACA;;AACJ;;;;;;AA1CuB;;AAIV;;AAAA;;AAMyB;;AAAA;;AACzB;;AAAA;;AAME;;AAAA;;AAGF;;AAAA;;AAUA;;AAAA;;AAUD;;AAAA;;AACA;;AAAA;;;;;;;;AAEZ;;AAAiD;AAAA;;AAAA;;AAAA;AAAA;;AAAoB;;;;AAAiC;;;;;;AAAjC;;AAAA;;;;UDxC5D6T,iB;AAUX,mCACUjB,WADV,EACoC;AAAA;;AAA1B,eAAAA,WAAA,GAAAA,WAAA;AAA6B;;;;qCAE/B;AAEN;AACA,gBAAI,KAAKkB,QAAL,IAAiB,OAArB,EAA8B;AAC5B,mBAAKC,UAAL,GAAkB,IAAI,wDAAJ,CAAc;AAC9B,oCAAoB,IAAI,0DAAJ,CAAgB,KAAKC,aAArB,EAAoC,CAAC,0DAAW1S,QAAZ,EAAsB,0DAAWyQ,KAAjC,CAApC;AADU,eAAd,CAAlB;AAGD,aAJD,MAIO,IAAI,KAAK+B,QAAL,IAAiB,UAArB,EAAiC;AACtC,mBAAKE,aAAL,GAAqB,UAArB;AACA,mBAAKD,UAAL,GAAkB,IAAI,wDAAJ,CAAc;AAC9B,+BAAe,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWzS,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB,CAAtB,CADe;AAE9B,oCAAoB,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWD,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB,CAAtB;AAFU,eAAd,CAAlB;AAID,aANM,MAMA;AAAE;AACP,kBAAI,KAAKuS,QAAL,IAAiB,WAArB,EAAkC;AAChC,qBAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBxI,KAAnB,CAAyB,CAAzB,EAA4B,EAA5B,CAArB;AACD;;AACD,mBAAKuI,UAAL,GAAkB,IAAI,wDAAJ,CAAc;AAC9B,oCAAoB,IAAI,0DAAJ,CAAgB,KAAKC,aAArB,EAAoC,CAAC,0DAAW1S,QAAZ,CAApC;AADU,eAAd,CAAlB;AAGD;AACF,W,CAED;;;;oCACO;AACL,iBAAK2S,QAAL,GAAgB,CAAC,KAAKA,QAAtB;AACD,W,CAED;;;;qCACQ;AACN,gBAAMC,eAAe,GAAG;AACtB3V,sBAAQ,EAAE,KAAKA,QADO;AAEtBuV,sBAAQ,EAAE,KAAKA,QAFO;AAGtBK,yBAAW,EAAE,KAAKJ,UAAL,CAAgBhS,GAAhB,CAAoB,kBAApB,EAAwCgC;AAH/B,aAAxB;;AAMA,gBAAI,KAAKgQ,UAAL,CAAgBK,KAApB,EAA2B;AACzB,mBAAKzQ,OAAL,GAAe,KAAf;;AAEA,kBAAI,KAAKmQ,QAAL,IAAiB,UAArB,EAAiC,CAC/B;AACD,eAFD,MAEO,IAAI,KAAKA,QAAL,IAAiB,WAArB,EAAkC;AACvCI,+BAAe,CAACC,WAAhB,GAA8B,mCAAM,CAACD,eAAe,CAACC,WAAjB,CAApC;AACD;;AAED,mBAAKvB,WAAL,CAAiByB,KAAjB,CAAuB,YAAvB,EAAqCH,eAArC,EAAsD9X,IAAtD,CAA2D,UAACqC,GAAD,EAAS;AAClEI,uBAAO,CAACC,GAAR,CAAYL,GAAZ;AACAe,sBAAM,CAACgC,QAAP,CAAgBgR,MAAhB;AACD,eAHD,WAGS,UAAC5T,GAAD,EAAS;AAChBC,uBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,eALD;AAMD,aAfD,MAeO;AACL,mBAAK+E,OAAL,GAAe,IAAf;AACD;AACF;;;;;;;yBAnEUkQ,iB,EAAiB,0I;AAAA,O;;;cAAjBA,iB;AAAiB,qC;AAAA;AAAA;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,mqC;AAAA;AAAA;ACZ9B;;AAEI;;AAOA;;AA2CA;;AACJ;;;;AAnDQ;;AAAA;;AAOE;;AAAA;;AA2CE;;AAAA;;;;;;;;;;wEDxCCA,iB,EAAiB;gBAL7B,uDAK6B;iBALnB;AACT/T,oBAAQ,EAAE,cADD;AAETC,uBAAW,EAAE,2BAFJ;AAGTC,qBAAS,EAAE,CAAC,2BAAD;AAHF,W;AAKmB,U;;;;;;kBAC3B;;;kBACA;;;kBACA;;;;;;;;;;;;;;;;;;;;AEZH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACmBY;;AAAmD;;AAAM;;;;;;;;AAH7D;;AACI;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACA;;AACA;;AACJ;;;;;;;;AAFI;;AAAA;;AACiC;;AAAA;;;;;;AAT7C;;AACI;;AACI;;AACJ;;AACA;;AACA;;AACI;;AAKJ;;AACA;;AACJ;;;;;;;;;AAb6B;;AAErB;;AAAA;;AAIU;;AAAA;;;;;;;;AAUd;;AAA6C;AAAA;;AAAA;;AAAA;AAAA;;AAAoB;;AAAK;;;;UDP7DsU,wB;AAoBX,0CAAoBtW,UAApB,EACoBuW,IADpB,EAEoB/G,WAFpB,EAE8C;AAAA;;AAF1B,eAAAxP,UAAA,GAAAA,UAAA;AACA,eAAAuW,IAAA,GAAAA,IAAA;AACA,eAAA/G,WAAA,GAAAA,WAAA;AApBpB,eAAAgH,oBAAA,GAA+B,UAA/B;AACA,eAAAC,qBAAA,GAAgC,sBAAhC;AAIA,eAAAC,SAAA,GAA6B,CAC3B;AAACnY,gBAAI,EAAC,IAAN;AAAYoY,qBAAS,EAAE,eAAvB;AAAwCC,kBAAM,EAAE;AAAhD,WAD2B,EAE3B;AAACrY,gBAAI,EAAC,IAAN;AAAYoY,qBAAS,EAAE,eAAvB;AAAwCC,kBAAM,EAAE;AAAhD,WAF2B,EAG3B;AAACrY,gBAAI,EAAC,IAAN;AAAYoY,qBAAS,EAAE,QAAvB;AAAiCC,kBAAM,EAAE;AAAzC,WAH2B,EAI3B;AAACrY,gBAAI,EAAC,IAAN;AAAYoY,qBAAS,EAAE,MAAvB;AAA+BC,kBAAM,EAAE;AAAvC,WAJ2B,EAK3B;AAACrY,gBAAI,EAAC,IAAN;AAAYoY,qBAAS,EAAE,QAAvB;AAAiCC,kBAAM,EAAE;AAAzC,WAL2B,EAM3B;AAACrY,gBAAI,EAAC,IAAN;AAAYoY,qBAAS,EAAE,SAAvB;AAAkCC,kBAAM,EAAE;AAA1C,WAN2B,EAO3B;AAACrY,gBAAI,EAAC,IAAN;AAAYoY,qBAAS,EAAE,YAAvB;AAAqCC,kBAAM,EAAE;AAA7C,WAP2B,CAA7B;AASA,eAAA9T,SAAA,GAAqB,IAArB;AAOC;;;;qCAEU,CACV;;;+CAEoB;AAAA;;AACnB;AACA,iBAAK+T,iBAAL,GAAyB,KAAK7W,UAAL,CAAgB8W,aAAhB,CAA8B5V,SAA9B,CAAwC,UAACC,CAAD,EAAiC;AAChG,kBAAI,OAAI,CAAC4V,cAAL,IAAuB,OAAI,CAAC/R,MAAL,IAAe,OAAI,CAAC+R,cAA/C,EAA+D;AAC7D,oBAAI5V,CAAC,CAAC2K,GAAF,IAAS,IAAb,EAAmB;AACjB,yBAAI,CAACyK,IAAL,CAAUxS,GAAV,CACE,2EAAYiT,MAAZ,CAAmBC,SAAnB,CAA6BxJ,MAA7B,CAAoC,GAApC,EAAyCtM,CAAC,CAAC2K,GAAF,CAAMtE,QAAN,EAAzC,EAA2D,GAA3D,EAAgErG,CAAC,CAAC6K,GAAF,CAAMxE,QAAN,EAAhE,EAAkF,OAAlF,CADF,EAEE;AACE0P,2BAAO,EAAE,EADX;AAEErL,0BAAM,EAAE;AACNsL,kCAAY,EAAE,2EAAYH,MAAZ,CAAmB/C,KAD3B;AAENmD,2BAAK,EAAE,+BAFD;AAGNC,8BAAQ,EAAE,2EAAYA;AAHhB;AAFV,mBAFF,EAWCnW,SAXD,CAWW,UAAC+G,QAAD,EAAc;AACvB,wBAAIA,QAAQ,CAACgE,QAAT,CAAkB,CAAlB,CAAJ,EAA0B;AACxB,0BAAIqL,SAAS,GAAGrP,QAAQ,CAACgE,QAAT,CAAkB,CAAlB,EAAqBsL,UAArC;;AACA,0BAAIC,IAAI,GAAG,OAAI,CAACC,mBAAL,CAAyBvL,YAAzB,CAAsCoL,SAAtC,EAAiD,CAAjD,CAAX;;AACA,6BAAI,CAACI,MAAL,CAAYzP,QAAQ,CAACgE,QAAT,CAAkBhE,QAAQ,CAACgE,QAAT,CAAkB1E,MAAlB,GAA0B,CAA5C,EAA+C4E,UAA/C,CAA0DwL,UAA1D,CAAqEC,WAArE,EAAZ,EACGxZ,IADH,CACQ,UAAC2H,KAAD,EAAgB;AACpB,4BAAI4Q,SAAS,GAAG5Q,KAAK,CAAC4Q,SAAtB;;AACA,+BAAI,CAACD,SAAL,CAAelN,OAAf,CAAuB,UAACuD,OAAD,EAAa;AAClC,8BAAIA,OAAO,CAACxO,IAAR,KAAiBoY,SAAjB,IAA8B,CAAC5J,OAAO,CAAC6J,MAAR,CAAeiB,QAAf,CAAwBL,IAAxB,CAAnC,EAAkE;AAChEzK,mCAAO,CAAC6J,MAAR,CAAevQ,IAAf,CAAoBmR,IAApB;;AACA,mCAAI,CAACxX,UAAL,CAAgB8X,UAAhB,CAA2B,OAAI,CAAC9S,MAAhC,EAAwC;AACtCU,kCAAI,EAAE8R,IADgC;AAEtC/T,qCAAO,EAAC;AACN4I,wCAAQ,EAAC;AACPC,6CAAW,EAAErE,QAAQ,CAAC8P;AADf;AADH;AAF8B,6BAAxC;AAQD;AACF,yBAZD;AAcD,uBAjBH,WAkBS,UAACnX,GAAD,EAAS;AACdC,+BAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,uBApBH;AAqBD;AACF,mBArCD,EAqCG,UAACA,GAAD,EAAS;AACVC,2BAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,mBAvCD;AAwCD;AACF;AACF,aA7CwB,CAAzB;AA8CD;;;4CAEiB;AAAA;;AAChB,iBAAKoX,eAAL,GAAuB,KAAKP,mBAAL,CAAyBvU,aAAzB,CAAuChC,SAAvC,CAAiD,UAAAuC,OAAO,EAAI;AACjF,kBAAIA,OAAJ,EAAa;AACX;AACA,oBAAI+T,IAAI,GAAG,OAAI,CAACC,mBAAL,CAAyBvL,YAAzB,CAAsCzI,OAAO,CAACiC,IAA9C,EAAoD,CAApD,CAAX;;AACA,oBAAIuS,WAAW,GAAKxU,OAAO,CAACiC,IAAR,CAAasF,KAAb,CAAmB,IAAnB,CAAD,CAA2BvH,OAAO,CAACiC,IAAR,CAAasF,KAAb,CAAmB,IAAnB,EAAyBzD,MAAzB,GAAkC,CAA7D,CAAD,CAAkE2Q,SAAlE,CAA4E,CAA5E,CAAlB;AACA,oBAAI3Z,IAAI,GAAG,6DAAQ0Z,WAAR,CAAX;;AACA,uBAAI,CAACP,MAAL,CAAYnZ,IAAZ,EACCH,IADD,CACM,UAAC2H,KAAD,EAAgB;AACpB,sBAAI4Q,SAAS,GAAG5Q,KAAK,CAAC4Q,SAAtB;;AACA,yBAAI,CAACD,SAAL,CAAelN,OAAf,CAAuB,UAACuD,OAAD,EAAa;AAClC,wBAAIA,OAAO,CAACxO,IAAR,KAAiBoY,SAAjB,IAA8B,CAAC5J,OAAO,CAAC6J,MAAR,CAAeiB,QAAf,CAAwBL,IAAxB,CAAnC,EAAkE;AAChEzK,6BAAO,CAAC6J,MAAR,CAAevQ,IAAf,CAAoBmR,IAApB;AACD;AACF,mBAJD;AAKD,iBARD,WASO,UAAC5W,GAAD,EAAS;AACdC,yBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,iBAXD,EALW,CAkBX;;;AACA6C,uBAAO,CAACiC,IAAR,GAAe,OAAI,CAAC+R,mBAAL,CAAyBvL,YAAzB,CAAsCzI,OAAO,CAACiC,IAA9C,EAAoD,CAApD,CAAf;;AACA,uBAAI,CAAC1F,UAAL,CAAgB8X,UAAhB,CAA2B,OAAI,CAAC9S,MAAhC,EAAwCvB,OAAxC;AACD;AAEF,aAxBsB,CAAvB;AAyBD,W,CAED;;;;iCACOlF,I,EAAc;AACnB,mBAAO,IAAIL,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,kBAAIpS,KAAK,GAAG7G,MAAM,CAACV,IAAP,CAAY,wDAAZ,EAAqC4Z,IAArC,CAA0C,UAAAlO,GAAG,EAAI;AAC3D,oBAAGA,GAAG,KAAK3L,IAAX,EAAiB;AACfJ,yBAAO,CAAC,yDAAwB+L,GAAxB,CAAD,CAAP;AACD;AACF,eAJW,CAAZ;;AAKA,kBAAG,CAACnE,KAAJ,EAAW;AACToS,sBAAM,CAAC,WAAD,CAAN;AACD;AACF,aATM,CAAP;AAUD,W,CAED;;;;mCACSE,K,EAAe9R,K,EAAe;AACrC,gBAAI+R,SAAS,GAAG,KAAK5B,SAAL,CAAenQ,KAAf,EAAsBqQ,MAAtC;AACA0B,qBAAS,CAAC7R,MAAV,CAAiB6R,SAAS,CAAC9R,OAAV,CAAkB6R,KAAlB,CAAjB,EAA2C,CAA3C;AACA,iBAAKrY,UAAL,CAAgBuY,YAAhB,CAA6BF,KAA7B,EAAoC,KAAKrT,MAAzC;AACD;;;oCAES;AACR,iBAAK0R,SAAL,CAAelN,OAAf,CAAuB,UAAAuD,OAAO,EAAI;AAChCA,qBAAO,CAAC6J,MAAR,GAAiB,EAAjB;AACD,aAFD;AAGA,iBAAK5W,UAAL,CAAgBuY,YAAhB,CAA6B,EAA7B,EAAiC,IAAjC,EAAuC,IAAvC;AACD,W,CAED;;;;qCACQ;AAAA;;AACN,mBAAO,IAAIra,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAAC3I,WAAL,CAAiB6G,KAAjB,CAAuB,YAAvB,EAAqC;AACnC9V,wBAAQ,EAAEF,YAAY,CAACD,OAAb,CAAqB,UAArB,EAAiCoH,QAAjC,EADyB;AAEnCsO,wBAAQ,EAAG,OAAI,CAAC9Q,MAAL,IAAe,CAAhB,GAAoB,SAApB,GAA8B,UAFL;AAGnCmR,2BAAW,EAAE,OAAI,CAACO;AAHiB,eAArC,EAKCtY,IALD,CAKM,UAAC6J,QAAD,EAAc;AAClB9J,uBAAO,CAAC8J,QAAD,CAAP;AACD,eAPD,WAQO,UAAArH,GAAG,EAAI;AACZuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eAVD;AAWD,aAZM,CAAP;AAcD;;;wCAEa;AACZ,iBAAKiW,iBAAL,CAAuBhV,WAAvB;AACA,iBAAKmW,eAAL,CAAqBnW,WAArB;AACD;;;;;;;yBA3JUyU,wB,EAAwB,4I,EAAA,gI,EAAA,mI;AAAA,O;;;cAAxBA,wB;AAAwB,6C;AAAA;AAAA;;;;;;;;;;;;;;;;;;;ACtBrC;;AAEI;;AACA;;AACI;;AAAM;;AAAQ;;AAAE;;AAAS;;AAC7B;;AACA;;AACI;;AAAmB;;AAAM;;AAAgB;;AAAO;;AACpD;;AACJ;;AAIA;;AAcA;;AACA;;AACI;;AACJ;;AACA;;;;AA7B6C;;AAAA,6GAAmC,aAAnC,EAAmC,yBAAnC,EAAmC,eAAnC,EAAmC,IAAnC,EAAmC,mBAAnC,EAAmC,KAAnC;;AAWgC;;AAAA;;AAgBtD;;AAAA;;;;;;;;;wEDPVA,wB,EAAwB;gBALpC,uDAKoC;iBAL1B;AACTxU,oBAAQ,EAAE,sBADD;AAETC,uBAAW,EAAE,mCAFJ;AAGTC,qBAAS,EAAE,CAAC,mCAAD;AAHF,W;AAK0B,U;;;;;;;;;;kBAClC,uD;mBAAU,Y;;;kBAIV;;;kBACA;;;;;;;;;;;;;;;;;;;;AE1BH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;ACAI;;AAAU;;AAAK;;;;;;AAqBb;;AAAoC;;AAAyC;;;;;;AAC7E;;AAAuD;;AAAkB;;;;UDJlEwW,4B;AA0BX,8CAAoBC,YAApB,EACoBzY,UADpB,EAEoBF,cAFpB,EAGoBqV,MAHpB,EAGoC;AAAA;;AAHhB,eAAAsD,YAAA,GAAAA,YAAA;AACA,eAAAzY,UAAA,GAAAA,UAAA;AACA,eAAAF,cAAA,GAAAA,cAAA;AACA,eAAAqV,MAAA,GAAAA,MAAA;AAlBpB,eAAAuD,QAAA,GAAoB,IAApB;AAGQ,eAAAC,eAAA,GAAuD,IAAI,oDAAJ,CAAoB;AACjF3T,kBAAM,EAAE,CADyE;AAEjFsH,uBAAW,EAAE;AAFoE,WAApB,CAAvD;AAIqB,eAAAyK,cAAA,GAAiD,KAAK4B,eAAL,CAAqBnN,YAArB,EAAjD;AAK7B,eAAAoN,QAAA,GAAoB,KAApB;AACA,eAAAC,MAAA,GAAkB,KAAlB;AAKuC;;;;qCAE/B;AAAA;;AACN,iBAAKC,cAAL,GAAsB,KAAKL,YAAL,CAAkBM,KAAlB,CAAwB;AAC5CC,uBAAS,EAAE,CAAC,EAAD;AADiC,aAAxB,CAAtB;AAGA,iBAAKC,eAAL,GAAuB,KAAKR,YAAL,CAAkBM,KAAlB,CAAwB;AAC7CG,wBAAU,EAAE;AADiC,aAAxB,CAAvB;AAGA,iBAAK7Q,gBAAL,GAAwB,KAAKvI,cAAL,CAAoBwB,YAApB,CAAiCJ,SAAjC,CAA2C,UAAC8R,KAAD,EAAoB;AACrF,qBAAI,CAAC1R,YAAL,GAAoB0R,KAApB;AACD,aAFuB,CAAxB;AAGD;;;4CAEiB;AAAA;;AAChB,iBAAKmG,KAAL,CAAWC,WAAX,GAAyB,KAAKC,YAAL,CAAkBC,gBAA3C;AACA,iBAAKxC,aAAL,GAAqB,KAAK9W,UAAL,CAAgB8W,aAAhB,CAA8B5V,SAA9B,CAAwC,UAACC,CAAD,EAAiC;AAC5F,qBAAI,CAACwX,eAAL,CAAqBlR,IAArB,CAA0B;AACxBzC,sBAAM,EAAE,OAAI,CAACuU,OAAL,CAAaC,aADG;AAExBlN,2BAAW,EAAE,CAACnL,CAAC,CAAC2K,GAAH,EAAQ3K,CAAC,CAAC6K,GAAV;AAFW,eAA1B;AAID,aALoB,CAArB;AAMA,iBAAKyN,WAAL,GAAmB,KAAKF,OAAL,CAAaG,eAAb,CAA6BxY,SAA7B,CAAuC,UAAAC,CAAC,EAAI;AAC7DN,qBAAO,CAACC,GAAR,CAAY,OAAI,CAACyY,OAAL,CAAaI,KAAzB;;AACA,kBAAIxY,CAAC,CAACqY,aAAF,IAAmB,CAAvB,EAA0B;AACxB,uBAAI,CAACd,QAAL,GAAgB,KAAhB;AACA,uBAAI,CAACG,MAAL,GAAc,KAAd;;AACA,uBAAI,CAAC7Y,UAAL,CAAgB8X,UAAhB,CAA2B3W,CAAC,CAACqY,aAA7B;AACD;AACF,aAPkB,CAAnB;AAQD;;;4CAEiB;AAChB,iBAAKH,YAAL,CAAkBnR,QAAlB;AACD;;;kCAEOlD,M,EAAgB,CAEvB;;;4CAEiB;AAAA;;AAChB,iBAAK4T,QAAL,GAAgB,IAAhB;AACA1a,mBAAO,CAAC0b,GAAR,CAAY,CAAC,KAAKC,SAAL,CAAeC,QAAf,EAAD,EAA4B,KAAKC,SAAL,CAAeD,QAAf,EAA5B,CAAZ,EACC1b,IADD,CACM,UAAC4b,SAAD,EAAsB;AAC1B,qBAAI,CAACnB,MAAL,GAAc,IAAd;AACAlM,wBAAU,CAAC,YAAM;AACf,uBAAI,CAACwI,MAAL,CAAYhB,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACD,eAFS,EAEP,GAFO,CAAV;AAGD,aAND,WAOO,UAACvT,GAAD,EAAgB;AACrBqZ,mBAAK,CAACrZ,GAAG,CAAC,CAAD,CAAJ,CAAL,CADqB,CAErB;AACD,aAVD,aAWS,YAAM;AACb,qBAAI,CAACgY,QAAL,GAAgB,KAAhB;AACD,aAbD;AAeD;;;wCAEa;AACZ;AACA,iBAAK9B,aAAL,CAAmBjV,WAAnB;AACA,iBAAK4X,WAAL,CAAiB5X,WAAjB;AACA,iBAAKwG,gBAAL,CAAsBxG,WAAtB;AACD;;;;;;;yBA7FU2W,4B,EAA4B,2H,EAAA,qI,EAAA,gJ,EAAA,uH;AAAA,O;;;cAA5BA,4B;AAA4B,iD;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBzC;;AACE;;AAIA;;AACE;;AACF;;AACA;;AACE;;AACA;;AAAY;;AAAI;;AAAyC;;AAAK;;AAC9D;;AACA;;AACE;;AAA0D;;AAAI;;AAChE;;AACF;;AACA;;AACE;;AACA;;AAAY;;AAAI;;AAA+C;;AAAK;;AACpE;;AACA;;AACE;;AAAsC;;AAAI;;AAC1C;;AAA0C;AAAA,qBAAS,IAAA0B,eAAA,EAAT;AAA0B,aAA1B;;AAA4B;;AAAI;;AAC1E;;AACA;;AACF;;AACF;;AACF;;;;;;AAtB+C;;AAAA,+FAAqB,UAArB,EAAqB,IAArB;;AACP;;AAAA;;AAEF;;AAAA;;AAGD;;AAAA,0GAAwC,QAAxC,EAAwC,CAAxC;;AAKO;;AAAA;;AAGP;;AAAA,0GAAwC,QAAxC,EAAwC,CAAxC;;AAIZ;;AAAA;;AACA;;AAAA;;;;;;;;;wEDJZ1B,4B,EAA4B;gBALxC,uDAKwC;iBAL9B;AACT1W,oBAAQ,EAAE,0BADD;AAETC,uBAAW,EAAE,uCAFJ;AAGTC,qBAAS,EAAE,CAAC,uCAAD;AAHF,W;AAK8B,U;;;;;;;;;;;;kBAMtC,uD;mBAAU,S;;;kBACV,uD;mBAAU,O;;;kBACV,uD;mBAAU,W;;;kBACV,uD;mBAAU,W;;;kBAGV,uD;mBAAU,c;;;kBAMV,uD;mBAAU,gB;;;;;;;;;;;;;;;;;;;;AEnCb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;AC4BM;;AAA6E;;AAAgC;;;;;;AAC7G;;AAAgF;;AAAuD;;;;;;AAWrI;;AAAgF;;AAA+C;;;;;;AAc/H;;AAAgF;;AAA2B;;;;;;AAe7G;;AAA+E;;AAA0B;;;;;;;;AAxE/G;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAIE;;AAAwB;;AAAY;;AACpC;;AAmBA;;AACE;;AAA0B;;AAAQ;;AAClC;;AACA;;AACA;;AACF;;AAEA;;AAEE;;AACE;;AAA0B;;AAAQ;;AAClC;;AAIA;;AACA;;AAE0B;AAAA;;AAAA;;AAAA;AAAA;;AAC1B;;AAAU;;AAA0C;;AACpD;;AACF;;AAEA;;AACE;;AAA0B;;AAAqB;;AAC/C;;AAIA;;AACA;;AAE0B;AAAA;;AAAA;;AAAA;AAAA;;AAE1B;;AAAU;;AAA2C;;AACrD;;AACF;;AACF;;AAEA;;AACE;;AAAuB;;AAAa;;AACpC;;AAGA;;AACA;;AAAmD;;AAA8C;;AACnG;;AAEA;;AACE;;AACE;;AACE;;AACE;;AAAW;;AAAS;;AACpB;;AAMA;;AACA;;AACF;;AAiBF;;AACF;;AACF;;AAEA;;AAAoB;;AAAM;;AAC1B;;AAEE;;AAA6C;;AAAI;;AACjD;;AAA+C;;AAAM;;AACrD;;AAA8C;;AAAK;;AACrD;;AACA;;AAEA;;AACE;;AAEE;;AAA4C;;AAAmE;;AACjH;;AACF;;AACA;;AAEA;;AAA0C;;AAAQ;;AACpD;;;;;;;;AA1HA;;AAyBsD;;AAAA;;AACA;;AAAA;;AAUhD;;AAAA;;AACkD;;AAAA;;AAGD;;AAAA,mGAAmC,cAAnC,EAAmC,WAAnC;;AACvC;;AAAA;;AASV;;AAAA;;AACkD;;AAAA;;AAGC;;AAAA,mGAAmC,cAAnC,EAAmC,YAAnC;;AAEzC;;AAAA;;AAUsC;;AAAA;;AAW1C;;AAAA,yFAAwB,KAAxB,EAAwB,kBAAxB;;AAI+B;;AAAA;;;;;;AA0C3C;;AACE;;AAAI;;AAA0B;;AAChC;;;;UDhHWmY,qB;AASX,uCAAoBpa,aAApB,EACoB8I,cADpB,EAEoByK,YAFpB,EAGoBI,MAHpB,EAIoB0G,iBAJpB,EAIwD;AAAA;;AAJpC,eAAAra,aAAA,GAAAA,aAAA;AACA,eAAA8I,cAAA,GAAAA,cAAA;AACA,eAAAyK,YAAA,GAAAA,YAAA;AACA,eAAAI,MAAA,GAAAA,MAAA;AACA,eAAA0G,iBAAA,GAAAA,iBAAA;AATpB,eAAAxG,IAAA,GAAO,IAAP;AACA,eAAAyG,KAAA,GAAQ,IAAR;AACA,eAAAC,WAAA,GAAsB,IAAIzU,IAAJ,GAAW0U,WAAX,EAAtB;AAoDA,eAAAC,qBAAA,GAAiC,KAAjC;AA5CgB;;;;qCAER;AAAA;;AACN,iBAAKlB,gBAAL,GAAwB,IAAI,wDAAJ,CAAc;AACpC;AACA;AACA;AACA;AACA,2BAAa,IAAI,wDAAJ,CAAc;AACzB,4BAAY,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWhW,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB,EAA+C,0DAAWkX,SAAX,CAAqB,EAArB,CAA/C,CAAtB,CADa;AAEzB,mCAAmB,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWnX,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB,EAA+C,0DAAWkX,SAAX,CAAqB,EAArB,CAA/C,CAAtB;AAFM,eAAd,EAGV,KAAKC,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAHU,CALuB;AASpC,2BAAY,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWrX,QAAZ,CAAtB,CATwB;AAUpC,0BAAY,IAAI,0DAAJ,CAAgB,IAAhB,EAAqB,CAAE,0DAAWA,QAAb,EAAuB,0DAAWC,SAAX,CAAqB,CAArB,CAAvB,EAAgD,0DAAWkX,SAAX,CAAqB,EAArB,CAAhD,CAArB,EAAgG,KAAKG,kBAAL,CAAwBD,IAAxB,CAA6B,IAA7B,CAAhG,CAVwB;AAWpC,uBAAS,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWrX,QAAZ,EAAsB,0DAAWyQ,KAAjC,CAAtB,CAX2B;AAYpC,0BAAY,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWzQ,QAAZ,CAAtB,CAZwB;AAapC,wBAAS,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWA,QAAZ,CAAtB;AAb2B,aAAd,CAAxB;AAgBA,iBAAK+E,gBAAL,GAAwB,KAAKQ,cAAL,CAAoBvH,YAApB,CAAiCJ,SAAjC,CAA2C,UAAC8R,KAAD,EAAoB;AACrF,qBAAI,CAAC1R,YAAL,GAAoB0R,KAApB;AACD,aAFuB,CAAxB;AAGD;;;6CAEkB;AACjB,gBAAI,KAAKsG,gBAAL,CAAsBvV,GAAtB,CAA0B,UAA1B,EAAsC8W,MAAtC,IAAgD,KAAKvB,gBAAL,CAAsBvV,GAAtB,CAA0B,UAA1B,EAAsC+W,KAA1F,EAAgG;AAC9F,kBAAI,KAAKxB,gBAAL,CAAsBvV,GAAtB,CAA0B,UAA1B,EAAsC8W,MAAtC,CAA6C,mBAA7C,CAAJ,EAAsE;AACpE,uBAAO,IAAP;AACD;AACF,aAJD,MAIO;AACH,qBAAO,KAAP;AACD;AACJ;;;gDAEqB;AACpB,gBAAI,KAAKvB,gBAAL,CAAsBvV,GAAtB,CAA0B,UAA1B,EAAsC8W,MAAtC,IAAgD,KAAKvB,gBAAL,CAAsBvV,GAAtB,CAA0B,UAA1B,EAAsC+W,KAA1F,EAAgG;AAC9F,kBAAI,KAAKxB,gBAAL,CAAsBvV,GAAtB,CAA0B,UAA1B,EAAsC8W,MAAtC,CAA6C,WAA7C,KAA6D,KAAKvB,gBAAL,CAAsBvV,GAAtB,CAA0B,UAA1B,EAAsC8W,MAAtC,CAA6C,WAA7C,CAAjE,EAA2H;AACzH,uBAAO,IAAP;AACD;AACF,aAJD,MAIO;AACH,qBAAO,KAAP;AACD;AACJ;;;8CAGmBlU,O,EAAsB;AACxC,gBAAI,KAAK2S,gBAAT,EAA2B;AACzB,kBAAIyB,IAAI,GAAWpU,OAAO,CAAC5C,GAAR,CAAY,UAAZ,EAAwBgC,KAA3C;AACA,kBAAIiV,QAAO,GAAWrU,OAAO,CAAC5C,GAAR,CAAY,iBAAZ,EAA+BgC,KAArD;;AACA,kBAAIgV,IAAI,KAAKC,QAAb,EAAsB;AACpB,qBAAKR,qBAAL,GAA6B,KAA7B;AACA;AACD,eAHD,MAGO;AACL,oBAAG7T,OAAO,CAAC5C,GAAR,CAAY,iBAAZ,EAA+B+W,KAAlC,EAAyC;AACvC,uBAAKN,qBAAL,GAA6B,IAA7B;AACD;;AACD;AACD;AACF;AACF;;;gDAEqB;AACpB,gBAAI,KAAKlB,gBAAL,CAAsBvV,GAAtB,CAA0B,oBAA1B,EAAgD8W,MAAhD,IAA0D,KAAKvB,gBAAL,CAAsBvV,GAAtB,CAA0B,oBAA1B,EAAgD+W,KAA9G,EAAoH;AAClH,kBAAI,KAAKxB,gBAAL,CAAsBvV,GAAtB,CAA0B,oBAA1B,EAAgD8W,MAAhD,CAAuD,WAAvD,KAAuE,KAAKvB,gBAAL,CAAsBvV,GAAtB,CAA0B,oBAA1B,EAAgD8W,MAAhD,CAAuD,WAAvD,CAA3E,EAA+I;AAC7I,uBAAO,IAAP;AACD;AACF;AACF;;;+CAEoB;AACnB,gBAAI,KAAKvB,gBAAL,CAAsBvV,GAAtB,CAA0B,OAA1B,EAAmC8W,MAAnC,IAA6C,KAAKvB,gBAAL,CAAsBvV,GAAtB,CAA0B,OAA1B,EAAmC+W,KAApF,EAA0F;AACxF,kBAAI,KAAKxB,gBAAL,CAAsBvV,GAAtB,CAA0B,OAA1B,EAAmC8W,MAAnC,CAA0C,OAA1C,CAAJ,EAAuD;AACrD,uBAAO,IAAP;AACD;AACF;AACF,W,CAED;;;;kCACK;AACH,gBAAII,KAAK,GAAG,KAAK3B,gBAAL,CAAsBvV,GAAtB,CAA0B,WAA1B,EAAuCgC,KAAnD;AACA,gBAAImV,GAAG,GAAG,mCAAM,CAAC,KAAKZ,WAAN,CAAhB;AACA,gBAAIa,UAAU,GAAGD,GAAG,CAACE,IAAJ,CAASH,KAAT,EAAgB,OAAhB,CAAjB;;AACA,gBAAIE,UAAU,GAAG,EAAjB,EAAoB;AAClB,qBAAO,KAAP;AACD,aAFD,MAGI;AACF,qBAAO,IAAP;AACD;AACF;;;6CAEkBxU,O,EAAoB;AAAA;;AACrC,mBAAO,IAAIzI,OAAJ,CAAiB,UAACC,OAAD,EAAUga,MAAV,EAAqB;AAC3C,qBAAI,CAACpY,aAAL,CAAmBO,IAAnB,CAAwB,YAAxB,EAAsC,CAACqG,OAAO,CAACZ,KAAT,CAAtC,EAAuD,UAACtF,GAAD,EAAS;AAC9D,oBAAIA,GAAG,CAACA,GAAR,EAAa;AACXtC,yBAAO,CAAC;AAAC,yCAAqB;AAAtB,mBAAD,CAAP;AACD,iBAFD,MAEO;AACLA,yBAAO,CAAC,IAAD,CAAP;AACD;AACF,eAND;AAOD,aARM,CAAP;AASD;;;qCAEU;AAAA;;AACT;AACA,gBAAI,KAAKkd,KAAL,EAAJ,EAAkB;AAChB;AACA,kBAAI,KAAK/B,gBAAL,CAAsBlD,KAAtB,IAA+B,CAAEjW,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAArC,EAA0E;AACxE,oBAAII,IAAI,GAAG;AACT;AACA;AACAuT,uBAAK,EAAC,KAAKuF,gBAAL,CAAsBvV,GAAtB,CAA0B,OAA1B,EAAmCgC,KAHhC;AAITxF,0BAAQ,EAAC,KAAK+Y,gBAAL,CAAsBvV,GAAtB,CAA0B,UAA1B,EAAsCgC,KAJtC;AAKTiO,0BAAQ,EAAC,KAAKsF,gBAAL,CAAsBvV,GAAtB,CAA0B,oBAA1B,EAAgDgC,KALhD;AAMT0P,wBAAM,EAAC,KAAK6D,gBAAL,CAAsBvV,GAAtB,CAA0B,QAA1B,EAAoCgC,KANlC;AAOTyP,2BAAS,EAAC,KAAK8D,gBAAL,CAAsBvV,GAAtB,CAA0B,WAA1B,EAAuCgC;AAPxC,iBAAX;AASA,qBAAKhG,aAAL,CAAmBO,IAAnB,CAAwB,YAAxB,EAAqCE,IAArC,EAA2C,UAACC,GAAD,EAAS;AAClD;AACA,sBAAIA,GAAG,CAACG,GAAR,EAAa;AACXqZ,yBAAK,4BAAqBxZ,GAAG,CAACG,GAAzB,EAAL;AACD,mBAFD,CAGA;AAHA,uBAIK,IAAIH,GAAG,CAACP,IAAR,EAAc;AACjBC,oCAAc,CAACO,OAAf,CAAuB,UAAvB,EAAmCD,GAAG,CAACP,IAAJ,CAASK,QAA5C;AACAF,kCAAY,CAACK,OAAb,CAAqB,OAArB,EAA8BD,GAAG,CAACwT,KAAlC;AACA5T,kCAAY,CAACK,OAAb,CAAqB,UAArB,EAAiCD,GAAG,CAACP,IAAJ,CAASK,QAA1C;;AACA,6BAAI,CAACsI,cAAL,CAAoBlI,OAApB;;AACA,6BAAI,CAAC2S,YAAL,CAAkBY,UAAlB;;AACA,6BAAI,CAACqF,OAAL,CAAa9R,IAAb;;AACA5G,6BAAO,CAACC,GAAR,yBAA6BX,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAA7B;AACD;AACF,iBAfD;AAgBD;AACF,aA7BD,CA8BA;AA9BA,iBA+BK;AACH6Z,qBAAK,CAAC,+CAAD,CAAL;AACAzY,sBAAM,CAACgC,QAAP,CAAgBgR,MAAhB;AACD;AACF;;;wCAEU;AACT;AACA,iBAAKnM,gBAAL,CAAsBxG,WAAtB;AACD;;;;;;;yBA9JUsY,qB,EAAqB,kJ,EAAA,yI,EAAA,oI,EAAA,uH,EAAA,0J;AAAA,O;;;cAArBA,qB;AAAqB,6C;AAAA;AAAA;AAAA,S;AAAA,oFAHpB,CAAC,yEAAD,EAAgB,mEAAhB,CAGoB,E;AAHM,gB;AAAA,e;AAAA,+9D;AAAA;AAAA;AChBxC;;AAiIE;;;;AA1HA;;AA0HyF;;AAAA;;;;;;;;;wED9G9EA,qB,EAAqB;gBAPjC,uDAOiC;iBAPvB;AACPrY,oBAAQ,EAAE,sBADH;AAEPC,uBAAW,EAAC,mCAFL;AAGPC,qBAAS,EAAE,CAAC,mCAAD,CAHJ;AAIPG,qBAAS,EAAC,CAAC,yEAAD,EAAgB,mEAAhB;AAJH,W;AAOuB,U;;;;;;;;;;;;;;kBAO/B;;;;;;;;;;;;;;;;;;;;AE1BH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACYM;;AAAmH;AAAA;;AAAA;;AAAA,mBAAS,OAAAmZ,aAAA,KAAkB,WAAlB,EAA+B7W,QAA/B,CAAwC,EAAxC,CAAT;AAAoD,WAApD;;AACjH;;AAAU;;AAAK;;AACjB;;;;;;;;;;;;;;AAYF;;AACE;;AAAW;;AAAM;;AACjB;;AAAY;AAAA;;AAAA;;AAAA;AAAA,aAA2B,iBAA3B,EAA2B;AAAA;;AAAA;;AAAA;AAAA,WAA3B;;AACV;;AAAsB;;AAAG;;AACzB;;AAAsB;;AAAM;;AAC5B;;AAAsB;;AAAK;;AAC7B;;AACF;;;;;;AALc;;AAAA,oGAA2B,gBAA3B,EAA2B,qEAA3B;;;;;;AAWR;;AAAwE;;AAAiB;;;;;;AAAzC;;AAAwB;;AAAA;;;;;;;;AAJ9E;;AACE;;AAAW;;AAAQ;;AACnB;;AAAY;AAAA;;AAAA;;AAAA;AAAA;;AACR;;AAAwB;;AAAG;;AAC3B;;AACJ;;AACF;;;;;;AAJc;;AAAA;;AAEI;;AAAA;;;;;;AAYtB;;;;UD/Ba8W,kB;AAgCX,oCACUvb,UADV,EAEU0T,MAFV,EAGU3C,aAHV,EAIU3F,cAJV,EAKUD,oBALV,EAKoD;AAAA;;AAJ1C,eAAAnL,UAAA,GAAAA,UAAA;AACA,eAAA0T,MAAA,GAAAA,MAAA;AACA,eAAA3C,aAAA,GAAAA,aAAA;AACA,eAAA3F,cAAA,GAAAA,cAAA;AACA,eAAAD,oBAAA,GAAAA,oBAAA;AApCA,eAAAqQ,UAAA,GAAa,IAAI,0DAAJ,EAAb;AACD,eAAAC,OAAA,GAAmB,KAAnB;AACT,eAAAC,OAAA,GAAmB,KAAnB;AAKA,eAAAC,UAAA,GAAgC,IAAhC;AAWA,eAAAzY,aAAA,GAAsC,IAAtC;AACA,eAAA0Y,aAAA,GAII;AACF,eAAG,KADD;AAEF,eAAG,QAFD;AAGF,eAAG;AAHD,WAJJ;AASA,eAAAC,aAAA,GAAwB,GAAxB;AACA,eAAAC,eAAA,GAA0B,KAA1B;AAQK;;;;qCAEG;AAAA;;AACN,iBAAKR,aAAL,GAAqB,IAAI,wDAAJ,CAAc;AACjC,2BAAa,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWhY,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB,EAA+C,0DAAWkX,SAAX,CAAqB,EAArB,CAA/C,CAAtB;AADoB,aAAd,CAArB;AAKA,iBAAKsB,aAAL,GAAqB,KAAKhL,aAAL,CAAmBiL,SAAnB,CAA6B9a,SAA7B,CAAuC,UAAC+a,GAAD,EAAS;AACnE,qBAAI,CAACC,OAAL,GAAeD,GAAf;AACD,aAFoB,CAArB;AAIA,iBAAKE,cAAL,GAAsB,KAAKnc,UAAL,CAAgB2b,UAAhB,CAA2Bza,SAA3B,CAAqC,UAACkb,KAAD,EAA8B;AACvF,qBAAI,CAACT,UAAL,GAAkBS,KAAK,GAAEA,KAAF,GAAU,0EAAYC,aAA7C;AACD,aAFqB,CAAtB;AAIA,iBAAKC,sBAAL,GAA8B,KAAKvL,aAAL,CAAmBkB,YAAnB,CAAgC/Q,SAAhC,CAA0C,UAACqb,IAAD,EAAgC;AACtG,qBAAI,CAAC/K,UAAL,GAAkB+K,IAAlB;AACD,aAF6B,CAA9B;AAGD;;;4CAEiB;AAAA;;AAChB;AACA,iBAAK3X,iBAAL,GAAyB,KAAKD,mBAAL,CAAyBzB,aAAzB,CAAuChC,SAAvC,CAAiD,UAAC2D,IAAD,EAAgC;AACxG,kBAAIA,IAAJ,EAAU;AACR,uBAAI,CAAC3B,aAAL,GAAqB2B,IAArB;AACD,eAFD,MAEO;AACL,uBAAI,CAAC3B,aAAL,GAAqB,IAArB;AACD;AACF,aANwB,CAAzB;AAQA,iBAAKkI,cAAL,CAAoBQ,WAApB,CAAgC1K,SAAhC,CAA0C,UAAC2K,MAAD,EAA0B;AAClE;AACA,kBAAI,CAACA,MAAM,CAACC,GAAZ,EAAiB;AACf;AACA,uBAAI,CAACnH,mBAAL,CAAyB8G,mBAAzB,GAA+C,IAAI,qFAAJ,CAAyB,OAAI,CAAC9G,mBAAL,CAAyBuG,SAAzB,CAAmCnF,KAA5D,EAAmE,CAAC,OAAI,CAAC4V,UAAL,CAAgB7P,GAAjB,EAAsB,OAAI,CAAC6P,UAAL,CAAgB3P,GAAtC,CAAnE,CAA/C;AACD,eAHD,MAGO;AACL,uBAAI,CAACb,oBAAL,CAA0BY,aAA1B,CAAwCF,MAAM,CAACC,GAA/C,EAAoDD,MAAM,CAACG,GAA3D,EAAgE9K,SAAhE,CAA0E,UAAC+G,QAAD,EAAoC;AAC5G,sBAAIA,QAAQ,CAACgE,QAAT,CAAkB,CAAlB,CAAJ,EAA0B;AACxB,2BAAI,CAACtH,mBAAL,CAAyBuG,SAAzB,CAAmChG,UAAnC,CAA8C+C,QAAQ,CAACgE,QAAT,CAAkB,CAAlB,EAAqBE,UAArB,CAAgCqQ,OAAhC,CAAwC3X,IAAxC,GAA+C,GAA/C,GAAqDoD,QAAQ,CAACgE,QAAT,CAAkB,CAAlB,EAAqBE,UAArB,CAAgCqQ,OAAhC,CAAwC9O,OAA3I;AACD;AACF,iBAJD;AAKD;;AACD,kBAAI7B,MAAM,CAACkM,KAAX,EAAkB;AAChB,uBAAI,CAACuD,aAAL,CAAmBvX,GAAnB,CAAuB,WAAvB,EAAoCU,QAApC,CAA6CoH,MAAM,CAACkM,KAApD,EADgB,CAGhB;;;AACA,oBAAI,CAAC,OAAI,CAAChH,aAAL,CAAmB0L,aAAxB,EAAuC;AACrC,yBAAI,CAACf,OAAL,GAAe,IAAf;AACA,sBAAIU,KAAK,GAAsBvQ,MAAM,CAACC,GAAP,GAAY,IAAI,qEAAJ,CAAsBD,MAAM,CAACC,GAA7B,EAAkCD,MAAM,CAACG,GAAzC,CAAZ,GAA4D,OAAI,CAAChM,UAAL,CAAgB0c,SAAhB,EAA3F;;AACA,yBAAI,CAAC3L,aAAL,CAAmB4L,WAAnB,CAA+B9Q,MAAM,CAACkM,KAAtC,EAA6C,OAAI,CAAChH,aAAL,CAAmB6L,UAAnB,CAA8B/Q,MAAM,CAACkM,KAArC,EAA4CqE,KAA5C,CAA7C,EAAiGA,KAAjG,aACS,YAAI;AACX,2BAAI,CAACV,OAAL,GAAe,KAAf;AACD,mBAHD;AAID;AACF;AACF,aAzBD;;AA2BA,gBAAI,KAAK3K,aAAL,CAAmB0L,aAAvB,EAAsC;AACpC,mBAAKnB,aAAL,CAAmBvX,GAAnB,CAAuB,WAAvB,EAAoCU,QAApC,CAA6C,KAAKsM,aAAL,CAAmB0L,aAAnB,CAAiC1E,KAA9E;;AACA,kBAAI,KAAKhH,aAAL,CAAmB0L,aAAnB,CAAiCzQ,GAArC,EAA0C,CACxC;AACD;AACF;AACF;;;qCAEU;AAAA;;AACT,gBAAI,KAAKsP,aAAL,CAAmBlF,KAAnB,IAA4B,KAAKzR,mBAAL,CAAyBuG,SAAzB,CAAmCkL,KAAnE,EAA0E;AACxE,mBAAKoF,UAAL,CAAgBlb,IAAhB;AACA,kBAAI8b,KAAK,GAAsB,KAAKlZ,aAAL,GAAoB,IAAI,qEAAJ,CAAsB,KAAKA,aAAL,CAAmBO,OAAnB,CAA2B4I,QAA3B,CAAoCC,WAApC,CAAgD,CAAhD,CAAtB,EAA0E,KAAKpJ,aAAL,CAAmBO,OAAnB,CAA2B4I,QAA3B,CAAoCC,WAApC,CAAgD,CAAhD,CAA1E,CAApB,GAAoJ,KAAKqP,UAAxL;AACA,mBAAK5K,aAAL,CAAmB4L,WAAnB,CAA+B,KAAKrB,aAAL,CAAmBvX,GAAnB,CAAuB,WAAvB,EAAoCgC,KAAnE,EAA0E,KAAKgL,aAAL,CAAmB6L,UAAnB,CAA8B,KAAKtB,aAAL,CAAmBvX,GAAnB,CAAuB,WAAvB,EAAoCgC,KAAlE,EAAyEqW,KAAzE,CAA1E,EAA2JA,KAA3J,EACChe,IADD,CACM,YAAM;AACV,uBAAI,CAAC2S,aAAL,CAAmB0L,aAAnB,GAAmC;AAAC1E,uBAAK,EAAE,OAAI,CAACuD,aAAL,CAAmBvX,GAAnB,CAAuB,WAAvB,EAAoCgC,KAA5C;AAAmD+F,qBAAG,EAAEsQ,KAAK,CAACtQ,GAA9D;AAAmEE,qBAAG,EAAEoQ,KAAK,CAACpQ,GAA9E;AAAmFmG,0BAAQ,EAAE,OAAI,CAAC2J;AAAlG,iBAAnC;;AACA,uBAAI,CAACpI,MAAL,CAAYS,QAAZ,CAAqB,CAAC,QAAD,CAArB,EAAiC;AAACvI,6BAAW,EAAE;AAACmM,yBAAK,EAAE,OAAI,CAACuD,aAAL,CAAmBvX,GAAnB,CAAuB,WAAvB,EAAoCgC,KAA5C;AAAmD+F,uBAAG,EAAEsQ,KAAK,CAACtQ,GAA9D;AAAmEE,uBAAG,EAAEoQ,KAAK,CAACpQ,GAA9E;AAAmFmG,4BAAQ,EAAE,OAAI,CAAC2J;AAAlG;AAAd,iBAAjC;AACD,eAJD,WAKO,UAAAlb,GAAG,EAAI;AACZC,uBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,eAPD;AAQD;AACF;AAED;;;;uCACaic,M,EAAwC;AACnD,iBAAKhB,aAAL,GAAqBgB,MAAM,CAAC9W,KAA5B;AACA,iBAAK+V,eAAL,GAAuB,KAAKF,aAAL,CAAmBiB,MAAM,CAAC9W,KAA1B,CAAvB;AACA,iBAAKgL,aAAL,CAAmB+L,YAAnB,CAAgCC,QAAQ,CAACF,MAAM,CAAC9W,KAAR,CAAxC;AACD;;;wCAEa;AACZ,iBAAKgW,aAAL,CAAmBla,WAAnB;AACA,iBAAKsa,cAAL,CAAoBta,WAApB;AACA,iBAAK+C,iBAAL,CAAuB/C,WAAvB;AACD;;;;;;;yBAlIU0Z,kB,EAAkB,4I,EAAA,uH,EAAA,8I,EAAA,+H,EAAA,yJ;AAAA,O;;;cAAlBA,kB;AAAkB,uC;AAAA;AAAA;;;sEAiBlB,sF,EAAmB,I;;;;;;;;;;;;;;;;;;;;;ACpChC;;AAAkC;AAAA,qBAAY,IAAArT,QAAA,EAAZ;AAAsB,aAAtB;;AAChC;;AAEE;;AACE;;AAAW;;AAAiE;;AAC5E;;AAMA;;AAGA;;AACF;;AACA;;AAEA;;AAA6B;;AAAE;;AAC/B;;AAGA;;AACA;;AAEA;;AASA;;AAQA;;AACE;;AACE;;AAAU;;AAAM;;AAClB;;AACF;;AACF;;AACF;;AAEA;;;;AAlDM;;AAIW;;AAAA;;AAOQ;;AAAA;;AAWsC;;AAAA,6FAAuB,mBAAvB,EAAuB,IAAvB;;AAGuC;;AAAA;;AASqB;;AAAA;;AAgB5G;;AAAA;;;;;;;;;wED/BFqT,kB,EAAkB;gBAL9B,uDAK8B;iBALpB;AACTzZ,oBAAQ,EAAE,gBADD;AAETC,uBAAW,EAAE,6BAFJ;AAGTC,qBAAS,EAAE,CAAC,6BAAD;AAHF,W;AAKoB,U;;;;;;;;;;;;;;kBAC5B;;;kBACA;;;kBASA,uD;mBAAU,wB;;;kBAMV,uD;mBAAU,sF;;;;;;;;;;;;;;;;;;;;AErCb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAUagb,oB;AAGX,sCACUtJ,MADV,EACyB;AAAA;;AAAf,eAAAA,MAAA,GAAAA,MAAA;AACL;;;;qCAEG;AACN,iBAAKtQ,IAAL,GAAY,IAAI,wDAAJ,CAAc;AACxB+C,mBAAK,EAAE,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB;AAC3B9C,0BAAU,EAAE;AADe,eAAtB;AADiB,aAAd,CAAZ;AAKD;;;yCACW;AACV,gBAAI,KAAKD,IAAL,CAAUuC,OAAd,EAAuB;AACrB;AACD;;AACD,gBAAIQ,KAAK,GAAG,KAAK/C,IAAL,CAAUW,GAAV,CAAc,OAAd,EAAuBgC,KAAnC;;AACA,gBAAGI,KAAH,EAAS;AACT,mBAAKuN,MAAL,CAAYS,QAAZ,CAAqB,CAAC,OAAD,EAAShO,KAAT,CAArB;AACC;AACF;;;;;;;yBAtBU6W,oB,EAAoB,uH;AAAA,O;;;cAApBA,oB;AAAoB,yC;AAAA,gB;AAAA,e;AAAA,6M;AAAA;AAAA;ACVjC;;AAAyB;AAAA,qBAAU,IAAAC,YAAA,EAAV;AAAwB,aAAxB;;AACvB;;AACE;;AACF;;AACA;;AAAuD;;AAAM;;AAC/D;;;;AALM;;;;;;;;;wEDUOD,oB,EAAoB;gBALhC,uDAKgC;iBALtB;AACTlb,oBAAQ,EAAE,kBADD;AAETC,uBAAW,EAAE,+BAFJ;AAGTC,qBAAS,EAAE,CAAC,+BAAD;AAHF,W;AAKsB,U;;;;;;;;;;;;;;;;;;;;;;AEVjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACOI;;AAA2C;;AAAmB;;;;UDErDkb,c;AAIX,kCAAc;AAAA;;AAFd,eAAAC,SAAA,GAAuB,IAAvB;AACA,eAAAC,MAAA,GAAkB,KAAlB;AACiB;;;;qCAET;AACN,iBAAKD,SAAL,GAAiB,IAAI,wDAAJ,CAAc;AAC9B,gCAAkB,IAAI,0DAAJ,CAAgB,IAAhB;AADY,aAAd,CAAjB;AAIA,iBAAKA,SAAL,CAAepZ,GAAf,CAAmB,gBAAnB,EAAqCmB,UAArC,CAAgD,KAAKmY,OAAL,GAAc,KAAKA,OAAnB,GAA6B,KAA7E;AACD;;;wCAEa;AACZ,iBAAKD,MAAL,GAAc,IAAd;AACD;;;;;;;yBAhBUF,c;AAAc,O;;;cAAdA,c;AAAc,kC;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,gT;AAAA;AAAA;ACT3B;;AACI;;AACI;;AAAW;;AAAc;;AACzB;;AACJ;;AACA;;AAA8F;AAAA,qBAAS,IAAAI,WAAA,EAAT;AAAsB,aAAtB;;AAAwB;;AAAI;;AAC1H;;AACA;;AACJ;;;;AARM;;AAK+B;;AAAA;;AAEL;;AAAA;;;;;;;;;wEDEnBJ,c,EAAc;gBAL1B,uDAK0B;iBALhB;AACTpb,oBAAQ,EAAE,WADD;AAETC,uBAAW,EAAE,wBAFJ;AAGTC,qBAAS,EAAE,CAAC,wBAAD;AAHF,W;AAKgB,U;;;;kBACxB;;;;;;;;;;;;;;;;;;;;AEVH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASaub,oB;AAGX,wCAAc;AAAA;AAAG;;;;qCAET,CACP;;;wCAEa;AAAA;;AACZ,gBAAIC,QAAQ,GAAG,GAAf;AACA,gBAAIC,QAAQ,GAAG,EAAf;AACA,gBAAIC,IAAI,GAAG,KAAKC,EAAL,CAAQC,SAAR,GAAoBH,QAApB,GAA+BD,QAA1C;AACA,kEAAmBC,QAAnB,EACCI,IADD,CAEE,4DAAK,UAACC,GAAD,EAAMC,IAAN;AAAA,qBAAeD,GAAG,GAAGJ,IAArB;AAAA,aAAL,EAAgC,KAAKC,EAAL,CAAQC,SAAxC,CAFF,EAGE,2DAAI,UAAAI,QAAQ;AAAA,qBAAI,OAAI,CAACL,EAAL,CAAQC,SAAR,GAAoBI,QAAxB;AAAA,aAAZ,CAHF,EAIE,iEAAU,UAAAC,GAAG;AAAA,qBAAIA,GAAG,GAAG,CAAV;AAAA,aAAb,CAJF,EAMC/c,SAND;AAOD;;;;;;;yBAnBUqc,oB;AAAoB,O;;;cAApBA,oB;AAAoB,0C;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,2E;AAAA;AAAA;ACTjC;;AAA0B;AAAA,qBAAS,IAAAW,WAAA,EAAT;AAAsB,aAAtB;;AACtB;;AAAU;;AAAiB;;AAC/B;;;;;;;;;wEDOaX,oB,EAAoB;gBALhC,uDAKgC;iBALtB;AACTzb,oBAAQ,EAAE,mBADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,gCAAD;AAHF,W;AAKsB,U;;;;kBAC9B;;;;;;;;;;;;;;;;;;;;AEJH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACLA;;AACI;;AAAiC;AAAA;;AAAA;;AAAA;;AAAS;;AAAiB,mBAAF,8BAAE;AAAF,WAAxB;;AACjC;;AACA;;AACJ;;;;;;AA8BY;;AAA2F;;AAAI;;;;;;AAC/F;;AAAkG;;AAAI;;;;;;AAEtG;;AAA+F;;AAAO;;;;;;AACtG;;AAAsG;;AAAO;;;;;;AAE7G;;AAA+F;;AAAM;;;;;;AACrG;;AAAsG;;AAAM;;;;;;;;;;;;;UD3B3Gmc,gB;AAkCX,kCAAoBte,iBAApB,EACoBsV,MADpB,EAEoBnV,UAFpB,EAGoBF,cAHpB,EAGkD;AAAA;;AAH9B,eAAAD,iBAAA,GAAAA,iBAAA;AACA,eAAAsV,MAAA,GAAAA,MAAA;AACA,eAAAnV,UAAA,GAAAA,UAAA;AACA,eAAAF,cAAA,GAAAA,cAAA;AAlCpB,eAAA0B,MAAA,GAAkB,IAAlB;AACA,eAAA4c,KAAA,GAAgB,GAAhB;AACA,eAAAC,MAAA,GAAS;AACP,wBAAY,OADL;AAEP,gCAAoB,wBAFb;AAGP,yBAAa,OAHN;AAIP,mBAAO,IAJA;AAKP,oBAAQ,IALD;AAMP,sBAAU,KANH;AAOP,0BAAc,KAPP;AAQP,wBAAW,QARJ;AASP,uBAAW,GATJ;AAUP,+BAAY7c,MAAM,CAACG,UAAP,IAAqB,GAArB,GAA0BH,MAAM,CAACG,UAAP,GAAkB,KAAKyc,KAAjD,GAAyD5c,MAAM,CAACG,UAA5E;AAVO,WAAT;AAYA,eAAA2c,UAAA,GAAa,IAAb;AAOA,eAAAC,IAAA,GAAe,CAAC,MAAD,EAAS,QAAT,EAAmB,QAAnB,CAAf;AAgBC;;;;wCAdU;AACT,gBAAI,KAAKpJ,MAAL,CAAYqJ,GAAZ,CAAgBC,MAAhB,CAAuB,CAAvB,EAA0B,CAA1B,KAAgC,SAApC,EAA+C;AAC7C,qBAAO,SAAP;AACD,aAFD,MAEO;AACL,qBAAO,KAAKtJ,MAAL,CAAYqJ,GAAnB;AACD;AACF;;;qCAUO,CACP;;;4CAEiB;AAAA;;AAChB,iBAAKE,SAAL,GAAiB,KAAK7e,iBAAL,CAAuB8e,UAAvB,CAAkCzd,SAAlC,CAA4C,UAAC0d,WAAD,EAAiB;AAC5E,kBAAIA,WAAW,IAAI,OAAI,CAACC,MAAL,CAAYC,MAA/B,EAAuC;AACrC,oBAAIF,WAAW,GAAG,GAAd,IAAqBpd,MAAM,CAACG,UAAhC,EAA4C;AAC1C,yBAAI,CAACH,MAAL,GAAc,KAAd;AACD,iBAFD,MAEO;AACL,yBAAI,CAAC6c,MAAL,CAAYD,KAAZ,aAAsBQ,WAAW,GAAG,IAApC;AACD;AACF,eAND,MAMO;AACL,uBAAI,CAACpd,MAAL,GAAc,IAAd;AACD;AACF,aAVgB,CAAjB;AAWD;;;mCAEQsD,K,EAAoB;AAC3B,gBAAMia,iBAAiB,GAAW,GAAlC;AACA,gBAAMC,QAAQ,GAAWxd,MAAM,CAACG,UAAP,GAAoB,IAA7C;;AACA,gBACEmD,KAAK,CAACma,SAAN,CAAgBb,KAAhB,IAAyB;AACzBtZ,iBAAK,CAACma,SAAN,CAAgBC,MADhB,MAC0B;AACzBpa,iBAAK,CAACma,SAAN,CAAgBb,KAAhB,GAAwBW,iBAAxB,IACDja,KAAK,CAACma,SAAN,CAAgBb,KAAhB,GAAwBY,QAHxB,CADF,EAKE;AACA,qBAAO,KAAP;AACD,aAPD,MAOO;AACL,qBAAO,IAAP;AACD;AACF;;;sCAEWla,K,EAA4J;AACtK,iBAAKuZ,MAAL,CAAYD,KAAZ,aAAuBtZ,KAAK,CAACma,SAAN,CAAgBb,KAAvC;AACA,iBAAKte,cAAL,CAAoBqf,kBAApB,CAAuCra,KAAK,CAACma,SAAN,CAAgBb,KAAvD;AACA,iBAAKpe,UAAL,CAAgB4B,aAAhB;AACD;;;wCAEa;AACZ,iBAAK8c,SAAL,CAAe7c,WAAf;AACA,iBAAKud,UAAL,CAAgBvd,WAAhB;AACD;;;;;;;yBAnFUsc,gB,EAAgB,iK,EAAA,uH,EAAA,4I,EAAA,gJ;AAAA,O;;;cAAhBA,gB;AAAgB,oC;AAAA;AAAA;;;;;;;;;;;;;;;ACd7B;;AAMA;;AACI;;AAII;AAAA,qBAAa,IAAAkB,WAAA,QAAb;AAAgC,aAAhC;;AAOA;;AAKI;;AACI;;AAAA;;AACI;;AACJ;;AACJ;;AACJ;;AAGA;;AAAA;;AAGI;;AACA;;AAEA;;AACA;;AAEA;;AACA;;AAWA;;AAA0F;AAAA;AAAA;;AACtF;;AACI;;AAAA;;AACI;;AACA;;AACJ;;AACJ;;AACJ;;AACJ;;AAGA;;AAAA;;AACI;;AACJ;;AACJ;;AACJ;;;;AAnEK;;AASG;;AAAA,qGAA2B,mBAA3B,EAA2B,IAA3B,EAA2B,QAA3B,EAA2B,UAA3B,EAA2B,SAA3B,EAA2B,UAA3B;;AAWI;;AAAA;;AAcmB;;AAAA;;AACO;;AAAA;;AAEP;;AAAA;;AACO;;AAAA;;AAEP;;AAAA;;AACO;;AAAA;;;;;;;;;wED3BzBlB,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTrc,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAKkB,U;;;;;;;;;;;;kBAkB1B,uD;mBAAU,Q;;;;;;;;;;;;;;;;;;;;AE9Bb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACAQ;;AACI;;AAA0B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACtB;;AACJ;;AACJ;;;;;;AAFQ;;AAAA;;;;;;AAJhB;;AACQ;;AAAG;;AAAqC;;AACxC;;AAKR;;;;;;AANW;;AAAA;;AACE;;AAAA;;;;UDOAsd,a;AAGX,+BAAoB9P,WAApB,EAAsD2F,MAAtD,EAAsE;AAAA;;AAAlD,eAAA3F,WAAA,GAAAA,WAAA;AAAkC,eAAA2F,MAAA,GAAAA,MAAA;AAAmB;;;;qCAEjE;AAAA;;AACN;AACA,iBAAK3F,WAAL,CAAiBzL,GAAjB,CAAqB,OAArB,EAA8B,IAA9B,EAAoC3F,IAApC,CAAyC,UAACqC,GAAD,EAAc;AACrD,qBAAI,CAACP,IAAL,GAAYO,GAAG,CAACP,IAAJ,CAAS,CAAT,CAAZ;AACD,aAFD;AAGD;;;qCAEUK,Q,EAAkB;AAC3B,iBAAK4U,MAAL,CAAYhB,QAAZ,CAAqB,CAAC,kBAAkB5T,QAAnB,CAArB;AACD;;;;;;;yBAdU+e,a,EAAa,0I,EAAA,uH;AAAA,O;;;cAAbA,a;AAAa,iC;AAAA,gB;AAAA,e;AAAA,6F;AAAA;AAAA;ACT1B;;AAQA;;AACA;;;;AATK;;;;;;;;;wEDSQA,a,EAAa;gBALzB,uDAKyB;iBALf;AACTxd,oBAAQ,EAAE,UADD;AAETC,uBAAW,EAAE,uBAFJ;AAGTC,qBAAS,EAAE,CAAC,uBAAD;AAHF,W;AAKe,U;;;;;;;;;;;;;;;;;;;;;;;;AET1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACuCwB;;AAAgE;;AAAM;;;;;;;;AAhClF;;AA4BI;;AACI;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AAGA;;AACA;;AAAiG;AAAA;;AAAA;;AAAA;AAAA;;AAAgC;;AACrI;;AACJ;;;;;;AAQY;;AAA0B;;AAAM;;AAChC;;AACA;;AAAwC;;AAAI;;;;;;AAM5C;;AAA6G;;AAAwC;;;;;;AAOjJ;;AAA6E;;AAAiB;;;;;;AAAzC;;AAAwB;;AAAA;;;;;;AA6BrF;;;;;;AAII;;AAAuD;;AAA4B;;;;UDlF9Fud,wB;AAkCX,0CAAoBxO,aAApB,EACoBC,WADpB,EAEoBhR,UAFpB,EAGmBiP,SAHnB,EAI4CzO,IAJ5C,EAYe;AAAA;;AAZK,eAAAuQ,aAAA,GAAAA,aAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAAhR,UAAA,GAAAA,UAAA;AACD,eAAAiP,SAAA,GAAAA,SAAA;AACyB,eAAAzO,IAAA,GAAAA,IAAA,CAQ7B,CA7Cf;;AACA,eAAAgf,QAAA,GAAwB,EAAxB;AAUA,eAAA1D,eAAA,GAA0B,KAA1B;AACA,eAAA2D,eAAA,GAAwC,EAAxC;AAYA,eAAAjJ,oBAAA,GAA+B,SAA/B;AACA,eAAAC,qBAAA,GAAgC,mBAAhC,CAoBe,CAjBf;;AACA,eAAA/T,SAAA,GAAqB,KAArB;AAEA,eAAAgd,KAAA,GAAiB,KAAjB;AAeE,eAAKC,SAAL,GAAiBnf,IAAI,CAACmf,SAAtB;AACA,eAAKC,QAAL,GAAgBpf,IAAI,CAACqf,aAArB;AACA,eAAKC,UAAL,GAAkBtf,IAAI,CAACsf,UAAvB;AACD;;;;qCAEO;AAAA;;AACN,iBAAKC,QAAL,GAAgB,KAAhB,CADM,CAGN;;AACA,iBAAKzD,sBAAL,GAA+B,KAAKvL,aAAL,CAAmBkB,YAAnB,CAAgC/Q,SAAhC,CAA0C,UAACqb,IAAD,EAAgC;AACvG,qBAAI,CAACkD,eAAL,GAAuBlD,IAAvB;AACD,aAF8B,CAA/B,CAJM,CAQN;;AACA,iBAAKyD,SAAL,GAAiB,KAAKhP,WAAL,CAAiBiP,KAAjB,CAAuB/e,SAAvB,CAAiC,UAAC+e,KAAD,EAAwB;AACxE,qBAAI,CAACT,QAAL,GAAgBS,KAAhB;AACD,aAFgB,CAAjB,CATM,CAaN;;AACA,iBAAKC,aAAL,GAAqB,KAAKlgB,UAAL,CAAgB2b,UAAhB,CAA2Bza,SAA3B,CAAqC,UAACkb,KAAD,EAA8B;AACtF,qBAAI,CAAC+D,cAAL,GAAsB/D,KAAtB;AACD,aAFoB,CAArB;AAIA,iBAAKgE,eAAL,GAAuB,IAAI,wDAAJ,CAAc;AACnC,sBAAQ,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAW9c,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB,EAA+C,0DAAWkX,SAAX,CAAqB,EAArB,CAA/C,CAAtB;AAD2B,aAAd,CAAvB;AAIA,iBAAK4F,eAAL,GAAuB,IAAI,wDAAJ,CAAc;AACnC,sBAAQ,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAW/c,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB,EAA+C,0DAAWkX,SAAX,CAAqB,EAArB,CAA/C,CAAtB,CAD2B;AAEnC,yBAAW,IAAI,0DAAJ,CAAgB,IAAhB,CAFwB;AAGnC,uBAAS,IAAI,0DAAJ,CAAgB,IAAhB,CAH0B;AAInC,qBAAO,IAAI,0DAAJ,CAAgB,IAAhB;AAJ4B,aAAd,CAAvB,CAtBM,CA6BN;;AACA,gBAAI,KAAKqF,UAAL,IAAmB,IAAvB,EAA6B;AAC3B,mBAAKO,eAAL,CAAqBtc,GAArB,CAAyB,MAAzB,EAAiCmB,UAAjC,CAA4C,KAAKsa,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8Epa,IAA9E,GAAoF,KAAK8Z,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8Epa,IAAlK,GAAyK,EAArN;AACA,mBAAK2a,eAAL,CAAqBtc,GAArB,CAAyB,SAAzB,EAAoCmB,UAApC,CAA+C,KAAKsa,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8EU,YAA9E,GAA4F,KAAKhB,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8EU,YAA1K,GAAyL,EAAxO;AACA,mBAAKH,eAAL,CAAqBtc,GAArB,CAAyB,OAAzB,EAAkCmB,UAAlC,CAA6C,KAAKsa,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8EW,KAA9E,GAAqF,KAAKjB,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8EW,KAAnK,GAA2K,CAAxN;AACA,mBAAKJ,eAAL,CAAqBtc,GAArB,CAAyB,KAAzB,EAAgCmB,UAAhC,CAA2C,KAAKsa,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8EtB,GAA9E,GAAmF,KAAKgB,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8EtB,GAAjK,GAAuK,EAAlN;AACD;AACF;;;4CAEiB;AAAA;;AAChB;AACA,iBAAKkC,kBAAL,GAA0B,KAAK/b,mBAAL,CAAyBzB,aAAzB,CAAuChC,SAAvC,CAAiD,UAACsC,QAAD,EAAc;AACvF,kBAAIA,QAAJ,EAAc;AACZ,uBAAI,CAACmd,cAAL,GAAsBnd,QAAtB;;AACA,uBAAI,CAACmB,mBAAL,CAAyBuG,SAAzB,CAAmChG,UAAnC,CAA8C1B,QAAQ,CAACkC,IAAvD;AACD;AACF,aALyB,CAA1B,CAFgB,CAShB;;AACA,gBAAI,KAAKoa,UAAL,IAAmB,IAAvB,EAA6B;AAC3B,mBAAKnb,mBAAL,CAAyBuG,SAAzB,CAAmChG,UAAnC,CAA8C,KAAKsa,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8Ec,SAA9E,GAAyF,KAAKpB,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,EAA8Ec,SAAvK,GAAmL,EAAjO;AACD;AACF;AAED;;;;2CACiB;AACf,iBAAKle,SAAL,GAAiB,IAAjB;;AACA,gBAAI,KAAK6Y,kBAAL,CAAwBD,aAAxB,CAAsClF,KAA1C,EAAiD;AAC/C,mBAAK1T,SAAL,GAAiB,KAAjB;AACA,mBAAKuM,SAAL,CAAe4B,KAAf;AACD;;AACD,iBAAKnO,SAAL,GAAiB,KAAjB;AACD;AAED;;;;2CACiB;AAAA;;AACf,gBAAI,KAAK2d,eAAL,CAAqBjK,KAAzB,EAAgC;AAC9B,kBAAIoI,GAAG,GAAQ,IAAf;;AAD8B,yDAEV,KAAKiB,eAFK;AAAA;;AAAA;AAE9B,oEAA0C;AAAA,sBAAlCtN,QAAkC;;AACxC,sBAAIA,QAAQ,CAACzM,IAAT,KAAkB,KAAKoW,eAA3B,EAA4C;AAC1C0C,uBAAG,GAAGrM,QAAQ,CAAC0O,IAAT,CAAcC,MAAd,GAAuB,IAAvB,GAA8B3O,QAAQ,CAAC0O,IAAT,CAAcE,MAAlD;AACA;AACD;AACF,iBAP6B,CAS9B;;AAT8B;AAAA;AAAA;AAAA;AAAA;;AAU9B,kBAAI,KAAKjB,UAAL,IAAmB,IAAvB,EAA6B;AAC3B,qBAAKN,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6D,KAAKT,UAAlE,IAAgF;AAC9Epa,sBAAI,EAAE,KAAK2a,eAAL,CAAqBtc,GAArB,CAAyB,MAAzB,EAAiCgC,KADuC;AAE9E6a,2BAAS,EAAE,KAAKjc,mBAAL,CAAyBuG,SAAzB,CAAmCnF,KAAnC,GAA2C,KAAKpB,mBAAL,CAAyBuH,YAAzB,CAAsC,KAAKvH,mBAAL,CAAyBuG,SAAzB,CAAmCnF,KAAzE,EAAgF,CAAhF,CAA3C,GAAgI,EAF7D;AAG9Eib,4BAAU,EAAE;AAAClV,uBAAG,EAAE,KAAK6U,cAAL,CAAoBld,OAApB,CAA4B4I,QAA5B,CAAqCC,WAArC,CAAiD,CAAjD,CAAN;AAA2DN,uBAAG,EAAE,KAAK2U,cAAL,CAAoBld,OAApB,CAA4B4I,QAA5B,CAAqCC,WAArC,CAAiD,CAAjD;AAAhE,mBAHkE;AAI9EkU,8BAAY,EAAE,KAAKH,eAAL,CAAqBtc,GAArB,CAAyB,SAAzB,EAAoCgC,KAApC,GAA2C,KAAKsa,eAAL,CAAqBtc,GAArB,CAAyB,SAAzB,EAAoCgC,KAA/E,GAAuF,EAJvB;AAK9E0a,uBAAK,EAAE,KAAKJ,eAAL,CAAqBtc,GAArB,CAAyB,OAAzB,EAAkCgC,KAAlC,GAAyC,KAAKsa,eAAL,CAAqBtc,GAArB,CAAyB,OAAzB,EAAkCgC,KAA3E,GAAmF,CALZ;AAM9EoM,0BAAQ,EAAEqM,GAAG,GAAE;AAAC9Y,wBAAI,EAAE,KAAKoW,eAAZ;AAA6B0C,uBAAG,EAAEA;AAAlC,mBAAF,GAA2C,IANsB;AAO9EA,qBAAG,EAAE,KAAK6B,eAAL,CAAqBtc,GAArB,CAAyB,KAAzB,EAAgCgC,KAAhC,GAAwC,KAAKsa,eAAL,CAAqBtc,GAArB,CAAyB,KAAzB,EAAgCgC,KAAxE,GAAgF;AAPP,iBAAhF;AASD,eAVD,MAUO;AACL;AACA,qBAAKyZ,QAAL,CAAc,KAAKG,SAAnB,EAA8BW,QAA9B,CAAuC,KAAKV,QAA5C,EAAsDW,MAAtD,CAA6Dla,IAA7D,CAAkE;AAChEX,sBAAI,EAAE,KAAK2a,eAAL,CAAqBtc,GAArB,CAAyB,MAAzB,EAAiCgC,KADyB;AAEhE6a,2BAAS,EAAE,KAAKjc,mBAAL,CAAyBuG,SAAzB,CAAmCnF,KAAnC,GAA2C,KAAKpB,mBAAL,CAAyBuH,YAAzB,CAAsC,KAAKvH,mBAAL,CAAyBuG,SAAzB,CAAmCnF,KAAzE,EAAgF,CAAhF,CAA3C,GAAgI,EAF3E;AAGhEib,4BAAU,EAAE;AAAClV,uBAAG,EAAE,KAAK6U,cAAL,CAAoBld,OAApB,CAA4B4I,QAA5B,CAAqCC,WAArC,CAAiD,CAAjD,CAAN;AAA2DN,uBAAG,EAAE,KAAK2U,cAAL,CAAoBld,OAApB,CAA4B4I,QAA5B,CAAqCC,WAArC,CAAiD,CAAjD;AAAhE,mBAHoD;AAIhEkU,8BAAY,EAAE,KAAKH,eAAL,CAAqBtc,GAArB,CAAyB,SAAzB,EAAoCgC,KAApC,GAA2C,KAAKsa,eAAL,CAAqBtc,GAArB,CAAyB,SAAzB,EAAoCgC,KAA/E,GAAuF,EAJrC;AAKhE0a,uBAAK,EAAE,KAAKJ,eAAL,CAAqBtc,GAArB,CAAyB,OAAzB,EAAkCgC,KAAlC,GAAyC,KAAKsa,eAAL,CAAqBtc,GAArB,CAAyB,OAAzB,EAAkCgC,KAA3E,GAAmF,CAL1B;AAMhEoM,0BAAQ,EAAEqM,GAAG,GAAE;AAAC9Y,wBAAI,EAAE,KAAKoW,eAAZ;AAA6B0C,uBAAG,EAAEA;AAAlC,mBAAF,GAA2C,IANQ;AAOhEA,qBAAG,EAAE,KAAK6B,eAAL,CAAqBtc,GAArB,CAAyB,KAAzB,EAAgCgC,KAAhC,GAAwC,KAAKsa,eAAL,CAAqBtc,GAArB,CAAyB,KAAzB,EAAgCgC,KAAxE,GAAgF;AAPrB,iBAAlE;AASD;;AACD,mBAAKiL,WAAL,CAAiBiQ,aAAjB,CAA+B,KAAKzB,QAApC,EACCphB,IADD,CACM,UAAC6J,QAAD,EAAc;AAClB,uBAAI,CAAC+I,WAAL,CAAiBkQ,WAAjB,CAA6B,OAAI,CAAC1B,QAAlC;;AACA7S,0BAAU,CAAC,YAAM;AACf,yBAAI,CAACsC,SAAL,CAAe4B,KAAf;AACD,iBAFS,EAEP,GAFO,CAAV;AAGD,eAND,WAOO,UAACjQ,GAAD,EAAS;AACd,uBAAI,CAAC8e,KAAL,GAAa,IAAb;AACD,eATD,aAUS,YAAM;AACb,uBAAI,CAAChd,SAAL,GAAiB,KAAjB;AACA,uBAAI,CAACqd,QAAL,GAAgB,IAAhB;AACD,eAbD;AAcD;AACF;;;wCAEa;AACZ,iBAAKW,kBAAL,CAAwB7e,WAAxB;AACA,iBAAKme,SAAL,CAAene,WAAf;AACA,iBAAKya,sBAAL,CAA4Bza,WAA5B;AACA,iBAAKqe,aAAL,CAAmBre,WAAnB;AACD;;;;;;;yBA3KU0d,wB,EAAwB,uI,EAAA,mI,EAAA,qI,EAAA,sI,EAAA,gEAsCf,wEAtCe,C;AAsCA,O;;;cAtCxBA,wB;AAAwB,8C;AAAA;AAAA;sEAgBxB,mF,EAAkB,I;;;;;;;;;;;;;;;;;ACnC3B;;AACA;;AACI;;AAAgB;;AAAqE;;AACzF;;AACA;;AACA;;AACI;;AAEI;;AAuCA;;AACI;;AAGI;AAAA,qBAAY,IAAA4B,cAAA,EAAZ;AAA4B,aAA5B;;AACA;;AAKA;;AACA;;AACI;;AAAW;;AAAW;;AACtB;;AACA;;AACJ;;AACA;;AACA;;AACI;;AAAW;;AAAQ;;AACnB;;AAAY;AAAA;AAAA;;AACR;;AAAwB;;AAAG;;AAC3B;;AACJ;;AACJ;;AACA;;AACA;;AACA;;AACI;;AAAW;;AAAc;;AACzB;;AACJ;;AACA;;AACA;;AACI;;AAAW;;AAAK;;AAChB;;AACJ;;AACA;;AACA;;AACI;;AAAW;;AAAW;;AACtB;;AACJ;;AACA;;AACA;;AAMI;;AACJ;;AACA;;AACA;;AACA;;AACA;;AACA;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AACA;;AAEJ;;;;AA3GwB;;AAAA;;AAMS;;AAAA;;AA0Cb;;AAAA;;AAW+B;;AAAA;;AAKf;;AAAA;;AAEI;;AAAA;;AAIS;;AAAA,6GAAmC,aAAnC,EAAmC,yBAAnC;;AAqBzB;;AAAA;;AAIS;;AAAA;;AAIF;;AAAA;;;;;;;;;wEDlFlB5B,wB,EAAwB;gBALpC,uDAKoC;iBAL1B;AACTzd,oBAAQ,EAAE,uBADD;AAETC,uBAAW,EAAE,oCAFJ;AAGTC,qBAAS,EAAE,CAAC,oCAAD;AAHF,W;AAK0B,U;;;;;;;;;;;;oBAsCtB,oD;qBAAO,wE;;;;;kBAtBnB,uD;mBAAU,mF;;;kBAMV,uD;mBAAU,Y;;;;;;;;;;;;;;;;;;;;AEzCb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACWQ;;AACI;;AACJ;;;;;;AA+CoC;;AAAoD;;AAAS;;;;;;AAEzD;;AACI;;AACJ;;;;;;AAFwF;;AAC/E;;AAAA;;;;;;AAFb;;AACI;;AAGJ;;;;;;AAHmE;;AAAA;;;;;;AAQnE;;AAAoD;;AAAW;;;;;;AAC/D;;AAAoC;;AAAgB;;;;;;AAAhB;;AAAA;;;;;;AAKpC;;AAAoD;;AAAK;;;;;;AACzD;;AAAqC;;AAAsB;;;;;;AAAtB;;AAAA;;;;;;AAKrC;;AAAoC;;AAAQ;;;;;;AAC5C;;AAAoC;;AAA+C;;AAAyB;;AAAK;;;;;;AAA9B;;AAAA;;;;;;AAKnF;;AAAoD;;AAAM;;;;;;AAEtD;;AAA0E;;AAAkB;;;;;;AAAlB;;AAAA;;;;;;AAD9E;;AACI;;AACJ;;;;;;AADmD;;AAAA;;;;;;AAMnD;;AAAoD;;AAAQ;;;;;;AAExD;;AACI;;AACI;;AAAU;;AAAW;;AACzB;;AACJ;;;;;;AAJG;;AAA2D;;;;;;AADlE;;AACI;;AAKJ;;;;;;AAL8C;;AAAA;;;;;;AAU9C;;;;;;;;AACA;;AACI;;AACI;;AAAqD;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,wCAAsB,IAAtB,EAA4B,KAA5B,EAA0B,SAA1B,EAAsC,IAAtC;AAA0C,WAA1C;;AACjD;;AAAU;;AAAG;;AACjB;;AACJ;;AACJ;;;;;;AAGJ;;;;;;AACA;;;;;;AAxEZ;;AACI;;AACI;;AACI;;AACJ;;AACA;;AACI;;;;AACJ;;AACJ;;AACA;;AACI;;AAEK;;AACG;;AACA;;AAKJ;;AAGA;;AACI;;AACA;;AACJ;;AAGA;;AACI;;AACA;;AACJ;;AAGA;;AACI;;AACA;;AACJ;;AAGA;;AACI;;AACA;;AAGJ;;AAGA;;AACI;;AACA;;AAOJ;;AAGA;;AACI;;AACA;;AAOJ;;AAEA;;AACA;;AACJ;;AACJ;;AACJ;;;;;;;;;AAxEY;;AAAA;;AAGA;;AAAA;;AAIO;;AAAA;;AA6DS;;AAAA;;AACP;;AAAA;;;;;;;;AAvGrC;;AACI;;AACI;;AACI;;AACI;;AACA;;AAA4C;AAAA;;AAAA;;AAAA,mBAAS,YAAT;AAAwB,WAAxB;;AACxC;;AAAgC;;AAAI;;AACxC;;AACJ;;AACJ;;AACA;;AAAkD;;;;;;AAAmF;;AAA6C;;AAA4C;;AAC9N;;AAAM;AAAA;;AAAA;;AAAA,mBAAS,YAAT;AAAwB,WAAxB;;AACF;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AACf;;AAAU;;AAAK;;AACnB;;AACA;;AAAmB;AAAA;;AAAA;;AAAA,yCAAuB,IAAvB,EAA6B,IAA7B;AAAiC,WAAjC;;AACf;;AAAU;;AAAG;;AACjB;;AACA;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AACf;;AAA+B;;AAAG;;AACtC;;AACJ;;AACJ;;AAEA;;AACI;;AACI;;AACI;;AAAmB;AAAA;;AAAA;;AAAA,mBAAS,QAAAof,aAAA,UAAT;AAAgC,WAAhC;;AAAkC;;AAAU;;AAC/D;;AAAmB;AAAA;;AAAA;;AAAA,mBAAS,QAAAA,aAAA,WAAT;AAAiC,WAAjC;;AAAmC;;AAAY;;AACtE;;AACA;;AACI;;AA4EA;;AAEA;;AACI;;AACI;;AAAiB;;AAAa;;AAC9B;;AAAuB;;AAAuB;;AAClD;;AACA;;AACI;;AACI;;AAAmC;;AAAqD;;AACxF;;AAAgC;;AAA8C;;AAC9E;;AAAkC;;AAAqC;;AAC3E;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;;;AA7HgD;;AAIhC;;AAAA;;AAM0C;;AAAA;;AAAgG;;AAAA;;AAAgC;;AAAA;;AAEnE;;AAAA,sFAAyB,WAAzB,EAAyB,SAAzB;;AAmBlF;;AAAA;;AAqF0B;;AAAA;;AACH;;AAAA;;AACE;;AAAA;;;;;;AAW9D;;AACI;;AAAM;;AAA8B;;AAAe;;AACvD;;;;;;AAoCgC;;AAAoD;;AAAS;;;;;;AAEzD;;AACI;;AACJ;;;;;;AAFwF;;AAC/E;;AAAA;;;;;;AAFb;;AACI;;AAGJ;;;;;;AAHmE;;AAAA;;;;;;AAQnE;;AAAoD;;AAAW;;;;;;AAC/D;;AAAoC;;AAAgB;;;;;;AAAhB;;AAAA;;;;;;AAKpC;;AAAoD;;AAAK;;;;;;AACzD;;AAAqC;;AAAsB;;;;;;AAAtB;;AAAA;;;;;;AAKrC;;AAAoC;;AAAQ;;;;;;AAC5C;;AAAoC;;AAA+C;;AAAyB;;AAAK;;;;;;AAA9B;;AAAA;;;;;;AAKnF;;AAAoD;;AAAM;;;;;;AAEtD;;AAA0E;;AAAkB;;;;;;AAAlB;;AAAA;;;;;;AAD9E;;AACI;;AACJ;;;;;;AADmD;;AAAA;;;;;;AAMnD;;AAAoD;;AAAQ;;;;;;AAExD;;AACI;;AACI;;AAAU;;AAAW;;AACzB;;AACJ;;;;;;AAJG;;AAA2D;;;;;;AADlE;;AACI;;AAKJ;;;;;;AAL8C;;AAAA;;;;;;AAU9C;;;;;;;;AACA;;AACI;;AACI;;AAA2C;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACvC;;AAAU;;AAAI;;AAClB;;AACA;;AAA0D;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACtD;;AAAU;;AAAM;;AACpB;;AACA;;AAAqD;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACjD;;AAAU;;AAAG;;AACjB;;AACA;;AACI;;AAAU;;AAAc;;AAC5B;;AACJ;;AACJ;;;;;;AAGJ;;;;;;AACA;;;;;;AAOA;;AAAkE;;AAAY;;;;;;AAC9E;;AAAiE;;AAAI;;;;;;AACrE;;AAAqF;;AAAK;;;;;;AAC1F;;;;;;AAGJ;;AAAwH;;AAA4B;;;;;;;;AA9F5J;;AACI;;AACI;;AACI;;AACJ;;AACA;;AACI;;;;AACJ;;AACJ;;AACA;;AACI;;AAA+H;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAE1H;;AACG;;AACA;;AAKJ;;AAGA;;AACI;;AACA;;AACJ;;AAGA;;AACI;;AACA;;AACJ;;AAGA;;AACI;;AACA;;AACJ;;AAGA;;AACI;;AACA;;AAGJ;;AAGA;;AACI;;AACA;;AAOJ;;AAGA;;AACI;;AACA;;AAgBJ;;AAEA;;AACA;;AACJ;;AACJ;;AACA;;AAEA;;AACI;;AAAqE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,4DAAiC,IAAjC;AAAqC,WAArC;;AACjE;;AACA;;AACA;;AACA;;AACJ;;AACA;;AACA;;AACJ;;AACJ;;;;;;;;;;;AA7FY;;AAAA;;AAGA;;AAAA;;AAIO;;AAAA,sHAAkC,iBAAlC,EAAkC,mCAAlC;;AAsES;;AAAA;;AACP;;AAAA;;AAOc;;AAAA;;AACA;;AAAA;;AACoB;;AAAA;;AAC9B;;AAAA;;AAG6D;;AAAA;;;;;;;;AAlHtG;;AACI;;AACI;;AAA2C;;AAAiB;;AAC5D;;AAAkD;;;;;;AAAuE;;AAA6C;;AAAsC;;AAC5M;;AAAM;AAAA;;AAAA;;AAAA,mBAAS,aAAT;AAAqB,WAArB;;AACF;;AAAmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACf;;AAAU;;AAAK;;AACnB;;AACA;;AAAmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACf;;AAAU;;AAAG;;AACjB;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACI;;AAAmB;AAAA;;AAAA;;AAAA,mBAAS,SAAAA,aAAA,UAAT;AAAgC,WAAhC;;AAAkC;;AAAU;;AAC/D;;AAAmB;AAAA;;AAAA;;AAAA,mBAAS,SAAAA,aAAA,WAAT;AAAiC,WAAjC;;AAAmC;;AAAY;;AACtE;;AACA;;AACI;;AAiGA;;AAEA;;AACI;;AACI;;AAAiB;;AAAa;;AAC9B;;AAAuB;;AAAuB;;AAClD;;AACA;;AACI;;AACI;;AAAmC;;AAA4C;;AAC/E;;AAAgC;;AAAwC;;AACxE;;AAAkC;;AAA+B;;AACrE;;AACJ;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AAAgC;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAC5B;;AACJ;;AACA;;AACI;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;;;;;;;AAjJyF;;AAEtC;;AAAA;;AACO;;AAAA;;AAAoF;;AAAA;;AAAgC;;AAAA;;AAE7D;;AAAA,sFAAyB,WAAzB,EAAyB,SAAzB;;AAe5E;;AAAA;;AA0G0B;;AAAA;;AACH;;AAAA;;AACE;;AAAA;;;;;;;;AAtR1E;;AACI;;AACI;;AACI;;AAAuF;AAAA;;AAAA;;AAAA;AAAA;;AACnF;;AAAU;;AAAG;;AACjB;;AACJ;;AACJ;;AACA;;AACA;;AAEI;;AAGA;;AAEI;;AA+HA;;AAEA;;AAKA;;AAkJJ;;AACJ;;AACJ;;;;;;AA/RsB;;AAAA;;AAKmB;;AAAA;;AAiIxB;;AAAA;;AAKqB;;AAAA;;;;;;AAsJtC;;AACI;;AACI;;AACI;;AACI;;AAAsB;;AAAyC;;AACnE;;AACJ;;AACJ;;AACJ;;;;;;AAII;;;;;;AAAW;;;;UD7RFC,e;AAmIX,iCAAoBC,SAApB,EACoBtQ,WADpB,EAEoBlR,cAFpB,EAGoBE,UAHpB,EAIoBoL,cAJpB,EAKoBoE,WALpB,EAK8C;AAAA;;AAL1B,eAAA8R,SAAA,GAAAA,SAAA;AACA,eAAAtQ,WAAA,GAAAA,WAAA;AACA,eAAAlR,cAAA,GAAAA,cAAA;AACA,eAAAE,UAAA,GAAAA,UAAA;AACA,eAAAoL,cAAA,GAAAA,cAAA;AACA,eAAAoE,WAAA,GAAAA,WAAA;AArIpB,eAAA9M,SAAA,GAAqB,KAArB;AACA,eAAAgd,KAAA,GAAiB,KAAjB;AACA,eAAA6B,SAAA,GAAqB,KAArB;AACA,eAAAC,UAAA,GAAwB,IAAxB;AACA,eAAAC,UAAA,GAA2B,IAA3B;AAcA,eAAAC,eAAA,GAAiD,IAAI,0EAAJ,CAAuB,EAAvB,CAAjD;AAaA,eAAAC,gBAAA,GAAkB,CAAC,UAAD,EAAa,WAAb,EAA0B,WAA1B,EAAuC,cAAvC,EAAuD,OAAvD,EAAgE,KAAhE,EAAuE,OAAvE,CAAlB;AAMA,eAAA1B,KAAA,GAAqB,EAArB;AAiGC,S,CA/FD;;;;;qCACW5b,I,EAAU;AACnB,gBAAIud,CAAC,GAAG,IAAI/b,IAAJ,CAASxB,IAAT,CAAR;AACA,gBAAIwd,OAAO,GAAa,IAAIC,KAAJ,CAAU,CAAV,CAAxB;AACAD,mBAAO,CAAC,CAAD,CAAP,GAAa,KAAb;AACAA,mBAAO,CAAC,CAAD,CAAP,GAAa,KAAb;AACAA,mBAAO,CAAC,CAAD,CAAP,GAAa,KAAb;AACAA,mBAAO,CAAC,CAAD,CAAP,GAAa,KAAb;AACAA,mBAAO,CAAC,CAAD,CAAP,GAAa,KAAb;AACAA,mBAAO,CAAC,CAAD,CAAP,GAAa,KAAb;AACAA,mBAAO,CAAC,CAAD,CAAP,GAAa,KAAb;AACA,gBAAIva,CAAC,GAAGsa,CAAC,CAACG,MAAF,EAAR;AACA,mBAAOF,OAAO,CAACva,CAAD,CAAd;AACD,W,CAED;;;;sCACY0a,G,EAAyB;AACnC,gBAAIC,KAAK,GAAW,CAApB;;AACA,gBAAID,GAAJ,EAAS;AACP,kBAAIzB,MAAM,GAAUyB,GAAG,CAACzB,MAAJ,GAAYyB,GAAG,CAACzB,MAAhB,GAAyB,EAA7C;;AACA,mBAAK,IAAIpf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGof,MAAM,CAAChZ,MAA3B,EAAmCpG,CAAC,EAApC,EAAwC;AACtCof,sBAAM,CAACpf,CAAD,CAAN,CAAUsf,KAAV,GAAiBwB,KAAK,IAAI1B,MAAM,CAACpf,CAAD,CAAN,CAAUsf,KAApC,GAA4CwB,KAAK,IAAI,CAArD;AACD;AACF;;AACD,mBAAOA,KAAP;AACD,W,CAED;;;;wCACcD,G,EAAc;AAAA;;AAC1B,gBAAIC,KAAK,GAAW,CAApB;;AACA,gBAAID,GAAG,CAAC1B,QAAR,EAAkB;AAChB0B,iBAAG,CAAC1B,QAAJ,CAAa9W,OAAb,CAAqB,UAACuD,OAAD,EAAa;AAChCkV,qBAAK,IAAI,OAAI,CAACC,WAAL,CAAiBnV,OAAjB,CAAT;AACD,eAFD;AAGD;;AACD,mBAAOkV,KAAP;AACD,W,CAED;;;;uCACaD,G,EAAyB;AACpC,gBAAIA,GAAJ,EAAS;AACP,kBAAIzB,MAAM,GAAUyB,GAAG,CAACzB,MAAJ,GAAYyB,GAAG,CAACzB,MAAhB,GAAwB,EAA5C;AACA,qBAAOA,MAAM,CAAChZ,MAAd;AACD,aAHD,MAGO;AACL,qBAAO,CAAP;AACD;AACF,W,CAED;;;;yCACeya,G,EAAc;AAAA;;AAC3B,gBAAIC,KAAK,GAAW,CAApB;;AACA,gBAAID,GAAG,CAAC1B,QAAR,EAAkB;AAChB0B,iBAAG,CAAC1B,QAAJ,CAAa9W,OAAb,CAAqB,UAACuD,OAAD,EAAa;AAChCkV,qBAAK,IAAI,OAAI,CAACE,YAAL,CAAkBpV,OAAlB,CAAT;AACD,eAFD;AAGD;;AACD,mBAAOkV,KAAP;AACD;;;0CAEetC,S,EAAwByC,M,EAAgB;AACtD,gBAAIC,IAAI,GAAW,CAAnB;AACA,gBAAIC,SAAS,GAAW,IAAxB;AACA,gBAAIN,GAAG,GAAGI,MAAM,GAAE,KAAKZ,UAAP,GAAoB,KAAKvB,KAAL,CAAWN,SAAX,CAApC;;AACA,iBAAK,IAAIxe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6gB,GAAG,CAAC1B,QAAJ,CAAa/Y,MAAjC,EAAyCpG,CAAC,EAA1C,EAA8C;AAC5C6gB,iBAAG,CAAC1B,QAAJ,CAAanf,CAAb,EAAgBof,MAAhB,CAAuB/W,OAAvB,CAA+B,UAAC+Y,KAAD,EAAW;AACxC,oBAAIA,KAAK,CAACvB,UAAV,EAAsB;AACpB,sBAAIsB,SAAS,KAAK,IAAlB,EAAwB;AACtBA,6BAAS,GAAG,IAAI,gDAAJ,CAAWC,KAAK,CAACvB,UAAN,CAAiBlV,GAA5B,EAAiCyW,KAAK,CAACvB,UAAN,CAAiBhV,GAAlD,CAAZ;AACD;;AACDqW,sBAAI,IAAIC,SAAS,CAACE,UAAV,CAAqBD,KAAK,CAACvB,UAA3B,CAAR;AACAsB,2BAAS,GAAG,IAAI,gDAAJ,CAAWC,KAAK,CAACvB,UAAN,CAAiBlV,GAA5B,EAAiCyW,KAAK,CAACvB,UAAN,CAAiBhV,GAAlD,CAAZ;AACD;AACF,eARD;AASD;;AACD,mBAAO,CAACqW,IAAI,GAAC,IAAN,EAAYI,OAAZ,CAAoB,CAApB,CAAP;AACD;;;wCAEa9C,S,EAAmBC,Q,EAAkBwC,M,EAAgB;AACjE,gBAAIM,MAAM,GAAG,IAAI,0EAAJ,CAA4B,EAA5B,CAAb;AACA,gBAAIV,GAAG,GAAGI,MAAM,GAAE,KAAKZ,UAAP,GAAoB,KAAKvB,KAAL,CAAWN,SAAX,CAApC;;AACA,gBAAIqC,GAAG,CAAC1B,QAAR,EAAkB;AAChBoC,oBAAM,CAACliB,IAAP,GAAcwhB,GAAG,CAAC1B,QAAJ,CAAaV,QAAb,EAAuBW,MAArC;AACAmC,oBAAM,CAACC,IAAP,GAAc,KAAKA,IAAnB;AACA,qBAAOD,MAAP;AACD,aAJD,MAIO;AACL,qBAAOA,MAAP;AACD;AACF;;;qCAUO;AAAA;;AACN;AACA,iBAAKtX,cAAL,CAAoBQ,WAApB,CAAgC1K,SAAhC,CAA0C,UAAC2K,MAAD,EAAY;AACpD,kBAAIA,MAAM,CAAC+W,MAAX,EAAmB;AACjB/hB,uBAAO,CAACC,GAAR,CAAY+K,MAAZ;;AACA,uBAAI,CAAC2D,WAAL,CAAiBzL,GAAjB,CAAqB,QAArB,EAA+B;AAC7B6e,wBAAM,EAAE/W,MAAM,CAAC+W;AADc,iBAA/B,EAGCxkB,IAHD,CAGM,UAACqC,GAAD,EAA4B;AAChC,yBAAI,CAAC+gB,UAAL,GAAkB/gB,GAAG,CAACoiB,IAAtB;AACD,iBALD,WAMO,UAACjiB,GAAD,EAAS;AACdC,yBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,iBARD,aASS,YAAM,CAEd,CAXD;AAYD;AACF,aAhBD;AAkBA,iBAAK8B,SAAL,GAAiB,IAAjB;AACA,iBAAKogB,QAAL,GAAgB,KAAK9R,WAAL,CAAiBiP,KAAjB,CAAuB/e,SAAvB,CAAiC,UAAC+e,KAAD,EAAwB;AACvE,qBAAI,CAACA,KAAL,GAAaA,KAAb;AACA,qBAAI,CAACvd,SAAL,GAAiB,KAAjB;;AACA,kBAAI,OAAI,CAACqgB,KAAT,EAAgB;AACd,uBAAI,CAACA,KAAL,CAAWC,UAAX;AACD;AACF,aANe,CAAhB;AAOA,iBAAK3a,gBAAL,GAAwB,KAAKvI,cAAL,CAAoBwB,YAApB,CAAiCJ,SAAjC,CAA2C,UAAC8R,KAAD,EAAoB;AACrF,qBAAI,CAAC1R,YAAL,GAAoB0R,KAApB;AACD,aAFuB,CAAxB;AAGD;;;4CAEiBrU,E,EAAY;AAC5B,iBAAK8iB,UAAL,GAAkB,0EAAYwB,YAAZ,GAA2B,UAA3B,GAAwC,SAAxC,GAAoDtkB,EAAtE;AACD;AAED;;;;qCACW;AAAA;;AACT,iBAAKshB,KAAL,CAAW5Z,IAAX,CAAgB,KAAKmb,UAArB;AACA,iBAAK9e,SAAL,GAAiB,IAAjB;AACA,iBAAKsO,WAAL,CAAiBiQ,aAAjB,CAA+B,KAAKhB,KAApC,EACC7hB,IADD,CACM,YAAM;AACV,qBAAI,CAACmjB,SAAL,GAAiB,IAAjB;AACD,aAHD,aAIS,YAAM;AACb,qBAAI,CAAC7e,SAAL,GAAiB,KAAjB;AACD,aAND;AAOD;AAED;;;;6CACmB;AAAA;;AACjB,iBAAKuM,SAAL,GAAiB,KAAKqS,SAAL,CAAepS,IAAf,CAAoB,+GAApB,EAAwC;AACvDkP,mBAAK,EAAE,OADgD;AAEvD5d,kBAAI,EAAE;AACJkF,oBAAI,EAAE,KAAKA,IADP;AAEJwd,qBAAK,EAAE,KAAKA,KAFR;AAGJC,mBAAG,EAAE,KAAKA;AAHN;AAFiD,aAAxC,CAAjB;AASA,iBAAKlU,SAAL,CAAeG,WAAf,GAA6BlO,SAA7B,CAAuC,UAACqE,MAAD,EAAsB;AAC3D,kBAAIA,MAAJ,EAAY;AACV,uBAAI,CAAC0a,KAAL,CAAW5Z,IAAX,CAAgBd,MAAhB;;AACA,uBAAI,CAACyL,WAAL,CAAiBkQ,WAAjB,CAA6B,OAAI,CAACjB,KAAlC;AACD;AACF,aALD;AAMD;AAED;;;;4CACkBN,S,EAAmBE,a,EAAuBC,U,EAAyB;AACnF,iBAAK7Q,SAAL,GAAiB,KAAKqS,SAAL,CAAepS,IAAf,CAAoB,uGAApB,EAA8C;AAC7DkP,mBAAK,EAAE,OADsD;AAE7D5d,kBAAI,EAAE;AACJmf,yBAAS,EAAEA,SADP;AAEJE,6BAAa,EAAEA,aAFX;AAGJC,0BAAU,EAAEA,UAHR;AAIJpa,oBAAI,EAAE,KAAK0d,SAJP;AAKJC,0BAAU,EAAE,KAAKA,UALb;AAMJzC,yBAAS,EAAE,KAAKA,SANZ;AAOJJ,4BAAY,EAAE,KAAKA;AAPf;AAFuD,aAA9C,CAAjB;AAaA,iBAAKvR,SAAL,CAAeG,WAAf,GAA6BlO,SAA7B,CAAuC,UAACqE,MAAD,EAAgB,CACrD;AACA;AACA;AACA;AACD,aALD;AAMD;AAED;;;;qCACWT,K,EAA8B6a,S,EAAmBC,Q,EAAkB;AAAA;;AAC5E,2FAAgB,KAAKK,KAAL,CAAWN,SAAX,EAAsBW,QAAtB,CAA+BV,QAA/B,EAAyCW,MAAzD,EAAiEzb,KAAK,CAACwe,aAAvE,EAAsFxe,KAAK,CAACye,YAA5F;AACA,iBAAK7gB,SAAL,GAAiB,IAAjB;AACA,iBAAKsO,WAAL,CAAiBiQ,aAAjB,CAA+B,KAAKhB,KAApC,EACC7hB,IADD,CACM,UAACqC,GAAD,EAAS;AACb,qBAAI,CAACsiB,KAAL,CAAWC,UAAX;;AACA,qBAAI,CAACzB,SAAL,GAAiB,IAAjB;AACD,aAJD,WAKO,YAAM;AACX,qBAAI,CAAC7B,KAAL,GAAa,IAAb;AACD,aAPD,aAQS,YAAM;AACb,qBAAI,CAAChd,SAAL,GAAiB,KAAjB;AACAiK,wBAAU,CAAC,YAAM;AACf,uBAAI,CAAC4U,SAAL,GAAiB,KAAjB;AACA,uBAAI,CAAC7B,KAAL,GAAa,KAAb;AACD,eAHS,EAGP,IAHO,CAAV;AAID,aAdD;AAeD;AAED;;;;wCACcC,S,EAAmBC,Q,EAAkBE,U,EAAoB;AAAA;;AACrE,gBAAI9E,OAAO,+CAAX,EAA4D;AAC1Dna,qBAAO,CAACC,GAAR,CAAa,KAAKmf,KAAL,CAAWN,SAAX,EAAsBW,QAAtB,CAA+BV,QAA/B,EAAyCW,MAAzC,CAAgDT,UAAhD,CAAb;AACA,mBAAKG,KAAL,CAAWN,SAAX,EAAsBW,QAAtB,CAA+BV,QAA/B,EAAyCW,MAAzC,CAAgD9Z,MAAhD,CAAuDqZ,UAAvD,EAAmE,CAAnE;AACA,mBAAK9O,WAAL,CAAiBiQ,aAAjB,CAA+B,KAAKhB,KAApC,aACS,YAAM;AACb,oBAAI,OAAI,CAAC8C,KAAT,EAAgB;AACd,yBAAI,CAACA,KAAL,CAAWC,UAAX;AACD;AACF,eALD;AAMD,aATD,MASO,CAEN;AACF;AAED;;;;uCACatd,I,EAAca,K,EAAe;AAAA;;AACxC,gBAAIyU,OAAO,2CAAoCtV,IAApC,OAAX,EAAyD;AACvD,mBAAKua,KAAL,CAAWxZ,MAAX,CAAkBF,KAAlB,EAAyB,CAAzB;AACA,mBAAKyK,WAAL,CAAiBiQ,aAAjB,CAA+B,KAAKhB,KAApC,aACS,YAAM;AACb,oBAAI,OAAI,CAAC8C,KAAT,EAAgB;AACd,yBAAI,CAACA,KAAL,CAAWC,UAAX;AACD;AACF,eALD;AAMD,aARD,MAQO,CAEN;AACF;AAED;;;;wCACcrD,S,EAAmByC,M,EAAmB;AAAA;;AAClD;AACA,gBAAI,KAAKpiB,UAAL,CAAgBpB,GAAhB,CAAoB4kB,SAApB,CAA8B,OAA9B,CAAJ,EAA4C;AAC1C,mBAAKxjB,UAAL,CAAgBpB,GAAhB,CAAoB6kB,WAApB,CAAgC,OAAhC;AACA,mBAAKzjB,UAAL,CAAgBpB,GAAhB,CAAoB8kB,YAApB,CAAiC,OAAjC;AACA,mBAAK1jB,UAAL,CAAgBpB,GAAhB,CAAoB6kB,WAApB,CAAgC,QAAhC;AACA,mBAAKzjB,UAAL,CAAgBpB,GAAhB,CAAoB8kB,YAApB,CAAiC,QAAjC;AACD;;AACD,gBAAI1B,GAAG,GAAGI,MAAM,GAAE,KAAKZ,UAAP,GAAoB,KAAKvB,KAAL,CAAWN,SAAX,CAApC,CARkD,CASlD;;AACA,gBAAIvD,KAAK,GAAoB,EAA7B;;AAVkD,wDAWlC4F,GAAG,CAAC1B,QAX8B;AAAA;;AAAA;AAWlD,qEAA8B;AAAA,oBAArBqD,GAAqB;AAC5BA,mBAAG,CAACpD,MAAJ,CAAW/W,OAAX,CAAmB,UAAC+Y,KAAD,EAAW;AAC5B,sBAAIA,KAAK,CAACvB,UAAV,EAAsB;AACpB5E,yBAAK,CAAC/V,IAAN,CAAW,CAACkc,KAAK,CAACvB,UAAN,CAAiBlV,GAAlB,EAAuByW,KAAK,CAACvB,UAAN,CAAiBhV,GAAxC,CAAX,EADoB,CAGpB;;AACA,2BAAI,CAAChM,UAAL,CAAgB8X,UAAhB,CAA2B,CAA3B,EAA8B;AAC5BpS,0BAAI,EAAE6c,KAAK,CAAC7c,IADgB;AAE5BjC,6BAAO,EAAC;AACN4I,gCAAQ,EAAC;AACPC,qCAAW,EAAE,CAACiW,KAAK,CAACvB,UAAN,CAAiBlV,GAAlB,EAAuByW,KAAK,CAACvB,UAAN,CAAiBhV,GAAxC;AADN;AADH;AAFoB,qBAA9B;AAQD;AACF,iBAdD;AAeD,eA3BiD,CA6BlD;;AA7BkD;AAAA;AAAA;AAAA;AAAA;;AA8BlD,iBAAKhM,UAAL,CAAgBpB,GAAhB,CAAoBglB,SAApB,CAA8B,OAA9B,EAAuC;AACrC,sBAAQ,SAD6B;AAErC,sBAAQ;AACN,wBAAQ,SADF;AAEN,8BAAc,EAFR;AAGN,4BAAY;AACV,0BAAQ,YADE;AAEV,iCAAexH;AAFL;AAHN;AAF6B,aAAvC;AAWA,iBAAKpc,UAAL,CAAgBpB,GAAhB,CAAoBilB,QAApB,CAA6B;AAC3B,oBAAM,OADqB;AAE3B,sBAAQ,MAFmB;AAG3B,wBAAU,OAHiB;AAI3B,wBAAU;AACV,6BAAa,OADH;AAEV,4BAAY;AAFF,eAJiB;AAQ3B,uBAAS;AACT,8BAAc,SADL;AAET,8BAAc;AAFL;AARkB,aAA7B;AAaA,iBAAK7jB,UAAL,CAAgBpB,GAAhB,CAAoBklB,SAApB,CAA8B,QAA9B;AACD;AAGD;;;;uCACanE,S,EAAmBC,Q,EAAkBE,U,EAAoBsC,M,EAAkB;AACtF,gBAAIJ,GAAG,GAAGI,MAAM,GAAE,KAAKZ,UAAP,GAAoB,KAAKvB,KAAL,CAAWN,SAAX,CAApC;AACA,iBAAK3f,UAAL,CAAgB+jB,cAAhB;AACA,gBAAI3H,KAAK,GAAsB4F,GAAG,CAAC1B,QAAJ,CAAaV,QAAb,EAAuBW,MAAvB,CAA8BT,UAA9B,EAA0CkB,UAA1C,GAAsD,IAAI,4EAAJ,CAAsBgB,GAAG,CAAC1B,QAAJ,CAAaV,QAAb,EAAuBW,MAAvB,CAA8BT,UAA9B,EAA0CkB,UAA1C,CAAqDlV,GAA3E,EAAgFkW,GAAG,CAAC1B,QAAJ,CAAaV,QAAb,EAAuBW,MAAvB,CAA8BT,UAA9B,EAA0CkB,UAA1C,CAAqDhV,GAArI,CAAtD,GAAkM,IAAjO;;AACA,gBAAIoQ,KAAJ,EAAW;AACT,mBAAKpc,UAAL,CAAgBgkB,SAAhB,CAA0B5H,KAA1B;AACD;AACF;;;wCAEa;AACZ,iBAAKpc,UAAL,CAAgB+jB,cAAhB;;AACA,iBAAKjB,QAAL,CAAcjhB,WAAd;;AACA,iBAAKwG,gBAAL,CAAsBxG,WAAtB;AACA,iBAAK7B,UAAL,CAAgBuY,YAAhB,CAA6B,EAA7B,EAAiC,IAAjC,EAAuC,IAAvC;;AACA,gBAAI,KAAKvY,UAAL,CAAgBpB,GAAhB,CAAoB4kB,SAApB,CAA8B,OAA9B,CAAJ,EAA4C;AAC1C,mBAAKxjB,UAAL,CAAgBpB,GAAhB,CAAoB6kB,WAApB,CAAgC,OAAhC;AACA,mBAAKzjB,UAAL,CAAgBpB,GAAhB,CAAoB8kB,YAApB,CAAiC,OAAjC;AACA,mBAAK1jB,UAAL,CAAgBpB,GAAhB,CAAoB6kB,WAApB,CAAgC,QAAhC;AACA,mBAAKzjB,UAAL,CAAgBpB,GAAhB,CAAoB8kB,YAApB,CAAiC,QAAjC;AACD;AACF;;;;;;;yBA3WUrC,e,EAAe,oI,EAAA,oI,EAAA,iJ,EAAA,6I,EAAA,gI,EAAA,2I;AAAA,O;;;cAAfA,e;AAAe,mC;AAAA;AAAA;sEAUf,wE,EAAY,I;;sEASZ,gE,EAAQ,I;;sEACR,8D,EAAO,I;;;;;;;;;;;;;;;;AC/CpB;;AA4SA;;AAWA;;;;AAvTiC;;AA4SlB;;AAAA;;;;;;;;;;wEDjRFA,e,EAAe;gBAL3B,uDAK2B;iBALjB;AACTvf,oBAAQ,EAAE,YADD;AAETC,uBAAW,EAAE,yBAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAKiB,U;;;;;;;;;;;;;;;;kBAUzB,uD;mBAAU,wE;;;kBASV,uD;mBAAU,gE;;;kBACV,uD;mBAAU,8D;;;;;;;;;;;;;;;;;;;;AE9Cb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACOgB;;AAA2G;;AAAoB;;;;;;;;AAiBvI;;AAAsD;AAAA;;AAAA;;AAAA;AAAA;;AAAyB;;AAAI;;;;;;AACnF;;AAAqC;;AAA2C;;;;AAA9B;;AAAA;;;;UDf7CiiB,kB;AAUX,oCACShV,SADT,EAEkCzO,IAFlC,EAOUgP,WAPV,EAOkC;AAAA;;AANzB,eAAAP,SAAA,GAAAA,SAAA;AACyB,eAAAzO,IAAA,GAAAA,IAAA;AAKxB,eAAAgP,WAAA,GAAAA,WAAA;AAfV,eAAA0U,OAAA,GAAgB,IAAIre,IAAJ,EAAhB;AAGA,eAAAnD,SAAA,GAAqB,KAArB;AACA,eAAAyhB,OAAA,GAAmB,KAAnB;AAaE,eAAKC,SAAL,GAAiB,IAAI,wDAAJ,CAAc;AAC7B,oBAAQ,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAW9gB,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,CAArB,CAAtB,CAAtB,EAAsE,KAAK8gB,SAAL,CAAe1J,IAAf,CAAoB,IAApB,CAAtE,CADqB;AAE7B,yBAAa,IAAI,wDAAJ,CAAc;AACzB,uBAAS,IAAI,0DAAJ,CAAgB,IAAhB,CADgB;AAEzB,qBAAO,IAAI,0DAAJ,CAAgB,IAAhB;AAFkB,aAAd;AAFgB,WAAd,CAAjB;AAOD;;;;qCAEO,CACP;;;oCAEShU,O,EAA6B;AAAA;;AACrC,mBAAO,IAAIzI,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAAC3I,WAAL,CAAiBzL,GAAjB,CAAqB,OAArB,EAA8B,EAA9B,EACC3F,IADD,CACM,UAAC6J,QAAD,EAGA;AACJ,oBAAIgY,KAAK,GAAgBhY,QAAQ,CAAC/H,IAAT,CAAc,CAAd,EAAiB+f,KAAjB,GAAwBhY,QAAQ,CAAC/H,IAAT,CAAc,CAAd,EAAiB+f,KAAzC,GAAiD,IAA1E;;AACA,oBAAIA,KAAJ,EAAW;AACT,yBAAI,CAACA,KAAL,GAAaA,KAAb;;AACA,uBAAK,IAAI9e,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8e,KAAK,CAAC1Y,MAA1B,EAAkCpG,CAAC,EAAnC,EAAuC;AACrC,wBAAG8e,KAAK,CAAC9e,CAAD,CAAL,CAASmjB,QAAT,IAAqB3d,OAAO,CAACZ,KAAhC,EAAuC;AACrC5H,6BAAO,CAAC;AAACyC,2BAAG,EAAE;AAAN,uBAAD,CAAP;AACA;AACD;AACF;;AACDzC,yBAAO,CAAC,IAAD,CAAP;AACD,iBATD,MASO;AACLA,yBAAO,CAAC,IAAD,CAAP;AACD;AACF,eAlBD,WAmBO,UAAAyC,GAAG,EAAI;AACZC,uBAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBF,GAAnB;AACAuX,sBAAM,CAACvX,GAAG,CAAC6I,OAAL,CAAN;AACD,eAtBD;AAuBD,aAxBM,CAAP;AAyBD;;;mCAEQjJ,I,EAGK;AAAA;;AACZ,iBAAKkC,SAAL,GAAiB,IAAjB;AACA,gBAAI0T,KAAK,GAAG,KAAKiO,SAAL,CAAe;AAACte,mBAAK,EAAEvF,IAAI,CAACkF;AAAb,aAAf,CAAZ;;AACA,gBAAI,OAAO0Q,KAAP,IAAiB,QAArB,EAA+B;AAC7B,mBAAK1T,SAAL,GAAiB,KAAjB;AACD,aAFD,MAEO;AACL,mBAAKud,KAAL,CAAW5Z,IAAX,CACE,IAAI,4DAAJ,CAAc7F,IAAI,CAAC0iB,KAAnB,EAA0B1iB,IAAI,CAAC2iB,GAA/B,EAAoC3iB,IAAI,CAACkF,IAAzC,CADF;AAGA,mBAAK8J,WAAL,CAAiB6G,KAAjB,CAAuB,YAAvB,EAAqC;AACnC,4BAAYhW,YAAY,CAACD,OAAb,CAAqB,UAArB,CADuB;AAEnC,4BAAY,OAFuB;AAGnC,+BAAe,KAAK6f;AAHe,eAArC,EAKC7hB,IALD,CAKM,UAAC6J,QAAD,EAAmB;AACvB,oBAAIA,QAAQ,CAACwB,OAAb,EAAsB;AACpB,yBAAI,CAACwF,SAAL,CAAe4B,KAAf,CACE,IAAI,4DAAJ,CAAcrQ,IAAI,CAAC0iB,KAAnB,EAA0B1iB,IAAI,CAAC2iB,GAA/B,EAAoC3iB,IAAI,CAACkF,IAAzC,CADF;AAGD;AACF,eAXD,WAYO,UAAA9E,GAAG,EAAI;AACZC,uBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,eAdD,aAeS,YAAM;AACb,uBAAI,CAAC8B,SAAL,GAAiB,KAAjB;AACD,eAjBD;AAkBD;AACF;;;qCAEU;AACT,iBAAKuM,SAAL,CAAe4B,KAAf;AACD;;;;;;;yBA9FUoT,kB,EAAkB,sI,EAAA,gEAYnB,wEAZmB,C,EAYJ,0I;AAAA,O;;;cAZdA,kB;AAAkB,sC;AAAA,iB;AAAA,gB;AAAA,63B;AAAA;AAAA;ACX/B;;AACI;;AAAkC;;AAAS;;AAC3C;;AACA;;AACI;;AACI;;AACI;;AAAW;;AAAS;;AACpB;;AAA2E;AAAA;AAAA;;AAA3E;;AACA;;AACF;;AACF;;AACA;;AACI;;AAAW;;AAAkB;;AAC7B;;AACI;;AAAqE;AAAA;AAAA;;AAArE;;AACA;;AAA+D;AAAA;AAAA;;AAA/D;;AACJ;;AACA;;AACA;;AACJ;;AACJ;;AAEJ;;AACA;;AACI;;AAAmB;AAAA,qBAAS,IAAAM,QAAA,EAAT;AAAmB,aAAnB;;AAAqB;;AAAM;;AAC9C;;AACA;;AACJ;;AACJ;;;;;;AAxBc;;AAAA;;AAG6E;;AAAA;;AACpE;;AAAA;;AAKe;;AAAA,yFAAsB,KAAtB,EAAsB,WAAtB;;AACmD;;AAAA;;AACN;;AAAA;;AAElC;;AAAA;;AAQtB;;AAAA;;AACA;;AAAA;;;;;;;;;wEDfdN,kB,EAAkB;gBAL9B,uDAK8B;iBALpB;AACTniB,oBAAQ,EAAE,eADD;AAETC,uBAAW,EAAE,4BAFJ;AAGTC,qBAAS,EAAE,CAAC,4BAAD;AAHF,W;AAKoB,U;;;;;;oBAY1B,oD;qBAAO,wE;;;;;;;;;;;;;;;;;;;;;;;AEtBZ;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACGM;;AAAmF;;AAAa;;;;;;AAAb;;AAAA;;;;;;AAiBjF;;AAA8K;;AAAY;;;;;;;;AAA1F,sFAAyB,WAAzB,EAAyB,SAAzB;;;;;;AAChG;;;;;;AACA;;AAA+E;;AAAK;;;;;;AACpF;;AAAwG;;AAAK;;;;;;;;;;;;;;;;;;;;AAxBrH;;AACE;;AAAiB;AAAA;;AAAA;;AAAA;AAAA;;AACf;;AAAgB;;;;AAAsC;;AACtD;;AACE;;;;AACF;;AACF;;AAEA;;AACE;;AAA2D;AAAA;;AAAA;;AAAA;AAAA;;AACzD;;;;AACF;;AACA;;AAEA;;AAEE;;AAA4C;AAAA;;AAAA;;AAAA;AAAA;;AAC1C;;AAA8F;;AAAG;;AACnG;;AAEA;;AACE;;AACA;;AACA;;AACA;;AACF;;AACF;;AACF;;AACF;;;;;;AA1BoB;;AAAA;;AAEX;;AAAA;;AAMH;;AAAA;;AAW4B;;AAAA;;AACC;;AAAA;;AACoB;;AAAA;;AACD;;AAAA;;;;;;;;AAQpD;;AAAyB;AAAA;;AAAA;;AAAA;AAAA;;AAAoC;;;;UDhBlDwiB,oB;AAeX,sCACUzT,aADV,EAEUC,WAFV,EAGU0C,MAHV,EAIU1T,UAJV,EAIgC;AAAA;;AAHtB,eAAA+Q,aAAA,GAAAA,aAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAA0C,MAAA,GAAAA,MAAA;AACA,eAAA1T,UAAA,GAAAA,UAAA;AAVV,eAAAigB,KAAA,GAAqB,IAArB;AAEA,eAAAvd,SAAA,GAAqB,KAArB;AACA,eAAA6e,SAAA,GAAqB,KAArB;AACA,eAAA7B,KAAA,GAAiB,KAAjB;AAQC;;;;qCAEO;AAAA;;AACN,iBAAK+E,YAAL,GAAoB,KAAKlf,MAAzB;AACA,iBAAKmf,MAAL,GAAc,mBAAmB,KAAKnf,MAAL,CAAYgd,KAAZ,CAAkB5jB,EAAnD;AAEA,iBAAKqhB,SAAL,GAAiB,KAAKhP,WAAL,CAAiBiP,KAAjB,CAAuB/e,SAAvB,CAAiC,UAACyjB,OAAD,EAA0B;AAC1E,kBAAIA,OAAJ,EAAa;AACX,uBAAI,CAAC1E,KAAL,GAAa0E,OAAb;AACD;AACF,aAJgB,CAAjB;AAKD;;;qCAEO;AACN,iBAAKjR,MAAL,CAAYS,QAAZ,CAAqB,CAAC,KAAKuQ,MAAN,CAArB;AACD;AAED;;;;oCACU5f,K,EAAwB;AAAA;;AAChC,iBAAKpC,SAAL,GAAiB,IAAjB;AACA,iBAAKqO,aAAL,CAAmB6T,aAAnB,CAAiC,KAAKrf,MAAL,CAAYgd,KAAZ,CAAkB5jB,EAAnD,EACCP,IADD,CACM,UAAAmH,MAAM,EAAI;AACd1E,qBAAO,CAACC,GAAR,CAAYyE,MAAZ;;AACA,kBAAIT,KAAK,CAACyC,MAAN,IAAgB,OAAI,CAAC0Y,KAAzB,EAAgC;AAC9Bnb,qBAAK,CAAClG,GAAN,CAAU,UAACimB,MAAD,EAA2B;AACnC,yBAAI,CAAC5E,KAAL,CAAW4E,MAAM,CAAC9e,KAAP,CAAa8c,IAAxB,EAA8BvC,QAA9B,CAAuCuE,MAAM,CAAC9e,KAAP,CAAa4d,GAApD,EAAyDpD,MAAzD,CAAgEla,IAAhE,CAAqE;AACnEX,wBAAI,EAAEH,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB7c,IAAtB,GAA4BH,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB7c,IAAlD,GAAyD,IADI;AAEnE8a,gCAAY,EAAEjb,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/e,QAAtB,CAA+BshB,gBAA/B,GAAiDvf,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/e,QAAtB,CAA+BshB,gBAA/B,CAAgDC,IAAhD,CAAqD,GAArD,CAAjD,GAA6G,IAFxD;AAGnE/D,8BAAU,EAAEzb,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/e,QAAtB,CAA+BsI,GAA/B,GAAoC;AAACA,yBAAG,EAAEvG,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/e,QAAtB,CAA+BsI,GAArC;AAA0CE,yBAAG,EAAEzG,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/e,QAAtB,CAA+BwI;AAA9E,qBAApC,GAAyH,IAHlE;AAInE4U,6BAAS,EAAErb,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/e,QAAtB,CAA+BqB,IAA/B,GAAqCU,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/e,QAAtB,CAA+BqB,IAApE,GAA2E,IAJnB;AAKnE2Z,uBAAG,EAAEjZ,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsByC,YAAtB,GAAoCzf,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsByC,YAA1D,GAAyE,IALX;AAMnE7S,4BAAQ,EAAE5M,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/Q,UAAtB,CAAiC,CAAjC,IAAqC;AAAE9L,0BAAI,EAAEH,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/Q,UAAtB,CAAiC,CAAjC,EAAoC9L,IAA5C;AAAkD8Y,yBAAG,EAAEjZ,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/Q,UAAtB,CAAiC,CAAjC,EAAoCqP,IAApC,CAAyCC,MAAzC,GAAkD,IAAlD,GAAyDvb,MAAM,CAAC0C,QAAP,CAAgBsa,KAAhB,CAAsB/Q,UAAtB,CAAiC,CAAjC,EAAoCqP,IAApC,CAAyCE;AAAzJ,qBAArC,GAAyM;AANhJ,mBAArE;AAQD,iBATD;;AAWA,uBAAI,CAAC/P,WAAL,CAAiBiQ,aAAjB,CAA+B,OAAI,CAAChB,KAApC,EACC7hB,IADD,CACM,UAAC6f,GAAD,EAAS;AACb,yBAAI,CAACsD,SAAL,GAAiB,IAAjB;AACD,iBAHD,WAIO,UAAA3gB,GAAG,EAAI;AACZ,yBAAI,CAAC8e,KAAL,GAAa,IAAb;AACD,iBAND;AAOD;AACF,aAvBD,WAwBO,YAAM;AACX,qBAAI,CAACA,KAAL,GAAa,IAAb;AACA/S,wBAAU,CAAC,YAAM;AACf,uBAAI,CAAC+S,KAAL,GAAa,KAAb;AACD,eAFS,EAEP,GAFO,CAAV;AAGD,aA7BD,aA8BS,YAAM;AACb,qBAAI,CAAChd,SAAL,GAAiB,KAAjB;AACD,aAhCD;AAiCD;AAED;;;;yCACe;AACb,iBAAK1C,UAAL,CAAgB+jB,cAAhB;AACA,iBAAK/jB,UAAL,CAAgBgkB,SAAhB,CAA0B,IAAI,4EAAJ,CAAsB,KAAKze,MAAL,CAAYgd,KAAZ,CAAkB/e,QAAlB,CAA2BsI,GAAjD,EAAsD,KAAKvG,MAAL,CAAYgd,KAAZ,CAAkB/e,QAAlB,CAA2BwI,GAAjF,CAA1B;AACD;;;wCAEa;AACZ,iBAAKhM,UAAL,CAAgB+jB,cAAhB;AACA,iBAAK/D,SAAL,CAAene,WAAf;AACA,iBAAK7B,UAAL,CAAgB+jB,cAAhB;AACD;;;;;;;yBAtFUS,oB,EAAoB,8I,EAAA,mI,EAAA,uH,EAAA,4I;AAAA,O;;;cAApBA,oB;AAAoB,wC;AAAA;AAAA;sEAKpB,4G,EAAyB,I;;;;;;;;;;;;;;;;;;ACrBtC;;AA+BA;;;;AA/BU;;;;;;;;;;wEDgBGA,oB,EAAoB;gBALhC,uDAKgC;iBALtB;AACT1iB,oBAAQ,EAAE,iBADD;AAETC,uBAAW,EAAE,8BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKsB,U;;;;;;;;;;;;kBAG9B;;;kBACA;;;kBACA,uD;mBAAU,4G;;;;;;;;;;;;;;;;;;;;AElBb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACqB4B;;AAAoC;;AAAS;;;;;;AAEzC;;AACI;;AACJ;;;;;;AAFwF;;AAC/E;;AAAA;;;;;;AAFb;;AACI;;AAGJ;;;;;;AAHmE;;AAAA;;;;;;AAQrE;;AAAoC;;AAAK;;;;;;AACzC;;AAAqC;;AAAiB;;;;;;AAAjB;;AAAA;;;;;;AAKrC;;AAAoC;;AAAM;;;;;;AAC1C;;AAAqC;;AAAkB;;;;;;AAAlB;;AAAA;;;;;;AAIvC;;;;;;AACA;;;;;;;;;;;;;;;;;;;AA/BR;;AACI;;AACI;;AAAiB;AAAA;;AAAA;;AAAA,mBAAS,YAAT;AAAuB,WAAvB;;AACb;;;;AACJ;;AACJ;;AACA;;AAEI;;AACI;;AACA;;AAKJ;;AAGA;;AACE;;AACA;;AACF;;AAGA;;AACE;;AACA;;AACF;;AAGA;;AACA;;AACF;;AACN;;;;;;;;;;;;AA/BkD;;AAAA;;AACtC;;AAAA;;AAGG;;AAAA;;AAwBS;;AAAA;;AACP;;AAAA;;;;;;AA1C7B;;AACI;;AACI;;AACI;;AACJ;;AACA;;AACI;;;;;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AAkCJ;;AACJ;;AACJ;;;;;;AA5CY;;AAAA;;AAGA;;AAAA;;AAKqB;;AAAA;;;;UDJxBijB,yB;AAMX,2CAAoBjU,WAApB,EAA8C;AAAA;;AAA1B,eAAAA,WAAA,GAAAA,WAAA;AAJV,eAAAkU,aAAA,GAAgB,IAAI,0DAAJ,EAAhB;AACV,eAAAjF,KAAA,GAAqB,IAArB;AAGiD;;;;qCAEzC;AAAA;;AACN,iBAAKkF,QAAL,GAAgB,KAAKnU,WAAL,CAAiBiP,KAAjB,CAAuB/e,SAAvB,CAAiC,UAAC+e,KAAD,EAAwB;AACvE,qBAAI,CAACA,KAAL,GAAaA,KAAb;AACD,aAFe,CAAhB;AAGD;;;4CAEiB,CACjB;;;qCAEU;AACT,iBAAKiF,aAAL,CAAmB5kB,IAAnB,CAAwB,KAAK8kB,gBAAL,CAAsBC,eAAtB,CAAsCC,QAA9D;AACD;;;wCAEa;AACZ,iBAAKH,QAAL,CAActjB,WAAd;AACD;;;;;;;yBAvBUojB,yB,EAAyB,mI;AAAA,O;;;cAAzBA,yB;AAAyB,gD;AAAA;AAAA;sEACzB,uE,EAAgB,I;;;;;;;;;;;;;;;;;ACZ7B;;AACI;;AAAI;;AAAuC;;AAC/C;;AACA;;AACI;;AAgDJ;;AACA;;AACA;;AACI;;AAA0C;AAAA,qBAAS,IAAA/c,QAAA,EAAT;AAAmB,aAAnB;;AACtC;;AACJ;;AACJ;;;;AAtDyB;;AAAA;;;;;;;;;;wEDOZ+c,yB,EAAyB;gBALrC,uDAKqC;iBAL3B;AACTnjB,oBAAQ,EAAE,yBADD;AAETC,uBAAW,EAAE,sCAFJ;AAGTC,qBAAS,EAAE,CAAC,sCAAD;AAHF,W;AAK2B,U;;;;;;kBACnC,uD;mBAAU,uE;;;kBACV;;;;;;;;;;;;;;;;;;;;AEZH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACIQ;;AACE;;AACF;;;;;;AAGE;;AACE;;AACF;;;;;;AAEA;;AACE;;AACF;;;;;;AAbJ;;AAEE;;AAIA;;AACE;;AAIA;;AAGF;;AACF;;;;;;AAbO;;AAAA;;AAKa;;AAAA;;AAIA;;AAAA;;;;;;AAQhB;;AACE;;AACA;;AACF;;;;;;AAFmB;;AAAA;;;;;;AAFrB;;AACE;;AAIF;;;;;;;;AAJO;;AAAA;;;;;;AAFT;;AACE;;AAMF;;;;;;AANO;;AAAA;;;;;;AASL;;AACE;;AACF;;;;;;AADkB;;AAAA;;;;;;AAFpB;;AACE;;AAGF;;;;;;AAHO;;AAAA;;;;;;AA7BT;;AACE;;AACA;;AAiBA;;AASA;;AAKF;;;;;;AA/BY;;AAAA;;AAiBL;;AAAA;;AASA;;AAAA;;;;UDfEujB,sB;AAYX,wCACU3mB,GADV,EAEUmS,aAFV,EAGU3F,cAHV,EAGwC;AAAA;;AAF9B,eAAAxM,GAAA,GAAAA,GAAA;AACA,eAAAmS,aAAA,GAAAA,aAAA;AACA,eAAA3F,cAAA,GAAAA,cAAA;AAdV,eAAAQ,WAAA,GAA4B,EAA5B;AAGA,eAAA8P,OAAA,GAAmB,IAAnB;AAEA,eAAAvK,aAAA,GAA0B,IAA1B;AAUI;;;;qCAEI;AAAA;;AACN,iBAAKuK,OAAL,GAAe,IAAf,CADM,CAGN;;AACA,iBAAKtQ,cAAL,CAAoBQ,WAApB,CAAgC1K,SAAhC,CAA0C,UAAC2K,MAAD,EAA0B;AAClE,qBAAI,CAACD,WAAL,GAAmBC,MAAnB;AACD,aAFD;AAGA,iBAAK2Z,UAAL,GAAkB,KAAKzU,aAAL,CAAmB0U,YAAnB,CAAgCvkB,SAAhC,CAA0C,UAACwkB,MAAD;AAAA,qBAAW,OAAI,CAACD,YAAL,GAAoBC,MAA/B;AAAA,aAA1C,CAAlB,CAPM,CASN;;AACA,iBAAK3J,aAAL,GAAqB,KAAKhL,aAAL,CAAmBiL,SAAnB,CAA6B9a,SAA7B,CAAuC,UAAC+a,GAAD,EAAc;AACxE,qBAAI,CAACC,OAAL,GAAeD,GAAf;AACA,qBAAI,CAACP,OAAL,GAAe,KAAf;AACD,aAHoB,CAArB;AAKA,iBAAKiK,kBAAL,GAAyB,KAAK5U,aAAL,CAAmBe,WAAnB,CAA+B5Q,SAA/B,CAAyC,UAAC6Q,GAAD,EAAkB;AAClF,kBAAIA,GAAJ,EAAS;AACP,uBAAI,CAACZ,aAAL,GAAqBY,GAArB;AACD;AACF,aAJwB,CAAzB;AAKD;AAED;;;;sCACY6T,I,EAAc;AACxB,gBAAI,KAAKH,YAAL,KAAsB,CAAtB,IAA2BG,IAAI,KAAK,KAAKH,YAA7C,EAA0D;AACxD,qBAAO,IAAP;AACD,aAFD,MAGI;AACF,qBAAO,KAAP;AACD;AACF;;;yCAEc9mB,E,EAAS;AACtB,gBAAI,KAAKwS,aAAL,CAAmBtN,GAAnB,CAAuBlF,EAAvB,CAAJ,EAAgC;AAC9B,qBAAO,IAAP;AACD,aAFD,MAGK;AACH,qBAAO,KAAP;AACD;AACF;;;wCAEa;AACZ,iBAAKgnB,kBAAL,CAAwB9jB,WAAxB;;AACA,iBAAK2jB,UAAL,CAAgB3jB,WAAhB;AACA,iBAAKka,aAAL,CAAmBla,WAAnB;AACD;;;;;;;yBA/DU0jB,sB,EAAsB,4I,EAAA,8I,EAAA,+H;AAAA,O;;;cAAtBA,sB;AAAsB,0C;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,iqB;AAAA;AAAA;ACdnC;;AACI;;AAkCA;;AACE;;AACF;;AACJ;;;;AArC4B;;AAAA;;;;;;;;;wEDafA,sB,EAAsB;gBALlC,uDAKkC;iBALxB;AACTzjB,oBAAQ,EAAE,mBADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,gCAAD;AAHF,W;AAKwB,U;;;;;;;;;;kBAKhC;;;;;;;;;;;;;;;;;;;;AEjBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACqBM;;AACE;;AAA0B;AAAA;;AAAA;;AAAA;AAAA;;AACxB;;AACF;;AACF;;;;;;;;AAGA;;AACE;;AAA0B;AAAA;;AAAA;;AAAA;AAAA;;AACxB;;AACF;;AACF;;;;;;;;;;;;AAlCN;;AACE;;AAAiB;AAAA;;AAAA;;AAAA;AAAA;;AACf;;AAIA;;AAAgB;;;;AAAmC;;AACnD;;AAAmB;;AAAI;;AACzB;;AAEA;;AAAkB;AAAA;;AAAA;;AAAA;AAAA;;AAChB;;AACA;;AAIA;;AAGF;;AACA;;AACE;;AAEE;;AAOA;;AAKF;;AACF;;AACF;;;;;;AA/BoB;;AAAA;;AAiBT;;AAAA;;AAOA;;AAAA;;;;UDnBE6jB,mB;AAMX,qCACUC,aADV,EAEUpS,MAFV,EAGUlE,WAHV,EAGkC;AAAA;;AAFxB,eAAAsW,aAAA,GAAAA,aAAA;AACA,eAAApS,MAAA,GAAAA,MAAA;AACA,eAAAlE,WAAA,GAAAA,WAAA;AALV,eAAAuW,YAAA,GAAuB1lB,YAAY,CAACD,OAAb,CAAqB,UAArB,CAAvB;AAMK;;;;qCAEG;AACNS,mBAAO,CAACC,GAAR,CAAY,KAAKyE,MAAjB;AACA,iBAAKkf,YAAL,GAAoB,KAAKlf,MAAzB;AACA,iBAAKmf,MAAL,GAAc,kBAAkB,KAAKnf,MAAL,CAAYhF,QAA5C;AACD;;;qCAEU;AACTM,mBAAO,CAACC,GAAR,CAAY,KAAKyE,MAAjB;AACA,iBAAKmO,MAAL,CAAYS,QAAZ,CAAqB,CAAC,KAAKuQ,MAAN,CAArB;AACD,W,CAED;;;;qCACW;AAAA;;AACT;AACA,iBAAKlV,WAAL,CAAiBtL,IAAjB,CAAsB,cAAtB,EAAsC;AACpC3D,sBAAQ,EAAEF,YAAY,CAACD,OAAb,CAAqB,UAArB,CAD0B;AAEpC4lB,sBAAQ,EAAE,KAAKzgB,MAAL,CAAYhF;AAFc,aAAtC,EAGGnC,IAHH,CAGQ,UAACqC,GAAD,EAAS;AACf;AACA,qBAAI,CAAC8E,MAAL,CAAY0gB,SAAZ,CAAsB5f,IAAtB,CAA2BhG,YAAY,CAACD,OAAb,CAAqB,UAArB,CAA3B;AACD,aAND,WAMS,UAACQ,GAAD,EAAS;AAChBC,qBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,aARD;AASD,W,CAED;;;;uCACa;AAAA;;AACX;AACA,iBAAK4O,WAAL,CAAiBtL,IAAjB,CAAsB,gBAAtB,EAAwC;AACtC3D,sBAAQ,EAAEF,YAAY,CAACD,OAAb,CAAqB,UAArB,CAD4B;AAEtC8lB,wBAAU,EAAE,KAAK3gB,MAAL,CAAYhF;AAFc,aAAxC,EAGGnC,IAHH,CAGQ,UAACqC,GAAD,EAAS;AACf;AACA,qBAAI,CAAC8E,MAAL,CAAY0gB,SAAZ,CAAsBxf,MAAtB,CAA6B,OAAI,CAAClB,MAAL,CAAY0gB,SAAZ,CAAsBzf,OAAtB,CAA8BnG,YAAY,CAACD,OAAb,CAAqB,UAArB,CAA9B,CAA7B,EAA8F,CAA9F;AACD,aAND,WAMS,UAACQ,GAAD,EAAS;AAChBC,qBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,aARD;AASD;;;;;;;yBAjDUilB,mB,EAAmB,8I,EAAA,uH,EAAA,0I;AAAA,O;;;cAAnBA,mB;AAAmB,uC;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,qoR;AAAA;AAAA;ACXhC;;;;AAAU;;;;;;;;;;wEDWGA,mB,EAAmB;gBAL/B,uDAK+B;iBALrB;AACT/jB,oBAAQ,EAAE,gBADD;AAETC,uBAAW,EAAE,6BAFJ;AAGTC,qBAAS,EAAE,CAAC,6BAAD;AAHF,W;AAKqB,U;;;;;;;;;;kBAG7B;;;;;;;;;;;;;;;;;;;;AEbH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEM;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AACjB;;AACE;;AACF;;AACF;;;;;;;;AAEA;;AACE;;AAA0B;AAAA;;AAAA;;AAAA;AAAA;;AACxB;;AACF;;AACF;;;;;;;;AAEA;;AACE;;AAA0B;AAAA;;AAAA;;AAAA;AAAA;;AACxB;;AACF;;AACF;;;;;;AAgBA;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;;;;;;;AAMF;;AAAwC;;;;;;AAAyD;;;;;;AAAzD;;AAAA;;;;;;AAKxC;;AAAyC;;;;AAA4B;;;;;;AAA5B;;AAAA;;;;;;;;;;;;;;;;;;AA/C/C;;AACE;;AACE;;AACE;;AAMA;;AAMA;;AAKF;;AAIF;;AAAK;;;;AAA6B;;AAElC;;;;AAEA;;AAEA;;AAIE;;AACE;;;;AAGF;;AAEA;;AACE;;AAAG;;AAAS;;AACZ;;AACF;;AAEA;;AACE;;AAAG;;AAAU;;AACb;;AACF;;AACF;;AACF;;;;;;AA/C4C;;AAAA;;AAMjC;;AAAA;;AAMA;;AAAA;;AASJ;;AAAA;;AAEF;;AAAA;;AASM;;AAAA;;AAOF;;AAAA;;AAKA;;AAAA;;;;UDjCImkB,oB;AAUX,sCACUpV,aADV,EAEU2C,MAFV,EAGUlE,WAHV,EAGkC;AAAA;;AAFxB,eAAAuB,aAAA,GAAAA,aAAA;AACA,eAAA2C,MAAA,GAAAA,MAAA;AACA,eAAAlE,WAAA,GAAAA,WAAA;AAZV,eAAAgP,GAAA,GAAc,IAAd;AAEA,eAAA/a,OAAA,GAAqB,IAArB;AAIA,eAAAlC,YAAA,GAAuBC,MAAM,CAACC,WAA9B;AAOK;;;;qCAEG;AAAA;;AACN,iBAAK2d,UAAL,GAAkB,KAAKrO,aAAL,CAAmBiL,SAAnB,CAA6B9a,SAA7B,CAAuC,UAAAC,CAAC,EAAI;AAC5D,qBAAI,CAAC+a,OAAL,GAAe/a,CAAf;AACD,aAFiB,CAAlB;AAGA,iBAAKqd,GAAL,GAAW,KAAK9K,MAAL,CAAY8K,GAAZ,CAAgB4H,OAAhB,CAAwB,eAAxB,EAAwC,EAAxC,CAAX;AACA,iBAAKC,UAAL,CAAgB,KAAK7H,GAArB,EAA0BpgB,IAA1B,CAA+B,UAAAmH,MAAM;AAAA,qBAAI,OAAI,CAAC9B,OAAL,GAAe8B,MAAM,CAAC+gB,KAAP,CAAa,CAAb,CAAnB;AAAA,aAArC;AACA,iBAAK/lB,QAAL,GAAgB,KAAKmT,MAAL,CAAY8K,GAAZ,CAAgBC,MAAhB,CAAuB,EAAvB,CAAhB;AACA,iBAAKsH,YAAL,GAAoB1lB,YAAY,CAACD,OAAb,CAAqB,UAArB,CAApB;AACD;;;mCAEK;AACJ,iBAAKsT,MAAL,CAAYS,QAAZ,CAAqB,CAAC,QAAD,EAAW,KAAK+H,OAAL,CAAanE,KAAxB,CAArB;AACD;;;qCAEUxX,Q,EAAgB;AAAA;;AACzB,mBAAO,IAAIrC,OAAJ,CAAiB,UAACC,OAAD,EAAa;AACnC,qBAAI,CAAC4S,aAAL,CAAmBwV,UAAnB,CAA8BhmB,QAA9B,EAAwCnC,IAAxC,CAA6C,UAAAmH,MAAM,EAAE;AACrD1E,uBAAO,CAACC,GAAR,CAAYyE,MAAZ;AACApH,uBAAO,CAACoH,MAAD,CAAP;AACC,eAHD;AAID,aALM,CAAP;AAMA;;;wCAES;AACT,iBAAK6Z,UAAL,CAAgBvd,WAAhB;AACD,W,CAED;;;;qCACW;AAAA;;AACT;AACA,iBAAK2N,WAAL,CAAiBtL,IAAjB,CAAsB,cAAtB,EAAsC;AACpC3D,sBAAQ,EAAEF,YAAY,CAACD,OAAb,CAAqB,UAArB,CAD0B;AAEpC4lB,sBAAQ,EAAE,KAAKzlB;AAFqB,aAAtC,EAGGnC,IAHH,CAGQ,UAACqC,GAAD,EAAS;AACf;AACA,qBAAI,CAACgD,OAAL,CAAawiB,SAAb,CAAuB5f,IAAvB,CAA4B,OAAI,CAAC0f,YAAjC;AACD,aAND,WAMS,UAACnlB,GAAD,EAAS;AAChBC,qBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,aARD;AASD,W,CAED;;;;uCACa;AAAA;;AACX;AACA,iBAAK4O,WAAL,CAAiBtL,IAAjB,CAAsB,gBAAtB,EAAwC;AACtC3D,sBAAQ,EAAEF,YAAY,CAACD,OAAb,CAAqB,UAArB,CAD4B;AAEtC8lB,wBAAU,EAAE,KAAK3lB;AAFqB,aAAxC,EAGGnC,IAHH,CAGQ,UAACqC,GAAD,EAAS;AACf;AACA,qBAAI,CAACgD,OAAL,CAAawiB,SAAb,CAAuBxf,MAAvB,CAA8B,OAAI,CAAChD,OAAL,CAAawiB,SAAb,CAAuBzf,OAAvB,CAA+B,OAAI,CAACuf,YAApC,CAA9B,EAAiF,CAAjF;AACD,aAND,WAMS,UAACnlB,GAAD,EAAS;AAChBC,qBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,aARD;AASD;;;;;;;yBArEUulB,oB,EAAoB,8I,EAAA,uH,EAAA,mI;AAAA,O;;;cAApBA,oB;AAAoB,wC;AAAA,gB;AAAA,e;AAAA,yV;AAAA;AAAA;ACdjC;;;;AAA6B;;;;;;;;;;wEDchBA,oB,EAAoB;gBALhC,uDAKgC;iBALtB;AACTrkB,oBAAQ,EAAE,iBADD;AAETC,uBAAW,EAAE,8BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKsB,U;;;;;;;;;;;;;;;;;;;;;;;;;;AEXjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACCM;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AACjB;;AACE;;AACF;;AACF;;;;;;AAWE;;AACE;;AAA0E;;AAAa;;AACzF;;;;;;;;AASA;;AAAmI;AAAA;;AAAA;;AAAA;AAAA;;AACjI;;AACE;;AACF;;AACF;;;;;;AAEE;;AAA8K;;AAAY;;;;;;;;AAA1F,sFAAyB,WAAzB,EAAyB,SAAzB;;;;;;AAChG;;;;;;AACA;;AAA+E;;AAAK;;;;;;AACpF;;AAAwG;;AAAK;;;;;;;;;;;;;;AAY3G;;AACE;;;;;;AACF;;;;;;;;;AADmC;;AAAA;;AAAiE;;;;;;AAFtG;;;;;;AADF;;AACE;;AAKF;;;;;;AALwB;;AAAA;;;;;;;;;;AAkBP;;AAAkD;;;;AAA4B;;;;;;AAA5B;;AAAA;;;;;;;;;;AAKrB;;AAAwE;;;;AAAgC;;;;;;AAAhC;;AAAA;;;;;;AADpH;;AACG;;AAAM;;;;AAA4B;;AAAO;;;;;;AAC5C;;;;;;AADS;;AAAA;;AAAyC;;AAAA;;;;;;AAa9C;;AACE;;AAAsE;;AAAQ;;AAAO;;AACvF;;;;;;;;AAFmB;;AACE;;AAAA,4FAAsB,OAAtB,EAAsB,mBAAtB;;;;;;AAYzB;;AACE;;AACE;;AAAM;;AAAG;;AAAoD;;AAAI;;AACjE;;AAAM;;AAAe;;AACvB;;AACA;;AACF;;;;;;AAJa;;AAAA;;AACH;;AAAA;;;;;;;;;;;;AAtGpB;;AACE;;AACE;;AAEE;;AAMA;;AACE;;AACE;;AAAmD;;AAA+F;;AACpJ;;AACF;;AAEA;;AACE;;AAEA;;AAGF;;AAEA;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AAKA;;AACE;;AACA;;AACA;;AACA;;AACF;;AACF;;AACF;;AACF;;AAEA;;AACE;;AAEE;;AACE;;AAQF;;AAGA;;AACE;;AAEE;;AACE;;AAAG;;;;AAAiE;;AACtE;;AAEA;;AACE;;AAAG;;AAAU;;AAAqF;;AACpG;;AAEA;;AAAG;;AAAW;;AACd;;AAIJ;;AACA;;AAGA;;AACE;;AACE;;AAA8C;;AAAQ;;AAAG;;;;AAAkB;;AAAI;;AAC/E;;AACA;;AAAY;AAAA;;AAAA;;AAAA;AAAA;;AACV;;AAKF;;AACF;;AACF;;AAEA;;AAEE;;AACE;;AACA;;AAA8B;;AAAG;;AAAO;;AAAI;;AAC5C;;AAOF;;AACF;;AACF;;AAEF;;AACF;;;;;;;;AA3G4C;;AAAA;;AAO6B;;AAAA;;AACP;;AAAA;;AAK1D;;AAAA;;AAEM;;AAAA;;AAM+E;;AAAA,sFAAuB,WAAvB,EAAuB,SAAvB;;AAK7E;;AAAA;;AAMoB;;AAAA;;AACC;;AAAA;;AACoB;;AAAA;;AACD;;AAAA;;AAO5B;;AAAA;;AAGN;;AAAA;;AAeP;;AAAA;;AAIgB;;AAAA;;AAIJ;;AAAA;;AAUwC;;AAAA;;AAE7C;;AAAA,0FAAiB,UAAjB,EAAiB,IAAjB,EAAiB,KAAjB,EAAiB,EAAjB;;AAec;;AAAA;;;;;;AAgBlC;;;;;;AAAW;;;;;;;;AAKX;;AAAyB;AAAA;;AAAA;;AAAA;AAAA;;AAAoC;;;;UDtGlDwkB,c;AAkBX,gCACU9S,MADV,EAEU3C,aAFV,EAGU/Q,UAHV,EAIUgR,WAJV,EAIkC;AAAA;;AAHxB,eAAA0C,MAAA,GAAAA,MAAA;AACA,eAAA3C,aAAA,GAAAA,aAAA;AACA,eAAA/Q,UAAA,GAAAA,UAAA;AACA,eAAAgR,WAAA,GAAAA,WAAA;AArBV,eAAAyV,KAAA,GAAgB,IAAhB;AACA,eAAAjI,GAAA,GAAa,IAAb;AACA,eAAA/a,OAAA,GAA8B,IAA9B;AACA,eAAAijB,MAAA,GAAiB,IAAjB;AACA,eAAAC,WAAA,GAAmB,IAAnB;AACA,eAAAC,cAAA,GAA8C,EAA9C;AACA,eAAArlB,YAAA,GAAuBC,MAAM,CAACC,WAA9B;AAEA,eAAAiB,SAAA,GAAqB,KAArB;AACA,eAAA6e,SAAA,GAAqB,KAArB;AACA,eAAA7B,KAAA,GAAiB,KAAjB;AAGA,eAAAO,KAAA,GAAqB,EAArB;AASK;;;;qCAEG;AAAA;;AACN,iBAAKkF,QAAL,GAAgB,KAAKnU,WAAL,CAAiBiP,KAAjB,CAAuB/e,SAAvB,CAAiC,UAAC+e,KAAD,EAAwB;AACvE,qBAAI,CAACA,KAAL,GAAaA,KAAb;AACD,aAFe,CAAhB;AAIA,iBAAKb,UAAL,GAAkB,KAAKrO,aAAL,CAAmBiL,SAAnB,CAA6B9a,SAA7B,CAAuC,UAAAC,CAAC,EAAI;AAC5D,qBAAI,CAAC+a,OAAL,GAAe/a,CAAf;AACD,aAFiB,CAAlB;AAGA,iBAAKslB,KAAL,GAAa,0EAAYxD,YAAZ,GAA2B,KAAKvP,MAAL,CAAY8K,GAApD;AACA,iBAAKA,GAAL,GAAW,KAAK9K,MAAL,CAAY8K,GAAZ,CAAgB4H,OAAhB,CAAwB,gBAAxB,EAAyC,EAAzC,CAAX;AACA,iBAAKrV,aAAL,CAAmB6T,aAAnB,CAAiC,KAAKpG,GAAtC,EAA2CpgB,IAA3C,CAAgD,UAAAmH,MAAM,EAAE;AACtD1E,qBAAO,CAACC,GAAR,CAAYyE,MAAZ;AACA,qBAAI,CAAC9B,OAAL,GAAe8B,MAAM,CAAC0C,QAAP,CAAgBsa,KAA/B;;AACA,kBAAI,OAAI,CAAC9e,OAAL,CAAaijB,MAAb,IAAuB,OAAI,CAACjjB,OAAL,CAAakjB,WAAxC,EAAqD;AACnD,uBAAI,CAACD,MAAL,GAAc,OAAI,CAACjjB,OAAL,CAAaijB,MAA3B;AACA,uBAAI,CAACC,WAAL,cAAuB,OAAI,CAACljB,OAAL,CAAakjB,WAApC;AACD;AACF,aAPD;AAQD;AACC;;;;oCACU7hB,K,EAAwB;AAAA;;AAChC,iBAAKpC,SAAL,GAAiB,IAAjB;;AACA,gBAAIoC,KAAK,CAACyC,MAAN,IAAgB,KAAK0Y,KAAzB,EAAgC;AAC9Bnb,mBAAK,CAAClG,GAAN,CAAU,UAACimB,MAAD,EAA2B;AACnC,uBAAI,CAAC5E,KAAL,CAAW4E,MAAM,CAAC9e,KAAP,CAAa8c,IAAxB,EAA8BvC,QAA9B,CAAuCuE,MAAM,CAAC9e,KAAP,CAAa4d,GAApD,EAAyDpD,MAAzD,CAAgEla,IAAhE,CAAqE;AACnEX,sBAAI,EAAE,OAAI,CAACjC,OAAL,CAAaiC,IAAb,GAAmB,OAAI,CAACjC,OAAL,CAAaiC,IAAhC,GAAuC,IADsB;AAEnE8a,8BAAY,EAAE,OAAI,CAAC/c,OAAL,CAAaD,QAAb,CAAsBshB,gBAAtB,GAAwC,OAAI,CAACrhB,OAAL,CAAaD,QAAb,CAAsBshB,gBAAtB,CAAuCC,IAAvC,CAA4C,GAA5C,CAAxC,GAA2F,IAFtC;AAGnE/D,4BAAU,EAAE,OAAI,CAACvd,OAAL,CAAaD,QAAb,CAAsBsI,GAAtB,GAA2B;AAACA,uBAAG,EAAE,OAAI,CAACrI,OAAL,CAAaD,QAAb,CAAsBsI,GAA5B;AAAiCE,uBAAG,EAAE,OAAI,CAACvI,OAAL,CAAaD,QAAb,CAAsBwI;AAA5D,mBAA3B,GAA8F,IAHvC;AAInE4U,2BAAS,EAAE,OAAI,CAACnd,OAAL,CAAaD,QAAb,CAAsBqB,IAAtB,GAA4B,OAAI,CAACpB,OAAL,CAAaD,QAAb,CAAsBqB,IAAlD,GAAyD,IAJD;AAKnE2Z,qBAAG,EAAE,OAAI,CAAC/a,OAAL,CAAauhB,YAAb,GAA2B,OAAI,CAACvhB,OAAL,CAAauhB,YAAxC,GAAuD,IALO;AAMnE7S,0BAAQ,EAAE,OAAI,CAAC1O,OAAL,CAAa+N,UAAb,CAAwB,CAAxB,IAA4B;AAAE9L,wBAAI,EAAE,OAAI,CAACjC,OAAL,CAAa+N,UAAb,CAAwB,CAAxB,EAA2B9L,IAAnC;AAAyC8Y,uBAAG,EAAE,OAAI,CAAC/a,OAAL,CAAa+N,UAAb,CAAwB,CAAxB,EAA2BqP,IAA3B,CAAgCC,MAAhC,GAAyC,IAAzC,GAAgD,OAAI,CAACrd,OAAL,CAAa+N,UAAb,CAAwB,CAAxB,EAA2BqP,IAA3B,CAAgCE;AAA9H,mBAA5B,GAAqK;AAN5G,iBAArE;AAQD,eATD;AAWA,mBAAK/P,WAAL,CAAiBiQ,aAAjB,CAA+B,KAAKhB,KAApC,EACC7hB,IADD,CACM,UAAC6f,GAAD,EAAS;AACb,uBAAI,CAACsD,SAAL,GAAiB,IAAjB;AACD,eAHD,WAIO,UAAA3gB,GAAG,EAAI;AACZ,uBAAI,CAAC8e,KAAL,GAAa,IAAb;AACD,eAND,aAOS,YAAM;AACb/S,0BAAU,CAAC,YAAM;AACf,yBAAI,CAAC+S,KAAL,GAAa,KAAb;AACD,iBAFS,EAEP,GAFO,CAAV;AAGA,uBAAI,CAAChd,SAAL,GAAiB,KAAjB;AACD,eAZD;AAaD;AACF;;;mCAEG;AACJ,iBAAKgR,MAAL,CAAYS,QAAZ,CAAqB,CAAC,QAAD,CAArB,EAAiC;AAACvI,yBAAW,EAAE,KAAKmF,aAAL,CAAmB0L,aAAnB,GAAkC,KAAK1L,aAAL,CAAmB0L,aAArD,GAAqE;AAAnF,aAAjC;AACD,W,CAED;;;;mCACSwB,G,EAAQ;AACf,gBAAI,OAAOA,GAAP,IAAe,QAAnB,EAA6B;AAC3B,qBAAO,IAAP;AACD,aAFD,MAEO;AACL,qBAAO,KAAP;AACD;AACF,W,CAED;;;;qCACW/T,G,EAAW;AACpB,gBAAI1L,IAAI,GAAG,CAAC,OAAD,EAAU,MAAV,EAAkB,MAAlB,CAAX;;AACA,gBAAIA,IAAI,CAACqZ,QAAL,CAAc3N,GAAd,CAAJ,EAAwB;AACtB,qBAAO,IAAP;AACD,aAFD,MAEQ;AACN,qBAAO,KAAP;AACD;AACF;;;oCAES1G,Q,EAAgC;AACxC,iBAAKxD,UAAL,CAAgBgkB,SAAhB,CAA0BxgB,QAA1B;AACD;;;wCAEa;AACZ,iBAAK4b,UAAL,CAAgBvd,WAAhB;AACA,iBAAK7B,UAAL,CAAgB+jB,cAAhB;AACD;;;;;;;yBAzGUyC,c,EAAc,uH,EAAA,8I,EAAA,4I,EAAA,mI;AAAA,O;;;cAAdA,c;AAAc,kC;AAAA,gB;AAAA,e;AAAA,yiF;AAAA;AAAA;AClB3B;;AAkHA;;AAKA;;;;AAvH4B;;;;;;;;;;wEDkBfA,c,EAAc;gBAL1B,uDAK0B;iBALhB;AACT1kB,oBAAQ,EAAE,WADD;AAETC,uBAAW,EAAE,wBAFJ;AAGTC,qBAAS,EAAE,CAAC,wBAAD;AAHF,W;AAKgB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;AElB3B;AAAA;;;AAAA;AAAA;AAAA;;UAAa6kB,U,GAOV,oBAAYvd,QAAZ,EAA8Bf,MAA9B,EAA8Cue,MAA9C,EAA+D;AAAA;;AAC5D,aAAKve,MAAL,GAAaA,MAAb;AACA,aAAKe,QAAL,GAAgBA,QAAhB;AACF,O;;;;;;;;;;;;;;;;;ACVJ;AAAA;;;AAAA;AAAA;AAAA;;UAAayd,iB;AAaT,mCAAYjb,GAAZ,EAAyBE,GAAzB,EAAsC;AAAA;;AAClC,eAAKF,GAAL,GAAWA,GAAX;AACA,eAAKE,GAAL,GAAWA,GAAX;AACH;AAZD;;;;;0CACgBgb,K,EAAa;AACzB,gBAAIA,KAAK,KAAK,CAAd,EAAiB;AACb,+BAAU,KAAKlb,GAAf,cAAsB,KAAKE,GAA3B;AACH,aAFD,MAEO;AACH,+BAAU,KAAKA,GAAf,cAAsB,KAAKF,GAA3B;AACH;AACJ;;;;;;;;;;;;;;;;;;;;;ACXL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AACA;;;UACamb,oB,GAWT,8BAAYvhB,IAAZ,EAA0B0W,KAA1B,EAA2C3Y,OAA3C,EAA0F;AAAA;;AACtF,aAAKiC,IAAL,GAAYA,IAAZ;AACA,aAAKjC,OAAL,GAAe;AACX4I,kBAAQ,EAAE;AACNC,uBAAW,EAAE,CAAC,yEAAY+P,aAAZ,CAA0BvQ,GAA3B,EAAgC,yEAAYuQ,aAAZ,CAA0BrQ,GAA1D;AADP;AADC,SAAf;;AAKA,YAAIvI,OAAJ,EAAa;AACT,eAAKA,OAAL,GAAeA,OAAf;AACH,SAFD,MAEO;AACH,eAAKA,OAAL,CAAa4I,QAAb,CAAsBC,WAAtB,GAAoC8P,KAApC;AACH;AACJ,O;;;;;;;;;;;;;;;;;ACvBL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;;UAGa8K,S,GA2BT,mBAAYhE,KAAZ,EAAyBC,GAAzB,EAAoCzd,IAApC,EAAkDyhB,SAAlD,EAAuE;AAAA;;AACnE,YAAIC,MAAK,GAAG,mCAAM,CAACjE,GAAD,CAAlB;;AAEA,aAAKmB,QAAL,GAAgB5e,IAAhB;AACA,aAAK2hB,SAAL,GAAiB;AACbnE,eAAK,EAAEA,KADM;AAEbC,aAAG,EAAEA,GAFQ;AAGb5b,gBAAM,EAAE6f,MAAK,CAAChM,IAAN,CAAW8H,KAAX,EAAkB,MAAlB,IAA4B;AAHvB,SAAjB;AAKA,aAAK5C,QAAL,GAAgB,EAAhB;;AACA,aAAK,IAAInf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKkmB,SAAL,CAAe9f,MAAnC,EAA2CpG,CAAC,EAA5C,EAAgD;AAC5C,eAAKmf,QAAL,CAAcja,IAAd,CAAmB;AACfsd,eAAG,EAAE,mCAAM,CAACT,KAAD,CAAN,CAAcrQ,GAAd,CAAkB1R,CAAlB,EAAqB,MAArB,EAA6BmmB,MAA7B,EADU;AAEf/G,kBAAM,EAAE;AAFO,WAAnB;AAIH;;AACD,aAAK4G,SAAL,GAAiBA,SAAS,GAAEA,SAAF,GAAc,KAAxC;AACH,O;;;;;;;;;;;;;;;;;ACjDL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAKaI,e;;;;;;;oCAEDxhB,K,EAAkC;AAC1C,mBAAO+b,KAAK,CAAC/b,KAAD,CAAL,CAAayhB,IAAb,kDAAP;AACD;;;;;;;yBAJUD,e;AAAe,O;;;;cAAfA,e;AAAe;;;;;wEAAfA,e,EAAe;gBAH3B,kDAG2B;iBAHtB;AACJ7hB,gBAAI,EAAE;AADF,W;AAGsB,U;;;;;;;;;;;;;;;;;;ACL5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAKa+hB,c;;;;;;;oCAED1hB,K,EAA+C;AACvD,mBAAO,IAAP;AACD;;;;;;;yBAJU0hB,c;AAAc,O;;;;cAAdA,c;AAAc;;;;;wEAAdA,c,EAAc;gBAH1B,kDAG0B;iBAHrB;AACJ/hB,gBAAI,EAAE;AADF,W;AAGqB,U;;;;;;;;;;;;;;;;;;ACL3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAKagiB,Q;;;;;;;oCAED3hB,K,EAAwD;AAAA,gBAA5C4hB,MAA4C,uEAAjC,KAAiC;AAAA,gBAA1BC,UAA0B,uEAAL,KAAK;;AAChE,gBAAI,CAACD,MAAM,CAACpgB,MAAZ,EAAmB;AACjB,qBAAOxB,KAAP;AACD,aAFD,MAGK,IAAG,CAAC4hB,MAAJ,EAAW;AACd,kBAAIC,UAAJ,EAAe;AACb;AACD,eAFD,MAGI;AACF,uBAAO,kBAAP;AACD;AAEF,aARI,MASD;AACF,kBAAI7hB,KAAK,CAAC4hB,MAAM,CAAC,CAAD,CAAP,CAAT,EAAqB;AACnB,uBAAO,KAAKE,SAAL,CAAe9hB,KAAK,CAAC4hB,MAAM,CAACpa,KAAP,EAAD,CAApB,EAAsCoa,MAAtC,CAAP;AACD,eAFD,MAGI;AACF,oBAAIC,UAAJ,EAAe;AACb;AACD,iBAFD,MAGI;AACF,yBAAO,kBAAP;AACD;AACF;AACF;AACF;;;;;;;yBA5BUF,Q;AAAQ,O;;;;cAARA,Q;AAAQ;;;;;wEAARA,Q,EAAQ;gBAHpB,kDAGoB;iBAHf;AACJhiB,gBAAI,EAAE;AADF,W;AAGe,U;;;;;;;;;;;;;;;;;;ACLrB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAUaoiB,c;AAKX,gCAAoBhgB,IAApB,EAA8C4L,MAA9C,EAA8D;AAAA;;AAA1C,eAAA5L,IAAA,GAAAA,IAAA;AAA0B,eAAA4L,MAAA,GAAAA,MAAA;AAJ9C,eAAA8K,GAAA,GAAM,4CAAN;AACO,eAAA/O,KAAA,GAAgB,EAAhB;AACC,eAAAsY,YAAA,GAAe,IAAI,4CAAJ,EAAf;AAEwD;;;;qCAErD;AAAA;;AACT,iBAAKjgB,IAAL,CACG/D,GADH,CACwC,KAAKya,GAD7C,EAEGX,IAFH,CAGI,2DAAI,UAAA5Z,QAAQ,EAAI;AACd,kBAAI+jB,gBAAJ;AACA,kBAAIC,cAAJ;AACA,qBAAOhkB,QAAQ,CAACwL,KAAT,CAAe7Q,GAAf,CAAmB,UAAAsF,IAAI,EAAI;AAClC,uBAAM;AACFC,qBAAG,EAAED,IAAI,CAACC,GADR;AAEFE,sBAAI,EAAEH,IAAI,CAACG,IAFT;AAGFb,0BAAQ,EAAEU,IAAI,CAACV,QAHb;AAIFc,uBAAK,EAAEJ,IAAI,CAACI,KAJV;AAKFF,wBAAM,EAAEF,IAAI,CAACE,MALX;AAMFnE,uBAAK,EAAEiE,IAAI,CAACjE,KANV;AAOFwD,yBAAO,EAAES,IAAI,CAACT,OAPZ;AAQFc,2BAAS,EAAEL,IAAI,CAACK,SARd;AASFtB,sBAAI,EAAEiB,IAAI,CAACjB,IATT;AAUFuB,0BAAQ,EAAEN,IAAI,CAACM;AAVb,iBAAN;AAaC,eAdM,CAAP;AAeD,aAlBD,CAHJ,EAuBGtD,SAvBH,CAuBa,UAAAgnB,gBAAgB,EAAI;AAC7B,qBAAI,CAACzY,KAAL,GAAayY,gBAAb;;AACA,qBAAI,CAACH,YAAL,CAAkBtgB,IAAlB,CAAuB,OAAI,CAACgI,KAA5B;AACD,aA1BH;AA2BD;;;2CACgB0Y,Q,EAAgF;AAAA;;AAC/F,iBAAKrgB,IAAL,CACG5D,IADH,CACyC,KAAKsa,GAAL,GAAU,cADnD,EACkE2J,QADlE,EAC4EtK,IAD5E,CAEI,2DAAI,UAAA5Z,QAAQ,EAAI;AACd,qBAAOA,QAAQ,CAACwL,KAAT,CAAe7Q,GAAf,CAAmB,UAAAsF,IAAI,EAAI;AAClC,uBAAM;AACFC,qBAAG,EAAED,IAAI,CAACC,GADR;AAEFE,sBAAI,EAAEH,IAAI,CAACG,IAFT;AAGFb,0BAAQ,EAAEU,IAAI,CAACV,QAHb;AAIFc,uBAAK,EAAEJ,IAAI,CAACI,KAJV;AAKFF,wBAAM,EAAEF,IAAI,CAACE,MALX;AAMFnE,uBAAK,EAAEiE,IAAI,CAACjE,KANV;AAOFwD,yBAAO,EAAES,IAAI,CAACT,OAPZ;AAQFc,2BAAS,EAAEL,IAAI,CAACK,SARd;AASFtB,sBAAI,EAAEiB,IAAI,CAACjB,IATT;AAUFuB,0BAAQ,EAAEN,IAAI,CAACM;AAVb,iBAAN;AAaC,eAdM,CAAP;AAeD,aAhBD,CAFJ,EAmBItD,SAnBJ,CAmBc,UAAAgnB,gBAAgB,EAAI;AAC9B,qBAAI,CAACzY,KAAL,GAAayY,gBAAb;;AACA,qBAAI,CAACH,YAAL,CAAkBtgB,IAAlB,CAAuB,OAAI,CAACgI,KAA5B;AACD,aAtBH;AAuBD;;;sCACWtJ,K,EAAqB;AAAA;;AAC/B,iBAAK2B,IAAL,CACC5D,IADD,CACuC,KAAKsa,GAAL,GAAU,QADjD,EAC2DrY,KAD3D,EACkE0X,IADlE,CAEE,2DAAI,UAAA5Z,QAAQ,EAAI;AACd,qBAAOA,QAAQ,CAACwL,KAAT,CAAe7Q,GAAf,CAAmB,UAAAsF,IAAI,EAAI;AAClC,uBAAM;AACFC,qBAAG,EAAED,IAAI,CAACC,GADR;AAEFE,sBAAI,EAAEH,IAAI,CAACG,IAFT;AAGFb,0BAAQ,EAAEU,IAAI,CAACV,QAHb;AAIFc,uBAAK,EAAEJ,IAAI,CAACI,KAJV;AAKFF,wBAAM,EAAEF,IAAI,CAACE,MALX;AAMFnE,uBAAK,EAAEiE,IAAI,CAACjE,KANV;AAOFwD,yBAAO,EAAES,IAAI,CAACT,OAPZ;AAQFc,2BAAS,EAAEL,IAAI,CAACK,SARd;AASFtB,sBAAI,EAAEiB,IAAI,CAACjB,IATT;AAUFuB,0BAAQ,EAAEN,IAAI,CAACM;AAVb,iBAAN;AAaC,eAdM,CAAP;AAeD,aAhBD,CAFF,EAmBEtD,SAnBF,CAmBY,UAAAgnB,gBAAgB,EAAI;AAC9B,qBAAI,CAACzY,KAAL,GAAayY,gBAAb;AACArnB,qBAAO,CAACC,GAAR,CAAY,OAAI,CAAC2O,KAAjB;;AACA,qBAAI,CAACsY,YAAL,CAAkBtgB,IAAlB,CAAuB,OAAI,CAACgI,KAA5B;AACD,aAvBD;AAyBD;;;kDAGuB;AACtB,mBAAO,KAAKsY,YAAL,CAAkBvc,YAAlB,EAAP;AACD;;;kCAEO7M,E,EAAY;AAClB,mBAAO,KAAKmJ,IAAL,CAAU/D,GAAV,CAWL,KAAKya,GAAL,GAAW7f,EAXN,CAAP;AAaD;AAED;;;;kCACQiH,O,EAAS;AAAA;;AACf,gBAAM3B,QAAQ,GAAG,IAAI8Q,QAAJ,EAAjB;AACA9Q,oBAAQ,CAAC+Q,MAAT,CAAgB,MAAhB,EAAwBpP,OAAO,CAACvB,IAAhC;AACAJ,oBAAQ,CAAC+Q,MAAT,CAAgB,UAAhB,EAA4BpP,OAAO,CAACpC,QAApC;AACAS,oBAAQ,CAAC+Q,MAAT,CAAgB,QAAhB,EAA0BpP,OAAO,CAACxB,MAAlC;AACAH,oBAAQ,CAAC+Q,MAAT,CAAgB,OAAhB,EAAyBpP,OAAO,CAAC3F,KAAjC;AACAgE,oBAAQ,CAAC+Q,MAAT,CAAgB,SAAhB,EAA2BpP,OAAO,CAACnC,OAAnC;AACAQ,oBAAQ,CAAC+Q,MAAT,CAAgB,OAAhB,EAAyBpP,OAAO,CAAClC,KAAjC,EAAwCkC,OAAO,CAAC3F,KAAhD;AACAgE,oBAAQ,CAAC+Q,MAAT,CAAgB,MAAhB,EAAwBpP,OAAO,CAAC3C,IAAhC;AACA,iBAAK6E,IAAL,CACG5D,IADH,CAEI,KAAKsa,GAFT,EAGIva,QAHJ,EAGa;AACPiT,qBAAO,EAAE;AACPkR,6BAAa,EAAE/nB,YAAY,CAACD,OAAb,CAAqB,OAArB,IAA+BC,YAAY,CAACD,OAAb,CAAqB,OAArB,EAA8BoH,QAA9B,EAA/B,GAA0E;AADlF;AADF,aAHb,EASGtG,SATH,CASa,UAAAmnB,YAAY,EAAI;AACzB,kBAAMnkB,IAAI,GAAS;AACjBC,mBAAG,EAAEkkB,YAAY,CAACnkB,IAAb,CAAkBC,GADN;AAEjBE,oBAAI,EAAEgkB,YAAY,CAACnkB,IAAb,CAAkBG,IAFP;AAGjBb,wBAAQ,EAAE6kB,YAAY,CAACnkB,IAAb,CAAkBV,QAHX;AAIjBY,sBAAM,EAAEikB,YAAY,CAACnkB,IAAb,CAAkBE,MAJT;AAKjBE,qBAAK,EAAE+jB,YAAY,CAACnkB,IAAb,CAAkBI,KALR;AAMjBrE,qBAAK,EAAE2F,OAAO,CAAC0iB,KANE;AAOjB7kB,uBAAO,EAAEmC,OAAO,CAACnC,OAPA;AAQjBc,yBAAS,EAAE8jB,YAAY,CAACnkB,IAAb,CAAkBK,SARZ;AASjBtB,oBAAI,EAAEolB,YAAY,CAACnkB,IAAb,CAAkBjB,IATP;AAUjBuB,wBAAQ,EAAE6jB,YAAY,CAACnkB,IAAb,CAAkBM;AAVX,eAAnB;;AAYA,qBAAI,CAACiL,KAAL,CAAWpJ,IAAX,CAAgBnC,IAAhB;;AACA,qBAAI,CAAC6jB,YAAL,CAAkBtgB,IAAlB,CAAuB,OAAI,CAACgI,KAA5B;;AACA,qBAAI,CAACiE,MAAL,CAAYS,QAAZ,CAAqB,CAAC,GAAD,CAArB;;AACAtT,qBAAO,CAACC,GAAR,CAAY,OAAI,CAAC2O,KAAjB;AACD,aA1BH;AA2BD;;;qCAEU7J,O,EAAS;AAAA;;AAClB;AACA,gBAAI3B,QAAJ;;AACA,gBAAI,OAAO2B,OAAO,CAAClC,KAAf,KAAyB,QAA7B,EAAuC;AACrCO,sBAAQ,GAAG,IAAI8Q,QAAJ,EAAX;AACA9Q,sBAAQ,CAAC+Q,MAAT,CAAgB,IAAhB,EAAsBpP,OAAO,CAACzB,GAA9B;AACAF,sBAAQ,CAAC+Q,MAAT,CAAgB,MAAhB,EAAwBpP,OAAO,CAACvB,IAAhC;AACAJ,sBAAQ,CAAC+Q,MAAT,CAAgB,UAAhB,EAA4BpP,OAAO,CAACpC,QAApC;AACAS,sBAAQ,CAAC+Q,MAAT,CAAgB,QAAhB,EAA0BpP,OAAO,CAACxB,MAAlC;AACAH,sBAAQ,CAAC+Q,MAAT,CAAgB,OAAhB,EAAyBpP,OAAO,CAACtB,KAAjC;AACAL,sBAAQ,CAAC+Q,MAAT,CAAgB,OAAhB,EAAyBpP,OAAO,CAAC3F,KAAjC;AACAgE,sBAAQ,CAAC+Q,MAAT,CAAgB,SAAhB,EAA2BpP,OAAO,CAACnC,OAAnC;AACAQ,sBAAQ,CAAC+Q,MAAT,CAAgB,OAAhB,EAAyBpP,OAAO,CAAClC,KAAjC,EAAwCkC,OAAO,CAAC3F,KAAhD;AACAgE,sBAAQ,CAAC+Q,MAAT,CAAgB,MAAhB,EAAwBpP,OAAO,CAAC3C,IAAhC;AACAgB,sBAAQ,CAAC+Q,MAAT,CAAgB,UAAhB,EAA4BpP,OAAO,CAACpB,QAApC;AACD,aAZD,MAYO;AACLP,sBAAQ,GAAG;AACTE,mBAAG,EAAEyB,OAAO,CAACzB,GADJ;AAETE,oBAAI,EAAEuB,OAAO,CAACvB,IAFL;AAGTb,wBAAQ,EAAEoC,OAAO,CAACpC,QAHT;AAITY,sBAAM,EAAEwB,OAAO,CAACxB,MAJP;AAKTE,qBAAK,EAAEsB,OAAO,CAACtB,KALN;AAMTrE,qBAAK,EAAE2F,OAAO,CAAC3F,KANN;AAOTwD,uBAAO,EAAEmC,OAAO,CAACnC,OAPR;AAQTc,yBAAS,EAAEqB,OAAO,CAAClC,KARV;AASTT,oBAAI,EAAE2C,OAAO,CAAC3C,IATL;AAUTuB,wBAAQ,EAAEoB,OAAO,CAACpB;AAVT,eAAX;AAYD;;AACD,iBAAKsD,IAAL,CACGE,GADH,CACO,KAAKwW,GAAL,GAAW5Y,OAAO,CAACzB,GAD1B,EAC+BF,QAD/B,EAEG/C,SAFH,CAEa,UAAA+G,QAAQ,EAAI;AACrB,kBAAMsgB,YAAY,sBAAO,OAAI,CAAC9Y,KAAZ,CAAlB;;AACA,kBAAM+Y,YAAY,GAAGD,YAAY,CAACE,SAAb,CAAuB,UAAAC,CAAC;AAAA,uBAAIA,CAAC,CAACvkB,GAAF,KAAUyB,OAAO,CAACjH,EAAtB;AAAA,eAAxB,CAArB;AACA,kBAAMuF,IAAI,GAAS;AACjBC,mBAAG,EAAEyB,OAAO,CAACzB,GADI;AAEjBE,oBAAI,EAAEuB,OAAO,CAACvB,IAFG;AAGjBb,wBAAQ,EAAEoC,OAAO,CAACpC,QAHD;AAIjBY,sBAAM,EAAEwB,OAAO,CAACxB,MAJC;AAKjBE,qBAAK,EAAEsB,OAAO,CAACtB,KALE;AAMjBrE,qBAAK,EAAE2F,OAAO,CAAC3F,KANE;AAOjBwD,uBAAO,EAAEmC,OAAO,CAACnC,OAPA;AAQjBc,yBAAS,EAAE,EARM;AASjBtB,oBAAI,EAAE2C,OAAO,CAAC3C,IATG;AAUjBuB,wBAAQ,EAAEoB,OAAO,CAACpB;AAVD,eAAnB;AAYA3D,qBAAO,CAACC,GAAR,CAAYoD,IAAZ;AACAqkB,0BAAY,CAACC,YAAD,CAAZ,GAA6BtkB,IAA7B;AACA,qBAAI,CAACuL,KAAL,GAAa8Y,YAAb;;AACA,qBAAI,CAACR,YAAL,CAAkBtgB,IAAlB,CAAuB,OAAI,CAACgI,KAA5B;;AACA,qBAAI,CAACiE,MAAL,CAAYS,QAAZ,CAAqB,CAAC,GAAD,CAArB;AACD,aAtBH;AAuBD;;;qCAEUrQ,M,EAAgB;AAAA;;AACzB,iBAAKgE,IAAL,WACU,KAAK0W,GAAL,GAAW1a,MADrB,EAEG5C,SAFH,CAEa,YAAM;AACf,kBAAMqnB,YAAY,GAAG,OAAI,CAAC9Y,KAAL,CAAWoN,MAAX,CAAkB,UAAA3Y,IAAI;AAAA,uBAAIA,IAAI,CAACC,GAAL,KAAaL,MAAjB;AAAA,eAAtB,CAArB;;AACA,qBAAI,CAAC2L,KAAL,GAAa8Y,YAAb;;AACA,qBAAI,CAACR,YAAL,CAAkBtgB,IAAlB,CAAuB,OAAI,CAACgI,KAA5B;AACD,aANH;AAOD;;;mCACQ3L,M,EAAgBvD,Q,EAAgB;AAAA;;AACvC,gBAAMooB,gBAAgB,GAAG,KAAKlZ,KAAL,CAAWjJ,OAAX,CAAmB,KAAKiJ,KAAL,CAAW2I,IAAX,CAAgB,UAAAlU,IAAI;AAAA,qBAAIA,IAAI,CAACC,GAAL,IAAYL,MAAhB;AAAA,aAApB,CAAnB,CAAzB;AACE,iBAAKgE,IAAL,CACCE,GADD,CACK,KAAKwW,GAAL,GAAU,OAAV,GAAoB1a,MADzB,EACiC;AAAC,0BAAYvD;AAAb,aADjC,EAECW,SAFD,CAEW,UAAC+G,QAAD,EAA8C;AACtD,qBAAI,CAACwH,KAAL,CAAWkZ,gBAAX,CAAD,CAA+BrkB,KAA/B,GAAsC2D,QAAQ,CAAC3D,KAA/C;;AACA,qBAAI,CAACyjB,YAAL,CAAkBtgB,IAAlB,CAAuB,OAAI,CAACgI,KAA5B;AACD,aALD;AAMH;;;sCACWA,K,EAAK;AACf,iBAAKsY,YAAL,CAAkBtgB,IAAlB,CAAuBgI,KAAvB;AACD;;;;;;;yBA/NUqY,c,EAAc,uH,EAAA,8G;AAAA,O;;;eAAdA,c;AAAc,iBAAdA,cAAc,K;AAAA,oBADD;;;;;wEACbA,c,EAAc;gBAD1B,wDAC0B;iBADf;AAAEc,sBAAU,EAAE;AAAd,W;AACe,U;;;;;;;;;;;;;;;;;;;;;;;;ACV3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASa/oB,iB;AAqBX,mCAAoBE,aAApB,EAAkD;AAAA;;AAA9B,eAAAA,aAAA,GAAAA,aAAA,CAA8B,CAnBlD;;AACQ,eAAA8oB,OAAA,GAAwB,EAAxB,CAkB0C,CAlBf;;AAC3B,eAAAC,SAAA,GAAiB,EAAjB,CAiB0C,CAjBtB;;AACpB,eAAAC,KAAA,GAAa,EAAb,CAgB0C,CAhB1B;AAGxB;;AACQ,eAAAC,aAAA,GAA+C,IAAI,oDAAJ,CAAoB,KAAKH,OAAzB,CAA/C;AACD,eAAA/d,YAAA,GAAyC,KAAKke,aAAL,CAAmBxd,YAAnB,EAAzC;AAEC,eAAAyd,YAAA,GAAwC,IAAI,oDAAJ,CAAoB,EAApB,CAAxC;AACD,eAAAhoB,WAAA,GAAkC,KAAKgoB,YAAL,CAAkBzd,YAAlB,EAAlC;AAEC,eAAA0d,WAAA,GAAuC,IAAI,oDAAJ,CAAoB1nB,MAAM,CAACG,UAA3B,CAAvC;AACD,eAAAgd,UAAA,GAAiC,KAAKuK,WAAL,CAAiB1d,YAAjB,EAAjC;AAEC,eAAA2d,UAAA,GAA0C,IAAI,oDAAJ,CAAoB,IAAI,oEAAJ,CAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,CAApB,CAA1C;AACD,eAAAjgB,SAAA,GAAoC,KAAKigB,UAAL,CAAgB3d,YAAhB,EAApC;AAIN,S,CAED;;;;;kCACQ4d,K,EAAe;AAAA;;AACrBA,iBAAK,CAAC/iB,IAAN,CAAWlG,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAX;AACA,gBAAIipB,WAAW,GAAID,KAAK,CAACvM,MAAN,CAAa,UAACyM,CAAD,EAAGC,CAAH;AAAA,qBAASH,KAAK,CAAC5iB,OAAN,CAAc8iB,CAAd,MAAsBC,CAA/B;AAAA,aAAb,CAAD,CAAkD5G,IAAlD,EAAlB,CAFqB,CAGrB;;AACA,iBAAK5iB,aAAL,CAAmBO,IAAnB,CAAwB,gBAAxB,EAA0C;AAACuJ,oBAAM,EAAE1J,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAT;AAA6CnC,iBAAG,EAAEorB;AAAlD,aAA1C,EAA0G,UAAC7oB,IAAD,EAAU;AAClH,qBAAI,CAACqoB,OAAL,GAAe,EAAf;;AACA,qBAAI,CAACG,aAAL,CAAmBvhB,IAAnB,CAAwB,OAAI,CAACohB,OAA7B;;AACA,kBAAIroB,IAAI,CAACI,GAAT,EAAc;AACZC,uBAAO,CAACC,GAAR,CAAYN,IAAI,CAACI,GAAjB;AACD,eAFD,MAGK,IAAIJ,IAAI,CAACC,GAAT,EAAc;AAChBD,oBAAI,CAACC,GAAN,CAAW+I,OAAX,CAAmB,UAAAuD,OAAO,EAAI;AAE5B,sBAAI+Z,MAAJ;;AACA,sBAAI/Z,OAAO,CAACxD,QAAR,CAAiBhC,MAArB,EAA6B;AAAE;AAC7B,wBAAIiiB,SAAS,GAAGzc,OAAO,CAACxD,QAAR,CAAiBhC,MAAjB,GAA0B,CAA1C;;AACA,wBAAIwF,OAAO,CAACxD,QAAR,CAAiBigB,SAAjB,EAA4BC,IAA5B,CAAiC5R,QAAjC,CAA0C1X,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAA1C,CAAJ,EAAmF;AACjF0mB,4BAAM,GAAG,KAAT;AACD,qBAFD,MAEO;AACLA,4BAAM,GAAG,IAAT;AACD;AACF,mBAPD,MAOO;AACLA,0BAAM,GAAG,KAAT;AACD;;AAED,yBAAI,CAAC+B,OAAL,CAAaxiB,IAAb,CAAkB;AAChBiD,4BAAQ,EAAEyD,OAAO,CAACzD,QADF;AAEhBf,0BAAM,EAAEwE,OAAO,CAAC5I,GAFA;AAGhB2iB,0BAAM,EAAEA;AAHQ,mBAAlB;AAKD,iBAnBD;;AAoBA,uBAAI,CAACkC,aAAL,CAAmBvhB,IAAnB,CAAwB,OAAI,CAACohB,OAA7B;AACD;AACF,aA7BD;AA8BD,W,CAED;;;;wCACctgB,M,EAAgB;AAAA;;AAC5B,iBAAKsgB,OAAL,CAAarf,OAAb,CAAqB,UAACL,IAAD,EAAU;AAC7B,kBAAIA,IAAI,CAACZ,MAAL,IAAeA,MAAnB,EAA2B;AACzB,uBAAI,CAAC4gB,UAAL,CAAgB1hB,IAAhB,CAAqB0B,IAArB;AACD;AACF,aAJD;AAKD,W,CAED;;;;yCACemd,K,EAAa;AAAA;;AAC1B,gBAAI8C,KAAK,GAAa9C,KAAK,CAACtb,KAAN,CAAY,GAAZ,CAAtB;AACA,gBAAIqe,WAAW,GAAID,KAAK,CAACvM,MAAN,CAAa,UAACyM,CAAD,EAAGC,CAAH;AAAA,qBAASH,KAAK,CAAC5iB,OAAN,CAAc8iB,CAAd,MAAsBC,CAA/B;AAAA,aAAb,CAAD,CAAkD5G,IAAlD,EAAlB;AACA,iBAAK5iB,aAAL,CAAmBO,IAAnB,CAAwB,YAAxB,EAAsC+oB,WAAtC,EAAmD,UAAC7oB,IAAD,EAAU;AAC3D,kBAAIA,IAAI,CAACI,GAAT,EAAc;AACZC,uBAAO,CAACC,GAAR,CAAYN,IAAI,CAACI,GAAjB;AACD,eAFD,MAEO,IAAIJ,IAAI,CAACC,GAAT,EAAc;AACnB4oB,2BAAW,CAAChjB,IAAZ,CAAiBlG,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAjB;;AACA,uBAAI,CAACL,aAAL,CAAmBO,IAAnB,CAAwB,gBAAxB,EAA0C+oB,WAAW,CAAC1G,IAAZ,EAA1C;AACD;;AACD0G,yBAAW,GAAG,EAAd;AACD,aARD;AASD,W,CAED;;;;2CACiB3e,M,EAAoB;AACnC,gBAAI,KAAKqe,KAAL,CAAWlR,QAAX,CAAoBnN,MAAM,CAACnC,MAA3B,CAAJ,EAAwC;AACtC,kBAAIjB,CAAC,GAAG,KAAKyhB,KAAL,CAAWviB,OAAX,CAAmBkE,MAAM,CAACnC,MAA1B,CAAR;AACA,mBAAKugB,SAAL,CAAeriB,MAAf,CAAsBa,CAAtB,EAAyB,CAAzB;AACA,mBAAKyhB,KAAL,CAAWtiB,MAAX,CAAkBa,CAAlB,EAAqB,CAArB;AACAoD,oBAAM,CAACwE,IAAP,GAAc,KAAd;AACD,aALD,MAKO;AACL,mBAAK4Z,SAAL,CAAeziB,IAAf,CAAoBqE,MAAM,CAACpB,QAA3B;AACA,mBAAKyf,KAAL,CAAW1iB,IAAX,CAAgBqE,MAAM,CAACnC,MAAvB;AACAmC,oBAAM,CAACwE,IAAP,GAAc,IAAd;AACD;;AACD,iBAAK+Z,YAAL,CAAkBxhB,IAAlB,CAAuB;AACrBiiB,uBAAS,EAAE,KAAKZ,SADK;AAErBa,qBAAO,EAAE,KAAKZ;AAFO,aAAvB;AAID,W,CAED;;;;6CACmB;AAAA;;AACjB,iBAAKhpB,aAAL,CAAmBkK,MAAnB,CAA0B,cAA1B,EAA0C/I,SAA1C,CAAoD,UAACV,IAAD,EAAe;AACjE,kBAAIA,IAAI,CAACC,GAAT,EAAc;AACZ,oBAAI6G,CAAC,GAAG,OAAI,CAACuhB,OAAL,CAAaJ,SAAb,CAAuB,UAACpqB,CAAD;AAAA,yBAAOA,CAAC,CAACkK,MAAF,KAAa/H,IAAI,CAACC,GAAL,CAAS8H,MAA7B;AAAA,iBAAvB,CAAR;;AACA,oBAAI/H,IAAI,CAACC,GAAL,CAASmpB,MAAT,IAAmB,SAAvB,EAAkC;AAChC,sBAAItiB,CAAC,IAAI,CAAC,CAAV,EAAa;AACXzG,2BAAO,CAACC,GAAR,CAAY,eAAewG,CAA3B;;AACA,wBAAI9G,IAAI,CAACC,GAAL,CAASoJ,MAAT,IAAmB1J,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAvB,EAA2D;AACzD,6BAAI,CAACyoB,OAAL,CAAavhB,CAAb,EAAgBwf,MAAhB,GAAyB,KAAzB;AACD,qBAFD,MAEO;AACL,6BAAI,CAAC+B,OAAL,CAAavhB,CAAb,EAAgBwf,MAAhB,GAAyB,IAAzB;AACD;;AACD,2BAAI,CAACkC,aAAL,CAAmBvhB,IAAnB,CAAwB,OAAI,CAACohB,OAA7B;AACD,mBARD,MAQO;AACLhoB,2BAAO,CAACC,GAAR,CAAY,aAAZ;AACD;AACF,iBAZD,MAYO,IAAIN,IAAI,CAACC,GAAL,CAASmpB,MAAT,IAAmB,MAAvB,EAA+B;AACpCppB,sBAAI,CAACC,GAAL,CAASgpB,IAAT,CAAcjgB,OAAd,CAAsB,UAAAuD,OAAO,EAAI;AAC/B,wBAAGA,OAAO,CAAC8K,QAAR,CAAiB1X,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAjB,CAAH,EAAyD;AACvD,6BAAI,CAACyoB,OAAL,CAAavhB,CAAb,EAAgBwf,MAAhB,GAAyB,KAAzB;;AACA,6BAAI,CAACkC,aAAL,CAAmBvhB,IAAnB,CAAwB,OAAI,CAACohB,OAA7B;AACD;AACF,mBALD;AAMD;AACF;AACF,aAxBD;AAyBD,W,CAGD;AACA;;;;2CACiBtgB,M,EAAgB;AAAA;;AAC/B,iBAAKxI,aAAL,CAAmBO,IAAnB,CAAwB,cAAxB,EAAwC;AAAC3B,gBAAE,EAAE4J,MAAL;AAAahI,sBAAQ,EAAEJ,cAAc,CAACC,OAAf,CAAuB,UAAvB;AAAvB,aAAxC,EAAqG,UAACI,IAAD,EAAU;AAC7G,kBAAIA,IAAJ,EAAU;AACR,oBAAI8G,CAAC,GAAG,OAAI,CAACuhB,OAAL,CAAaJ,SAAb,CAAuB,UAACpqB,CAAD;AAAA,yBAAOA,CAAC,CAACkK,MAAF,KAAaA,MAApB;AAAA,iBAAvB,CAAR;;AACA,uBAAI,CAACsgB,OAAL,CAAavhB,CAAb,EAAgBwf,MAAhB,GAAyB,KAAzB;;AACA,uBAAI,CAACkC,aAAL,CAAmBvhB,IAAnB,CAAwB,OAAI,CAACohB,OAA7B;AACD;AACF,aAND;AAOD;;;uCAEYzK,K,EAAe;AAAA;;AAC1B,gBAAMyL,eAAe,GAAW,GAAhC;AACA,gBAAMC,eAAe,GAAW,MAAO1L,KAAK,GAAC,EAA7C,CAF0B,CAEuB;;AACjD,gBAAM2L,MAAM,GAAWC,IAAI,CAACC,KAAL,CAAW,CAAC7L,KAAK,GAAG0L,eAAT,IAA4BD,eAAvC,CAAvB,CAH0B,CAGqD;;AAC/E,gBAAI,KAAKf,SAAL,CAAevhB,MAAf,GAAwBwiB,MAA5B,EAAoC;AAAA,yCACzB5oB,CADyB;AAEhC,oBAAI+oB,aAAa,GAAG,OAAI,CAACnB,KAAL,CAAW,CAAX,CAApB;;AACA,uBAAI,CAACF,OAAL,CAAarf,OAAb,CAAqB,UAACL,IAAD,EAAU;AAC7B,sBAAIA,IAAI,CAACZ,MAAL,IAAe2hB,aAAnB,EAAkC;AAChC/gB,wBAAI,CAAC+F,IAAL,GAAY,KAAZ;AACD;AACF,iBAJD;;AAKA,uBAAI,CAAC4Z,SAAL,CAAevb,KAAf;;AACA,uBAAI,CAACwb,KAAL,CAAWxb,KAAX;AATgC;;AAClC,mBAAK,IAAIpM,CAAC,GAAG,KAAK2nB,SAAL,CAAevhB,MAA5B,EAAoCpG,CAAC,GAAG4oB,MAAxC,EAAgD5oB,CAAC,EAAjD,EAAqD;AAAA,sBAA5CA,CAA4C;AASpD;AACF;;AACD,iBAAK+nB,WAAL,CAAiBzhB,IAAjB,CAAsB2W,KAAtB;AACD;;;wCAEa;AACZ,iBAAKre,aAAL,CAAmByK,MAAnB,CAA0B,cAA1B;AACD;;;;;;;yBAvKU3K,iB,EAAiB,qH;AAAA,O;;;eAAjBA,iB;AAAiB,iBAAjBA,iBAAiB,K;AAAA,oBAHhB;;;;;wEAGDA,iB,EAAiB;gBAJ7B,wDAI6B;iBAJlB;AACV+oB,sBAAU,EAAE;AADF,W;AAIkB,U;;;;;;;;;;;;;;;;;;;;;;ACT9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASa7oB,a;AAKX,iCAAc;AAAA;;AAFL,eAAAoqB,GAAA,GAAc,yEAAYlH,YAA1B;AAGP,eAAKmH,MAAL,GAAc,4DAAE,CAAC,KAAKD,GAAN,CAAhB;AACD;;;;iCAEME,S,EAAmB;AAAA;;AACxB,mBAAO,IAAI,+CAAJ,CAAe,UAACvX,GAAD,EAAS;AAC7B,qBAAI,CAACsX,MAAL,CAAYE,EAAZ,CAAeD,SAAf,EAA0B,UAAC7pB,IAAD,EAAU;AAClCsS,mBAAG,CAACrL,IAAJ,CAASjH,IAAT;AACD,eAFD;AAGD,aAJM,CAAP;AAKD;;;gCAEK6pB,S,EAAmB7pB,I,EAAS;AAAA;;AAChC,mBAAO,IAAItC,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,kBAAI,CAAC,OAAI,CAACiS,MAAV,EAAkB;AAChBjS,sBAAM;AACP,eAFD,MAEO;AACL,uBAAI,CAACiS,MAAL,CAAY9pB,IAAZ,CAAiB+pB,SAAjB,EAA4B7pB,IAA5B,EAAkC,UAAC+pB,GAAD,EAAS;AACzCpsB,yBAAO,CAACosB,GAAD,CAAP;AACH,iBAFC;AAGD;AACF,aARM,CAAP;AASD;;;+BAGIF,S,EAAmB7pB,I,EAAW+pB,G,EAA0B;AAC3D,iBAAKH,MAAL,CAAY9pB,IAAZ,CAAiB+pB,SAAjB,EAA4B7pB,IAA5B,EAAkC+pB,GAAlC;AACD;;;+BAEIF,S,EAAmB;AAAA;;AACtB,mBAAO,IAAI,+CAAJ,CAAe,UAACvX,GAAD,EAAS;AAC7B,qBAAI,CAACsX,MAAL,CAAYI,IAAZ,CAAiBH,SAAjB,EAA4B,UAAC7pB,IAAD,EAAU;AACpCsS,mBAAG,CAACrL,IAAJ,CAASjH,IAAT;AACD,eAFD;AAGD,aAJM,CAAP;AAKD;;;iCAEM6pB,S,EAAmB;AACxB,iBAAKD,MAAL,CAAYK,cAAZ,CAA2BJ,SAA3B;AACD,W,CAED;;;;kCACQ;AACN,iBAAKD,MAAL,CAAYvZ,KAAZ;AACD,W,CAED;;;;uCACa;AACX,iBAAKuZ,MAAL,CAAYM,UAAZ;AACD,W,CAED;;;;iCACO;AACL,iBAAKN,MAAL,CAAYlb,IAAZ;AACD;;;;;;;yBA3DUnP,a;AAAa,O;;;eAAbA,a;AAAa,iBAAbA,aAAa,K;AAAA,oBAHZ;;;;;wEAGDA,a,EAAa;gBAJzB,wDAIyB;iBAJd;AACV6oB,sBAAU,EAAE;AADF,W;AAIc,U;;;;;;;;;;;;;;;;;;;;ACT1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAaapY,e;AAKX,iCACU1I,IADV,EAEU4L,MAFV,EAGUiX,WAHV,EAGuC;AAAA;;AAF7B,eAAA7iB,IAAA,GAAAA,IAAA;AACA,eAAA4L,MAAA,GAAAA,MAAA;AACA,eAAAiX,WAAA,GAAAA,WAAA;AAPV,eAAAnM,GAAA,GAAM,yEAAYoM,mBAAlB;AACQ,eAAAnb,KAAA,GAAgB,EAAhB;AACA,eAAAsY,YAAA,GAAe,IAAI,4CAAJ,EAAf;AAKiC;;;;qCAE9Bja,U,EAAWhK,M,EAAc;AAAA;;AAClC,iBAAKgE,IAAL,CACC5D,IADD,CAEE,KAAKsa,GAFP,EAGE;AAACrP,yBAAW,EAAErB,UAAd;AAA0BhK,oBAAM,EAAEA;AAAlC,aAHF,EAG4C;AACxCoT,qBAAO,EAAE;AAD+B,aAH5C,EAMEhW,SANF,CAMY,UAAAmnB,YAAY,EAAI;AAC1B,kBAAM5Z,OAAO,GAAY;AACvBtK,mBAAG,EAAEkkB,YAAY,CAAC5Z,OAAb,CAAqBtK,GADH;AAEvBE,oBAAI,EAAEgkB,YAAY,CAAC5Z,OAAb,CAAqBpK,IAFJ;AAGvBD,sBAAM,EAAEikB,YAAY,CAAC5Z,OAAb,CAAqBrK,MAHN;AAIvBE,qBAAK,EAAE+jB,YAAY,CAAC5Z,OAAb,CAAqBnK,KAJL;AAKvBb,uBAAO,EAAEqK,UAAU,CAACrK,OALG;AAMvBonB,uBAAO,EAAExC,YAAY,CAAC5Z,OAAb,CAAqBoc,OANP;AAOvBpa,sBAAM,EAAE4X,YAAY,CAAC5Z,OAAb,CAAqBgC;AAPN,eAAzB;AASA5P,qBAAO,CAACC,GAAR,CAAY2N,OAAZ,EAV0B,CAW1B;;AACA,kBAAMqc,SAAS,GAAG,OAAI,CAACH,WAAL,CAAiBlb,KAAjB,CAAuBgZ,SAAvB,CAAiC,UAAAC,CAAC;AAAA,uBAAIA,CAAC,CAACvkB,GAAF,KAAUL,MAAd;AAAA,eAAlC,CAAlB;;AACA,qBAAI,CAAC6mB,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2C6B,IAA3C,CAAgDoI,OAAhD;;AACA,qBAAI,CAACkc,WAAL,CAAiBI,WAAjB,CAA6B,OAAI,CAACJ,WAAL,CAAiBlb,KAA9C;AACH,aArBC;AAsBH;AACC;;;;wCACc;AACZ,iBAAK3H,IAAL,CACG/D,GADH,CAC2C,KAAKya,GADhD,EAEGX,IAFH,CAGI,2DAAI,UAAA1O,WAAW,EAAI;AACjB,qBAAOA,WAAW,CAAC3K,QAAZ,CAAqB5F,GAArB,CAAyB,UAAA6P,OAAO,EAAI;AACzC,uBAAO;AACLtK,qBAAG,EAAEsK,OAAO,CAACtK,GADR;AAELE,sBAAI,EAAEoK,OAAO,CAACpK,IAFT;AAGLD,wBAAM,EAAEqK,OAAO,CAACrK,MAHX;AAILX,yBAAO,EAAEgL,OAAO,CAAChL,OAJZ;AAKLa,uBAAK,EAAEmK,OAAO,CAACnK,KALV;AAMLumB,yBAAO,EAAEpc,OAAO,CAACoc,OANZ;AAOLpa,wBAAM,EAAEhC,OAAO,CAACgC;AAPX,iBAAP;AASD,eAVM,CAAP;AAWD,aAZD,CAHJ,EAiBGvP,SAjBH,CAiBa,UAAA8pB,mBAAmB,EAAI,CAChC;AACA;AACD,aApBH;AAqBD,W,CACD;;AACA;;;;qCACWxc,S,EAAmB;AAC5B,mBAAO,KAAK1G,IAAL,CAAU/D,GAAV,CASL,KAAKya,GAAL,GAAWhQ,SATN,CAAP;AAWD;AACD;;;;gCACMD,Y,EAA4D;AAAA;;AAChE,gBAAMuc,SAAS,GAAG,KAAKH,WAAL,CAAiBlb,KAAjB,CAAuBgZ,SAAvB,CAAiC,UAAAC,CAAC;AAAA,qBAAIA,CAAC,CAACvkB,GAAF,KAAUoK,YAAY,CAACzK,MAA3B;AAAA,aAAlC,CAAlB;AACA,gBAAMmnB,YAAY,GAAG,KAAKN,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2CikB,SAA3C,CAAqD,UAAAyC,CAAC;AAAA,qBAAIA,CAAC,CAAC/mB,GAAF,KAAUoK,YAAY,CAACC,SAA3B;AAAA,aAAtD,CAArB;AAEA,iBAAK1G,IAAL,CACCE,GADD,CAEE,KAAKwW,GAAL,GAAWjQ,YAAY,CAACC,SAF1B,EAGE;AAACW,yBAAW,EAAEZ,YAAY,CAACG,KAA3B;AAAkC5K,oBAAM,EAAEyK,YAAY,CAACzK;AAAvD,aAHF,EAIC5C,SAJD,CAIW,UAAAmnB,YAAY,EAAI;AACzB,qBAAI,CAACsC,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2CymB,YAA3C,EAAyDJ,OAAzD,CAAiExkB,IAAjE,CAAsEgiB,YAAY,CAAC3Z,KAAnF;;AACA,qBAAI,CAACic,WAAL,CAAiBI,WAAjB,CAA6B,OAAI,CAACJ,WAAL,CAAiBlb,KAA9C;AACD,aAPD;AAQD;AACD;;;;sCACY0b,W,EAAqD;AAAA;;AAC/DtqB,mBAAO,CAACC,GAAR,CAAYqqB,WAAZ;AACA,gBAAML,SAAS,GAAG,KAAKH,WAAL,CAAiBlb,KAAjB,CAAuBgZ,SAAvB,CAAiC,UAAAC,CAAC;AAAA,qBAAIA,CAAC,CAACvkB,GAAF,KAAUgnB,WAAW,CAACrnB,MAA1B;AAAA,aAAlC,CAAlB;AACA,gBAAMmnB,YAAY,GAAG,KAAKN,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2CikB,SAA3C,CAAqD,UAAAyC,CAAC;AAAA,qBAAIA,CAAC,CAAC/mB,GAAF,KAAUgnB,WAAW,CAAC1c,OAAZ,CAAoBtK,GAAlC;AAAA,aAAtD,CAArB;;AACA,gBAAIgnB,WAAW,CAACzc,KAAhB,EAAsB;AACpB,kBAAI0c,UAAU,GAAG,KAAKT,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2CymB,YAA3C,EAAyDJ,OAAzD,CAAiEpC,SAAjE,CAA2E,UAAA4C,CAAC;AAAA,uBAAIA,CAAC,CAAClnB,GAAF,KAAUgnB,WAAW,CAACzc,KAAZ,CAAkBvK,GAAhC;AAAA,eAA5E,CAAjB;AACD;;AACD,iBAAK2D,IAAL,CACCE,GADD,CAEE,KAAKwW,GAAL,GAAU,OAAV,GAAoB2M,WAAW,CAAC1c,OAAZ,CAAoBtK,GAF1C,EAGA;AAACL,oBAAM,EAAEqnB,WAAW,CAACrnB,MAArB;AAA6B8K,qBAAO,EAAEuc,WAAW,CAACzc,KAAlD;AAAyDD,qBAAO,EAAE0c,WAAW,CAAC1c;AAA9E,aAHA,EAIGvN,SAJH,CAIa,UAAA+G,QAAQ,EAAG;AACnB,qBAAI,CAAC0iB,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,CAAD,CAAoCtmB,QAApC,CAA6CymB,YAA7C,IAA6DhjB,QAAQ,CAACwG,OAAtE;;AACA,qBAAI,CAACkc,WAAL,CAAiB1kB,UAAjB,CAA4B,OAAI,CAAC0kB,WAAL,CAAiBlb,KAA7C;AACD,aAPH;AAUD;AACD;;;;sCACYd,W,EAAkF;AAAA;;AAC5F,gBAAMmc,SAAS,GAAG,KAAKH,WAAL,CAAiBlb,KAAjB,CAAuBgZ,SAAvB,CAAiC,UAAAC,CAAC;AAAA,qBAAIA,CAAC,CAACvkB,GAAF,KAAUwK,WAAW,CAAC7K,MAA1B;AAAA,aAAlC,CAAlB;AACA,gBAAMmnB,YAAY,GAAG,KAAKN,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2CikB,SAA3C,CAAqD,UAAAyC,CAAC;AAAA,qBAAIA,CAAC,CAAC/mB,GAAF,KAAUwK,WAAW,CAACH,SAA1B;AAAA,aAAtD,CAArB;;AACA,gBAAIG,WAAW,CAACC,OAAhB,EAAwB;AACtB,kBAAIwc,UAAU,GAAG,KAAKT,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2CymB,YAA3C,EAAyDJ,OAAzD,CAAiEpC,SAAjE,CAA2E,UAAA4C,CAAC;AAAA,uBAAIA,CAAC,CAAClnB,GAAF,KAAUwK,WAAW,CAACC,OAA1B;AAAA,eAA5E,CAAjB;AACD;;AACD,iBAAK9G,IAAL,CACCE,GADD,CAEE,KAAKwW,GAAL,GAAU,OAAV,GAAoB7P,WAAW,CAACH,SAFlC,EAGA;AAAC1K,oBAAM,EAAE6K,WAAW,CAAC7K,MAArB;AAA4BvD,sBAAQ,EAAEoO,WAAW,CAACpO,QAAlD;AAA4DqO,qBAAO,EAAED,WAAW,CAACC;AAAjF,aAHA,EAIG1N,SAJH,CAIa,UAAA+G,QAAQ,EAAG;AACpB,kBAAG0G,WAAW,CAACC,OAAf,EAAuB;AACpB,uBAAI,CAAC+b,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,CAAD,CAAoCtmB,QAApC,CAA6CymB,YAA7C,EAA2DJ,OAA3D,CAAmEO,UAAnE,EAA+E9mB,KAA/E,GAAuF2D,QAAQ,CAAC3D,KAAhG;AACD,eAFD,MAGI;AACD,uBAAI,CAACqmB,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,CAAD,CAAoCtmB,QAApC,CAA6CymB,YAA7C,EAA2D3mB,KAA3D,GAAkE2D,QAAQ,CAAC3D,KAA3E;AACD;;AACD,qBAAI,CAACqmB,WAAL,CAAiB1kB,UAAjB,CAA4B,OAAI,CAAC0kB,WAAL,CAAiBlb,KAA7C;AACD,aAZH;AAaD;AACD;;;;wCACcX,a,EAAkE;AAAA;;AAC9E,gBAAMgc,SAAS,GAAG,KAAKH,WAAL,CAAiBlb,KAAjB,CAAuBgZ,SAAvB,CAAiC,UAAAC,CAAC;AAAA,qBAAIA,CAAC,CAACvkB,GAAF,KAAU2K,aAAa,CAAChL,MAA5B;AAAA,aAAlC,CAAlB;AACA,gBAAMmnB,YAAY,GAAG,KAAKN,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2CikB,SAA3C,CAAqD,UAAAyC,CAAC;AAAA,qBAAIA,CAAC,CAAC/mB,GAAF,KAAU2K,aAAa,CAACN,SAA5B;AAAA,aAAtD,CAArB;;AACA,gBAAIM,aAAa,CAACF,OAAlB,EAA0B;AACxB,kBAAIwc,UAAU,GAAG,KAAKT,WAAL,CAAiBlb,KAAjB,CAAuBqb,SAAvB,EAAkCtmB,QAAlC,CAA2CymB,YAA3C,EAAyDJ,OAAzD,CAAiEpC,SAAjE,CAA2E,UAAA4C,CAAC;AAAA,uBAAIA,CAAC,CAAClnB,GAAF,KAAU2K,aAAa,CAACF,OAA5B;AAAA,eAA5E,CAAjB;AACD;;AACD,iBAAK9G,IAAL,CACCE,GADD,CAEE,KAAKwW,GAAL,GAAU,SAAV,GAAsB1P,aAAa,CAACN,SAFtC,EAGE;AAAC1K,oBAAM,EAAEgL,aAAa,CAAChL,MAAvB;AAA+B8K,qBAAO,EAAEE,aAAa,CAACF;AAAtD,aAHF,EAIG1N,SAJH,CAIa,YAAM;AACf,kBAAIoqB,QAAQ,GAAG,OAAI,CAACX,WAAL,CAAiBlb,KAAhC;;AACA,kBAAGX,aAAa,CAACF,OAAjB,EAAyB;AACvB0c,wBAAQ,CAACR,SAAD,CAAR,CAAoBtmB,QAApB,CAA6BymB,YAA7B,EAA2CJ,OAA3C,CAAmDpkB,MAAnD,CAA0D2kB,UAA1D;AACD,eAFD,MAGI;AACFE,wBAAQ,CAACR,SAAD,CAAR,CAAoBtmB,QAApB,CAA6BiC,MAA7B,CAAoCwkB,YAApC;AACD;;AACD,qBAAI,CAAClD,YAAL,CAAkBtgB,IAAlB,CAAuB6jB,QAAvB;AACD,aAbH;AAcD;;;;;;;yBApJU9a,e,EAAe,uH,EAAA,8G,EAAA,wH;AAAA,O;;;eAAfA,e;AAAe,iBAAfA,eAAe,K;AAAA,oBAFd;;;;;wEAEDA,e,EAAe;gBAH3B,wDAG2B;iBAHhB;AACVoY,sBAAU,EAAE;AADF,W;AAGgB,U;;;;;;;;;;;;;;;;;;;;;;;;;;ACb5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,sE,CAQA;;;UAEapZ,W;AAGX,6BAAoB1H,IAApB,EAAsC;AAAA;;AAAlB,eAAAA,IAAA,GAAAA,IAAA;AAFpB,eAAAyjB,SAAA,GAAY,sEAAYtI,YAAxB;AAEyC;;;;kCAElC1gB,K,EAAesJ,M,EAAa;AAAA;;AACjC,gBAAI2f,WAAW,GAAG,KAAKD,SAAL,GAAiBhpB,KAAnC;AACA,mBAAO,IAAIrE,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAACrQ,IAAL,WAAsB0jB,WAAtB,EAAmC;AACjCtU,uBAAO,EAAE;AACPkR,+BAAa,EAAE/nB,YAAY,CAACD,OAAb,CAAqB,OAArB,IAAgCC,YAAY,CAACD,OAAb,CAAqB,OAArB,EAA8BoH,QAA9B,EAAhC,GAA2E;AADnF,iBADwB;AAIjCqE,sBAAM,EAANA;AAJiC,eAAnC,EAKG3K,SALH,CAKa,UAACT,GAAD,EAAS;AACpBtC,uBAAO,CAACsC,GAAD,CAAP;AACD,eAPD,EAOG,UAACG,GAAD,EAAS;AACVuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eATD;AAUD,aAXM,CAAP;AAYD;;;8BAEG2B,K,EAAesJ,M,EAAa;AAAA;;AAC9B,gBAAI2f,WAAW,GAAG,KAAKD,SAAL,GAAiBhpB,KAAnC;AACA,mBAAO,IAAIrE,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAACrQ,IAAL,CAAU/D,GAAV,CAAmBynB,WAAnB,EAAgC;AAC9BtU,uBAAO,EAAE;AACPkR,+BAAa,EAAE/nB,YAAY,CAACD,OAAb,CAAqB,OAArB,IAA+BC,YAAY,CAACD,OAAb,CAAqB,OAArB,EAA8BoH,QAA9B,EAA/B,GAA0E;AADlF,iBADqB;AAI9BqE,sBAAM,EAANA;AAJ8B,eAAhC,EAKG3K,SALH,CAKa,UAACT,GAAD,EAAS;AACpBtC,uBAAO,CAACsC,GAAD,CAAP;AACD,eAPD,EAOG,UAACG,GAAD,EAAS;AACVuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eATD;AAUD,aAXM,CAAP;AAYD;;;+BAEI2B,K,EAAesJ,M,EAAa;AAAA;;AAC/B,gBAAI2f,WAAW,GAAG,KAAKD,SAAL,GAAiBhpB,KAAnC;AACA,mBAAO,IAAIrE,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAACrQ,IAAL,CAAU5D,IAAV,CAAoBsnB,WAApB,EACE3f,MADF,EAEE3K,SAFF,CAEY,UAACT,GAAD,EAAS;AACnBtC,uBAAO,CAACsC,GAAD,CAAP;AACD,eAJD,EAIG,UAACG,GAAD,EAAS;AACVuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eAND;AAOD,aARM,CAAP;AASD;;;8BAEG2B,K,EAAesJ,M,EAAa;AAAA;;AAC9B,gBAAI2f,WAAW,GAAG,KAAKD,SAAL,GAAiBhpB,KAAnC;AACA,mBAAO,IAAIrE,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAACrQ,IAAL,CAAUE,GAAV,CAAmBwjB,WAAnB,EAAgC;AAC9BtU,uBAAO,EAAE;AACPkR,+BAAa,EAAE/nB,YAAY,CAACD,OAAb,CAAqB,OAArB,IAAgCC,YAAY,CAACD,OAAb,CAAqB,OAArB,EAA8BoH,QAA9B,EAAhC,GAA2E;AADnF,iBADqB;AAI9BqE,sBAAM,EAANA;AAJ8B,eAAhC,EAKG3K,SALH,CAKa,UAACT,GAAD,EAAS;AACpBtC,uBAAO,CAACsC,GAAD,CAAP;AACD,eAPD,EAOG,UAACG,GAAD,EAAS;AACVuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eATD;AAUD,aAXM,CAAP;AAYD;;;gCAEK2B,K,EAAesJ,M,EAAa;AAAA;;AAChC,gBAAI2f,WAAW,GAAG,KAAKD,SAAL,GAAiBhpB,KAAnC;AACA,mBAAO,IAAIrE,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAACrQ,IAAL,CAAUuO,KAAV,CAAqBmV,WAArB,EAAkC;AAChCtU,uBAAO,EAAE;AACPkR,+BAAa,EAAE/nB,YAAY,CAACD,OAAb,CAAqB,OAArB,IAAgCC,YAAY,CAACD,OAAb,CAAqB,OAArB,EAA8BoH,QAA9B,EAAhC,GAA2E;AADnF,iBADuB;AAIhCqE,sBAAM,EAANA;AAJgC,eAAlC,EAKG3K,SALH,CAKa,UAACT,GAAD,EAAS;AACpBtC,uBAAO,CAACsC,GAAD,CAAP;AACD,eAPD,EAOG,UAACG,GAAD,EAAS;AACVuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eATD;AAUD,aAXM,CAAP;AAYD;;;;;;;yBAhFU4O,W,EAAW,uH;AAAA,O;;;eAAXA,W;AAAW,iBAAXA,WAAW,K;AAAA,oBALV;;;;;wEAKDA,W,EAAW;gBANvB,wDAMuB;iBANZ;AACVoZ,sBAAU,EAAE;AADF,W;AAMY,U;;;;;;;;;;;;;;;;;;;;;;ACTxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOaxO,iB;AACX,mCAAoBtS,IAApB,EAAsC;AAAA;;AAAlB,eAAAA,IAAA,GAAAA,IAAA;AAAoB;AAExC;;;;;uCACciQ,K,EAAe0T,M,EAAgBC,I,EAAe;AAC1D,mBAAO,KAAK5jB,IAAL,CACJ/D,GADI,CAEH,yEAAY4nB,UAAZ,CAAuBC,aAFpB,EAGH;AACE1U,qBAAO,EAAE,EADX;AAGErL,oBAAM,EAAE;AACN,6BAAa,yEAAY8f,UAAZ,CAAuBE,QAD9B;AAEN,iCAAiB,yEAAYF,UAAZ,CAAuBG,YAFlC;AAGN,qBAAK,KAAKC,cAAL,EAHC;AAIN,sBAAMN,MAJA;AAKN,yBAAS1T;AALH;AAHV,aAHG,CAAP;AAcD;;;qCAEUA,K,EAAe;AACxB,mBAAO,KAAKjQ,IAAL,CACJ/D,GADI,CAEH,yEAAY4nB,UAAZ,CAAuBK,YAAvB,GAAoC,GAApC,GAAwCjU,KAFrC,EAGH;AACEb,qBAAO,EAAE,EADX;AAGErL,oBAAM,EAAE;AACN,6BAAa,yEAAY8f,UAAZ,CAAuBE,QAD9B;AAEN,iCAAiB,yEAAYF,UAAZ,CAAuBG,YAFlC;AAGN,qBAAK,KAAKC,cAAL;AAHC;AAHV,aAHG,CAAP;AAYD;;;qCAEU;AACT,gBAAIvN,GAAG,GAAG,yEAAYmN,UAAZ,CAAuBM,QAAvB,GACV,aADU,GACI,yEAAYN,UAAZ,CAAuBE,QAD3B,GAEV,iBAFU,GAEQ,MAFR,GAGV,gBAHU,GAGO,wBAHjB;AAIAhrB,mBAAO,CAACC,GAAR,CAAY0d,GAAZ;AACAhd,kBAAM,CAACgC,QAAP,CAAgB4iB,OAAhB,CAAwB5H,GAAxB;AACD;;;6CAEe;AACd,mBAAO,KAAK1W,IAAL,CACN/D,GADM,CAEL,yEAAY4nB,UAAZ,CAAuBO,aAAvB,GAAqC,GAFhC,EAGL;AACEhV,qBAAO,EAAE,EADX;AAGErL,oBAAM,EAAE;AACN,6BAAa,yEAAY8f,UAAZ,CAAuBE,QAD9B;AAEN,iCAAiB,yEAAYF,UAAZ,CAAuBG,YAFlC;AAGN,qBAAK,KAAKC,cAAL;AAHC;AAHV,aAHK,CAAP;AAaD;;;2CAEa;AACZ,gBAAII,EAAE,GAAG,IAAItmB,IAAJ,EAAT;AACA,gBAAIumB,KAAJ;AACA,gBAAIzI,GAAJ;;AACA,gBAAIwI,EAAE,CAACE,QAAH,CAAY7kB,QAAZ,GAAuBD,MAAvB,IAAiC,CAArC,EAAuC;AACrC6kB,mBAAK,GAAG,KAAI,CAAJ,GAAQD,EAAE,CAACE,QAAH,EAAhB;AACD,aAFD,MAGI;AACFD,mBAAK,GAAGD,EAAE,CAACE,QAAH,GAAc7kB,QAAd,EAAR;AACD;;AACD,gBAAI2kB,EAAE,CAACpK,MAAH,CAAUva,QAAV,GAAqBD,MAArB,IAA8B,CAAlC,EAAoC;AAClCoc,iBAAG,GAAG,KAAK,CAAL,GAASwI,EAAE,CAACpK,MAAH,EAAf;AACD,aAFD,MAGI;AACF4B,iBAAG,GAAGwI,EAAE,CAACpK,MAAH,GAAYva,QAAZ,EAAN;AACD;;AACD,mBAAQ2kB,EAAE,CAACG,WAAH,GAAiB9kB,QAAjB,KAA8B4kB,KAA9B,GAAsCzI,GAA9C;AACD;;;;;;;yBA9EUvJ,iB,EAAiB,uH;AAAA,O;;;eAAjBA,iB;AAAiB,iBAAjBA,iBAAiB,K;AAAA,oBAHhB;;;;;wEAGDA,iB,EAAiB;gBAJ7B,wDAI6B;iBAJlB;AACVwO,sBAAU,EAAE;AADF,W;AAIkB,U;;;;;;;;;;;;;;;;;;;;;;ACR9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAWa2D,mB,GAYX,6BAAYtsB,KAAZ,EAA2BqM,WAA3B,EAAkD;AAAA;;AAChD,aAAKsZ,IAAL,GAAY,SAAZ;AACA,aAAKvZ,QAAL,GAAgB;AACd,kBAAQ,OADM;AAEd,yBAAeC;AAFD,SAAhB;AAIA,aAAKH,UAAL,GAAkB;AAChBlM,eAAK,EAAEA,KADS;AAEhB,0BAAgB,SAFA;AAGhB,2BAAiB,WAHD;AAIhB,yBAAe;AAJC,SAAlB;AAMD,O;;UAYUD,U;AAyBX,4BAAoBF,cAApB,EACoBqL,oBADpB,EACgE;AAAA;;AAAA;;AAD5C,eAAArL,cAAA,GAAAA,cAAA;AACA,eAAAqL,oBAAA,GAAAA,oBAAA;AAzBpB,eAAAQ,iBAAA,GAA6B,IAA7B;AAEQ,eAAA6gB,WAAA,GAAwE,IAAI,oDAAJ,CAAoB,IAApB,CAAxE;AACD,eAAA7Q,UAAA,GAAmE,KAAK6Q,WAAL,CAAiBhhB,YAAjB,EAAnE;AAEC,eAAAihB,eAAA,GAAyD,IAAI,oDAAJ,CAAoB,EAApB,CAAzD;AACD,eAAAvf,cAAA,GAAoD,KAAKuf,eAAL,CAAqBjhB,YAArB,EAApD;AAOC,eAAAkhB,cAAA,GAA4D,IAAI,oDAAJ,CAAoB;AACtF1gB,eAAG,EAAE,IADiF;AAEtFF,eAAG,EAAE;AAFiF,WAApB,CAA5D;AAIR,eAAAgL,aAAA,GAAsD,KAAK4V,cAAL,CAAoBlhB,YAApB,EAAtD;AAEQ,eAAAmhB,MAAA,GAAuC,CAAC,EAAD,EAAI,EAAJ,CAAvC;AAOL,kEAA+B,yEAAY3V,MAAZ,CAAmB/C,KAAlD;AAED,eAAK2Y,gBAAL,GAAwB,KAAK9sB,cAAL,CAAoB+sB,YAApB,CAAiC3rB,SAAjC,CAA2C,UAAC4rB,CAAD,EAAe;AAChF,mBAAI,CAACD,YAAL,GAAoBC,CAApB;AACD,WAFuB,CAAxB;AAGD;;;;qCAEU;AAAA;;AACT,iBAAKluB,GAAL,GAAW,IAAI,6CAAJ,CAAiB;AAC1BmuB,uBAAS,EAAE,QADe;AAE1BC,mBAAK,EAAE,qDAFmB;AAG1BC,oBAAM,EAAE,CAAC,CAAC,KAAF,EAAS,KAAT,CAHkB;AAI1BC,kBAAI,EAAE,CAJoB;AAK1BC,0CAA4B,EAAC,IALH;AAM1B;AACAC,6BAAe,EAAE,KAPS;AAQ1BC,wBAAU,EAAC;AARe,aAAjB,CAAX,CADS,CAWT;AACA;;AAEA,iBAAKzuB,GAAL,CAAS0rB,EAAT,CAAY,MAAZ,EAAoB,YAAM;AACxB;AACA,qBAAI,CAAC5N,SAAL;;AACA,qBAAI,CAAC9a,aAAL;;AAEA,qBAAI,CAAChD,GAAL,CAAS0rB,EAAT,CAAY,OAAZ,EAAoB,UAACjsB,CAAD,EAAK;AACvB,oBAAIyN,GAAG,GAAGzN,CAAC,CAACivB,MAAF,CAASxhB,GAAnB;AACA,oBAAIE,GAAG,GAAG3N,CAAC,CAACivB,MAAF,CAASthB,GAAnB;;AACA,uBAAI,CAAC0gB,cAAL,CAAoBjlB,IAApB,CAAyB;AACvBqE,qBAAG,EAAEA,GADkB;AAEvBE,qBAAG,EAAEA;AAFkB,iBAAzB;AAID,eAPD;AAQD,aAbD,EAdS,CA6BT;;AACA,iBAAKpN,GAAL,CACC0rB,EADD,CACI,SADJ,EACc,YAAI;AAChB,qBAAI,CAAC1oB,aAAL;AACD,aAHD,EAIC0oB,EAJD,CAII,SAJJ,EAIc,YAAI;AAChB,qBAAI,CAAC1oB,aAAL;AACD,aAND;AAQD;;;2CAEgBjD,E,EAAYinB,I,EAAWniB,O,EAAgB;AACtD,iBAAK7E,GAAL,CAASglB,SAAT,CAAmBjlB,EAAnB,EAAuB;AACrB,sBAAQ,SADa;AAErB,sBAAQ;AACN,wBAAQinB,IADF;AAEN,4BAAYniB;AAFN;AAFa,aAAvB;AAOD;;;mCAEQ9E,E,EAAYinB,I,EAAWlD,M,EAAgB6K,M,EAA+BC,K,EAA8B;AAC3G,iBAAK5uB,GAAL,CAASilB,QAAT,CAAkB;AAChB,oBAAMllB,EADU;AAEhB,sBAAQinB,IAFQ;AAGhB,wBAAUlD,MAHM;AAIhB,wBAAU6K,MAJM;AAKhB,uBAASC;AALO,aAAlB;AAOD;;;oCAEShqB,Q,EAAgC;AACxC,gBAAI4Y,KAAK,GAAwB;AAC/BtQ,iBAAG,EAAEtI,QAAQ,CAACsI,GADiB;AAE/BE,iBAAG,EAAExI,QAAQ,CAACwI;AAFiB,aAAjC;AAIA,iBAAKyhB,aAAL,GAAqB,IAAI,gDAAJ,GACpBC,SADoB,CACVtR,KADU,EAEpBuR,KAFoB,CAEd,KAAK/uB,GAFS,CAArB;AAGAwd,iBAAK,CAACtQ,GAAN,IAAa,KAAK8hB,SAAlB;AACA,iBAAKhvB,GAAL,CAASivB,KAAT,CAAe;AAAE,wBAAUzR,KAAZ;AAAmB,uBAAS,GAA5B;AAAiC,uBAAS,CAA1C;AAA6C,2BAAa;AAA1D,aAAf;AACD;AAED;;;;0CACmD;AAAA;;AAAA,gBAArC0R,OAAqC,uEAAnB,KAAKjB,YAAc;AACjD,gBAAIkB,YAAJ;;AACA,gBAAID,OAAO,GAAG,GAAd,EAAmB;AACjBC,0BAAY,GAAG,KAAKnvB,GAAL,CAASovB,SAAT,CAAmB,CAACxsB,MAAM,CAACG,UAAP,GAAkB,CAAnB,EAAsBH,MAAM,CAACC,WAAP,GAAmB,CAAzC,CAAnB,CAAf;AACD,aAFD,MAGK;AACHssB,0BAAY,GAAG,KAAKnvB,GAAL,CAASovB,SAAT,CAAmB,CAAC,CAACxsB,MAAM,CAACG,UAAP,GAAoBmsB,OAArB,IAA8B,CAA9B,GAAkCA,OAAnC,EAA4CtsB,MAAM,CAACC,WAAP,GAAmB,CAA/D,CAAnB,CAAf;AACD;;AACD,gBAAIwsB,UAAU,GAAwB,KAAKrvB,GAAL,CAAS8d,SAAT,EAAtC;AACAqR,wBAAY,GAAG,IAAI,qEAAJ,CAAsBA,YAAY,CAACjiB,GAAnC,EAAwCiiB,YAAY,CAAC/hB,GAArD,CAAf;AACA,iBAAK4hB,SAAL,GAAiBG,YAAY,CAACjiB,GAAb,GAAmBmiB,UAAU,CAACniB,GAA/C,CAViD,CAWjD;;AACA,iBAAK0gB,WAAL,CAAiB/kB,IAAjB,CAAsBsmB,YAAtB;;AAEA,gBAAI,KAAKpiB,iBAAT,EAA4B;AAC1B;AACA,mBAAKR,oBAAL,CAA0BY,aAA1B,CAAwCgiB,YAAY,CAACjiB,GAArD,EAA0DiiB,YAAY,CAAC/hB,GAAvE,EACC9K,SADD,CACW,UAAC+G,QAAD,EAAc;AACvB,uBAAI,CAACwkB,eAAL,CAAqBhlB,IAArB,CAA0BQ,QAA1B;AACD,eAHD,EAGG,UAAArH,GAAG,EAAI;AACRC,uBAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,uBAAI,CAAC6rB,eAAL,CAAqBhlB,IAArB,CAA0B7G,GAA1B;AACD,eAND;AAOD;AACF;AAED;;;;sCACS;AACP,gBAAIkL,GAAG,GAAW,KAAKlN,GAAL,CAAS8d,SAAT,GAAqB5Q,GAArB,GAA0B,KAAKlN,GAAL,CAAS8d,SAAT,GAAqB5Q,GAA/C,GAAqD,yEAAYuQ,aAAZ,CAA0BvQ,GAAjG;AACA,gBAAIE,GAAG,GAAW,KAAKpN,GAAL,CAAS8d,SAAT,GAAqB1Q,GAArB,GAA0B,KAAKpN,GAAL,CAAS8d,SAAT,GAAqB1Q,GAA/C,GAAqD,yEAAYqQ,aAAZ,CAA0BrQ,GAAjG;AACA,mBAAO,IAAI,qEAAJ,CAAsBF,GAAtB,EAA2BE,GAA3B,CAAP;AACD;AAED;;;;qCACWhH,M,EAAgBmB,K,EAA8B6mB,K,EAAa;AACpE,gBAAI,CAAC7mB,KAAD,IAAU,KAAKvH,GAAL,CAAS4kB,SAAT,CAAmB,QAAnB,CAAV,IAA0C,KAAKmJ,MAAL,CAAY3nB,MAAM,GAAG,CAArB,CAA9C,EAAuE;AACpE,mBAAKpG,GAAL,CAAS4kB,SAAT,CAAmB,QAAnB,EAAwD0K,OAAxD,CACC;AACE,wBAAQ,mBADV;AAEE,4BAAY,KAAKvB,MAAL,CAAY3nB,MAAM,GAAG,CAArB;AAFd,eADD;AAMF,aAPD,MAOO,IAAImB,KAAJ,EAAW;AAChB,mBAAKwmB,MAAL,CAAY3nB,MAAM,GAAG,CAArB,EAAwBqB,IAAxB,CAA6B,IAAIkmB,mBAAJ,CAAwBpmB,KAAK,CAACT,IAA9B,EAAoCS,KAAK,CAAC1C,OAAN,CAAc4I,QAAd,CAAuBC,WAA3D,CAA7B;AACA,kBAAI8P,KAAK,GAAwB;AAC/BtQ,mBAAG,EAAE3F,KAAK,CAAC1C,OAAN,CAAc4I,QAAd,CAAuBC,WAAvB,CAAmC,CAAnC,CAD0B;AAE/BN,mBAAG,EAAE7F,KAAK,CAAC1C,OAAN,CAAc4I,QAAd,CAAuBC,WAAvB,CAAmC,CAAnC;AAF0B,eAAjC;AAIA8P,mBAAK,CAACtQ,GAAN,IAAa,KAAK8hB,SAAlB;AACA,mBAAKhvB,GAAL,CAASivB,KAAT,CAAe;AAAE,0BAAUzR,KAAZ;AAAmB,yBAAS,GAA5B;AAAiC,yBAAS,CAA1C;AAA6C,6BAAa;AAA1D,eAAf;;AACA,kBAAI,KAAKxd,GAAL,CAAS4kB,SAAT,CAAmB,QAAnB,CAAJ,EAAkC;AAChC;AACC,qBAAK5kB,GAAL,CAAS4kB,SAAT,CAAmB,QAAnB,EAAwD0K,OAAxD,CACC;AACE,0BAAQ,mBADV;AAEE,8BAAY,KAAKvB,MAAL,CAAY3nB,MAAM,GAAG,CAArB;AAFd,iBADD;AAMF,eARD,MAQO;AACL;AACA,qBAAKpG,GAAL,CAASglB,SAAT,CAAmB,QAAnB,EAA6B;AAC3B,0BAAQ,SADmB;AAE3B,0BAAQ;AACN,4BAAQ,mBADF;AAEN,gCAAY,CACV;AACE,8BAAQ,SADV;AAEE,kCAAY;AACV,gCAAQ,OADE;AAEV,uCAAe,CACbzd,KAAK,CAAC1C,OAAN,CAAc4I,QAAd,CAAuBC,WAAvB,CAAmC,CAAnC,CADa,EAEbnG,KAAK,CAAC1C,OAAN,CAAc4I,QAAd,CAAuBC,WAAvB,CAAmC,CAAnC,CAFa;AAFL,uBAFd;AASE,oCAAc;AACZ,iCAASnG,KAAK,CAACT,IADH;AAEZ,wCAAgB,SAFJ;AAGZ,yCAAiB,WAHL;AAIZ,uCAAe;AAJH;AAThB,qBADU;AAFN;AAFmB,iBAA7B;AAyBD;AACF;;AACD,gBAAI,CAAC,KAAK9G,GAAL,CAASuvB,QAAT,CAAkB,QAAlB,CAAD,IAAgC,KAAKvvB,GAAL,CAAS4kB,SAAT,CAAmB,QAAnB,CAApC,EAAkE;AAChE,mBAAK5kB,GAAL,CAASilB,QAAT,CAAkB;AAChB,sBAAM,QADU;AAEhB,wBAAQ,QAFQ;AAGhB,0BAAU,QAHM;AAIhB,0BAAU;AACR;AACA;AACA,gCAAc,CAAC,KAAD,EAAQ,eAAR,CAHN;AAIR;AACA,gCAAc,CAAC,KAAD,EAAQ,OAAR,CALN;AAMR,+BAAa,CAAC,oBAAD,EAAuB,uBAAvB,CANL;AAOR,iCAAe,CAAC,CAAD,EAAI,GAAJ,CAPP;AAQR,iCAAe;AARP;AAJM,eAAlB;AAeD;AACF,W,CAED;;;;uCACane,I,EAAcV,M,EAAgB4U,G,EAAe;AACxD,gBAAIA,GAAJ,EAAS;AACP,mBAAK+S,MAAL,CAAY3nB,MAAM,GAAG,CAArB,IAA0B,EAA1B;;AACA,kBAAG,KAAKpG,GAAL,CAAS4kB,SAAT,CAAmB,QAAnB,CAAH,EAAiC;AAC9B,qBAAK5kB,GAAL,CAAS4kB,SAAT,CAAmB,QAAnB,EAAwD0K,OAAxD,CACC;AACE,0BAAQ,mBADV;AAEE,8BAAY;AAFd,iBADD;AAMF;AACF,aAVD,MAUO;AACL,mBAAK,IAAI/sB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKwrB,MAAL,CAAY3nB,MAAM,GAAG,CAArB,EAAwBuC,MAA5C,EAAoDpG,CAAC,EAArD,EAAyD;AACvD,oBAAI,KAAKwrB,MAAL,CAAY3nB,MAAM,GAAG,CAArB,EAAwB7D,CAAxB,EAA2BgL,UAA3B,CAAsClM,KAAtC,IAA+CyF,IAAnD,EAAyD;AACvD,uBAAKinB,MAAL,CAAY3nB,MAAM,GAAG,CAArB,EAAwByB,MAAxB,CAA+BtF,CAA/B,EAAkC,CAAlC;AACC,uBAAKvC,GAAL,CAAS4kB,SAAT,CAAmB,QAAnB,EAAwD0K,OAAxD,CACC;AACE,4BAAQ,mBADV;AAEE,gCAAY,KAAKvB,MAAL,CAAY3nB,MAAM,GAAG,CAArB;AAFd,mBADD;AAMD;AACD;AACF;AACF;AACF;;;2CAEgB;AACf,gBAAI,KAAKyoB,aAAT,EAAwB;AACtB,mBAAKA,aAAL,CAAmBjjB,MAAnB;AACD;AACF;;;wCACa;AACZ,iBAAKoiB,gBAAL,CAAsB/qB,WAAtB;AACD;;;;;;;yBAxPU7B,U,EAAU,uI,EAAA,mI;AAAA,O;;;eAAVA,U;AAAU,iBAAVA,UAAU,K;AAAA,oBAFT;;;;;wEAEDA,U,EAAU;gBAHtB,wDAGsB;iBAHX;AACV4oB,sBAAU,EAAE;AADF,W;AAGW,U;;;;;;;;;;;;;;;;;;;;;;;;AC9CvB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAQazd,oB;AAEX,sCAAoBrD,IAApB,EAAsC;AAAA;;AAAlB,eAAAA,IAAA,GAAAA,IAAA;AAAoB;;;;wCAE1BsmB,I,EAAI;AAChB,mBAAO,KAAKtmB,IAAL,CACJ/D,GADI,CAEH,yEAAYsqB,aAAZ,CAA0BC,WAFvB,EAGH;AACEpX,qBAAO,EAAE,EADX;AAGErL,oBAAM,EAAE;AAEN,wBAAQuiB;AAFF;AAHV,aAHG,CAAP;AAWD;AAED;;;;qCACWvpB,I,EAAY;AACrB,mBAAO,KAAKiD,IAAL,CACJ/D,GADI,CAEH,yEAAYwqB,SAAZ,CAAsBC,MAFnB,EAGH;AACEtX,qBAAO,EAAE,EADX;AAEErL,oBAAM,EAAE;AACN,wBAAQhH,IADF;AAEN,0BAAU;AAFJ;AAFV,aAHG,CAAP;AAWD;AAED;;;;wCACciH,G,EAAaE,G,EAAW;AACpC,mBAAO,KAAKlE,IAAL,CACJ/D,GADI,CAEH,yEAAYwqB,SAAZ,CAAsBE,OAFnB,EAGH;AACE5iB,oBAAM,EAAE;AACN,0BAAU,SADJ;AAEN,wBAAQ,IAFF;AAGN,uBAAOG,GAAG,CAACxE,QAAJ,EAHD;AAIN,uBAAOsE,GAAG,CAACtE,QAAJ;AAJD;AADV,aAHG,CAAP;AAYD;;;;;;;yBA/CU2D,oB,EAAoB,uH;AAAA,O;;;eAApBA,oB;AAAoB,iBAApBA,oBAAoB,K;AAAA,oBAFnB;;;;;wEAEDA,oB,EAAoB;gBAHhC,wDAGgC;iBAHrB;AACVyd,sBAAU,EAAE;AADF,W;AAGqB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCOpB7X,a;AA6BX,+BAAoB2d,UAApB,EACoBC,iBADpB,EAC0D;AAAA;;AAAA;;AADtC,eAAAD,UAAA,GAAAA,UAAA;AACA,eAAAC,iBAAA,GAAAA,iBAAA;AA7BpB;;AACA,eAAAlS,aAAA,GAA8B,IAA9B;AAEQ,eAAA+R,MAAA,GAAc;AAACzW,iBAAK,EAAE,IAAR;AAActU,mBAAO,EAAG;AAAC,uBAAQ,EAAT;AAAa,wBAAS;AAAtB;AAAxB,WAAd;AACA,eAAAmrB,UAAA,GAAmC,IAAI,oDAAJ,CAAoB,KAAKJ,MAAzB,CAAnC;AACD,eAAAxS,SAAA,GAA8B,KAAK4S,UAAL,CAAgBpjB,YAAhB,EAA9B;AAEC,eAAAqR,MAAA,GAAiB,CAAjB;AACA,eAAAgS,aAAA,GAAyC,IAAI,oDAAJ,CAAoB,KAAKhS,MAAzB,CAAzC;AACD,eAAA4I,YAAA,GAAoC,KAAKoJ,aAAL,CAAmBrjB,YAAnB,EAApC;AAEC,eAAAgG,UAAA,GAAmC,IAAnC;AACA,eAAAsd,aAAA,GAAwE,IAAI,oDAAJ,CAAoB,KAAKtd,UAAzB,CAAxE;AACD,eAAAS,YAAA,GAAmE,KAAK6c,aAAL,CAAmBtjB,YAAnB,EAAnE;AAGC,eAAAujB,YAAA,GAA0C,IAAI,oDAAJ,CAAoB,KAAKC,oBAAzB,CAA1C;AACD,eAAAld,WAAA,GAAqC,KAAKid,YAAL,CAAkBvjB,YAAlB,EAArC;AAEP,eAAAoH,UAAA,GAII;AACFV,gBAAI,EAAE,EADJ;AAEFJ,uBAAW,EAAE,IAAImd,GAAJ;AAFX,WAJJ;AAWE,eAAKC,gBAAL,GACC9wB,IADD,CACM,UAAC+C,CAAD,EAA6B;AACjC,mBAAI,CAAC2tB,aAAL,CAAmBrnB,IAAnB,CAAwBtG,CAAxB;;AACA,mBAAI,CAAC4tB,YAAL,CAAkBtnB,IAAlB,CAAuB,OAAI,CAACmL,UAAL,CAAgBd,WAAvC;AACD,WAJD;AAMA,eAAK2K,aAAL,GAAqB,IAArB;AACD,S,CAED;;;;;iDACuB1E,K,EAAe0T,M,EAAyB;AAAA;;AAC7D,mBAAO,IAAIvtB,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAACwW,iBAAL,CAAuBQ,YAAvB,CAAoCpX,KAApC,EAA2C0T,MAAM,CAAC2D,eAAP,CAAuB,CAAvB,CAA3C,EACCluB,SADD,CACW,UAACqE,MAAD,EAAY;AACrBpH,uBAAO,CAACoH,MAAD,CAAP;AACD,eAHD,EAGG,UAAC3E,GAAD,EAAS;AACVuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eALD;AAMD,aAPM,CAAP;AAQA;AAEF;;;;qCACWmX,K,EAAa;AAAA;;AACtB,mBAAO,IAAI7Z,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,qBAAI,CAACuW,UAAL,CAAgB3qB,GAAhB,CAAyB,yEAAYsrB,SAAZ,CAAsBC,WAA/C,EACE;AACEpY,uBAAO,EAAE;AACPkR,+BAAa,EAAE/nB,YAAY,CAACD,OAAb,CAAqB,OAArB,IAA+BC,YAAY,CAACD,OAAb,CAAqB,OAArB,EAA8BoH,QAA9B,EAA/B,GAA0E;AADlF,iBADX;AAIEqE,sBAAM,EAAE;AACN3L,sBAAI,EAAE6X;AADA;AAJV,eADF,EAUC7W,SAVD,CAUW,UAACqE,MAAD,EAAY;AACrBpH,uBAAO,CAACoH,MAAD,CAAP;AACD,eAZD,EAYG,UAAC3E,GAAD,EAAQ;AACTuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eAdD;AAeD,aAhBM,CAAP;AAiBA;AAEF;;;;wCACcmX,K,EAAa;AAAA;;AACzB,mBAAO,IAAI7Z,OAAJ,CAAiB,UAACC,OAAD,EAASga,MAAT,EAAkB;AACxC,qBAAI,CAACwW,iBAAL,CAAuBY,UAAvB,CAAkCxX,KAAlC,EACC7W,SADD,CACW,UAAAqE,MAAM,EAAE;AACjBpH,uBAAO,CAACoH,MAAD,CAAP;AACD,eAHD,EAGG,UAAC3E,GAAD,EAAS;AACVuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eALD;AAMD,aAPM,CAAP;AAQD;AAED;;;;qCACiBmX,K,EAAeqE,K,EAAwB;;;;;;;AAC/C,6BAAMle,OAAO,CAAC0b,GAAR,CAAY,CAAC,KAAK4V,sBAAL,CAA4BzX,KAA5B,EAAmCqE,KAAnC,CAAD,EAA4C,KAAKmK,UAAL,CAAgBxO,KAAhB,CAA5C,CAAZ,CAAN;;;;;;;;;;;;AACR;AAED;;;;sCACYA,K,EAAe0X,U,EAA0BrT,K,EAA0B;AAAA;;AAC7E,mBAAO,IAAIle,OAAJ,CAAY,UAACC,OAAD,EAASga,MAAT,EAAkB;AACnC,qBAAI,CAACuX,kBAAL;;AACAD,wBAAU,CACTrxB,IADD,CACM,UAAAmH,MAAM,EAAI;AAEd,oBAAIA,MAAM,CAAC,CAAD,CAAN,CAAU0C,QAAV,CAAmB0nB,YAAnB,IAAmC,CAAvC,EAA0C;AACxCpqB,wBAAM,CAAC,CAAD,CAAN,CAAU0C,QAAV,CAAmB2nB,MAAnB,CAA0B,CAA1B,EAA6BC,KAA7B,CAAmCrmB,OAAnC,CAA2C,UAAA+Y,KAAK,EAAG;AACjD,2BAAI,CAACiM,MAAL,CAAY/qB,OAAZ,CAAoB8c,MAApB,CAA2Bla,IAA3B,CAAgCkc,KAAhC;AACD,mBAFD;AAGD,iBAJD,MAIO;AACL,yBAAI,CAACiM,MAAL,CAAY/qB,OAAZ,CAAoB8c,MAApB,GAA6B,EAA7B;AACD;;AAED,oBAAIpgB,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAJ,EAAwC;AACtC,sBAAImF,MAAM,CAAC,CAAD,CAAN,CAAU+gB,KAAd,EAAqB;AACnB/gB,0BAAM,CAAC,CAAD,CAAN,CAAU+gB,KAAV,CAAgB9c,OAAhB,CAAwB,UAAAtJ,IAAI,EAAE;AAC5B,6BAAI,CAACsuB,MAAL,CAAY/qB,OAAZ,CAAoB6iB,KAApB,CAA0BjgB,IAA1B,CAA+BnG,IAA/B;AACD,qBAFD;AAGD;AACF,iBAND,MAMO;AACL,yBAAI,CAACsuB,MAAL,CAAY/qB,OAAZ,CAAoB6iB,KAApB,CAA0BjgB,IAA1B,CAA+B;AAAC,gCAAa,SAAd;AAAyB,4BAAS;AAAlC,mBAA/B;AACD;;AAED,uBAAI,CAACmoB,MAAL,GAAe;AACbzW,uBAAK,EAAE;AACLA,yBAAK,EAAEA,KADF;AAELjM,uBAAG,EAAEsQ,KAAK,CAACtQ,GAFN;AAGLE,uBAAG,EAAEoQ,KAAK,CAACpQ;AAHN,mBADM;AAMbvI,yBAAO,EAAE,OAAI,CAAC+qB,MAAL,CAAY/qB;AANR,iBAAf;;AAQA,uBAAI,CAACmrB,UAAL,CAAgBnnB,IAAhB,CAAqB,OAAI,CAAC+mB,MAA1B;;AACArwB,uBAAO;AACR,eA/BD,WAgCO,UAAAyC,GAAG,EAAI;AACZuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eAlCD;AAmCD,aArCM,CAAP;AAsCD;AAED;;;;6CACgB;AAAA;;AACd,mBAAO,IAAI1C,OAAJ,CAAY,UAACC,OAAD,EAASga,MAAT,EAAkB;AACnC,qBAAI,CAACwW,iBAAL,CAAuBO,gBAAvB,GACChuB,SADD,CACW,UAAAC,CAAC,EAAE;AACZ,uBAAI,CAAC2uB,YAAL,CAAkB3uB,CAAC,CAAC8G,QAAF,CAAWuJ,UAA7B;;AACArT,uBAAO,CAACgD,CAAC,CAAC8G,QAAF,CAAWuJ,UAAZ,CAAP;AACD,eAJD,EAIG,UAAA5Q,GAAG,EAAI;AACRC,uBAAO,CAACC,GAAR,CAAYF,GAAZ;AACAuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eAPD;AAQD,aATM,CAAP;AAUD;AAED;;;;uCACaJ,I,EAAsB;AAAA;;AACjCA,gBAAI,CAACgJ,OAAL,CAAa,UAAC2I,QAAD,EAA4B;AACvC,kBAAIA,QAAQ,CAACX,UAAT,CAAoBjK,MAApB,KAA+B,CAAnC,EAAsC;AACpC4K,wBAAQ,CAACI,OAAT,GAAmB,IAAnB;;AACA,wBAAI,CAACK,UAAL,CAAgBd,WAAhB,CAA4Be,GAA5B,CAAgCV,QAAQ,CAACxT,EAAzC;AACD,eAHD,MAIK,IAAIwT,QAAQ,CAACX,UAAT,CAAoBjK,MAApB,KAA+B,CAAnC,EAAsC;AACzC,wBAAI,CAACqL,UAAL,CAAgBd,WAAhB,CAA4Be,GAA5B,CAAgCV,QAAQ,CAACxT,EAAzC;;AACA,wBAAI,CAACmxB,YAAL,CAAkB3d,QAAQ,CAACX,UAA3B;AACD;AACF,aATD;AAUD;;;6CAEkBue,O,EAAO;AACxB,iBAAKjB,aAAL,CAAmBrnB,IAAnB,CAAwBsoB,OAAxB;AACD;;;4CAEiBA,O,EAAO;AACvB,iBAAKhB,YAAL,CAAkBtnB,IAAlB,CAAuBsoB,OAAvB;AACD;;;0CAEevB,M,EAAM;AACpB,gBAAIA,MAAM,CAAC5I,IAAP,IAAe,OAAnB,EAA2B;AACzB,qBAAQ,YAAY4I,MAAM,CAAC9oB,IAA3B;AACD,aAFD,MAGI;AACF,qBAAQ,WAAW8oB,MAAM,CAAC9oB,IAA1B;AACD;AACF;;;+CAEiB;AAChB,iBAAK8oB,MAAL,CAAY/qB,OAAZ,GAAqB;AAAC8c,oBAAM,EAAC,EAAR;AAAW+F,mBAAK,EAAC;AAAjB,aAArB;;AACA,iBAAKsI,UAAL,CAAgBnnB,IAAhB,CAAqB,KAAK+mB,MAA1B;AACD;;;uCAEY3R,M,EAAc;AACzB,iBAAKgS,aAAL,CAAmBpnB,IAAnB,CAAwBoV,MAAxB;AACD;;;wCAEa;AACZ,iBAAK+R,UAAL,CAAgB/sB,WAAhB;;AACA,iBAAKitB,aAAL,CAAmBjtB,WAAnB;;AACA,iBAAKktB,YAAL,CAAkBltB,WAAlB;;AACA,iBAAKgtB,aAAL,CAAmBhtB,WAAnB;AACD;;;;;;;yBA/LUkP,a,EAAa,uH,EAAA,iI;AAAA,O;;;eAAbA,a;AAAa,iBAAbA,aAAa,K;AAAA,oBAFZ;;;;;wEAEDA,a,EAAa;gBAHzB,wDAGyB;iBAHd;AACV6X,sBAAU,EAAE;AADF,W;AAGc,U;;;;;;;;;;;;;;;;;;;;;;;;ACf1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOa9oB,c;AASX,gCAAoBC,aAApB,EAAkD;AAAA;;AAA9B,eAAAA,aAAA,GAAAA,aAAA,CAA8B,CAPlD;;AACQ,eAAAiwB,aAAA,GAA0C,IAAI,oDAAJ,CAAoB,KAApB,CAA1C;AACD,eAAA1uB,YAAA,GAAoC,KAAK0uB,aAAL,CAAmBxkB,YAAnB,EAApC;AAEC,eAAAykB,aAAA,GAAyC,IAAI,oDAAJ,CAAoBzuB,MAAM,CAACG,UAAP,GAAkB,EAAtC,CAAzC;AACD,eAAAkrB,YAAA,GAAmC,KAAKoD,aAAL,CAAmBzkB,YAAnB,EAAnC;AAE8C;;;;sCAEzClC,Q,EAAkB;AAC5B,gBAAIA,QAAQ,CAAC8c,OAAT,WAAoBjmB,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAApB,QAA2D,EAA3D,EAA+DyX,QAA/D,CAAwEvO,QAAxE,CAAJ,EAAuF;AACrF,qBAAOA,QAAQ,CAAC8c,OAAT,YAAqBjmB,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAArB,GAA2D,EAA3D,CAAP;AACD,aAFD,MAEO;AACL,qBAAOkJ,QAAQ,CAAC8c,OAAT,WAAoBjmB,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAApB,QAA2D,EAA3D,CAAP;AACD;AACF;;;oCAEM;AACL,gBAAID,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAJ,EAAwC;AACtC,mBAAK4vB,aAAL,CAAmBvoB,IAAnB,CAAwB,IAAxB;;AACA,qBAAO,IAAP;AACD,aAHD,MAGO;AACL,mBAAKuoB,aAAL,CAAmBvoB,IAAnB,CAAwB,KAAxB;;AACA,qBAAO,KAAP;AACD;AACF;;;6CAEkB2W,K,EAAe;AAChC,iBAAK6R,aAAL,CAAmBxoB,IAAnB,CAAwB2W,KAAxB;AACD;;;;;;;yBA/BUte,c,EAAc,gI;AAAA,O;;;eAAdA,c;AAAc,iBAAdA,cAAc,K;AAAA,oBAHb;;;;;wEAGDA,c,EAAc;gBAJ1B,wDAI0B;iBAJf;AACV8oB,sBAAU,EAAE;AADF,W;AAIe,U;;;;;;;;;;;;;;;;;;;;;;ACL3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOa5X,W;AAUX,6BAAoBxB,WAApB,EACoB1P,cADpB,EACoD;AAAA;;AAAA;;AADhC,eAAA0P,WAAA,GAAAA,WAAA;AACA,eAAA1P,cAAA,GAAAA,cAAA;AATpB,eAAAwB,YAAA,GAAwB,KAAKxB,cAAL,CAAoBa,OAApB,EAAxB,CASoD,CAPpD;;AACA,eAAAuvB,aAAA,GAAwB,IAAxB;AAEQ,eAAAC,MAAA,GAAuC,IAAI,oDAAJ,CAAoB,IAApB,CAAvC;AACD,eAAAlQ,KAAA,GAAiC,KAAKkQ,MAAL,CAAY3kB,YAAZ,EAAjC,CAG6C,CAClD;;AACA,eAAKnD,gBAAL,GAAwB,KAAKvI,cAAL,CAAoBwB,YAApB,CAAiCJ,SAAjC,CAA2C,UAAC8R,KAAD,EAAoB;AACrF,gBAAIA,KAAJ,EAAW;AACT,sBAAI,CAAC1R,YAAL,GAAoB0R,KAApB;;AACA,sBAAI,CAACxD,WAAL,CAAiBzL,GAAjB,CAAqB,OAArB,EAA8B,EAA9B,EACC3F,IADD,CACM,UAAC6J,QAAD,EAGA;AACJ,oBAAIA,QAAQ,CAAC/H,IAAb,EAAmB;AACjB,0BAAI,CAACiwB,MAAL,CAAY1oB,IAAZ,CAAiBQ,QAAQ,CAAC/H,IAAT,CAAc,CAAd,EAAiB+f,KAAlC;AACD;AACF,eARD,WASO,UAAArf,GAAG,EAAI;AACZC,uBAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,eAXD;AAYD;AACF,WAhBuB,CAAxB;AAiBD;AAED;;;;;sCACYmX,K,EAAsB;AAChC,iBAAKmY,aAAL,GAAqBnY,KAArB;AACD;AAED;;;;wCACc4M,O,EAAoB;AAAA;;AAChC,mBAAO,IAAIzmB,OAAJ,CAAY,UAACC,OAAD,EAAUga,MAAV,EAAqB;AACtC,sBAAI,CAAC3I,WAAL,CAAiB6G,KAAjB,CAAuB,YAAvB,EAAqC;AACnC9V,wBAAQ,EAAEF,YAAY,CAACD,OAAb,CAAqB,UAArB,CADyB;AAEnC0V,wBAAQ,EAAE,OAFyB;AAGnCK,2BAAW,EAAEwO;AAHsB,eAArC,EAKCvmB,IALD,CAKM,UAAC6J,QAAD,EAAoC;AACxC,wBAAI,CAACkoB,MAAL,CAAY1oB,IAAZ,CAAiBkd,OAAjB;;AACAxmB,uBAAO,CAAC8J,QAAD,CAAP;AACD,eARD,WASO,UAAArH,GAAG,EAAI;AACZuX,sBAAM,CAACvX,GAAD,CAAN;AACD,eAXD;AAYD,aAbM,CAAP;AAcD;AAED;;;;sCACY+jB,O,EAAsB;AAChC,iBAAKwL,MAAL,CAAY1oB,IAAZ,CAAiBkd,OAAjB;AACD;;;wCAEa;AACZ,iBAAKtc,gBAAL,CAAsBxG,WAAtB;AACD;;;;;;;yBA9DUmP,W,EAAW,iH,EAAA,uI;AAAA,O;;;eAAXA,W;AAAW,iBAAXA,WAAW,K;AAAA,oBAFV;;;;;wEAEDA,W,EAAW;gBAHvB,wDAGuB;iBAHZ;AACV4X,sBAAU,EAAE;AADF,W;AAGY,U;;;;;;;;;;;;;;;;;;;;;;;;ACVxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AACO,UAAMwH,WAAW,GAAG,MAAH,OAAG,CAAH,kBACjB,6DADiB,CAAG,EACF;AACrBC,kBAAU,EAAE;AADS,OADE,CAApB;;;;;;;;;;;;;;;;ACDP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AACO,UAAMD,WAAW,GAAG;AAGzBC,kBAAU,EAAE,IAHa;AAIzBhZ,gBAAQ,EAAE,IAJe;AAKzB4L,oBAAY,EAAE,iCALW;AAMzB2H,2BAAmB,EAAE,+CANI;AAQzB5T,cAAM,EAAE;AACN/C,eAAK,EAAE,8FADD;AAENgD,mBAAS,EAAE;AAFL,SARiB;AAazB0U,kBAAU,EAAE;AACVE,kBAAQ,EAAE,kDADA;AAEVC,sBAAY,EAAE,kDAFJ;AAGVwE,WAAC,EAAE,EAHO;AAIVC,sBAAY,EAAE,6CAJJ;AAKV3E,uBAAa,EAAE,8CALL;AAMVI,sBAAY,EAAE,sCANJ;AAOVC,kBAAQ,EAAE,4CAPA;AAQVC,uBAAa,EAAE;AARL,SAba;AAyBzBqC,iBAAS,EAAE;AACTC,gBAAM,EAAE,4CADC;AAETC,iBAAO,EAAE;AAFA,SAzBc;AA8BzBJ,qBAAa,EAAC;AACZC,qBAAW,EAAC,uDADA;AAEZkC,wBAAc,EAAC;AAFH,SA9BW;AAmCzBnB,iBAAS,EAAE;AACToB,qBAAW,EAAE,sCADJ;AAETrb,oBAAU,EAAE,yCAFH;AAGTka,qBAAW,EAAC;AAHH,SAnCc;AAwCzBjT,qBAAa,EAAE,IAAI,yEAAJ,CAAsB,CAAC,UAAvB,EAAmC,UAAnC;AAxCU,OAApB;;;;;;;;;;;;;;;;ACDP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,yC,CACA;AACA;AACA;;;AAEO,UAAM+T,WAAW,GAAG;AACzBC,kBAAU,EAAE,KADa;AAEzBpN,oBAAY,EAAE,uBAFW;AAGzB2H,2BAAmB,EAAE,qCAHI;AAKzB5T,cAAM,EAAE;AACN/C,eAAK,EAAE,8FADD;AAENgD,mBAAS,EAAE;AAFL,SALiB;AAUzB0U,kBAAU,EAAE;AACVE,kBAAQ,EAAE,kDADA;AAEVC,sBAAY,EAAE,kDAFJ;AAGVwE,WAAC,EAAE,EAHO;AAIVC,sBAAY,EAAE,6CAJJ;AAKV3E,uBAAa,EAAE,8CALL;AAMVI,sBAAY,EAAE,sCANJ;AAOVC,kBAAQ,EAAE,4CAPA;AAQVC,uBAAa,EAAE;AARL,SAVa;AAsBzBqC,iBAAS,EAAE;AACTC,gBAAM,EAAE,4CADC;AAETC,iBAAO,EAAE;AAFA,SAtBc;AA2BzBJ,qBAAa,EAAC;AACZC,qBAAW,EAAC,uDADA;AAEZkC,wBAAc,EAAC;AAFH,SA3BW;AAgCzBnB,iBAAS,EAAE;AACToB,qBAAW,EAAE,4BADJ;AAETrb,oBAAU,EAAE,+BAFH;AAGTka,qBAAW,EAAC;AAHH,SAhCc;AAsCzBjT,qBAAa,EAAE,IAAI,yEAAJ,CAAsB,CAAC,UAAvB,EAAmC,UAAnC;AAtCU,OAApB;AAyCP;;;;;;;AAOA;;;;;;;;;;;;;;;;;ACrDA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,UAAI,sEAAYgU,UAAhB,EAA4B;AAC1B;AACD;;AAED,kFAAyBK,eAAzB,CAAyC,yDAAzC,WACS,UAAA9vB,GAAG;AAAA,eAAIC,OAAO,CAAC8vB,KAAR,CAAc/vB,GAAd,CAAJ;AAAA,OADZ","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-in\": \"./node_modules/moment/locale/en-in.js\",\n\t\"./en-in.js\": \"./node_modules/moment/locale/en-in.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-sg\": \"./node_modules/moment/locale/en-sg.js\",\n\t\"./en-sg.js\": \"./node_modules/moment/locale/en-sg.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fil\": \"./node_modules/moment/locale/fil.js\",\n\t\"./fil.js\": \"./node_modules/moment/locale/fil.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-deva\": \"./node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-deva.js\": \"./node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./oc-lnc\": \"./node_modules/moment/locale/oc-lnc.js\",\n\t\"./oc-lnc.js\": \"./node_modules/moment/locale/oc-lnc.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tk\": \"./node_modules/moment/locale/tk.js\",\n\t\"./tk.js\": \"./node_modules/moment/locale/tk.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-mo\": \"./node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-mo.js\": \"./node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","import { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RegistrationProcessComponent } from './components/registration-process/registration-process.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { loginComponent, LoginComponent } from './components/loginpage/loginpage.component';\r\nimport { ProfileComponent } from './components/profile/profile.component';\r\nimport { HomeComponent } from './components/tabs/home/home.component';\r\nimport { MytripComponent } from './components/tabs/mytrip/mytrip.component';\r\nimport { MyaccountComponent } from './components/myaccount/myaccount.component';\r\nimport { SearchresultsComponent } from './components/tabs/searchresults/searchresults.component';\r\nimport { VenueComponent } from './components/venue/venue.component'\r\nimport { SearchBarComponent } from './components/search-bar/search-bar.component'\r\nimport { UserprofileComponent } from './components/userprofile/userprofile.component'\r\nimport { AddPostComponent } from './components/add-post/add-post.component'\r\nimport { DisplayPostsComponent } from './components/display-posts/display-posts.component'\r\n\r\nconst routes: Routes = [\r\n  { path: 'create', component: AddPostComponent },\r\n  { path: 'edit/:postId', component:  AddPostComponent },\r\n  { path: 'login', component: LoginComponent },\r\n  { path: 'register', component: RegistrationProcessComponent },\r\n  { path: 'profile', component: ProfileComponent },\r\n  { path: 'home', component: HomeComponent },\r\n  { path: 'home/:query', component: HomeComponent },\r\n  { path: 'mytrip', component: MytripComponent, children: [\r\n      {path: '**', component: MytripComponent}\r\n  ] },\r\n  { path: 'myaccount', component: MyaccountComponent },\r\n  { path: 'search', component: SearchBarComponent, children: [\r\n    { path: 'venue/:query', component: VenueComponent },\r\n    { path: 'user/:query', component: UserprofileComponent },\r\n    { path: '**', component: SearchresultsComponent },\r\n  ]},\r\n  {path: '', redirectTo: 'home', pathMatch: 'full'}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Subscription } from 'rxjs';\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service';\r\nimport { SessionService } from './services/session.service';\r\nimport { Component, DoCheck, OnInit, OnDestroy } from '@angular/core';\r\nimport { FriendlistService } from './services/chatsystem/friendlist.service';\r\nimport { MapService } from './services/map/map.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements DoCheck, OnInit, OnDestroy {\r\n\r\n  title = 'frontend';\r\n  windowHeight: number\r\n  user = sessionStorage.getItem('username')\r\n  openChatWidgets: any\r\n  private openChatWidgetsSub: Subscription\r\n  sessionState: boolean\r\n  private sessionStateSub: Subscription\r\n\r\n  constructor(\r\n    private FriendlistService: FriendlistService,\r\n    private SessionService: SessionService,\r\n    private SocketService: SocketService,\r\n    private MapService: MapService){\r\n\r\n    // check if logged in from other tab (if LocalStorage exist)\r\n    localStorage.getItem('username')?\r\n    this.SocketService.emit('updateLogin', {username: localStorage.getItem('username')}, (data) => {\r\n      if(data.res){\r\n        sessionStorage.setItem('username', data.res)\r\n        SessionService.session()\r\n      } else if (data.err){\r\n        console.log(data.err)\r\n        localStorage.clear()\r\n        sessionStorage.clear()\r\n        SessionService.session()\r\n      }\r\n    })\r\n    : {}\r\n\r\n    // calling observables\r\n    this.openChatWidgetsSub = this.FriendlistService.openWidgets.subscribe(x => this.openChatWidgets = x)\r\n    this.sessionStateSub = this.SessionService.sessionState.subscribe(x => {\r\n      this.sessionState = x\r\n      if (this.sessionState) {\r\n        // this.FriendlistService.getNotifications()\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    // this.FriendlistService.getNotifications()\r\n  }\r\n\r\n  ngDoCheck() {\r\n    // console.log(this.sessionState)\r\n  }\r\n\r\n  resizeWindow(){\r\n    this.windowHeight = window.innerHeight\r\n    this.FriendlistService.resizeWindow(window.innerWidth)\r\n    this.MapService.getFakeCenter()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.openChatWidgetsSub.unsubscribe()\r\n    this.sessionStateSub.unsubscribe()\r\n  }\r\n}\r\n","<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n\r\n  <title></title>\r\n\r\n  <!-- popperjs import -->\r\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js\"></script>\r\n\r\n  <!-- socketio import -->\r\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js\" alt='/socket.io/socket.io.js' defer></script>\r\n\r\n  <!-- font import -->\r\n  <style>\r\n  @import url('https://fonts.googleapis.com/css2?family=Baloo+Bhaina+2&display=swap');\r\n  </style>\r\n\r\n  <!-- mapbox css import -->\r\n  <link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet'/>\r\n\r\n</head>\r\n\r\n<body (window:resize)='resizeWindow()' [attr.height]='windowHeight'>\r\n  \r\n  <app-map></app-map>\r\n \r\n  <router-outlet></router-outlet>\r\n  \r\n  <div>\r\n    <app-sidebar></app-sidebar>\r\n  </div>\r\n  <div style=\"z-index: 2; position: absolute; top: 1%; right: 1%;\">\r\n    <header-navbar></header-navbar>\r\n  </div>\r\n  <div id=\"chatsystem\">\r\n    <app-chatsystem></app-chatsystem>\r\n  </div>\r\n</body>\r\n</html>","import { HttpClientModule } from '@angular/common/http';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { RegistrationComponent } from './components/registration-process/registrationpage/registrationpage.component';\r\nimport { LoginComponent } from './components/loginpage/loginpage.component';\r\nimport { LogoutComponent } from './components/logout/logout.component';\r\nimport { ChatwidgetComponent } from './components/chatsystem/chatwidget/chatwidget.component';\r\nimport { FriendlistComponent } from './components/chatsystem/friendlist/friendlist.component';\r\nimport { HeaderComponent } from './components/header/header.component';\r\nimport { FriendComponent } from './components/chatsystem/friendlist/friend/friend.component';\r\nimport { MapComponent } from './components/map/map.component';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { RxReactiveFormsModule } from \"@rxweb/reactive-form-validators\"\r\nimport { loginComponent } from './components/loginpage/loginpage.component';\r\nimport { ChatsystemComponent } from './components/chatsystem/chatsystem.component';\r\nimport { SidebarComponent } from './components/sidebar/sidebar.component';\r\nimport { ProfileComponent } from './components/profile/profile.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { PropretyComponent } from './components/profile/proprety/proprety.component';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { ResizableModule  } from 'angular-resizable-element';\r\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatBottomSheetModule } from '@angular/material/bottom-sheet';\r\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatChipsModule } from '@angular/material/chips';\r\nimport { MatStepperModule } from '@angular/material/stepper';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatGridListModule } from '@angular/material/grid-list';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatNativeDateModule, MatRippleModule } from '@angular/material/core';\r\nimport { MatPaginatorModule } from '@angular/material/paginator';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatSliderModule } from '@angular/material/slider';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatSortModule, MatSort } from '@angular/material/sort';\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatTreeModule } from '@angular/material/tree';\r\nimport { RegistrationProcessComponent } from './components/registration-process/registration-process.component';\r\nimport { SearchresultsComponent } from './components/tabs/searchresults/searchresults.component';\r\nimport { HomeComponent } from './components/tabs/home/home.component';\r\nimport { MyaccountComponent } from './components/myaccount/myaccount.component';\r\nimport { MytripComponent } from './components/tabs/mytrip/mytrip.component';\r\nimport { CountrySelectorComponent } from './components/registration-process/country-selector/country-selector.component';\r\nimport { CountryList } from 'country-list';\r\nimport { VenueButtonComponent } from './components/tabs/searchresults/VenueButton/VenueButton.component';\r\nimport { TripmodalComponent } from './components/tabs/mytrip/tripmodal/tripmodal.component'\r\nimport { VenueComponent } from './components/venue/venue.component';\r\nimport { SearchBarComponent } from './components/search-bar/search-bar.component';\r\nimport { ListObjectPipe } from './pipes/list-object.pipe';\r\nimport { NullPipe } from './pipes/null.pipe';\r\nimport { UserprofileComponent } from './components/userprofile/userprofile.component';\r\nimport { UserbuttonComponent } from './components/tabs/searchresults/userbutton/userbutton.component';\r\nimport { AddVenuePopoverComponent } from './components/tabs/mytrip/add-venue-popover/add-venue-popover.component';\r\nimport { CitySearchComponent } from './components/city-search/city-search.component';\r\nimport { FilterComponent } from './components/filter/filter.component';\r\nimport { ScrollToTopComponent } from './components/sidebar/scroll-to-top/scroll-to-top.component';\r\nimport { AddPostComponent } from './components/add-post/add-post.component';\r\nimport { DisplayPostsComponent } from './components/display-posts/display-posts.component';\r\nimport { CommentSectionComponent } from './components/comment-section/comment-section.component';\r\nimport { CommentComponent } from './components/comment/comment.component';\r\nimport { AddToTripPopoverComponent } from './components/tabs/searchresults/add-to-trip-popover/add-to-trip-popover.component'\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { ArrayToPipePipe } from './pipes/array-to-pipe.pipe';\r\nimport { EditCommentComponent } from './components/edit-comment/edit-comment.component';\r\nimport { ShareComponent } from './components/share/share.component';\r\nimport {ClipboardModule} from '@angular/cdk/clipboard';\r\nimport { SearchPostsComponent } from './components/search-posts/search-posts.component';\r\nimport { AddTagComponent } from './components/add-tag/add-tag.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    RegistrationComponent,\r\n    LoginComponent,\r\n    LogoutComponent,\r\n    ChatwidgetComponent,\r\n    FriendlistComponent,\r\n    HeaderComponent,\r\n    FriendComponent,\r\n    MapComponent,\r\n    loginComponent,\r\n    ChatsystemComponent,\r\n    SidebarComponent,\r\n    ProfileComponent,\r\n    PropretyComponent,\r\n    RegistrationProcessComponent,\r\n    SearchresultsComponent,\r\n    HomeComponent,\r\n    MyaccountComponent,\r\n    MytripComponent,\r\n    CountrySelectorComponent,\r\n    VenueButtonComponent,\r\n    TripmodalComponent,\r\n    VenueComponent,\r\n    SearchBarComponent,\r\n    ListObjectPipe,\r\n    NullPipe,\r\n    UserprofileComponent,\r\n    UserbuttonComponent,\r\n    AddVenuePopoverComponent,\r\n    CitySearchComponent,\r\n    FilterComponent,\r\n    ScrollToTopComponent,\r\n    AddPostComponent,\r\n    DisplayPostsComponent,\r\n    CommentSectionComponent,\r\n    CommentComponent,\r\n    AddToTripPopoverComponent,\r\n    ArrayToPipePipe,\r\n    EditCommentComponent,\r\n    ShareComponent,\r\n    SearchPostsComponent,\r\n    AddTagComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    RxReactiveFormsModule,\r\n    NgbModule,\r\n    BrowserAnimationsModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    MatIconModule,\r\n    MatCheckboxModule,\r\n    MatButtonModule,\r\n    MatRadioModule,\r\n    ResizableModule,\r\n    MatAutocompleteModule,\r\n    MatBadgeModule,\r\n    MatBottomSheetModule,\r\n    MatButtonModule,\r\n    MatButtonToggleModule,\r\n    MatCardModule,\r\n    MatCheckboxModule,\r\n    MatChipsModule,\r\n    MatStepperModule,\r\n    MatDatepickerModule,\r\n    MatDialogModule,\r\n    MatDividerModule,\r\n    MatExpansionModule,\r\n    MatGridListModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    MatListModule,\r\n    MatMenuModule,\r\n    MatNativeDateModule,\r\n    MatPaginatorModule,\r\n    MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    MatRadioModule,\r\n    MatRippleModule,\r\n    MatSelectModule,\r\n    MatSidenavModule,\r\n    MatSliderModule,\r\n    MatSlideToggleModule,\r\n    MatSnackBarModule,\r\n    MatSortModule,\r\n    MatTableModule,\r\n    MatTabsModule,\r\n    MatToolbarModule,\r\n    MatTooltipModule,\r\n    MatTreeModule,\r\n    HttpClientModule,\r\n    DragDropModule,\r\n    ClipboardModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit, ViewChild, OnDestroy, AfterViewInit, AfterViewChecked } from \"@angular/core\";\r\nimport {COMMA, ENTER} from '@angular/cdk/keycodes';\r\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\r\n\r\nimport { AddPostService } from \"src/app/services/add-post.service\";\r\nimport { Post } from \"src/app/models/post.model\";\r\nimport { mimeType } from \"./mime-type.validator\";\r\nimport { title } from 'process';\r\nimport { Subscription } from 'rxjs';\r\nimport { geocodeResponseModel } from 'src/app/models/geocodeResp.model';\r\nimport { CitySearchComponent } from '../city-search/city-search.component';\r\n\r\n@Component({\r\n  selector: 'app-add-post',\r\n  templateUrl: './add-post.component.html',\r\n  styleUrls: ['./add-post.component.scss']\r\n})\r\nexport class AddPostComponent implements OnInit, OnDestroy, AfterViewChecked {\r\n  enteredTitle = \"\";\r\n  enteredContent = \"\";\r\n  post: Post;\r\n  isLoading = false;\r\n  form: FormGroup;\r\n  imagePreview: string;\r\n  private mode = \"create\";\r\n  private postId: string;\r\n  location: string\r\n\r\n  //tags\r\n  visible = true;\r\n  selectable = true;\r\n  removable = true;\r\n  addOnBlur = true;\r\n  readonly separatorKeysCodes: number[] = [ENTER, COMMA];\r\n  tags: string[] = [];\r\n\r\n  //filters\r\n  private clickedOption_sub: Subscription\r\n  clickedOption: geocodeResponseModel = null\r\n  @ViewChild(CitySearchComponent) CitySearchComponent: CitySearchComponent\r\n  checkedOnce = false\r\n\r\n  constructor(\r\n    public postsService: AddPostService,\r\n    public route: ActivatedRoute\r\n  ) {}\r\n\r\n\r\n  ngOnInit() {\r\n    this.form = new FormGroup({\r\n      title: new FormControl(null, {validators: [Validators.required, Validators.minLength(3)]}),\r\n      location: new FormControl(null, { validators: [Validators.required] }),\r\n      content: new FormControl(null, { validators: [Validators.required] }),\r\n      tags: new FormControl(null, { validators: [Validators.required] }),\r\n      image: new FormControl(null, {\r\n        validators: [Validators.required],\r\n        asyncValidators: [mimeType]\r\n      })\r\n    });\r\n    this.route.paramMap.subscribe((paramMap: ParamMap) => {\r\n      if (paramMap.has(\"postId\")) {\r\n        this.mode = \"edit\";\r\n        this.postId = paramMap.get(\"postId\");\r\n        this.isLoading = true;\r\n        this.postsService.getPost(this.postId).subscribe(postData => {\r\n          this.isLoading = false;\r\n          this.post = {\r\n            _id: postData._id,\r\n            author: postData.author,\r\n            date: postData.date,\r\n            location: postData.location,\r\n            likes: postData.likes,\r\n            title: postData.title,\r\n            content: postData.content,\r\n            imagePath: postData.imagePath,\r\n            tags: postData.tags,\r\n            comments: postData.comments,\r\n          };\r\n          this.form.setValue({\r\n            location: this.post.location,\r\n            title: this.post.title,\r\n            content: this.post.content,\r\n            image: this.post.imagePath,\r\n            tags: this.post.tags,\r\n          });\r\n          this.imagePreview = this.post.imagePath\r\n          this.tags = this.post.tags\r\n          this.location = this.post.location\r\n        });\r\n      } else {\r\n        this.mode = \"create\";\r\n        this.postId = null;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewChecked(){\r\n    if (this.CitySearchComponent && !this.checkedOnce){\r\n      this.clickedOption_sub = this.CitySearchComponent.clickedOption.subscribe((city: geocodeResponseModel) => {\r\n      if (city) {\r\n        this.clickedOption = city\r\n      } else {\r\n        this.clickedOption = null\r\n      }\r\n      })\r\n    }\r\n    else if (!this.CitySearchComponent){\r\n\r\n    }\r\n    else{\r\n      this.checkedOnce = true\r\n    }\r\n  }\r\n\r\n  onImagePicked(event: Event) {\r\n    const file = (event.target as HTMLInputElement).files[0];\r\n    this.form.patchValue({ image: file });\r\n    this.form.get(\"image\").updateValueAndValidity();\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      this.imagePreview = reader.result as string;\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  onSavePost() {\r\n    this.onAddLocation(this.clickedOption.name)\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n    this.isLoading = true;\r\n    if (this.mode === \"create\") {\r\n      let newPost = {\r\n        date: new Date().toLocaleString(),\r\n        location: this.form.value.location,\r\n        author: sessionStorage.getItem('username'),\r\n        title: this.form.value.title,\r\n        content: this.form.value.content,\r\n        image: this.form.value.image,\r\n        tags: this.form.value.tags,\r\n      }\r\n      this.postsService.addPost(newPost);\r\n    } else {\r\n      this.postsService.updatePost({\r\n        _id: this.postId,\r\n        date: this.post.date, //will be changed to earlier date\r\n        location: this.form.value.location,\r\n        author: sessionStorage.getItem('username'),\r\n        likes: this.post.likes,\r\n        title: this.form.value.title,\r\n        content: this.form.value.content,\r\n        image: this.form.value.image,\r\n        tags: this.form.value.tags,\r\n        comments: this.post.comments\r\n      });\r\n    }\r\n    this.form.reset();\r\n  }\r\n\r\n\r\n  addTag(event): void {\r\n    const input = event.input;\r\n    const value = event.value;\r\n\r\n    // Add a tag\r\n    if ((value || '').trim()) {\r\n      this.tags.push(value.trim());\r\n    }\r\n\r\n    // Reset the input value\r\n    if (input) {\r\n      input.value = '';\r\n    }\r\n    this.form.patchValue({ tags: this.tags });\r\n    this.form.get(\"tags\").updateValueAndValidity();\r\n\r\n  }\r\n\r\n  removeTag(tag): void {\r\n    const index = this.tags.indexOf(tag);\r\n    if (index >= 0) {\r\n      this.tags.splice(index, 1);\r\n    }\r\n    this.form.patchValue({ tags: this.tags });\r\n    this.form.get(\"tags\").updateValueAndValidity();\r\n  }\r\n  onAddLocation(location: string){\r\n    this.location = location\r\n    this.form.patchValue({ location: location });\r\n    this.form.get(\"location\").updateValueAndValidity();\r\n  }\r\n  ngOnDestroy(){\r\n    this.clickedOption_sub.unsubscribe()\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-spinner *ngIf=\"isLoading\"></mat-spinner>\r\n  <form [formGroup]=\"form\" (submit)=\"onSavePost()\" *ngIf=\"!isLoading\">\r\n\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"title\" placeholder=\"Post Title\">\r\n      <mat-error *ngIf=\"form.get('title').invalid\">Please enter a post title.</mat-error>\r\n    </mat-form-field>\r\n\r\n    <!-- <mat-form-field> -->\r\n      <!-- <input matInput type=\"text\" formControlName=\"location\" placeholder=\"location\"> -->\r\n      <!-- <mat-error *ngIf=\"form.get('location').invalid\">Please enter a location</mat-error> -->\r\n    <!-- </mat-form-field> -->\r\n\r\n    <app-city-search (locationAdded)='onAddLocation($event)' [getFakeCenterCity]='true' [placeholder]='\"Region\" '>\r\n    </app-city-search>\r\n\r\n    <mat-form-field>\r\n      <textarea matInput rows=\"4\" formControlName=\"content\" placeholder=\"Post Content\"></textarea>\r\n      <mat-error *ngIf=\"form.get('content').invalid\">Please enter something</mat-error>\r\n    </mat-form-field>\r\n\r\n    <div>\r\n      <button mat-stroked-button type=\"button\" (click)=\"filePicker.click()\">Pick Image</button>\r\n      <input class='hidden' type=\"file\" #filePicker (change)=\"onImagePicked($event)\">\r\n    </div>\r\n\r\n    <div class=\"image-preview\" *ngIf=\"imagePreview !== '' && imagePreview && form.get('image').valid\">\r\n      <img [src]=\"imagePreview\" [alt]=\"form.value.title\">\r\n    </div>\r\n\r\n    <mat-form-field class=\"example-chip-list\">\r\n      <mat-chip-list #chipList aria-label=\"tag selection\">\r\n        <mat-chip *ngFor=\"let tag of tags\" [selectable]=\"selectable\"\r\n                 [removable]=\"removable\" (removed)=\"removeTag(tag)\">\r\n          {{tag}}\r\n          <mat-icon matChipRemove *ngIf=\"removable\">cancel</mat-icon>\r\n        </mat-chip>\r\n        <input placeholder=\"add a tag...\"\r\n          [matChipInputFor]=\"chipList\"\r\n          [matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\r\n          [matChipInputAddOnBlur]=\"addOnBlur\"\r\n          (matChipInputTokenEnd)=\"addTag($event)\">\r\n      </mat-chip-list>\r\n    </mat-form-field>\r\n\r\n\r\n    <hr>\r\n    <button mat-raised-button color=\"accent\" type=\"submit\">Save Post</button>\r\n  </form>\r\n</mat-card>\r\n\r\n","import { AbstractControl } from \"@angular/forms\";\r\nimport { Observable, Observer, of } from \"rxjs\";\r\n\r\nexport const mimeType = (\r\n  control: AbstractControl\r\n): Promise<{ [key: string]: any }> | Observable<{ [key: string]: any }> => {\r\n  if (typeof(control.value) === 'string') {\r\n    return of(null);\r\n  }\r\n  const file = control.value as File;\r\n  const fileReader = new FileReader();\r\n  const frObs = Observable.create(\r\n    (observer: Observer<{ [key: string]: any }>) => {\r\n      fileReader.addEventListener(\"loadend\", () => {\r\n        const arr = new Uint8Array(<ArrayBuffer>fileReader.result).subarray(0, 4);\r\n        let header = \"\";\r\n        let isValid = false;\r\n        for (let i = 0; i < arr.length; i++) {\r\n          header += arr[i].toString(16);\r\n        }\r\n        switch (header) {\r\n          case \"89504e47\":\r\n            isValid = true;\r\n            break;\r\n          case \"ffd8ffe0\":\r\n          case \"ffd8ffe1\":\r\n          case \"ffd8ffe2\":\r\n          case \"ffd8ffe3\":\r\n          case \"ffd8ffe8\":\r\n            isValid = true;\r\n            break;\r\n          default:\r\n            isValid = false; // Or you can use the blob.type as fallback\r\n            break;\r\n        }\r\n        if (isValid) {\r\n          observer.next(null);\r\n        } else {\r\n          observer.next({ invalidMimeType: true });\r\n        }\r\n        observer.complete();\r\n      });\r\n      fileReader.readAsArrayBuffer(file);\r\n    }\r\n  );\r\n  return frObs;\r\n};\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { HttpClient } from \"@angular/common/http\";\r\n\r\n\r\n@Component({\r\n  selector: 'app-add-tag',\r\n  templateUrl: './add-tag.component.html',\r\n  styleUrls: ['./add-tag.component.scss']\r\n})\r\nexport class AddTagComponent implements OnInit {\r\n  form: FormGroup;\r\n  constructor(private http: HttpClient) { }\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      tag: new FormControl(null, {\r\n        validators: []\r\n      })\r\n    })\r\n  }\r\n  onSubmit(){\r\n    this.onAddTag(sessionStorage.getItem('username'),this.form.get('tag').value)\r\n  }\r\n  onAddTag(username: string, tag: string){\r\n    this.http\r\n      .put(\"https://travelnet.herokuapp.com/api/user/addTag/\", {'username': username, 'tag': tag})\r\n      .subscribe((response:{message:string, likes: string[]})=>{\r\n        console.log(response)\r\n    })\r\n  }\r\n}\r\n","<form [formGroup]=\"form\" (submit)=\"onSubmit()\">\r\n  <mat-form-field>\r\n    <input matInput type=\"text\" formControlName=\"tag\" placeholder=\"add a tag\">\r\n  </mat-form-field>\r\n  <button mat-raised-button color=\"accent\" type=\"submit\">Add</button>\r\n</form>\r\n","import { Subscription } from 'rxjs';\r\nimport { SessionService } from './../../services/session.service';\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-chatsystem',\r\n  templateUrl: './chatsystem.component.html',\r\n  styleUrls: ['./chatsystem.component.scss']\r\n})\r\nexport class ChatsystemComponent implements OnInit, OnDestroy {\r\n\r\n  sessionState: boolean\r\n  user = sessionStorage.getItem('username')\r\n  openChatWidgets: any\r\n\r\n  private openChatWidgets_sub: Subscription\r\n  private sessionState_sub: Subscription\r\n\r\n  constructor(\r\n    private FriendlistService: FriendlistService,\r\n    private SessionService: SessionService){\r\n    \r\n    this.SessionService.session()\r\n\r\n    this.openChatWidgets_sub = this.FriendlistService.openWidgets.subscribe(x => {\r\n      this.openChatWidgets = x\r\n    })\r\n    this.sessionState_sub = this.SessionService.sessionState.subscribe(x => {\r\n      this.sessionState = x\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.FriendlistService.getNotifications()\r\n  }\r\n\r\n  refreshRoom(roomId: string) {\r\n    this.FriendlistService.selectChatwidget(roomId)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.openChatWidgets_sub.unsubscribe()\r\n    this.sessionState_sub.unsubscribe()\r\n  }\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div class=\"row-12 chatwidget\">\r\n\r\n    <div class=\"col-8 col-sm-9 col-md-10 col-lg-9 col-xl-10\">\r\n      <div class='container-fluid'>\r\n        <div class=\"row justify-content-end\">\r\n          <app-chatwidget\r\n            (click)='refreshRoom(openChatWidgets.roomIds[i])'\r\n            *ngFor='let widget of openChatWidgets.roomNames, let i = index '\r\n            [roomName]=\"widget\"\r\n            [roomId]='openChatWidgets.roomIds[i]'>\r\n          </app-chatwidget>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-4 col-sm-3 col-md-2 col-lg-3 col-xl-2\">\r\n      <app-friendlist></app-friendlist>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n","import { Subscription } from 'rxjs';\r\nimport { SessionService } from '../../../services/session.service';\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service';\r\nimport { Component, OnInit, Renderer2, ViewChild, ElementRef, Input, OnDestroy } from '@angular/core';\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service';\r\nimport { RoomWidget } from '../../../models/Room_Widget.model'\r\n\r\n@Component({\r\n  selector: 'app-chatwidget',\r\n  templateUrl: './chatwidget.component.html',\r\n  styleUrls: ['./chatwidget.component.scss']\r\n})\r\n\r\nexport class ChatwidgetComponent implements OnInit, OnDestroy {\r\n  @Input() roomName: string\r\n  @Input() roomId: string\r\n  @ViewChild('textarea') div: ElementRef\r\n  sessionRoomName: string\r\n  typeArea: string = ''\r\n  sessionState: boolean\r\n  private sessionSub: Subscription\r\n  roomModel: RoomWidget\r\n  private roomSub: Subscription\r\n  username: string = sessionStorage.getItem('username')\r\n \r\n\r\n  constructor(private friendlistService: FriendlistService,\r\n              private renderer: Renderer2,\r\n              private socketService: SocketService,\r\n              public sessionService: SessionService) { }\r\n\r\n  ngOnInit(): void {\r\n    // subscribe to Observables\r\n    this.sessionSub = this.sessionService.sessionState.subscribe((isLoggedIn) => {\r\n      this.sessionState = isLoggedIn\r\n    })\r\n\r\n    this.roomSub = this.friendlistService.roomModel.subscribe((room) => {\r\n      this.roomModel = room\r\n    })\r\n\r\n    this.sessionRoomName = this.sessionService.getRoomName(this.roomName)\r\n\r\n    // pull Chatroom content from backend\r\n    this.socketService.emit('initChatroom', {id: this.roomId, username: this.username}, (data) => {\r\n      if (data.err) {\r\n        console.log(data.err)\r\n      } else {\r\n        data.messages.forEach((message) => {\r\n          const ul: HTMLParagraphElement = this.renderer.createElement('ul');\r\n          ul.innerHTML = `${message.sender === this.username ? \"you\" : message.sender}: ${message.content}`\r\n          this.renderer.appendChild(this.div.nativeElement, ul)\r\n        })\r\n      }\r\n    })\r\n\r\n    this.friendlistService.selectChatwidget(this.roomId)\r\n    \r\n    // listen for messages & add display them\r\n    this.socketService.listen('message_res').subscribe((data: any) => {\r\n      if(this.roomId == data.res.roomId){\r\n        const ul: HTMLParagraphElement = this.renderer.createElement('ul');\r\n        ul.innerHTML = `${data.res.sender === this.username ? \"you\" : data.res.sender}: ${data.res.content}`\r\n        this.renderer.appendChild(this.div.nativeElement, ul)\r\n        this.typeArea = ``\r\n      } else {\r\n      } \r\n    })\r\n\r\n    // listen for notifications\r\n    this.socketService.listen('notification').subscribe((data: any) => {\r\n      \r\n    })\r\n  }\r\n  \r\n  // look for enter button\r\n  onKey(event: KeyboardEvent) {\r\n    if (event.key == 'Enter') {\r\n      event.preventDefault()\r\n      this.sendMessage(this.typeArea)\r\n      this.typeArea = ''\r\n    }\r\n  }\r\n\r\n  // send message with socket\r\n  sendMessage(data: string): void {\r\n    if (data != '') {\r\n      this.socketService.emit('message', {roomId: this.roomId, sender: this.username, content: data})    \r\n    }\r\n  }\r\n\r\n  toggleChatWidget(): void {\r\n    this.friendlistService.getRoomWidget(this.roomId)\r\n    this.friendlistService.toggleChatWidget(this.roomModel)\r\n    this.ngOnDestroy()\r\n  }\r\n  \r\n  ngOnDestroy(): void {\r\n    this.socketService.remove('message_res')\r\n    this.socketService.remove('notification')\r\n    this.roomSub.unsubscribe()\r\n    this.sessionSub.unsubscribe()\r\n  }\r\n}","<div  id='main' class=\"col-auto\" *ngIf='sessionState'>\r\n  <!-- top of widget -->\r\n  <div class=\"space rounded-top\" [innerText]='sessionRoomName' aria-readonly=\"true\" (click)='toggleChatWidget()'></div>\r\n\r\n  <!-- messages -->\r\n  <div class=\"text-wrap\" id='chatbody'*ngIf='sessionState'>\r\n    <br>\r\n    <div class=\"text-wrap\" id='textarea' #textarea ></div>\r\n  </div> \r\n\r\n  <!-- text and enter button -->\r\n  <div class='space rounded-bottom' >\r\n    <form (submit)='sendMessage(msg.value)' class=\"container-fluid\" autocomplete=\"off\">\r\n      <div class=\"row\">\r\n        <textarea class=\"col-auto\" name=\"ngModel\" [(ngModel)]='typeArea' #msg='ngModel' type=\"textarea\" (keydown)='onKey($event)'></textarea>\r\n        <input class='btn btn-primary col' id='submit' type=\"submit\" value=\"Send\">\r\n      </div>\r\n    </form>\r\n  </div>\r\n\r\n</div>","import { SessionService } from '../../../../services/session.service';\r\nimport { Component, OnInit, Input } from '@angular/core';\r\nimport { RoomWidget } from '../../../../models/Room_Widget.model';\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service';\r\n\r\n@Component({\r\n  selector: 'app-friend',\r\n  templateUrl: './friend.component.html',\r\n  styleUrls: ['./friend.component.scss']\r\n})\r\n\r\nexport class FriendComponent implements OnInit {\r\n\r\n  sessionRoomName : string\r\n  username: string = sessionStorage.getItem('username')\r\n\r\n  @Input() friend: RoomWidget\r\n  constructor (private friendlistService: FriendlistService,\r\n    public sessionService: SessionService) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.sessionRoomName = this.sessionService.getRoomName(this.friend.roomName)\r\n  }\r\n\r\n  // open or close chat widget\r\n  toggleChatWidget(friend: RoomWidget) {\r\n    this.friendlistService.toggleChatWidget(friend)\r\n    this.friendlistService.resizeWindow(window.innerWidth)\r\n  }\r\n}","<button type=\"button\" class=\"btn\"\r\n    [ngClass]=\"friend.unread ? 'btn-danger' : friend.open ? 'btn-light disabled' : 'btn-light'\"\r\n    (click)='toggleChatWidget(friend)'>\r\n        {{sessionRoomName}}\r\n</button>","import { Subscription } from 'rxjs';\r\nimport { SessionService } from '../../../services/session.service';\r\nimport { RoomWidget } from '../../../models/Room_Widget.model';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service';\r\n\r\n@Component({\r\n  selector: 'app-friendlist',\r\n  templateUrl: './friendlist.component.html',\r\n  styleUrls: ['./friendlist.component.scss']\r\n})\r\n\r\nexport class FriendlistComponent implements OnInit, OnDestroy {\r\n  sessionState: boolean\r\n  friends: RoomWidget[] = []\r\n  private friendsSub: Subscription\r\n  private sessionSub: Subscription\r\n\r\n  constructor(private friendlistService: FriendlistService,\r\n    private SessionService: SessionService) { }\r\n\r\n  ngOnInit(): void {\r\n    // setup sessionState and friends observable\r\n    this.sessionSub = this.SessionService.sessionState.subscribe((isLoggedIn) => {\r\n      this.sessionState = isLoggedIn\r\n\r\n      if (isLoggedIn) {\r\n        this.friendsSub = this.friendlistService.chatroomList.subscribe((friends) => this.friends = friends)\r\n        this.friendlistService.getList([])\r\n      } else {\r\n        console.log(`not logged in`)\r\n      }\r\n    })\r\n  }\r\n\r\n  // update friendlist on each key press\r\n  onKey(data: string) {\r\n    if (data === \"\") {\r\n      this.friendlistService.getList([sessionStorage.getItem(\"username\")])\r\n    } else {\r\n      let arr: string[] = data.split(' ')\r\n      this.friendlistService.getList(arr)\r\n    }\r\n  }\r\n\r\n  // creates new room on submit\r\n  onSubmit(data: string) {\r\n    this.friendlistService.CreateChatroom(data)\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.friendsSub.unsubscribe()\r\n    this.sessionSub.unsubscribe()\r\n  }\r\n}\r\n","<div *ngIf='sessionState' class=\"border border-secondary\">\r\n    <!-- actual friendlist -->\r\n    <div id=\"friends\">\r\n        <div id = 'friend' *ngFor=\"let friend of friends\">\r\n            <app-friend [friend]=\"friend\">\r\n            </app-friend>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- textarea -->\r\n    <form (submit)='onSubmit(input.value)' >\r\n        <input #input type='text' class=\"form-control rounded-0\" (keyup)='onKey(input.value)' placeholder='Add a friend!' id=\"input\" autocomplete='off'>\r\n    </form>\r\n</div>\r\n","import { SearchParams } from './../../models/searchParams';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { geocodeResponseModel } from './../../models/geocodeResp.model';\r\nimport { MapService } from './../../services/map/map.service';\r\nimport { Subscription, BehaviorSubject, Observable } from 'rxjs';\r\nimport { OpenstreetmapService } from './../../services/map/openstreetmap.service';\r\nimport { FormControl, Validators } from '@angular/forms';\r\nimport { Component, OnInit, Input, OnDestroy, Output, ViewChild, AfterViewInit, EventEmitter } from '@angular/core';\r\nimport { MatSelect } from '@angular/material/select';\r\n\r\n@Component({\r\n  selector: 'app-city-search',\r\n  templateUrl: './city-search.component.html',\r\n  styleUrls: ['./city-search.component.scss']\r\n})\r\nexport class CitySearchComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild(MatSelect) MatSelect: MatSelect\r\n  @Input() appearance: string\r\n  @Input() placeholder: string\r\n  //initial location\r\n  @Input() location: string\r\n  @Input() getFakeCenterCity: boolean\r\n  @Input() clearOnSearch: boolean\r\n  //for custom event emiting\r\n  @Output() locationAdded = new EventEmitter<string>();\r\n\r\n  // search input variables\r\n  myControl: FormControl = new FormControl(null)\r\n  timeout\r\n  searched: Subscription\r\n\r\n  isLoading: boolean = false\r\n\r\n  openstreetmap_sub: Subscription\r\n\r\n  private fakeCenterCity_sub: Subscription\r\n\r\n  // display suggestions on autosuggest\r\n  private _autoSuggested: BehaviorSubject<Array<{[key: string]: any}>> = new BehaviorSubject([])\r\n  autoSuggested: Observable<Array<{[key: string]: any}>> = this._autoSuggested.asObservable()\r\n\r\n  //return clicked option\r\n  _clickedOptionLocal: geocodeResponseModel = null\r\n  private _clickedOption: BehaviorSubject<geocodeResponseModel> = new BehaviorSubject(this._clickedOptionLocal)\r\n  clickedOption: Observable<geocodeResponseModel> = this._clickedOption.asObservable()\r\n\r\n  constructor(private OpenstreetmapService: OpenstreetmapService,\r\n              private MapService: MapService,\r\n              private ActivatedRoute: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.MapService.citySearchPresent = true\r\n\r\n    this.ActivatedRoute.queryParams.subscribe((params: SearchParams) => {\r\n      if (params.lng) {\r\n        this.OpenstreetmapService.reverseSearch(params.lng, params.lat)\r\n        .subscribe((res) => {\r\n          if (res.features[0]) {\r\n            this.myControl.patchValue(this.removeMiddle(res.features[0].properties.display_name, 0))\r\n            this._clickedOptionLocal = new geocodeResponseModel(this.myControl.value, res.features[0].geometry.coordinates)\r\n            this._clickedOption.next(this._clickedOptionLocal)\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    // search for new cities on input value change\r\n    this.searched = this.myControl.valueChanges.subscribe(x => {\r\n      this._clickedOptionLocal = null\r\n      clearTimeout(this.timeout)\r\n      this.timeout = setTimeout(() => {\r\n        this.isLoading = true\r\n        this._autoSuggested.next([{}])\r\n        this.openstreetmap_sub = this.OpenstreetmapService.citySearch(x.toString()).subscribe(response => {\r\n          this.isLoading = false\r\n          let searchResults: Array<{[key: string]: any}> = []\r\n          response.features.forEach(element => {\r\n            let name = this.removeMiddle(element.properties.display_name, 1)\r\n            searchResults.push({name: name, content: element})\r\n          });\r\n          this._autoSuggested.next(searchResults)\r\n        }, (err) => {\r\n          this.isLoading = false\r\n          console.log(err)\r\n        })\r\n      }, 400)\r\n    })\r\n\r\n    if (this.getFakeCenterCity) {\r\n      // sub to city name at fake center\r\n      this.fakeCenterCity_sub = this.MapService.fakeCenterCity.subscribe((res: {[key: string]: any, features: Array<{[key: string]: any}>}) => {\r\n        if (res.features) {\r\n          this.placeholder = 'Region'\r\n          this.myControl.patchValue(this.removeMiddle(res.features[0].properties.display_name, 1))\r\n          this._clickedOptionLocal = new geocodeResponseModel(this.myControl.value, res.features[0].geometry.coordinates)\r\n          this._clickedOption.next(this._clickedOptionLocal)\r\n        } else {\r\n          this.myControl.patchValue('')\r\n          this.placeholder = 'No city found'\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  /** check if input contains valid city */\r\n  checkCityValidity(): boolean {\r\n    if (!this._clickedOptionLocal || this.myControl.value == '') {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /** filters city name string, always keep first and last string */\r\n  removeMiddle(string: string, keep: number): string {\r\n    let arr: string[] = string.split(',')\r\n    let nothing = arr.shift()\r\n    for (let x = 0; x < keep; x++) {\r\n      if (arr[x] != arr.slice(-1)[0]) {\r\n        nothing = nothing.concat(', ', arr[x])\r\n      }\r\n    }\r\n    return nothing.concat(', ', arr[arr.length - 1])\r\n  }\r\n\r\n  /** when option is clicked */\r\n  onOptionClick(country: {[key: string]: any}) {\r\n    this._clickedOptionLocal = new geocodeResponseModel(country.name, country.content.geometry.coordinates, country.content)\r\n    this._clickedOption.next(this._clickedOptionLocal)\r\n    this.clearOnSearch? this.myControl.patchValue('') : null\r\n    // this.emitCountry(this._clickedOptionLocal.name)\r\n  }\r\n\r\n  emitCountry(city) {\r\n    console.log(city)\r\n    this.locationAdded.emit(city)\r\n    this.clearOnSearch? this.myControl.patchValue('') : null\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.MapService.citySearchPresent = false\r\n    this.searched.unsubscribe()\r\n    this.fakeCenterCity_sub? this.fakeCenterCity_sub.unsubscribe() : null\r\n    this.openstreetmap_sub? this.openstreetmap_sub.unsubscribe() : null\r\n  }\r\n\r\n}\r\n","<mat-form-field class=\"example-full-width\" style=\"width: 100%;\" [appearance]='appearance' matTooltip='{{searchInput.value}}' matTooltipShowDelay='800'>\r\n    <mat-label>{{ placeholder }}</mat-label>\r\n    <input type='text'\r\n    #searchInput=\"matInput\"\r\n    matInput\r\n    placeholder=\"Ex. Berlin\"\r\n    [matAutocomplete]=\"auto\"\r\n    [formControl]=\"myControl\"\r\n    autocomplete=\"off\">\r\n    <button mat-button *ngIf=\"myControl.value\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"myControl.patchValue(''); _clickedOptionLocal = null\" type='button'>\r\n        <mat-icon>close</mat-icon>\r\n    </button>\r\n    <small *ngIf='!checkCityValidity() && myControl.touched' class=\"text-danger\">this is not a valid region</small>\r\n    <mat-autocomplete #auto='matAutocomplete' panelWidth='25%'> \r\n        <mat-spinner *ngIf='isLoading' style=\"margin:0 auto;\"></mat-spinner>\r\n        <mat-option *ngFor='let country of autoSuggested | async' [value]='country.name' (onSelectionChange)='onOptionClick(country)'>\r\n            <span>{{ country.name }}</span>\r\n        </mat-option>\r\n    </mat-autocomplete>\r\n</mat-form-field>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { AddPostService } from 'src/app/services/add-post.service';\r\nimport { CommentsService } from 'src/app/services/comments.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Comment } from \"src/app/models/comment.model\";\r\nimport { Post } from 'src/app/models/post.model';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-comment-section',\r\n  templateUrl: './comment-section.component.html',\r\n  styleUrls: ['./comment-section.component.scss']\r\n})\r\nexport class CommentSectionComponent implements OnInit {\r\n  @Input() post: Post\r\n  public comments: Comment[]\r\n  form: FormGroup;\r\n\r\n\r\n  constructor(\r\n    private postsService: AddPostService,\r\n    private route: ActivatedRoute,\r\n    private commentsService: CommentsService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      content: new FormControl(null, { validators: [Validators.required] }),\r\n    })\r\n  }\r\n\r\n  onAddComment() {\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n    let newComment = {\r\n      date: new Date().toLocaleString(),\r\n      author: sessionStorage.getItem('username'),\r\n      content: this.form.value.content,\r\n    }\r\n    this.commentsService.addComment(newComment,this.post._id)\r\n    this.form.reset();\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n  <form [formGroup]=\"form\" (submit)=\"onAddComment()\">\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"content\" placeholder=\"say something...\">\r\n    </mat-form-field>\r\n  </form>\r\n  <app-comment *ngFor=\"let comment of post.comments\"\r\n  [comment]='comment'\r\n  [postId]='this.post._id'>\r\n\r\n  </app-comment>\r\n</mat-card>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Comment } from 'src/app/models/comment.model';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { CommentsService } from 'src/app/services/comments.service';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { EditCommentComponent } from '../edit-comment/edit-comment.component';\r\n\r\n\r\n@Component({\r\n  selector: 'app-comment',\r\n  templateUrl: './comment.component.html',\r\n  styleUrls: ['./comment.component.scss']\r\n})\r\nexport class CommentComponent implements OnInit {\r\n  @Input() comment: Comment\r\n  @Input() postId: string\r\n  displayEdits = false\r\n  replyField = true\r\n  showReplies = false\r\n  form: FormGroup;\r\n  constructor(\r\n    private commentsService: CommentsService,\r\n    public dialog: MatDialog\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      content: new FormControl(null, { validators: [Validators.required] }),\r\n      })\r\n  }\r\n\r\n  replyBoolean(){\r\n    this.replyField = !this.replyField\r\n  }\r\n  onAddReply(){\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n    let newReply = {\r\n      date: new Date().toLocaleString(),\r\n      author: sessionStorage.getItem('username'),\r\n      content: this.form.value.content,\r\n    }\r\n    let replyContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      reply: newReply\r\n    }\r\n    this.commentsService.reply(replyContent)\r\n    this.form.reset();\r\n  }\r\n  likeTreeComment(){\r\n    let likeContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      username: sessionStorage.getItem(\"username\"),\r\n      replyId: null\r\n    }\r\n    this.commentsService.likeComment(likeContent)\r\n  }\r\n  likeLeafComment(replyId){\r\n    let likeContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      username: sessionStorage.getItem(\"username\"),\r\n      replyId: replyId\r\n    }\r\n    this.commentsService.likeComment(likeContent)\r\n  }\r\n  deleteTreeComment(){\r\n    let deleteContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      replyId: null\r\n    }\r\n    this.commentsService.deleteComment(deleteContent)\r\n  }\r\n  deleteLeafComment(replyId){\r\n    let deleteContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      replyId: replyId\r\n    }\r\n    this.commentsService.deleteComment(deleteContent)\r\n  }\r\n  editTreeComment(){\r\n    let commentInfo = {\r\n      postId: this.postId,\r\n      comment: this.comment,\r\n      reply: null\r\n    }\r\n    const dialogRef = this.dialog.open(EditCommentComponent,{data:{displayEdits: false, commentData: commentInfo}});\r\n    dialogRef.afterClosed().subscribe();\r\n\r\n  }\r\n  editLeafComment(reply){\r\n    let commentInfo = {\r\n      postId: this.postId,\r\n      comment: this.comment,\r\n      reply: reply\r\n    }\r\n    const dialogRef = this.dialog.open(EditCommentComponent,{data:{displayEdits: false, commentData: commentInfo}});\r\n    dialogRef.afterClosed().subscribe();\r\n\r\n  }\r\n  showParentEdits(){\r\n    let commentInfo = {\r\n      postId: this.postId,\r\n      comment: this.comment,\r\n      reply: null\r\n    }\r\n    const dialogRef = this.dialog.open(EditCommentComponent,{data:{displayEdits: true, commentData: commentInfo}});\r\n    dialogRef.afterClosed().subscribe();\r\n  }\r\n  showLeafEdits(reply){\r\n    let commentInfo = {\r\n      postId: this.postId,\r\n      comment: reply,\r\n      reply: true\r\n    }\r\n    const dialogRef = this.dialog.open(EditCommentComponent,{data:{displayEdits: true, commentData: commentInfo}});\r\n    dialogRef.afterClosed().subscribe();\r\n  }\r\n  ownContent(content){\r\n    if(content.author === sessionStorage.getItem('username')){\r\n      return true\r\n    }\r\n  }\r\n}\r\n","\r\n<mat-card>\r\n  {{comment.author}} : {{comment.content}}\r\n  <div>\r\n    <button mat-button (click)=\"likeTreeComment()\">LIKE</button>\r\n    {{comment.likes.length}}\r\n    <button mat-button (click)=\"replyBoolean()\">REPLY</button>\r\n    <button *ngIf=\"ownContent(comment.author)\" mat-button (click)=\"deleteTreeComment()\">DELETE</button>\r\n    <button *ngIf=\"ownContent(comment.author)\" mat-button (click)=\"editTreeComment()\">EDIT</button>\r\n    <button mat-button *ngIf=\"comment.edited && comment.edited.length > 0\" (click)=\"showParentEdits()\">edited</button>\r\n  </div>\r\n\r\n  <div *ngIf=\"replyField\">\r\n    <mat-card *ngFor=\"let reply of comment.replies\">\r\n      <mat-card-header> {{reply.author}} : {{reply.content }}\r\n        <div>\r\n          <button mat-button (click)=\"likeLeafComment(reply._id)\">LIKE</button>\r\n          {{reply.likes.length}}\r\n          <button mat-button >REPLY</button>\r\n          <button mat-button (click)=\"deleteLeafComment(reply._id)\">DELETE</button>\r\n          <button *ngIf=\"ownContent(reply.author)\" mat-button (click)=\"editLeafComment(reply)\">EDIT</button>\r\n          <button  mat-button *ngIf=\"reply.edited && reply.edited.length > 0 && ownContent(reply.author)\" (click)=\"showLeafEdits(reply)\">edited</button>\r\n        </div>\r\n      </mat-card-header>\r\n   </mat-card>\r\n    <div *ngIf=\"replyField\">\r\n        <form [formGroup]=\"form\" (submit)=\"onAddReply()\">\r\n          <mat-form-field>\r\n            <input matInput type=\"text\" formControlName=\"content\" placeholder=\"say something...\">\r\n          </mat-form-field>\r\n        </form>\r\n      </div>\r\n  </div>\r\n\r\n  </mat-card>\r\n","import { Component, OnInit, OnDestroy, Input } from \"@angular/core\";\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { Post } from \"src/app/models/post.model\";\r\nimport { AddPostService } from \"src/app/services/add-post.service\";\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { HttpService } from 'src/app/services/http.service';\r\n\r\n@Component({\r\n  selector: 'app-display-posts',\r\n  templateUrl: './display-posts.component.html',\r\n  styleUrls: ['./display-posts.component.scss']\r\n})\r\nexport class DisplayPostsComponent implements OnInit, OnDestroy {\r\n  user\r\n  // posts = [\r\n  //   { title: \"First Post\", content: \"This is the first post's content\" },\r\n  //   { title: \"Second Post\", content: \"This is the second post's content\" },\r\n  //   { title: \"Third Post\", content: \"This is the third post's content\" }\r\n  // ];\r\n  posts: Post[] = [];\r\n  isLoading = false;\r\n  private postsSub: Subscription;\r\n  timeoutHandler\r\n  likeShow = false\r\n  input: string\r\n\r\n\r\n  constructor(public postsService: AddPostService, private HttpService: HttpService, private route: ActivatedRoute) {}\r\n\r\n  ngOnInit() {\r\n    this.isLoading = true;\r\n    this.route.params.subscribe(params => {\r\n      this.input = params['query'];\r\n      if(this.input){\r\n        this.postsService.searchPosts({input: this.input});\r\n        this.postsSub = this.postsService.getPostUpdateListener()\r\n        .subscribe((posts: Post[]) => {\r\n          this.isLoading = false;\r\n          this.posts = posts;\r\n        });\r\n\r\n      }\r\n      else{\r\n        this.HttpService.get('/user', null).then((res: any) => {\r\n          this.user = res.user[0]\r\n          this.postsService.getRelevantPosts({author: this.user.username, follows: this.user.following, tags: this.user.tags, location: this.user.location});\r\n          this.postsSub = this.postsService.getPostUpdateListener()\r\n          .subscribe((posts: Post[]) => {\r\n            this.isLoading = false;\r\n            this.posts = posts;\r\n          });\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  onDelete(postId: string) {\r\n    this.postsService.deletePost(postId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.postsSub.unsubscribe();\r\n  }\r\n\r\n  like(postId: string){\r\n    this.postsService.likePost(postId, sessionStorage.getItem('username'))\r\n  }\r\n\r\n  public mouseup() {\r\n    if (this.timeoutHandler) {\r\n      clearInterval(this.timeoutHandler);\r\n      this.timeoutHandler = null;\r\n    }\r\n  }\r\n\r\n  public mousedown() {\r\n    this.timeoutHandler = setInterval(() => {\r\n      this.showLikes()\r\n      console.log(this.likeShow)\r\n    }, 300);\r\n  }\r\n\r\n  showLikes(){\r\n    this.likeShow = !this.likeShow\r\n  }\r\n\r\n  submitComment(comment){\r\n\r\n  }\r\n  ownContent(post){\r\n    if(sessionStorage.getItem('username') === post.author){\r\n      return true\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","<div class=\"row container\">\r\n  <app-search-posts class=\"col-6\"></app-search-posts>\r\n  <app-add-tag class=\"col-6\"></app-add-tag>\r\n</div>\r\n<mat-spinner *ngIf=\"isLoading\"></mat-spinner>\r\n\r\n<div *ngIf=\"posts.length > 0 && !isLoading\">\r\n  <div *ngFor=\"let post of posts\">\r\n    <mat-card class=\"\">\r\n      <mat-card-header>\r\n        <div mat-card-avatar class=\"\"></div>\r\n        <mat-card-title>{{ post.author }}</mat-card-title>\r\n        <mat-card-subtitle>Premium User</mat-card-subtitle>\r\n        <div class='authorButtons'>\r\n          <a *ngIf=\"ownContent(post)\" mat-button color=\"primary\" [routerLink]=\"['/edit', post._id]\">EDIT</a>\r\n          <button *ngIf=\"ownContent(post)\" mat-button color=\"warn\" (click)=\"onDelete(post._id)\">DELETE</button>\r\n        </div>\r\n      </mat-card-header>\r\n      <h1>\r\n        {{ post.title }}\r\n      </h1>\r\n      <p>\r\n        {{ post.tags }} {{ post.date }}\r\n      </p>\r\n      <p>\r\n        {{ post.content }}\r\n      </p>\r\n      <img mat-card-image [src]=\"post.imagePath\" [alt]=\"post.title\">\r\n\r\n      <mat-card-actions>\r\n        <button mat-button type=\"button\" (click)=\"like(post._id)\" (mousedown)=\"mousedown()\" (mouseup)=\"mouseup()\" (mouseleave)=\"mouseup()\" matTooltip='{{post.likes}}'>LIKE {{ post.likes.length }}</button>\r\n        <button mat-button>SHARE</button>\r\n      </mat-card-actions>\r\n      <!-- <div *ngIf=\"likeShow\">{{post.likes}}</div> -->\r\n\r\n      <app-comment-section [post] ='post'></app-comment-section>\r\n    </mat-card>\r\n\r\n  </div>\r\n</div>\r\n<p class=\"info-text mat-body-1\" *ngIf=\"posts.length <= 0 && !isLoading\">No posts added yet!</p>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport { Inject } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { CommentsService } from 'src/app/services/comments.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-comment',\r\n  templateUrl: './edit-comment.component.html',\r\n  styleUrls: ['./edit-comment.component.scss']\r\n})\r\nexport class EditCommentComponent implements OnInit {\r\n  form: FormGroup;\r\n  commentData: any\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<any>,\r\n    private CommentsService: CommentsService,\r\n    @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if(!this.data.displayEdits){\r\n      this.form = new FormGroup({\r\n          'comment': new FormControl(null, {validators: [Validators.required]}),\r\n        })\r\n        if(this.data.commentData.reply){\r\n          this.form.setValue({\r\n            'comment': this.data.commentData.reply.content\r\n            })\r\n        }\r\n        else{\r\n          this.form.setValue({\r\n            'comment': this.data.commentData.comment.content\r\n            })\r\n        }\r\n        this.commentData = this.data.commentData\r\n      }\r\n    }\r\n\r\n\r\n  onEditComment(){\r\n    if(this.data.commentData.reply){\r\n      this.commentData.reply.edited.push({edit: this.commentData.reply.content, date:Date().toLocaleString()})\r\n      this.commentData.reply.content = this.form.value.comment\r\n      this.CommentsService.editComment(this.commentData)\r\n    }\r\n    else{\r\n      this.commentData.comment.edited.push({edit: this.commentData.comment.content, date:Date().toLocaleString()})\r\n      this.commentData.comment.content = this.form.value.comment\r\n      this.CommentsService.editComment(this.commentData)\r\n    }\r\n    this.closeDialog()\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"form\" (submit)=\"onEditComment()\" *ngIf=\"!data.displayEdits\">\r\n  <mat-form-field>\r\n    <input matInput type=\"text\" formControlName=\"comment\" placeholder=\"\">\r\n    <mat-error *ngIf=\"form.get('comment').invalid\">Please enter something</mat-error>\r\n  </mat-form-field>\r\n  <button mat-raised-button color=\"accent\" type=\"submit\">Save edit</button>\r\n  <button mat-raised-button type= \"button\" (click)=\"closeDialog()\">close</button>\r\n</form>\r\n\r\n<div *ngIf=\"data.displayEdits\">\r\n  <div *ngFor=\"let edit of data.commentData.comment.edited\">\r\n    {{edit.edit}}: {{edit.date}}\r\n  </div>\r\n</div>\r\n","import { SearchParams } from './../../models/searchParams';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TripService } from './../../services/trip.service';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { Component, OnInit, OnDestroy, AfterViewInit } from '@angular/core';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { NestedTreeControl } from '@angular/cdk/tree';\r\nimport { CategoryNode} from 'src/app/models/CategoryNode.model';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-filter',\r\n  templateUrl: './filter.component.html',\r\n  styleUrls: ['./filter.component.scss']\r\n})\r\nexport class FilterComponent implements OnInit, OnDestroy {\r\n  completed: boolean\r\n  name: string\r\n  panelOpenState = false\r\n\r\n  categoriesTree: CategoryNode[] = null\r\n  categoriesSet: any = null\r\n  private categoriesTree_sub: Subscription\r\n  private categoriesSet_sub: Subscription\r\n\r\n  allComplete: Array<boolean> = null\r\n  count = 0;\r\n\r\n  treeControl = new NestedTreeControl<CategoryNode>(node => node.categories);\r\n\r\n  private _selectedNodes: BehaviorSubject<string> = new BehaviorSubject(null)\r\n  selectedNodes: Observable<string> = this._selectedNodes.asObservable()\r\n\r\n  constructor(\r\n    private SearchService: SearchService,\r\n    private TripService: TripService,\r\n    private ActivatedRoute: ActivatedRoute,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.categoriesSet_sub = this.SearchService.categorySet.subscribe((set: Set<any>) => this.categoriesSet = set)\r\n\r\n    this.categoriesTree_sub = this.SearchService.categoryTree.subscribe((tree: CategoryNode[]) => {\r\n      if (tree) {\r\n        this.categoriesTree = tree\r\n\r\n        // sets category filter from url params\r\n        this.ActivatedRoute.queryParams.subscribe((params: SearchParams) => {\r\n          if (params.category) {\r\n            if (params.category === 'All') {\r\n              null\r\n            } else {\r\n              this.categoriesTree.forEach((child: CategoryNode) => {\r\n                if (child.name != params.category) {\r\n                  this.uncheckAll(child.categories)\r\n                } else {\r\n                  this.checkAll(child.categories)\r\n                }\r\n              })              \r\n            }\r\n          }        \r\n        }) \r\n      }\r\n    })\r\n  }\r\n\r\n  /** Checks if datasource for material tree has any child groups */\r\n  hasChild = (_: number, node: CategoryNode) => !!node.categories && node.categories.length > 0;\r\n\r\n  /**toggle checkmark for leafs */\r\n  clickedActive(element: CategoryNode) {\r\n    element.checked = !element.checked;\r\n    this.modifyIdSet(element)\r\n    this.SearchService.updateCategoryTree(this.categoriesTree)\r\n  }\r\n\r\n  /**toggle checkmark for nodes && node itself */\r\n  setAll(category: CategoryNode) {\r\n    let allChecked = this.initiateChildrenChecker(category.categories)\r\n    if(!allChecked) {\r\n      this.SearchService.treeValues.categorySet.has(category.id)? null : this.SearchService.treeValues.categorySet.add(category.id)\r\n      this.checkAll(category.categories)\r\n    }\r\n    else if (allChecked) {\r\n      this.SearchService.treeValues.categorySet.has(category.id)? this.SearchService.treeValues.categorySet.delete(category.id) : null\r\n      this.uncheckAll(category.categories)\r\n    }\r\n    this.SearchService.updateCategoryTree(this.categoriesTree)\r\n  }\r\n\r\n  /** checks all children of a node && node itself */\r\n  checkAll(categories: CategoryNode[]) {\r\n    categories.forEach((sub: CategoryNode) => {\r\n      sub.checked = true;\r\n      this.SearchService.treeValues.categorySet.has(sub.id)? null : this.SearchService.treeValues.categorySet.add(sub.id)\r\n\r\n      this.SearchService.updateCategorySet(this.categoriesSet)\r\n      // this.modifyIdSet(sub)\r\n\r\n      if (sub.categories && sub.categories.length > 0) {\r\n        this.checkAll(sub.categories)\r\n      }\r\n    })\r\n  }\r\n\r\n  /** unchecks all children of a node */\r\n  uncheckAll(categories: CategoryNode[]) {\r\n    categories.forEach((sub: CategoryNode) => {\r\n      sub.checked = false;\r\n      this.SearchService.treeValues.categorySet.has(sub.id)? this.SearchService.treeValues.categorySet.delete(sub.id) : null\r\n\r\n      // this.modifyIdSet(sub)\r\n      if(sub.categories && sub.categories.length > 0){\r\n        this.uncheckAll(sub.categories)\r\n      }\r\n    });\r\n  }\r\n\r\n  /**initiates allChildrenChecked() */\r\n  initiateChildrenChecker(categories: CategoryNode[]): boolean{\r\n    var state = true\r\n    state = this.allChildrenChecked(categories, state)\r\n    return state\r\n  }\r\n\r\n  /** returns false if at least one child is unchecked*/\r\n  allChildrenChecked(categories: CategoryNode[], state: boolean): boolean {\r\n    categories.forEach((child: CategoryNode) => {\r\n      if (!state) {\r\n        return state\r\n      }\r\n      else if (state && child.categories && child.categories.length > 0) {\r\n        state = this.allChildrenChecked(child.categories, state)\r\n      }\r\n      else if (!child.checked) {\r\n        state = false\r\n        return state\r\n      }\r\n    })\r\n    return state\r\n  }\r\n\r\n  /**initiates atLeastOneChecked() */\r\n  initiateAtLeastOneChecked(categories: CategoryNode[]): boolean {\r\n    var state = false;\r\n    state = this.atLeastOneChecked(categories, state);\r\n    return state\r\n  }\r\n\r\n  /** returns true if at least one child is checked*/\r\n  atLeastOneChecked(categories: CategoryNode[], state: boolean): boolean {\r\n    categories.forEach((child: CategoryNode) => {\r\n      if (state) {\r\n        return state\r\n      }\r\n      else if (!state && child.categories && child.categories.length > 0) {\r\n        state = this.atLeastOneChecked(child.categories, state)\r\n      }\r\n      else if (child.checked) {\r\n        state = true\r\n        return state\r\n      }\r\n    })\r\n    return state\r\n  }\r\n\r\n  /**accepts leaf node, and either removes it or adds it to the array */\r\n  modifyIdSet(node: CategoryNode) {\r\n    if (node.checked && !(this.categoriesSet).has(node.id) && node.categories.length === 0) {\r\n      this.categoriesSet.add(node.id)\r\n    } else if (!node.checked && this.categoriesSet.has(node.id) && node.categories.length === 0) {\r\n      this.categoriesSet.delete(node.id)\r\n    }\r\n    this.SearchService.updateCategorySet(this.categoriesSet)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.categoriesTree_sub.unsubscribe()\r\n    this.categoriesSet_sub.unsubscribe()\r\n  }\r\n}\r\n","<mat-tree [dataSource]=\"categoriesTree\" [treeControl]=\"treeControl\"  class=\"example-tree\" style=\"padding-left: 1em;\">\r\n  <!-- This is the tree node template for leaf nodes -->\r\n  <mat-tree-node *matTreeNodeDef=\"let node\" matTreeNodeToggle>\r\n    <li class=\"mat-tree-node\">\r\n      <!-- use a disabled button to provide padding for tree leaf -->\r\n      <button mat-icon-button disabled></button>\r\n      <mat-checkbox\r\n      [checked]=\"node.checked\"\r\n      (change)=\"clickedActive(node)\">\r\n        {{node.name}}\r\n      </mat-checkbox>\r\n    </li>\r\n  </mat-tree-node>\r\n  <!-- This is the tree node template for expandable nodes -->\r\n  <mat-nested-tree-node *matTreeNodeDef=\"let node; when: hasChild\">\r\n    <li>\r\n      <div class=\"mat-tree-node\">\r\n        <button mat-icon-button matTreeNodeToggle\r\n                [attr.aria-label]=\"'toggle ' + node.name\">\r\n          <mat-icon class=\"mat-icon-rtl-mirror\">\r\n            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_left'}}\r\n          </mat-icon>\r\n        </button>\r\n        <mat-checkbox class=\"example-margin\"\r\n          [checked]=\"initiateChildrenChecker(node.categories)\"\r\n          [indeterminate]=\"!initiateChildrenChecker(node.categories) && initiateAtLeastOneChecked(node.categories)\"\r\n          (change)=\"setAll(node)\">\r\n            {{node.name}}\r\n        </mat-checkbox>\r\n      </div>\r\n      <ul [class.example-tree-invisible]=\"!treeControl.isExpanded(node)\">\r\n        <ng-container matTreeNodeOutlet></ng-container>\r\n      </ul>\r\n    </li>\r\n  </mat-nested-tree-node>\r\n</mat-tree>\r\n","import { MapService } from 'src/app/services/map/map.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { Router } from '@angular/router';\r\nimport { Component, Output, EventEmitter, ViewChild, ElementRef, Renderer2, OnDestroy, OnInit } from '@angular/core';\r\nimport { SessionService } from 'src/app/services/session.service'\r\n\r\n\r\n@Component({\r\n    selector: 'header-navbar',\r\n    templateUrl:'./header.component.html',\r\n    styleUrls: ['./header.component.scss'],\r\n})\r\n\r\nexport class HeaderComponent implements OnDestroy, OnInit{\r\n    sessionState: any\r\n    username: string\r\n    link: string = 'data:image/jpeg;base64,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'\r\n\r\n    private sessionState_sub: Subscription\r\n\r\n    constructor(private sessionService:SessionService) {\r\n        this.sessionState_sub = this.sessionService.sessionState.subscribe((username) => {\r\n            this.sessionState = username\r\n            if (username) {\r\n                this.username = sessionStorage.getItem('username')\r\n            } else {\r\n                this.username = ''\r\n            }\r\n        })\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.sessionState_sub.unsubscribe()\r\n    }\r\n}\r\n","<!-- <div id='header' class=\"row-12\"> -->\r\n  <!-- search bar -->\r\n  <!-- <form (submit)='onSubmit(search.value)' class='form col-auto'>\r\n    <input #search (keyup)='onKey(search.value)' class='form-control' type='search' placeholder='Search' aria-label='Search' autocomplete='off'>\r\n    <i class=\"fas fa-search\" aria-hidden=\"true\"></i> -->\r\n      <!-- search results -->\r\n    <!-- <div class=\"container-fluid\" id='searchResultsContainer'>\r\n      <div *ngIf='loading' class=\"spinner-border text-primary\" style=\"margin-left: 50%;\"></div>\r\n      <div #searchResults></div>\r\n    </div>\r\n  </form> -->\r\n\r\n  <!-- login/register widgets -->\r\n  <!-- <div\r\n    class='col-auto'\r\n    *ngIf='!sessionState'>\r\n      <a class='btn btn-primary' routerLink='register' style=\"margin-right: 1%;\">Register<span class='sr-only'></span></a>\r\n      <a class='btn btn-primary' routerLink='login'>Login<span class='sr-only'></span></a>\r\n  </div> -->\r\n\r\n  <!-- dropdown menu -->\r\n  <!-- <div *ngIf='sessionState' id='icon' class=\"dropdown\">\r\n    <img class='img-thumbnail dropdown-toggle' data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" [src]=\"link\" alt=\"Settings\">\r\n    <div class=\"dropdown-menu dropdown-menu-right \">\r\n      <button class=\"btn btn-secondary dropdown-item\" routerLink='profile'>Profile</button>\r\n      <app-logout class=\"dropdown-item\"></app-logout>\r\n    </div>\r\n  </div>\r\n</div> -->\r\n\r\n  <!-- logo -->\r\n  <!-- <li class=\"nav-item\">\r\n    <img src=\"assets/img/travelnet.jpg\" id=\"logo\" alt=\"asd\" (click)=\"onReload()\">\r\n  </li> -->\r\n\r\n  <!-- search bar -->\r\n  <!-- <li class=\"nav-item\">\r\n    <form (submit)='onSubmit(search.value)' class='form'>\r\n      <mat-form-field class=\"input\">\r\n        <input matInput #search (keyup)='onKey(search.value)' class='form-control input' type='search' placeholder='Search' aria-label='Search' autocomplete='off'>\r\n        <i fas fa-search aria-hidden=\"true\"></i>\r\n        <mat-label>Search</mat-label>\r\n      </mat-form-field>\r\n    </form>\r\n  </li> -->\r\n\r\n  <!-- Register and Login buttons -->\r\n    <!-- <a class='btn btn-primary' routerLink='register' style=\"margin-right: 1%;\">Register<span class='sr-only'></span></a> -->\r\n    <a *ngIf='!sessionState' class='btn btn-primary' routerLink='login'>Login<span class='sr-only'></span></a>\r\n\r\n  <div *ngIf='sessionState' class=\"nav-item topIcon\">\r\n    <div  id='icon' class=\"dropdown\">\r\n      <img class='img-thumbnail dropdown-toggle' data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" [src]=\"link\" alt=\"Settings\">\r\n      <div class=\"dropdown-menu dropdown-menu-right \">\r\n        <button class=\"btn btn-secondary dropdown-item\" routerLink='profile'>Profile</button>\r\n        <app-logout class=\"dropdown-item\"></app-logout>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n","import { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { SessionService } from 'src/app/services/session.service'\r\nimport { NgbModalConfig, NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    templateUrl:'./login.component.html',\r\n    styleUrls: ['./loginpage.component.scss'],\r\n})\r\n\r\nexport class loginComponent {\r\n    modal = null\r\n    constructor(private modalService:NgbModal ) {\r\n      this.openModal()\r\n    }\r\n\r\n    openModal() {\r\n        this.modal = this.modalService.open(LoginComponent,{})\r\n    }\r\n}\r\n\r\n\r\n@Component({\r\n    selector: 'app-loginpage',\r\n    templateUrl:'./loginpage.component.html',\r\n    styleUrls: ['./loginpage.component.scss'],\r\n    providers:[NgbModalConfig, NgbModal]\r\n})\r\n\r\nexport class LoginComponent implements OnInit, OnDestroy{\r\n    loginForm: FormGroup\r\n    login_err: boolean = false\r\n    hide: boolean = true\r\n\r\n    constructor(private SocketService: SocketService,\r\n                private sessionService: SessionService,\r\n                private modalService:NgbModal,\r\n                private router:Router) { }\r\n\r\n    ngOnInit() {\r\n        this.loginForm = new FormGroup({\r\n            'username': new FormControl(null, Validators.required),\r\n            'password': new FormControl(null, Validators.required)\r\n        })\r\n    }\r\n\r\n    //handle user login with socket\r\n    loginClicked() {\r\n        if (!(sessionStorage.getItem('username'))) {\r\n            let credentials = {\r\n                email: this.loginForm.get('username').value,\r\n                password: this.loginForm.get('password').value\r\n            }\r\n            this.login_err = false\r\n            this.SocketService.emit('login', credentials, (data: any) => {\r\n                if (data.err || data === '') {\r\n                    console.log(data.err)\r\n                    this.login_err = true\r\n                    this.loginForm.get('password').reset()\r\n                }\r\n                else if (data.res) {\r\n                    sessionStorage.setItem('username', data.res)\r\n                    localStorage.setItem('token', data.token)\r\n                    localStorage.setItem('username', data.res)\r\n                    this.modalService.dismissAll()\r\n                    this.sessionService.session()\r\n                    this.router.navigate(['/home'])\r\n                } else {\r\n                    console.log('login fini')\r\n                }\r\n            })\r\n        } else {\r\n            sessionStorage.removeItem('username')\r\n            this.loginClicked()\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(){\r\n        // this.router.navigate(['/'])\r\n    }\r\n}\r\n","<!-- <div>\r\n  <form class='modal-body' [formGroup]='loginForm' (ngSubmit)='loginClicked()'>\r\n    <h1 class='jumbotron modal-title'>Login</h1>\r\n    <br *ngIf='!login_err'>\r\n      <span *ngIf='login_err' class=\"help-block text-danger\">username or password incorrect</span>\r\n      <div class='form-group' >\r\n        <label for='exampleInputEmail1'>Email or Username</label>\r\n        <input type='text' class='form-control' formControlName='username'>\r\n      </div>\r\n      <div class='form-group'>\r\n        <label for='exampleInputPassword1'>Password</label>\r\n        <input type='password' class='form-control' formControlName='password'>\r\n        <small class=\"help-block text-danger\" *ngIf=\"!loginForm.get('password').valid && loginForm.get('password').touched\">Please enter something</small>\r\n      </div>\r\n      <button type='submit' class='btn btn-primary'>Login</button>\r\n  </form>\r\n</div> -->\r\n<br>\r\n<br>\r\n\r\n<mat-card class=\"\">\r\n  <mat-card-content class=\"\">\r\n    <form\r\n    ngbAutofocus\r\n    class='modal-body'\r\n    id='form'\r\n    (ngSubmit)=\"loginClicked()\"\r\n    [formGroup]='loginForm'>\r\n      <h1 class='modal-title'>Login</h1>\r\n      <hr>\r\n      <!-- username -->\r\n      <mat-form-field appearance=\"outline\" class='form-group' id=\"username\">\r\n        <mat-label for='username'>Email or Username</mat-label>\r\n        <input matInput formControlName='username' placeholder=\"Enter a Username\" autocomplete=\"off\">\r\n        <small class=\"help-block text-danger\" *ngIf=\"!loginForm.get('username').valid && loginForm.get('username').touched\">Please enter something</small>\r\n      </mat-form-field>\r\n        \r\n      <!-- password -->\r\n      <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='password'>Password</mat-label>\r\n        <input matInput\r\n          placeholder=\"Enter a password\"\r\n          formControlName='password'\r\n          [type]=\"hide ? 'password' : 'text'\"\r\n          autocomplete=\"false\">\r\n        <small class=\"help-block text-danger\" *ngIf=\"!loginForm.get('password').valid && loginForm.get('password').touched\">Please enter something</small>\r\n        <button mat-button\r\n          type='button'\r\n          mat-icon-button matSuffix (click)=\"hide = !hide\" [attr.aria-label]=\"'Hide password'\" [attr.aria-pressed]=\"hide\">\r\n          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n      <button mat-raised-button type='submit' id='submit' color='primary' aria-required='true'>Login</button>\r\n    </form>\r\n  </mat-card-content>\r\n</mat-card>\r\n<hr class=\"hr-text\" data-content=\"OR\">\r\n<mat-card class=\"\">\r\n  <mat-card-content class=\"row\" style=\"padding-left: 25%; padding-right: 25%;\">\r\n    <button mat-raised-button color='primary' class=\"col\" routerLink='/register'>Register</button>\r\n  </mat-card-content>\r\n</mat-card>","import { Subscription } from 'rxjs';\r\nimport { Router } from '@angular/router';\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { SessionService } from 'src/app/services/session.service'\r\n\r\n@Component({\r\n  selector: 'app-logout',\r\n  templateUrl: './logout.component.html',\r\n  styleUrls: ['./logout.component.scss']\r\n})\r\nexport class LogoutComponent implements OnInit, OnDestroy {\r\n  sessionState:boolean\r\n  private sessionSate_sub: Subscription\r\n\r\n  constructor(private SessionService:SessionService,\r\n              private SocketService: SocketService,\r\n              private router: Router) {\r\n    this.sessionSate_sub = this.SessionService.sessionState.subscribe((x: boolean) => this.sessionState = x)\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  // logout user\r\n  logout() {\r\n    if (sessionStorage.getItem('username')) {\r\n      this.SocketService.emit('logout', sessionStorage.getItem('username'), (data) => {\r\n        if (data.res) {\r\n          this.SessionService.session()\r\n        }\r\n      })\r\n    }\r\n    localStorage.removeItem('username')\r\n    sessionStorage.clear()\r\n    window.location.reload()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sessionSate_sub.unsubscribe()\r\n  }\r\n}\r\n","<button mat-flat-button (click)='logout()' *ngIf='sessionState' color='warn' routerLink=\"/\">\r\n    Logout\r\n</button>","import { Component, OnInit } from '@angular/core';\r\nimport { SessionService } from 'src/app/services/session.service';\r\nimport { MapService } from 'src/app/services/map/map.service'\r\n@Component({\r\n  selector: 'app-map',\r\n  templateUrl: './map.component.html',\r\n  styleUrls: ['./map.component.scss']\r\n})\r\n\r\nexport class MapComponent implements OnInit {\r\n\r\n  session: boolean = this.sessionService.session()\r\n\r\n  constructor(private sessionService:SessionService, private map:MapService) {}\r\n\r\n  ngOnInit(){\r\n    this.map.buildMap()\r\n  }\r\n\r\n}\r\n","<link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet'/>\r\n<div id='mapbox'></div>\r\n","import { HttpService } from 'src/app/services/http.service';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-myaccount',\r\n  templateUrl: './myaccount.component.html',\r\n  styleUrls: ['./myaccount.component.scss']\r\n})\r\nexport class MyaccountComponent implements OnInit {\r\n\r\n  form: FormGroup\r\n  imagePreview: string\r\n\r\n  constructor(private httpService: HttpService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      picture: new FormControl(null, [])\r\n    })\r\n  }\r\n\r\n  onImagePicked(event: Event) {\r\n    const file = (event.target as HTMLInputElement).files[0]\r\n    this.form.patchValue({picture: file})\r\n    this.form.get('picture').updateValueAndValidity\r\n    const reader = new FileReader()\r\n    reader.onload = () => {\r\n      this.imagePreview = reader.result.toString()\r\n    }\r\n    console.log(this.form)\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  onSubmit() {\r\n    let imageData = new FormData()\r\n    imageData.append('username', sessionStorage.getItem('username'))\r\n    imageData.append('image', this.form.value.picture, 'profilepicture')\r\n    this.httpService.post('/user/profilepicture', imageData).then((res) => {\r\n      console.log('profile picture updated succesfully!')\r\n      // window.location.reload()\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n}\r\n","<!-- profile picture -->\r\n<h1>Change Profile Picture</h1>\r\n\r\n<form [formGroup]='form' (ngSubmit)='onSubmit()'>\r\n    <button type='button' class='btn btn-danger button' (click)='filePicker.click()'>Upload Profile Picture</button>\r\n    <input type='file' style='visibility: hidden;' accept='image/*' (change)='onImagePicked($event)' #filePicker>\r\n    <div class='image-preview' *ngIf=\"imagePreview && imagePreview !== '' && this.form.get('picture').valid\">\r\n        <img [src]='imagePreview' alt=\"Invalid File\">\r\n        <button type='submit' class='btn btn-primary'>Change Profile Picture</button>\r\n    </div>\r\n</form>\r\n\r\n<!-- preferences -->\r\n<h1>Change Preferences</h1>\r\n\r\n<!-- places already visited -->\r\n\r\n<!-- interesting places -->\r\n\r\n<!-- post stuff -->","import { AbstractControl } from \"@angular/forms\";\r\nimport { Observable, Observer, of } from \"rxjs\";\r\n\r\nexport const mimeType = (\r\n  control: AbstractControl\r\n): Promise<{ [key: string]: any }> | Observable<{ [key: string]: any }> => {\r\n  if (typeof(control.value) === 'string') {\r\n    return of(null);\r\n  }\r\n  const file = control.value as File;\r\n  const fileReader = new FileReader();\r\n  const frObs = Observable.create(\r\n    (observer: Observer<{ [key: string]: any }>) => {\r\n      fileReader.addEventListener(\"loadend\", () => {\r\n        const arr = new Uint8Array(<ArrayBuffer>fileReader.result).subarray(0, 4);\r\n        let header = \"\";\r\n        let isValid = false;\r\n        for (let i = 0; i < arr.length; i++) {\r\n          header += arr[i].toString(16);\r\n        }\r\n        switch (header) {\r\n          case \"89504e47\":\r\n            isValid = true;\r\n            break;\r\n          case \"ffd8ffe0\":\r\n          case \"ffd8ffe1\":\r\n          case \"ffd8ffe2\":\r\n          case \"ffd8ffe3\":\r\n          case \"ffd8ffe8\":\r\n            isValid = true;\r\n            break;\r\n          default:\r\n            isValid = false; // Or you can use the blob.type as fallback\r\n            break;\r\n        }\r\n        if (isValid) {\r\n          observer.next(null);\r\n        } else {\r\n          observer.next({ invalidMimeType: true });\r\n        }\r\n        observer.complete();\r\n      });\r\n      fileReader.readAsArrayBuffer(file);\r\n    }\r\n  );\r\n  return frObs;\r\n};\r\n","import { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { mimeType } from \"./mime-type.validator\";\r\nimport { HttpService } from 'src/app/services/http.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { SessionService } from 'src/app/services/session.service';\r\nimport { Router } from '@angular/router';\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.scss']\r\n})\r\nexport class ProfileComponent implements OnInit, OnDestroy {\r\n  User: {\r\n    username: string,\r\n    password: string,\r\n    email: string,\r\n    firstname: string,\r\n    lastname: string,\r\n    birthdate: string,\r\n    gender: any,\r\n  }\r\n  propreties: string[]\r\n  values: string[]\r\n  form: FormGroup\r\n  imagePreview: string\r\n\r\n  constructor(private socketService: SocketService,\r\n              private sessionService: SessionService,\r\n              private Router: Router,\r\n              private httpService: HttpService) { }\r\n\r\n  ngOnInit(): void {\r\n    // http request to get user info\r\n    this.getProfile()\r\n    this.form = new FormGroup({\r\n      image: new FormControl(null, {\r\n        validators: [Validators.required],\r\n        asyncValidators: [mimeType]\r\n      })\r\n    });\r\n  }\r\n\r\n  getProfile() {\r\n    this.httpService.get('/user', null).then((res: any) => {\r\n      this.User = (({username, password, email, firstname, lastname, birthdate, gender}) =>\r\n          ({username, password, email, firstname, lastname, birthdate, gender}))(res.user[0])\r\n\r\n      // transform object in arrays\r\n      this.propreties = Object.keys(this.User)\r\n      this.values = Object.values(this.User)\r\n\r\n      // takeout username\r\n      this.propreties.shift()\r\n      this.values.shift()\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  // delete account function\r\n  onDelete() {\r\n      this.Router.navigate(['./'])\r\n      this.socketService.emit('deleteUser', sessionStorage.getItem('username'), (data) => {\r\n      if (data.err) {\r\n        console.log(data.err)\r\n      } else {\r\n        console.log(data.res)\r\n        localStorage.removeItem('username')\r\n        sessionStorage.removeItem('username')\r\n        this.sessionService.session()\r\n        window.location.reload()\r\n        console.log('session cleared')\r\n      }\r\n    })\r\n  }\r\n\r\n  // when profile pic is selected\r\n  onImagePicked(event: Event) {\r\n    const file = (event.target as HTMLInputElement).files[0];\r\n    this.form.patchValue({ image: file });\r\n    this.form.get(\"image\").updateValueAndValidity();\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      this.imagePreview = reader.result as string;\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  // on image picked\r\n  onSubmit() {\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n    let formData = new FormData()\r\n    formData.append('image', this.form.value.image)\r\n    formData.append('username', localStorage.getItem('username'))\r\n    this.httpService.post('/user/profilepicture', formData\r\n    ).then((res: any) => {\r\n    \r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n    this.form.reset();\r\n  }\r\n\r\n  // back button that destroys component\r\n  onExit() {\r\n    this.ngOnDestroy()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.Router.navigate(['./'])\r\n  }\r\n}\r\n","<div id=\"main\" class=\"container-fluid rounded\">\r\n\r\n    <!-- after fetching data -->\r\n    <div *ngIf='User'>\r\n\r\n        <!-- generate propreties -->\r\n        <app-proprety *ngFor='let proprety of propreties; let i = index' [username]='User.username' [proprety]='proprety' [propretyValue]='values[i]'></app-proprety>\r\n        <div id='delete'>\r\n            <button class='btn btn-danger' (click)='onDelete()'>Delete Account</button>\r\n        </div>\r\n\r\n        <!-- profile picture -->\r\n        <form [formGroup]=\"form\" (submit)=\"onSubmit()\">\r\n            <div>\r\n                <button class='btn btn-danger' type=\"button\" (click)=\"filePicker.click()\">Change Profile Picture</button>\r\n                <input class='hidden' type=\"file\" #filePicker (change)=\"onImagePicked($event)\">\r\n            </div>\r\n        \r\n            <div class=\"image-preview\" *ngIf=\"imagePreview !== '' && imagePreview && form.get('image').valid\">\r\n                <img [src]=\"imagePreview\" [alt]=\"form.value.title\">\r\n            </div>\r\n\r\n            <button *ngIf=\"form.valid\" class='btn btn-danger' color=\"accent\" type=\"submit\">Submit</button>\r\n        </form>\r\n\r\n    <!-- no wifi or user not found -->\r\n    <div *ngIf='!User'>\r\n        Error: User not found\r\n    </div>\r\n    <button class=\"btn btn-secondary\" (click)='onExit()'>Back</button>   \r\n</div>","import { HttpService } from 'src/app/services/http.service';\r\nimport { NgbDateStruct } from '@ng-bootstrap/ng-bootstrap';\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Component, OnInit, Input } from '@angular/core';\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-proprety',\r\n  templateUrl: './proprety.component.html',\r\n  styleUrls: ['./proprety.component.scss']\r\n})\r\nexport class PropretyComponent implements OnInit {\r\n  @Input() username: string\r\n  @Input() proprety: string\r\n  @Input() propretyValue: string\r\n  changeForm: FormGroup\r\n  changing: boolean\r\n  invalid: boolean\r\n  invalidOld: boolean\r\n  model: NgbDateStruct;\r\n\r\n  constructor(\r\n    private httpService: HttpService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // special forms that need validations\r\n    if (this.proprety == 'email') {\r\n      this.changeForm = new FormGroup({\r\n        'newPropretyValue': new FormControl(this.propretyValue, [Validators.required, Validators.email])\r\n      })\r\n    } else if (this.proprety == 'password') {\r\n      this.propretyValue = \"••••••••\"\r\n      this.changeForm = new FormGroup({\r\n        'oldPassword': new FormControl(null, [Validators.required, Validators.minLength(5)]),\r\n        'newPropretyValue': new FormControl(null, [Validators.required, Validators.minLength(5)])\r\n      })\r\n    } else { // everything else\r\n      if (this.proprety == 'birthdate') {\r\n        this.propretyValue = this.propretyValue.slice(0, 10)\r\n      }\r\n      this.changeForm = new FormGroup({\r\n        'newPropretyValue': new FormControl(this.propretyValue, [Validators.required])\r\n      })\r\n    }\r\n  }\r\n\r\n  // changing between form and h3 with old proprety\r\n  onClick(): void {\r\n    this.changing = !this.changing\r\n  }\r\n\r\n  // once a new proprety is submitted\r\n  onSubmit(): void {\r\n    const requestedChange = {\r\n      username: this.username,\r\n      proprety: this.proprety,\r\n      newProprety: this.changeForm.get('newPropretyValue').value\r\n    }\r\n\r\n    if (this.changeForm.valid) {\r\n      this.invalid = false\r\n\r\n      if (this.proprety == 'password') {\r\n        // implement old password\r\n      } else if (this.proprety == 'birthdate') {\r\n        requestedChange.newProprety = moment(requestedChange.newProprety)\r\n      }\r\n\r\n      this.httpService.patch('/user/edit', requestedChange).then((res) => {\r\n        console.log(res)\r\n        window.location.reload()\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n    } else {\r\n      this.invalid = true\r\n    }\r\n  }\r\n}\r\n","<div>\r\n    <!-- name and value -->\r\n    <h3 *ngIf='!changing'> \r\n        {{ proprety | titlecase }}\r\n        <br>\r\n        {{ propretyValue }}\r\n    </h3>\r\n\r\n    <!-- if user decides to change -->\r\n    <form *ngIf='changing' [formGroup]='changeForm' (ngSubmit)='onSubmit()'>\r\n        <div class='form-group'>\r\n\r\n            <!-- old password -->\r\n            <div *ngIf='proprety == \"password\"'>\r\n                <label for='newPropretyValue'>Old {{ proprety | titlecase }}</label>  \r\n                <input type='text' formControlName='oldPassword' class='form-control'>\r\n            </div>\r\n\r\n            <!-- new proprety space -->\r\n            <label for='newPropretyValue'>New {{ proprety | titlecase }}</label>            \r\n            <div *ngIf='invalid'>\r\n                Invalid {{ proprety | titlecase }}!\r\n                <br>\r\n            </div>\r\n\r\n            <!-- all but birthdate and gender -->\r\n            <input *ngIf='proprety != \"birthdate\" && proprety != \"gender\"' type='text' formControlName='newPropretyValue' class='form-control'>\r\n\r\n            <!-- birthdate -->\r\n            <div *ngIf='proprety == \"birthdate\"'>\r\n                <input [minDate]=\"{year: 1900, month: 1, day: 1}\" [maxDate]=\"{year: 2020, month: 1, day: 1}\"\r\n                placeholder=\"yyyy-mm-dd\" formControlName=\"newPropretyValue\" [(ngModel)]=\"model\" name=\"dp\" ngbDatepicker #d=\"ngbDatepicker\">\r\n                <div class=\"input-group-append\">\r\n                    <button id='calendar' class=\"btn btn-outline-secondary calendar\"\r\n                    (click)=\"d.toggle()\" type=\"button\"><mat-icon>calendar_today</mat-icon></button>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- gender -->\r\n            <div *ngIf='proprety == \"gender\"'> \r\n                <mat-radio-group aria-label=\"Select an option\" class=\"row\"\r\n                formControlName=\"newPropretyValue\">\r\n                  <mat-radio-button value=\"Male\" class='col-4'>Male</mat-radio-button>\r\n                  <mat-radio-button value=\"Female\" class='col-4'>Female</mat-radio-button>\r\n                  <mat-radio-button value=\"Other\" class='col-4'>Other</mat-radio-button>\r\n                </mat-radio-group>\r\n            </div>\r\n            \r\n        </div>        \r\n        <button *ngIf='changing' class='btn btn-danger' type='submit'>Confirm</button>\r\n        <button *ngIf='changing' class='btn btn-light' id='cancel' (click)='onClick()'>Cancel</button> \r\n    </form>\r\n    <button *ngIf='!changing' class='btn btn-danger' (click)='onClick()'>Change {{ proprety | titlecase }}</button>\r\n</div>","import { HttpService } from './../../../services/http.service';\r\nimport { CitySearchComponent } from './../../city-search/city-search.component';\r\nimport { clickLocationCoordinates } from './../../../services/map/map.service';\r\nimport { environment } from './../../../../environments/environment.prod';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { MapService } from 'src/app/services/map/map.service';\r\nimport { getCode } from 'country-list';\r\nimport { Subscription } from 'rxjs';\r\nimport { Component, OnInit, Input, OnDestroy, AfterContentInit, ViewChild, AfterViewInit } from '@angular/core';\r\nimport * as CountriesList from 'countries-list'\r\n\r\nexport interface VisitedPlaces {\r\n  code: string;\r\n  continent: string;\r\n  places: string[];\r\n}\r\n\r\n@Component({\r\n  selector: 'app-country-selector',\r\n  templateUrl: './country-selector.component.html',\r\n  styleUrls: ['./country-selector.component.scss']\r\n})\r\nexport class CountrySelectorComponent implements OnInit, AfterContentInit, AfterViewInit ,OnDestroy {\r\n  @ViewChild('citySearch') citySearchComponent: CitySearchComponent\r\n  citySearchAppearance: string = 'standard'\r\n  citySearchPlaceholder: string = 'Search for Locations'\r\n  optionClick_sub: Subscription\r\n  @Input() progressUpdate: any\r\n  @Input() target: number\r\n  allPlaces: VisitedPlaces[] = [\r\n    {code:'NA', continent: 'North-America', places: []},\r\n    {code:'SA', continent: 'South-America', places: []},\r\n    {code:'EU', continent: 'Europe', places: []},\r\n    {code:'AS', continent: 'Asia', places: []},\r\n    {code:'AF', continent: 'Africa', places: []},\r\n    {code:'OC', continent: 'Oceania', places: []},\r\n    {code:'AN', continent: 'Antarctica', places: []}\r\n  ];\r\n  removable: boolean = true\r\n\r\n  private clickLocation_sub: Subscription\r\n\r\n  constructor(private MapService: MapService,\r\n              private Http: HttpClient,\r\n              private HttpService: HttpService) { \r\n  }\r\n  \r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    // display city where user clicked\r\n    this.clickLocation_sub = this.MapService.clickLocation.subscribe((x: clickLocationCoordinates) => {\r\n      if (this.progressUpdate && this.target == this.progressUpdate) {\r\n        if (x.lng != null) {\r\n          this.Http.get<any>(\r\n            environment.mapbox.geocoding.concat('/', x.lng.toString(), ',', x.lat.toString(), '.json'),\r\n            {\r\n              headers: {},\r\n              params: {\r\n                access_token: environment.mapbox.token,\r\n                types: 'country,region,district,place',\r\n                language: environment.language\r\n              }\r\n            }\r\n          )\r\n          .subscribe((response) => {\r\n            if (response.features[0]) {\r\n              let placeName = response.features[0].place_name\r\n              let chip = this.citySearchComponent.removeMiddle(placeName, 1)\r\n              this.getKey(response.features[response.features.length -1].properties.short_code.toUpperCase())\r\n                .then((value: any) => {\r\n                  let continent = value.continent\r\n                  this.allPlaces.forEach((element) => {\r\n                    if (element.code === continent && !element.places.includes(chip)) {\r\n                      element.places.push(chip)\r\n                      this.MapService.showMarker(this.target, {\r\n                        name: chip,\r\n                        content:{\r\n                          geometry:{\r\n                            coordinates: response.query\r\n                          }\r\n                        }\r\n                      })\r\n                    }\r\n                  })\r\n                  \r\n                })\r\n                .catch((err) => {\r\n                  console.log(err)\r\n                })\r\n            }\r\n          }, (err) => {\r\n            console.log(err)\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.optionClick_sub = this.citySearchComponent.clickedOption.subscribe(content => {\r\n      if (content) {\r\n        // displays chip and clear search input\r\n        let chip = this.citySearchComponent.removeMiddle(content.name, 1)\r\n        let countryName = ((content.name.split(', '))[content.name.split(', ').length - 1]).substring(1)\r\n        let code = getCode(countryName)\r\n        this.getKey(code)\r\n        .then((value: any) => {\r\n          let continent = value.continent\r\n          this.allPlaces.forEach((element) => {\r\n            if (element.code === continent && !element.places.includes(chip)) {\r\n              element.places.push(chip)\r\n            }\r\n          })\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        \r\n        // show location on map\r\n        content.name = this.citySearchComponent.removeMiddle(content.name, 1)    \r\n        this.MapService.showMarker(this.target, content)\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  // search Countrieslist countries \r\n  getKey(code: string) {\r\n    return new Promise((resolve, reject) => {\r\n      let value = Object.keys(CountriesList.countries).find(key => {\r\n        if(key === code) {\r\n          resolve(CountriesList.countries[key])\r\n        }\r\n      })\r\n      if(!value) {\r\n        reject('not found')\r\n      }\r\n    })\r\n  }\r\n\r\n  // remove chips\r\n  onRemove(place: string, index: number) {\r\n    let placesArr = this.allPlaces[index].places\r\n    placesArr.splice(placesArr.indexOf(place), 1)\r\n    this.MapService.removeMarker(place, this.target)\r\n  }\r\n\r\n  onClear() {\r\n    this.allPlaces.forEach(element => {\r\n      element.places = []\r\n    })\r\n    this.MapService.removeMarker('', null, true)\r\n  }\r\n\r\n  // send data to backend\r\n  onSumbit(): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.HttpService.patch('/user/edit', {\r\n        username: localStorage.getItem('username').toString(),\r\n        proprety: (this.target == 1)? 'history':'wishlist',\r\n        newProprety: this.allPlaces\r\n      })\r\n      .then((response) => {\r\n        resolve(response)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.clickLocation_sub.unsubscribe()\r\n    this.optionClick_sub.unsubscribe()\r\n  }\r\n}","<form class=\"example-form row align-items-center\">\r\n    <!-- city search autocomplete -->\r\n    <app-city-search #citySearch class=\"col\" [appearance]='citySearchAppearance' [placeholder]='citySearchPlaceholder' [clearOnSearch]='true' [getFakeCenterCity]='false'></app-city-search>\r\n    <div class=\"col-auto mr-auto\">\r\n        <span><strong>Or</strong></span>\r\n    </div>\r\n    <div class=\"col-auto mr-auto\">\r\n        <button mat-button><span>Click on the map</span></button>\r\n    </div>\r\n</form>\r\n<!-- <img *ngIf='!citySearchComponent.myControl.dirty' src=\"https://img.icons8.com/bubbles/100/000000/geography.png\" class=\"img\" style=\"margin-left: 25%;\">\r\n<small *ngIf='!citySearchComponent.myControl.dirty'><a href=\"https://icons8.com/icon/113643/geography\">Geography icon by Icons8</a></small> -->\r\n\r\n<div id=\"mainList\" #mainlist [hidden]=\"Place.places.length == 0? true:false\" *ngFor=\"let Place of allPlaces, let i = index\">\r\n    <button mat-raised-button  class=\"mat-chip-list-stacked\" aria-orientation=\"vertical\">\r\n        {{ Place.continent }}\r\n    </button>\r\n    <br>\r\n    <mat-chip-list class=\"\">\r\n        <mat-chip *ngFor='let place of allPlaces[i].places'\r\n            (removed)=onRemove(place,i)>\r\n            {{ place }}\r\n            <mat-icon matChipRemove class=\"\" *ngIf='removable'>cancel</mat-icon>\r\n        </mat-chip>\r\n    </mat-chip-list>\r\n    <hr>\r\n</div>\r\n<br>\r\n<div class=\"row-auto\">\r\n    <button mat-button *ngIf='true' color='warn' (click)='onClear()'>Clear</button>\r\n</div>\r\n<br>\r\n","import { CountrySelectorComponent } from './country-selector/country-selector.component';\r\nimport { SessionService } from 'src/app/services/session.service';\r\nimport { Subscription, BehaviorSubject, Observable } from 'rxjs';\r\nimport { MapService, clickLocationCoordinates } from './../../services/map/map.service';\r\nimport { Router } from '@angular/router';\r\nimport { RegistrationComponent } from './registrationpage/registrationpage.component';\r\nimport { Component, OnInit, AfterViewInit, ViewChild, OnDestroy, Output, Input } from '@angular/core';\r\nimport { FormBuilder, Validators, FormGroup, FormControl } from '@angular/forms';\r\nimport { MatHorizontalStepper } from '@angular/material/stepper';\r\n\r\nexport interface progressUpdateData {\r\n  target: number\r\n  coordinates: number[]\r\n}\r\n\r\n@Component({\r\n  selector: 'app-registration-process',\r\n  templateUrl: './registration-process.component.html',\r\n  styleUrls: ['./registration-process.component.scss']\r\n})\r\nexport class RegistrationProcessComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  private sessionState_sub: Subscription\r\n  sessionState: Boolean\r\n\r\n  firstFormGroup: FormGroup;\r\n  secondFormGroup: FormGroup;\r\n  @ViewChild('stepper') stepper: MatHorizontalStepper\r\n  @ViewChild('step1') step1: any\r\n  @ViewChild('selector1') selector1: CountrySelectorComponent\r\n  @ViewChild('selector2') selector2: CountrySelectorComponent\r\n\r\n  editable: Boolean = true\r\n  @ViewChild('registration') registration: RegistrationComponent\r\n\r\n  private _progressUpdate: BehaviorSubject<progressUpdateData> = new BehaviorSubject({\r\n    target: 0,\r\n    coordinates: []\r\n  })\r\n  @ViewChild('progressUpdate') progressUpdate: Observable<progressUpdateData> = this._progressUpdate.asObservable()\r\n\r\n  private clickLocation: Subscription\r\n  private stepper_sub: Subscription\r\n\r\n  isSaving: boolean = false\r\n  isDone: boolean = false\r\n\r\n  constructor(private _formBuilder: FormBuilder,\r\n              private MapService: MapService,\r\n              private SessionService: SessionService,\r\n              private Router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    this.firstFormGroup = this._formBuilder.group({\r\n      firstCtrl: ['']\r\n    });\r\n    this.secondFormGroup = this._formBuilder.group({\r\n      secondCtrl: ''\r\n    });\r\n    this.sessionState_sub = this.SessionService.sessionState.subscribe((state: Boolean) => {\r\n      this.sessionState = state\r\n    })\r\n  } \r\n\r\n  ngAfterViewInit() {\r\n    this.step1.stepControl = this.registration.registrationForm\r\n    this.clickLocation = this.MapService.clickLocation.subscribe((x: clickLocationCoordinates) => {\r\n      this._progressUpdate.next({\r\n        target: this.stepper.selectedIndex,\r\n        coordinates: [x.lng, x.lat]\r\n      })\r\n    })\r\n    this.stepper_sub = this.stepper.selectionChange.subscribe(x => {\r\n      console.log(this.stepper.steps) \r\n      if (x.selectedIndex != 0) {\r\n        this.editable = false\r\n        this.isDone = false\r\n        this.MapService.showMarker(x.selectedIndex)\r\n      }\r\n    })\r\n  }\r\n\r\n  registerClicked() {\r\n    this.registration.onSubmit()\r\n  }\r\n\r\n  onClear(target: number) {\r\n\r\n  }\r\n\r\n  savePreferences() {\r\n    this.isSaving = true\r\n    Promise.all([this.selector1.onSumbit(), this.selector2.onSumbit()])\r\n    .then((responses: any[]) => {\r\n      this.isDone = true\r\n      setTimeout(() => {\r\n        this.Router.navigate(['/home'])\r\n      }, 500)\r\n    })\r\n    .catch((err: any[]) => {\r\n      alert(err[0])\r\n      // window.location.reload()\r\n    })\r\n    .finally(() => {\r\n      this.isSaving = false\r\n    }) \r\n    \r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // this.Router.navigate(['/'])\r\n    this.clickLocation.unsubscribe()\r\n    this.stepper_sub.unsubscribe()\r\n    this.sessionState_sub.unsubscribe()\r\n  }\r\n\r\n}\r\n","<mat-horizontal-stepper linear #stepper>\r\n  <ng-template matStepperIcon=\"edit\">\r\n    <mat-icon>check</mat-icon>\r\n  </ng-template>\r\n\r\n  <mat-step #step1 label='Create Your Account' [editable]='editable' [optional]=\"true\">\r\n    <app-registrationpage #registration [stepper]='stepper'></app-registrationpage>\r\n  </mat-step>\r\n  <mat-step label=\"Where You've Been\" [optional]=\"true\">\r\n    <br>\r\n    <mat-label ><h2>Tell Us About The Places You Enjoyed Most</h2></mat-label>\r\n    <app-country-selector #selector1 [progressUpdate]='stepper.selectedIndex' [target]='1'></app-country-selector>\r\n    <div>\r\n      <button mat-stroked-button matStepperNext color='primary'>Next</button>\r\n    </div>\r\n  </mat-step>\r\n  <mat-step label='Where Do You Want To Go' [optional]=\"true\">\r\n    <br>\r\n    <mat-label ><h2>Tell Us About Places You Would Like to Discover</h2></mat-label>\r\n    <app-country-selector #selector2 [progressUpdate]='stepper.selectedIndex' [target]='2'></app-country-selector>\r\n    <div>\r\n      <button mat-button matStepperPrevious>Back</button>\r\n      <button mat-raised-button color='primary' (click)='savePreferences()'>Save</button>\r\n      <button mat-button *ngIf='isSaving'><mat-spinner diameter='32'></mat-spinner></button>\r\n      <button mat-button *ngIf='isDone' class=\"text-success\">Preferences Saved!</button>\r\n    </div>\r\n  </mat-step>\r\n</mat-horizontal-stepper>","import { Subscription } from 'rxjs';\r\nimport { MatHorizontalStepper } from '@angular/material/stepper';\r\nimport { SocketService } from '../../../services/chatsystem/socket.service';\r\nimport { Component, OnDestroy, OnInit, Input, ViewChild} from '@angular/core';\r\nimport { SessionService } from '../../../services/session.service'\r\nimport { NgbModalConfig, NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Router } from '@angular/router';\r\nimport { FormControl, FormGroup, Validators, Form } from '@angular/forms'\r\nimport * as moment from 'moment';\r\nimport { FoursquareService } from 'src/app/services/map/foursquare.service';\r\n\r\n\r\n@Component({\r\n    selector: 'app-registrationpage',\r\n    templateUrl:'./registrationpage.component.html',\r\n    styleUrls: ['./registrationpage.component.scss'],\r\n    providers:[NgbModalConfig,NgbModal,]\r\n})\r\n\r\nexport class RegistrationComponent implements OnDestroy, OnInit {\r\n  private sessionState_sub: Subscription\r\n  sessionState: Boolean\r\n  registrationForm:FormGroup;\r\n  hide = true;\r\n  hide1 = true;\r\n  currentTime: string = new Date().toISOString()\r\n  @Input() stepper: MatHorizontalStepper\r\n\r\n  constructor(private SocketService: SocketService,\r\n              private sessionService:SessionService,\r\n              private modalService:NgbModal,\r\n              private router:Router,\r\n              private FoursquareService: FoursquareService\r\n              ) {}\r\n\r\n  ngOnInit(){\r\n    this.registrationForm = new FormGroup({\r\n      // 'name': new FormGroup({\r\n      //   'firstName': new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(50)]),\r\n      //   'lastName': new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(50)]),\r\n      // },),\r\n      'passwords': new FormGroup({\r\n        'password': new FormControl(null, [Validators.required, Validators.minLength(5), Validators.maxLength(15)]),\r\n        'confirmPassword': new FormControl(null, [Validators.required, Validators.minLength(5), Validators.maxLength(15)]),\r\n      }, this.checkPasswordsMatch.bind(this)),\r\n      'birthDate':new FormControl(null, [Validators.required]),\r\n      'username': new FormControl(null,[ Validators.required, Validators.minLength(2), Validators.maxLength(15)], this.forbiddenUsernames.bind(this)),\r\n      'email': new FormControl(null, [Validators.required, Validators.email]),\r\n      'checkbox': new FormControl(null, [Validators.required]),\r\n      'gender':new FormControl(null, [Validators.required]),\r\n    })\r\n\r\n    this.sessionState_sub = this.sessionService.sessionState.subscribe((state: boolean) => {\r\n      this.sessionState = state\r\n    })\r\n  }\r\n\r\n  checkUsernameUse() {\r\n    if (this.registrationForm.get('username').errors && this.registrationForm.get('username').dirty){\r\n      if (this.registrationForm.get('username').errors['forbiddenUsername']){\r\n        return true\r\n      }\r\n    } else {\r\n        return false\r\n      }\r\n  }\r\n\r\n  checkUsernameLength() {\r\n    if (this.registrationForm.get('username').errors && this.registrationForm.get('username').dirty){\r\n      if (this.registrationForm.get('username').errors['maxlength'] || this.registrationForm.get('username').errors['minlength']){\r\n        return true\r\n      }\r\n    } else {\r\n        return false\r\n      }\r\n  }\r\n\r\n  checkPasswordValidity: boolean = false\r\n  checkPasswordsMatch(control: FormControl) {\r\n    if (this.registrationForm) {\r\n      let pass: string = control.get('password').value\r\n      let confirm: string = control.get('confirmPassword').value\r\n      if (pass === confirm) {\r\n        this.checkPasswordValidity = false\r\n        return\r\n      } else {\r\n        if(control.get('confirmPassword').dirty) {\r\n          this.checkPasswordValidity = true\r\n        }\r\n        return\r\n      }\r\n    }\r\n  }\r\n\r\n  checkPasswordLength() {\r\n    if (this.registrationForm.get('passwords.password').errors && this.registrationForm.get('passwords.password').dirty){\r\n      if (this.registrationForm.get('passwords.password').errors['maxlength'] || this.registrationForm.get('passwords.password').errors['minlength']){\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  checkEmailValidity() {\r\n    if (this.registrationForm.get('email').errors && this.registrationForm.get('email').dirty){\r\n      if (this.registrationForm.get('email').errors['email']){\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  // check if user is older than 13\r\n  isOld(){\r\n    let birth = this.registrationForm.get('birthDate').value\r\n    let now = moment(this.currentTime)\r\n    let difference = now.diff(birth, 'years')\r\n    if (difference < 13){\r\n      return false\r\n    }\r\n    else{\r\n      return true\r\n    }\r\n  }\r\n\r\n  forbiddenUsernames(control: FormControl): Promise<any> {\r\n    return new Promise<any>((resolve, reject) => {\r\n      this.SocketService.emit('searchUser', [control.value], (res) => {\r\n        if (res.res) {\r\n          resolve({'forbiddenUsername': true});\r\n        } else {\r\n          resolve(null)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  onSubmit()  {\r\n    // check age\r\n    if (this.isOld()) {\r\n      // check form validity && if logged in\r\n      if (this.registrationForm.valid && !(sessionStorage.getItem('username'))) {\r\n        let data = {\r\n          // firstName:this.registrationForm.get('name.firstName').value,\r\n          // lastName:this.registrationForm.get('name.lastName').value,\r\n          email:this.registrationForm.get('email').value,\r\n          username:this.registrationForm.get('username').value,\r\n          password:this.registrationForm.get('passwords.password').value,\r\n          gender:this.registrationForm.get('gender').value,\r\n          birthdate:this.registrationForm.get('birthDate').value\r\n        }\r\n        this.SocketService.emit('createUser',data, (res) => {\r\n          // error in backend\r\n          if (res.err) {\r\n            alert(`an error occured ${res.err}`)\r\n          }\r\n          // successfull\r\n          else if (res.user) {\r\n            sessionStorage.setItem('username', res.user.username)\r\n            localStorage.setItem('token', res.token)\r\n            localStorage.setItem('username', res.user.username)\r\n            this.sessionService.session()\r\n            this.modalService.dismissAll()\r\n            this.stepper.next()\r\n            console.log(`user created: ${sessionStorage.getItem('username')}`)\r\n          }\r\n        })\r\n      }\r\n    }\r\n    // not old enough\r\n    else {\r\n      alert('You must be at least 13 years old to register')\r\n      window.location.reload()\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(){\r\n    // this.router.navigate(['/'])\r\n    this.sessionState_sub.unsubscribe()\r\n  }\r\n\r\n}\r\n\r\n","<form\r\n  ngbAutofocus\r\n  class='modal-body'\r\n  id='form'\r\n  (ngSubmit)=\"onSubmit()\"\r\n  #form\r\n  [formGroup]='registrationForm'\r\n  *ngIf='!sessionState'>\r\n    <h1 class='modal-title'>Registration</h1>\r\n    <hr>\r\n    <!-- Name -->\r\n    <!-- <div formGroupName='name' class=\"row\"> -->\r\n      <!-- first Name -->\r\n      <!-- <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='First Name'>First Name</mat-label>\r\n        <input matInput\r\n        placeholder=\"Enter your first name\"\r\n        formControlName='firstName'>\r\n      </mat-form-field> -->\r\n      <!-- Last Name -->\r\n      <!-- <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='password'>Last Name</mat-label>\r\n        <input matInput\r\n        placeholder=\"Enter your last name\"\r\n        formControlName='lastName'>\r\n      </mat-form-field>\r\n    </div> -->\r\n    <!-- username -->\r\n    <mat-form-field appearance=\"outline\" class='form-group' id=\"username\">\r\n      <mat-label for='username'>Username</mat-label>\r\n      <input matInput formControlName='username' placeholder=\"Enter a Username\" autocomplete=\"off\">\r\n      <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkUsernameUse()\">This username is already in use.</small>\r\n      <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkUsernameLength()\">Your username must be between 2 and 15 characters long.</small>\r\n    </mat-form-field>\r\n    <!-- password confirmation -->\r\n    <div formGroupName='passwords' class=\"row\">\r\n      <!-- password -->\r\n      <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='password'>Password</mat-label>\r\n        <input matInput\r\n        placeholder=\"Enter a password\"\r\n        formControlName='password'\r\n        [type]=\"hide ? 'password' : 'text'\">\r\n        <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkPasswordLength()\">your password should be between 5-15 characters</small>\r\n        <button mat-button\r\n        type='button'\r\n        mat-icon-button matSuffix (click)=\"hide = !hide\" [attr.aria-label]=\"'Hide password'\" [attr.aria-pressed]=\"hide\">\r\n        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n      <!-- confirm password -->\r\n      <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='password'>Confirm your password</mat-label>\r\n        <input matInput\r\n        placeholder=\"confirm your password\"\r\n        formControlName='confirmPassword'\r\n        [type]=\"hide1 ? 'password' : 'text'\">\r\n        <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkPasswordValidity\">your passwords do not match</small>\r\n        <button\r\n        type=\"button\"\r\n        mat-icon-button matSuffix (click)=\"hide1 = !hide1\" [attr.aria-label]=\"'Hide password'\"\r\n        [attr.aria-pressed]=\"hide1\">\r\n        <mat-icon>{{hide1 ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n    </div>\r\n    <!-- email -->\r\n    <mat-form-field appearance=\"outline\" class='form-group' id=\"email\">\r\n      <mat-label for='email'>Email Address</mat-label>\r\n      <input matInput\r\n      formControlName='email'\r\n      placeholder='Enter a valid Email'>\r\n      <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkEmailValidity()\">Please enter a valid email</small>\r\n      <small id='emailHelp' class='form-text text-muted'>We'll never share your email with anyone else.</small>\r\n    </mat-form-field>\r\n    <!-- Birthdate -->\r\n    <div class=\"form-inline\">\r\n      <div class=\"form-group\">\r\n        <div class=\"input-group\">\r\n          <mat-form-field id=\"calendar\" appearance=\"outline\">\r\n            <mat-label>Birthdate</mat-label>\r\n            <input\r\n              matInput\r\n              [matDatepicker]=\"picker\"\r\n              [max]='currentTime'\r\n              formControlName=\"birthDate\"\r\n              class=\"align-self-center\">\r\n            <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n            <mat-datepicker #picker startView=\"multi-year\"></mat-datepicker>\r\n          </mat-form-field>\r\n          <!-- <input\r\n            id=\"calendar\"\r\n            class=\"form-control\"\r\n            [minDate]=\"{year: 1900, month: 1, day: 1}\" [maxDate]=\"{year: 2020, month: 1, day: 1}\"\r\n            placeholder=\"yyyy-mm-dd\"\r\n            formControlName=\"birthDate\"\r\n            name=\"dp\"\r\n            [(ngModel)]=\"model\"\r\n            ngbDatepicker\r\n            #d=\"ngbDatepicker\">\r\n          <button\r\n            id='calendarSelector'\r\n            class=\"btn btn-outline-secondary calendar input-group-append rounded-0\"\r\n            (click)=\"d.toggle()\" type=\"button\">\r\n            <mat-icon>calendar_today</mat-icon>\r\n          </button> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- Gender -->\r\n    <mat-label class=\"\">Gender</mat-label>\r\n    <mat-radio-group aria-label=\"Select an option\" class=\"row\"\r\n    formControlName=\"gender\">\r\n      <mat-radio-button value=\"Male\" class='col-4'>Male</mat-radio-button>\r\n      <mat-radio-button value=\"Female\" class='col-4'>Female</mat-radio-button>\r\n      <mat-radio-button value=\"Other\" class='col-4'>Other</mat-radio-button>\r\n    </mat-radio-group>\r\n    <br>\r\n    <!-- checkbox -->\r\n    <div>\r\n      <mat-checkbox class='form-group'\r\n        formControlName='checkbox'>\r\n        <label class='form-check-label' for='terms'>I have read and understand the terms & conditions of this agreement</label>\r\n      </mat-checkbox>\r\n    </div>\r\n    <br>\r\n    <!-- submit -->\r\n    <button mat-raised-button color='primary'>Register</button>\r\n  </form>\r\n  <div class=\"container-fluid\" style=\"height: 100%; padding: 1%; background-color: white;\" *ngIf='sessionState'>\r\n    <h2>You are already registered</h2>\r\n  </div>\r\n","import { environment } from './../../../environments/environment.dev';\r\nimport { OpenstreetmapService } from './../../services/map/openstreetmap.service';\r\nimport { SearchParams } from './../../models/searchParams';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { CustomCoordinates } from './../../models/coordinates';\r\nimport { CitySearchComponent } from './../city-search/city-search.component';\r\nimport { CategoryNode, foursquareCategory } from './../../models/CategoryNode.model';\r\nimport { Component, OnInit, OnDestroy, ViewChild, ElementRef, AfterViewInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { MapService } from 'src/app/services/map/map.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { tab } from 'src/app/models/tab.model';\r\nimport { Subscription } from 'rxjs';\r\nimport { geocodeResponseModel } from 'src/app/models/geocodeResp.model';\r\n\r\n@Component({\r\n  selector: 'app-search-bar',\r\n  templateUrl: './search-bar.component.html',\r\n  styleUrls: ['./search-bar.component.scss']\r\n})\r\nexport class SearchBarComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Output() submission = new EventEmitter<void>()\r\n  @Input() isChild: boolean = false\r\n  loading: boolean = false\r\n\r\n  foursquareCategory_sub: Subscription\r\n  categories: foursquareCategory[]\r\n  openTab: tab\r\n  fakeCenter: CustomCoordinates = null\r\n  private returnTab_sub: Subscription\r\n  private fakeCenter_sub: Subscription\r\n  @ViewChild('searchResultsContainer') div: ElementRef\r\n\r\n  // forms\r\n  searchBarForm: FormGroup\r\n\r\n  // filters\r\n  @ViewChild(CitySearchComponent) CitySearchComponent: CitySearchComponent\r\n  private clickedOption_sub: Subscription\r\n  clickedOption: geocodeResponseModel = null\r\n  filterOptions: {\r\n    0: string,\r\n    1: string,\r\n    2: string\r\n  } = {\r\n    0: '...',\r\n    1: 'Venues',\r\n    2: 'Users'\r\n  }\r\n  defaultFilter: string = '0'\r\n  defaultCategory: string = 'All'\r\n\r\n  constructor(\r\n    private MapService: MapService,\r\n    private router : Router,\r\n    private SearchService: SearchService,\r\n    private ActivatedRoute: ActivatedRoute,\r\n    private OpenstreetmapService: OpenstreetmapService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.searchBarForm = new FormGroup({\r\n      'venueName': new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(25)])\r\n    })\r\n\r\n\r\n    this.returnTab_sub = this.SearchService.searchTab.subscribe((tab) => {\r\n      this.openTab = tab\r\n    })\r\n\r\n    this.fakeCenter_sub = this.MapService.fakeCenter.subscribe((coord: CustomCoordinates) => {\r\n      this.fakeCenter = coord? coord : environment.montrealCoord\r\n    })\r\n\r\n    this.foursquareCategory_sub = this.SearchService.categoryTree.subscribe((cats: foursquareCategory[]) => {\r\n      this.categories = cats\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // for coordinates of city search\r\n    this.clickedOption_sub = this.CitySearchComponent.clickedOption.subscribe((city: geocodeResponseModel) => {\r\n      if (city) {\r\n        this.clickedOption = city\r\n      } else {\r\n        this.clickedOption = null\r\n      }\r\n    })\r\n    \r\n    this.ActivatedRoute.queryParams.subscribe((params: SearchParams) => {\r\n      // set param to montreal if no location param \r\n      if (!params.lng) {\r\n        // this.CitySearchComponent.myControl.patchValue('Montreal, Canada')\r\n        this.CitySearchComponent._clickedOptionLocal = new geocodeResponseModel(this.CitySearchComponent.myControl.value, [this.fakeCenter.lng, this.fakeCenter.lat]) \r\n      } else {\r\n        this.OpenstreetmapService.reverseSearch(params.lng, params.lat).subscribe((response: {[key: string]: any}) => {\r\n          if (response.features[0]) {\r\n            this.CitySearchComponent.myControl.patchValue(response.features[0].properties.address.city + ',' + response.features[0].properties.address.country)\r\n          }\r\n        })\r\n      }\r\n      if (params.query) {\r\n        this.searchBarForm.get('venueName').setValue(params.query)\r\n        \r\n        // if url contains query \r\n        if (!this.SearchService.currentSearch) {\r\n          this.loading = true\r\n          let coord: CustomCoordinates = params.lng? new CustomCoordinates(params.lng, params.lat) : this.MapService.getCenter() \r\n          this.SearchService.enterSearch(params.query, this.SearchService.mainSearch(params.query, coord), coord)\r\n          .finally(()=>{\r\n            this.loading = false\r\n          })      \r\n        }\r\n      }\r\n    })\r\n\r\n    if (this.SearchService.currentSearch) {\r\n      this.searchBarForm.get('venueName').setValue(this.SearchService.currentSearch.query)\r\n      if (this.SearchService.currentSearch.lat) {\r\n        // get name of searched city\r\n      }\r\n    }\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.searchBarForm.valid && this.CitySearchComponent.myControl.valid) {\r\n      this.submission.emit()\r\n      let coord: CustomCoordinates = this.clickedOption? new CustomCoordinates(this.clickedOption.content.geometry.coordinates[0], this.clickedOption.content.geometry.coordinates[1]) : this.fakeCenter\r\n      this.SearchService.enterSearch(this.searchBarForm.get('venueName').value, this.SearchService.mainSearch(this.searchBarForm.get('venueName').value, coord), coord)\r\n      .then(() => {\r\n        this.SearchService.currentSearch = {query: this.searchBarForm.get('venueName').value, lng: coord.lng, lat: coord.lat, category: this.defaultCategory}\r\n        this.router.navigate(['search'], {queryParams: {query: this.searchBarForm.get('venueName').value, lng: coord.lng, lat: coord.lat, category: this.defaultCategory}})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })      \r\n    }\r\n  }\r\n\r\n  /** all|venues|users */\r\n  changeFilter(filter:{response:string, value:string}) {\r\n    this.defaultFilter = filter.value\r\n    this.defaultCategory = this.filterOptions[filter.value]\r\n    this.SearchService.changeFilter(parseInt(filter.value))\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.returnTab_sub.unsubscribe()\r\n    this.fakeCenter_sub.unsubscribe()\r\n    this.clickedOption_sub.unsubscribe()\r\n  }\r\n}\r\n","<!-- search bar -->\r\n<form [formGroup]='searchBarForm' (ngSubmit)='onSubmit()' class='container-fluid row' style=\"min-width: 100%; background-color: rgba(255, 255, 255, 0.9); margin: 0; padding: 0;\">\r\n  <span class=\"col row mr-auto\" style=\"padding-top: 1em; margin: 0; padding-right: 0; padding-left: 0;\">\r\n    <!-- venue name -->\r\n    <mat-form-field class=\"col align-self-center\" style=\"padding-left: 0.5em; padding-right: 0;\" appearance=\"outline\">\r\n      <mat-label>Search for {{defaultCategory === 'All'? '...' : defaultCategory}}</mat-label>\r\n      <input matInput\r\n        type=\"text\"\r\n        placeholder='Ex: restaurant'\r\n        aria-label='Search'\r\n        autocomplete='off'\r\n        formControlName='venueName'>\r\n      <button mat-button *ngIf=\"searchBarForm.get('venueName').value != ''\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"searchBarForm.get('venueName').setValue('')\" type='button'>\r\n        <mat-icon>close</mat-icon>  \r\n      </button>\r\n      <i fas fa-search aria-hidden=\"true\"></i>\r\n    </mat-form-field>\r\n    &nbsp;\r\n    &nbsp;\r\n    <p class=\"align-self-center\">in</p>\r\n    &nbsp;\r\n    &nbsp;\r\n    <!-- venue location -->\r\n    <app-city-search appearance='outline' placeholder='Region' [clearOnSearch]='false' [getFakeCenterCity]='true' class=\"col align-self-center\" style=\"min-width: 200px; padding-right: 0.5em; padding-left: 0;\"></app-city-search>\r\n    <mat-divider vertical=\"true\" style=\"margin-bottom: 1em;\"></mat-divider>\r\n    <!-- filter user|venues -->\r\n    <mat-form-field class=\"col-auto align-self-center\" style=\"max-width: 125px; padding-left: 0.5em;\" *ngIf='!isChild'>\r\n      <mat-label>Filter</mat-label>\r\n      <mat-select [(ngModel)]='defaultFilter' [ngModelOptions]=\"{standalone: true}\" (selectionChange)='changeFilter($event)'>\r\n        <mat-option value='0'>All</mat-option>\r\n        <mat-option value='1'>Venues</mat-option>\r\n        <mat-option value='2'>Users</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n    <!-- filter categories -->\r\n    <mat-form-field class=\"col-auto align-self-center\" style=\"max-width: 125px; padding-left: 0.5em;\" appearance='outline' *ngIf='isChild'>\r\n      <mat-label>Category</mat-label>\r\n      <mat-select [(value)]='defaultCategory'>\r\n          <mat-option value='All'>All</mat-option>\r\n          <mat-option *ngFor='let category of categories' [value]='category.name'>{{category.name}}</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n    <!-- submit -->\r\n    <div class=\"col-auto\" style=\"padding-top: 1em;\">\r\n      <button mat-raised-button type='submit' class=\"align-self-center\" color='primary' matTooltip='select a city to search in or drag the area you want to search to the center of the visible map' matTooltipShowDelay='800'>\r\n        <mat-icon>search</mat-icon>\r\n      </button>        \r\n    </div>\r\n  </span> \r\n</form>\r\n\r\n<router-outlet *ngIf='!isChild'></router-outlet>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n\r\n\r\n@Component({\r\n  selector: 'app-search-posts',\r\n  templateUrl: './search-posts.component.html',\r\n  styleUrls: ['./search-posts.component.scss']\r\n})\r\nexport class SearchPostsComponent implements OnInit {\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private router : Router,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      input: new FormControl(null, {\r\n        validators: []\r\n      })\r\n    })\r\n  }\r\n  onSearchPost(){\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n    let input = this.form.get('input').value\r\n    if(input){\r\n    this.router.navigate(['/home',input])\r\n    }\r\n  }\r\n}\r\n","<form [formGroup]=\"form\" (submit)=\"onSearchPost()\">\r\n  <mat-form-field>\r\n    <input matInput type=\"text\" formControlName=\"input\" placeholder=\"search a post...\">\r\n  </mat-form-field>\r\n  <button mat-raised-button color=\"accent\" type=\"submit\">Search</button>\r\n</form>\r\n\r\n\r\n\r\n","import { FormControl, FormGroup } from '@angular/forms';\r\nimport { Component, OnInit, Input } from '@angular/core';\r\nimport { threadId } from 'worker_threads';\r\n\r\n@Component({\r\n  selector: 'app-share',\r\n  templateUrl: './share.component.html',\r\n  styleUrls: ['./share.component.scss']\r\n})\r\nexport class ShareComponent implements OnInit {\r\n  @Input() UrlLink: URL | string\r\n  shareForm: FormGroup = null\r\n  copied: boolean = false\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    this.shareForm = new FormGroup({\r\n     'urlLinkControl': new FormControl(null)\r\n\r\n    })\r\n    this.shareForm.get('urlLinkControl').patchValue(this.UrlLink? this.UrlLink : 'czi')\r\n  }\r\n\r\n  onCopyClick() {\r\n    this.copied = true\r\n  }\r\n\r\n}\r\n","<form [formGroup]='shareForm'>\r\n    <mat-form-field appearance='outline'>\r\n        <mat-label>Shareable Link</mat-label>\r\n        <input matInput formControlName='urlLinkControl' type=\"text\" readonly aria-readonly=\"true\">\r\n    </mat-form-field>  \r\n    <button mat-button type='button' [cdkCopyToClipboard]='shareForm.get(\"urlLinkControl\").value' (click)='onCopyClick()'>Copy</button>\r\n    &nbsp;\r\n    <small class=\"text-success\" *ngIf='copied'>Copied To Clipboard</small>\r\n</form>\r\n\r\n","import { interval as observableInterval } from 'rxjs';\r\nimport { takeWhile, scan, tap } from \"rxjs/operators\";\r\nimport { Component, OnInit, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-scroll-to-top',\r\n  templateUrl: './scroll-to-top.component.html',\r\n  styleUrls: ['./scroll-to-top.component.scss']\r\n})\r\nexport class ScrollToTopComponent implements OnInit {\r\n  @Input() el\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  scrollToTop() {\r\n    let duration = 500;\r\n    let interval = 40;\r\n    let move = this.el.scrollTop * interval / duration;\r\n    observableInterval(interval)\r\n    .pipe(\r\n      scan((acc, curr) => acc - move, this.el.scrollTop),\r\n      tap(position => this.el.scrollTop = position),\r\n      takeWhile(val => val > 0)\r\n    )\r\n    .subscribe();\r\n  }\r\n\r\n}\r\n","<button mat-raised-button (click)='scrollToTop()' color='primary'>    \r\n    <mat-icon>keyboard_arrow_up</mat-icon>\r\n</button>","import { SessionService } from 'src/app/services/session.service';\r\nimport { Router } from '@angular/router';\r\nimport { tab } from '../../models/tab.model';\r\nimport { ResizeEvent } from 'angular-resizable-element';\r\nimport { Subscription } from 'rxjs';\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service';\r\nimport { Component, OnInit, OnDestroy, ViewChild, AfterViewInit } from '@angular/core';\r\nimport { trigger, state, style, animate, transition, } from '@angular/animations'\r\nimport { MapService } from 'src/app/services/map/map.service';\r\n\r\n@Component({\r\n  selector: 'app-sidebar',\r\n  templateUrl: './sidebar.component.html',\r\n  styleUrls: ['./sidebar.component.scss'],\r\n})\r\nexport class SidebarComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  // about sidebar\r\n  private windowSub: Subscription\r\n  window: boolean = true\r\n  width: number = 0.4\r\n  Styles = {\r\n    'position': 'fixed',\r\n    'background-color': 'rgba(255,255,255,0.75)',\r\n    'min-width': '710px',\r\n    'top': '1%',\r\n    'left': '1%',\r\n    'height': '95%',\r\n    'max-height': '95%',\r\n    'overflow':'hidden',\r\n    'padding': '0',\r\n    'width': `${window.innerWidth >= 500? window.innerWidth*this.width : window.innerWidth}px`,\r\n  }\r\n  showFiller = true\r\n  @ViewChild('drawer') drawer\r\n\r\n  // about sidebar tabs\r\n  private openTabSub: Subscription\r\n  openTab: tab\r\n\r\n  tabs : any[] = ['home', 'mytrip', 'search']\r\n\r\n  selectedTab(): string {\r\n    if (this.Router.url.substr(0, 7) == '/search') {\r\n      return '/search'\r\n    } else {\r\n      return this.Router.url\r\n    }\r\n  }\r\n\r\n  constructor(private FriendlistService: FriendlistService,\r\n              private Router: Router,\r\n              private MapService: MapService,\r\n              private SessionService: SessionService\r\n              )\r\n  {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.windowSub = this.FriendlistService.windowSize.subscribe((windowWidth) => {\r\n      if (windowWidth <= this.drawer._width) {\r\n        if (windowWidth < 500 || window.innerWidth) {\r\n          this.window = false\r\n        } else {\r\n          this.Styles.width= `${windowWidth * 0.96}px`\r\n        }\r\n      } else {\r\n        this.window = true\r\n      }\r\n    })\r\n  }\r\n\r\n  validate(event: ResizeEvent) {\r\n    const MIN_DIMENSIONS_PX: number = 500;\r\n    const maxWidth: number = window.innerWidth * 0.96\r\n    if (\r\n      event.rectangle.width && // if defined\r\n      event.rectangle.height && // if defined\r\n      (event.rectangle.width < MIN_DIMENSIONS_PX ||\r\n      event.rectangle.width > maxWidth)\r\n    ) {\r\n      return false;\r\n    } else {\r\n      return true;      \r\n    }\r\n  }\r\n\r\n  onResizeEnd(event: {edges:any,rectangle:{bottom: number, height: number, left: number, right:number, scrollLeft: number, scrollTop: number, top: number, width: number}}): void {\r\n    this.Styles.width = `${event.rectangle.width}px`\r\n    this.SessionService.updateSidebarWidth(event.rectangle.width)\r\n    this.MapService.getFakeCenter()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.windowSub.unsubscribe()\r\n    this.openTabSub.unsubscribe()\r\n  }\r\n}\r\n\r\n","<!-- open sidebar button -->\r\n<div *ngIf='!window' class=\"example-sidenav-content bg-light\" id=\"openToggle\">\r\n    <button type=\"button\" mat-button (click)=\"drawer.toggle(); window = !window\">\r\n    Open Sidebar\r\n    </button>\r\n</div>\r\n\r\n<mat-drawer-container class='container-fluid border' autosize>\r\n    <mat-drawer\r\n        mwlResizable\r\n        [validateResize]='validate'\r\n        [enableGhostResize]=\"true\"\r\n        (resizeEnd)=\"onResizeEnd($event)\"\r\n        [opened]='window'\r\n        #drawer\r\n        mode=\"side\"\r\n        [ngStyle]='Styles'>\r\n\r\n        <!-- resize sidebar icon -->\r\n        <button\r\n            mwlResizeHandle\r\n            [resizeEdges]=\"{ bottom: false, right: true, top: false, left: false }\"\r\n            id=\"resize\"\r\n            class=\"btn border-left\">\r\n            <span>\r\n                <svg class=\"bi bi-grip-horizontal\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\r\n                </svg>\r\n            </span>\r\n        </button>\r\n\r\n        <!-- tabs menu -->\r\n        <div class=\"container row border-bottom\"\r\n            style=\"background-color: rgba(255, 255, 255, 1); padding-right: 1%; margin: 0; margin-right: 1%; min-width: 100%;\">\r\n            \r\n            <button mat-button *ngIf='selectedTab() != \"/home\"' class=\"nav-link col\" routerLink='home'>Home</button>\r\n            <button mat-raised-button *ngIf='selectedTab() == \"/home\"' class=\"nav-link col\" routerLink='home'>Home</button>\r\n\r\n            <button mat-button *ngIf='selectedTab() != \"/mytrip\"' class=\"nav-link col\" routerLink='mytrip'>My Trip</button>\r\n            <button mat-raised-button *ngIf='selectedTab() == \"/mytrip\"' class=\"nav-link col\" routerLink='mytrip'>My Trip</button>\r\n\r\n            <button mat-button *ngIf='selectedTab() != \"/search\"' class=\"nav-link col\" routerLink=\"search\">Search</button>\r\n            <button mat-raised-button *ngIf='selectedTab() == \"/search\"' class=\"nav-link col\" routerLink=\"search\">Search</button>\r\n\r\n            <!-- new tabs feature -->\r\n            <!-- <app-searchbutton\r\n                *ngFor='let item of openTabs, let i = index'\r\n                [searchTab]='item'>\r\n            </app-searchbutton>\r\n            <button mat-button class=\"nav-item col-1\" data-toggle=\"pill\" (click)='newTab()'>+</button>-->\r\n\r\n\r\n            <!-- hide sidebar -->\r\n            <button mat-button color='warn' id='closeToggle' class=\"close-nav nav-link\" type=\"button\" (click)=\"window = !window\">\r\n                <span>\r\n                    <svg class=\"bi bi-arrow-bar-left\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" d=\"M5.854 4.646a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L3.207 8l2.647-2.646a.5.5 0 0 0 0-.708z\"/>\r\n                        <path fill-rule=\"evenodd\" d=\"M10 8a.5.5 0 0 0-.5-.5H3a.5.5 0 0 0 0 1h6.5A.5.5 0 0 0 10 8zm2.5 6a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 1 0v11a.5.5 0 0 1-.5.5z\"/>\r\n                    </svg>\r\n                </span>\r\n            </button>\r\n        </div>\r\n\r\n        <!-- sidebar content -->\r\n        <div #oi class=\"container-fluid\" style=\"width: 98%; max-height: 95%; padding: 0; padding-top: 1%; padding-top: 0; margin-left: 0; margin-right: 0; overflow-y: auto;\">\r\n            <router-outlet style=\"height: 100%;\"></router-outlet>\r\n        </div>\r\n    </mat-drawer>\r\n</mat-drawer-container>\r\n\r\n\r\n","import { Router } from '@angular/router';\r\nimport { userModel } from 'src/app/models/user.model';\r\nimport { HttpService } from 'src/app/services/http.service';\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  user: userModel\r\n\r\n  constructor(private HttpService: HttpService, private Router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    // get user info\r\n    this.HttpService.get('/user', null).then((res: any) => {\r\n      this.user = res.user[0]\r\n    })\r\n  }\r\n\r\n  getProfile(username: string) {\r\n    this.Router.navigate(['/search/user/' + username])\r\n  }\r\n}\r\n","\r\n<div *ngIf=\"user\">\r\n        <p>Followers : {{user.followers.length}}</p>\r\n        <div *ngFor=\"let username of user.followers\">\r\n            <button mat-raised-button (click)=\"getProfile(username)\">\r\n                {{ username }}\r\n            </button>\r\n        </div>\r\n</div>\r\n<app-add-post></app-add-post>\r\n<app-display-posts></app-display-posts>\r\n","import { geocodeResponseModel } from './../../../../models/geocodeResp.model';\r\nimport { SearchBarComponent } from './../../../search-bar/search-bar.component';\r\nimport { CustomCoordinates } from './../../../../models/coordinates';\r\nimport { MapService } from './../../../../services/map/map.service';\r\nimport { CategoryNode, foursquareCategory } from './../../../../models/CategoryNode.model';\r\nimport { SearchService } from './../../../../services/search.service';\r\nimport { tripModel } from './../../../../models/trip.model';\r\nimport { TripService } from './../../../../services/trip.service';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { CitySearchComponent } from './../../../city-search/city-search.component';\r\nimport { Component, OnInit, ViewChild, AfterViewInit, OnDestroy, Inject } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-add-venue-popover',\r\n  templateUrl: './add-venue-popover.component.html',\r\n  styleUrls: ['./add-venue-popover.component.scss']\r\n})\r\nexport class AddVenuePopoverComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  // user data from tripService\r\n  allTrips: tripModel[] = []\r\n  private trips_sub: Subscription\r\n\r\n  // passed by mytrip\r\n  tripIndex: number\r\n  dayIndex: number\r\n  venueIndex: number|null\r\n\r\n  // foursquare venues categories\r\n  foursquareCategory_sub: Subscription\r\n  defaultCategory: string = 'All'\r\n  venueCategories: foursquareCategory[] = []\r\n\r\n  // for database venue search\r\n  @ViewChild(SearchBarComponent) SearchBarComponent: SearchBarComponent\r\n  searchVenueForm: FormGroup\r\n  mapCenter_sub: Subscription\r\n  searchUrlCoord: CustomCoordinates\r\n\r\n  // for custom add venue\r\n  @ViewChild('citySearch') CitySearchComponent: CitySearchComponent\r\n  private selectedOption_sub: Subscription\r\n  selectedOption: geocodeResponseModel\r\n  citySearchAppearance: string = 'outline'\r\n  citySearchPlaceholder: string = 'Search for a City'\r\n  customVenueForm: FormGroup\r\n  \r\n  // for component visual\r\n  isLoading: boolean = false\r\n  isLoaded: boolean\r\n  isErr: boolean = false\r\n\r\n  constructor(private SearchService: SearchService,\r\n              private TripService: TripService,\r\n              private MapService: MapService,\r\n              public dialogRef: MatDialogRef<AddVenuePopoverComponent>,\r\n              @Inject(MAT_DIALOG_DATA) public data: {\r\n                tripIndex: number\r\n                scheduleIndex: number\r\n                venueIndex: number|null\r\n                venueName: string\r\n                venuePrice: number\r\n                venueCity: string\r\n                venueAddress: string\r\n              }) {\r\n    this.tripIndex = data.tripIndex\r\n    this.dayIndex = data.scheduleIndex\r\n    this.venueIndex = data.venueIndex\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.isLoaded = false\r\n\r\n    // sets mat select venue category options \r\n    this.foursquareCategory_sub =  this.SearchService.categoryTree.subscribe((cats: foursquareCategory[]) => {\r\n      this.venueCategories = cats\r\n    })\r\n\r\n    // gets user trips from trip service\r\n    this.trips_sub = this.TripService.trips.subscribe((trips: tripModel[]) => {\r\n      this.allTrips = trips\r\n    })\r\n\r\n    // get map center from map service\r\n    this.mapCenter_sub = this.MapService.fakeCenter.subscribe((coord: CustomCoordinates) => {\r\n      this.searchUrlCoord = coord\r\n    })\r\n\r\n    this.searchVenueForm = new FormGroup({\r\n      'name': new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(25)])\r\n    })\r\n\r\n    this.customVenueForm = new FormGroup({\r\n      'name': new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(25)]),\r\n      'address': new FormControl(null),\r\n      'price': new FormControl(null),\r\n      'url': new FormControl(null)\r\n    })\r\n\r\n    // fill form if user is editing venue\r\n    if (this.venueIndex != null) {\r\n      this.customVenueForm.get('name').patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].name? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].name : '')\r\n      this.customVenueForm.get('address').patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].venueAddress? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].venueAddress : '')\r\n      this.customVenueForm.get('price').patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].price? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].price : 0)\r\n      this.customVenueForm.get('url').patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].url? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].url : '')\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // selected option from autosuggest\r\n    this.selectedOption_sub = this.CitySearchComponent.clickedOption.subscribe((location) => {\r\n      if (location) {\r\n        this.selectedOption = location\r\n        this.CitySearchComponent.myControl.patchValue(location.name)\r\n      }\r\n    })\r\n\r\n    // fill form if user is editing venue\r\n    if (this.venueIndex != null) {\r\n      this.CitySearchComponent.myControl.patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].venueCity? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].venueCity : '')\r\n    }\r\n  }\r\n\r\n  /** when user searches venues from foursquare */\r\n  onSubmitSearch() {\r\n    this.isLoading = true\r\n    if (this.SearchBarComponent.searchBarForm.valid) {\r\n      this.isLoading = false\r\n      this.dialogRef.close()\r\n    }\r\n    this.isLoading = false\r\n  }\r\n\r\n  /** update when user adds custom venue */\r\n  onSubmitCustom() {\r\n    if (this.customVenueForm.valid) {\r\n      let url: any = null\r\n      for(let category of this.venueCategories) {\r\n        if (category.name === this.defaultCategory) {\r\n          url = category.icon.prefix + '32' + category.icon.suffix\r\n          break\r\n        }\r\n      }        \r\n\r\n      // if edit venue\r\n      if (this.venueIndex != null) {\r\n        this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex] = {\r\n          name: this.customVenueForm.get('name').value,\r\n          venueCity: this.CitySearchComponent.myControl.value ? this.CitySearchComponent.removeMiddle(this.CitySearchComponent.myControl.value, 0) : '',\r\n          venueCoord: {lng: this.selectedOption.content.geometry.coordinates[0], lat: this.selectedOption.content.geometry.coordinates[1]},\r\n          venueAddress: this.customVenueForm.get('address').value? this.customVenueForm.get('address').value : '',\r\n          price: this.customVenueForm.get('price').value? this.customVenueForm.get('price').value : 0,\r\n          category: url? {name: this.defaultCategory, url: url} : null,\r\n          url: this.customVenueForm.get('url').value ? this.customVenueForm.get('url').value : '' \r\n        }\r\n      } else {\r\n        // if add venue\r\n        this.allTrips[this.tripIndex].schedule[this.dayIndex].venues.push({\r\n          name: this.customVenueForm.get('name').value,\r\n          venueCity: this.CitySearchComponent.myControl.value ? this.CitySearchComponent.removeMiddle(this.CitySearchComponent.myControl.value, 0) : '',\r\n          venueCoord: {lng: this.selectedOption.content.geometry.coordinates[0], lat: this.selectedOption.content.geometry.coordinates[1]},\r\n          venueAddress: this.customVenueForm.get('address').value? this.customVenueForm.get('address').value : '',\r\n          price: this.customVenueForm.get('price').value? this.customVenueForm.get('price').value : 0,\r\n          category: url? {name: this.defaultCategory, url: url} : null,\r\n          url: this.customVenueForm.get('url').value ? this.customVenueForm.get('url').value : '' \r\n        })\r\n      }\r\n      this.TripService.modifyBackend(this.allTrips)\r\n      .then((response) => {\r\n        this.TripService.updateLocal(this.allTrips)\r\n        setTimeout(() => {\r\n          this.dialogRef.close()\r\n        }, 500)\r\n      })\r\n      .catch((err) => {\r\n        this.isErr = true\r\n      })\r\n      .finally(() => {\r\n        this.isLoading = false\r\n        this.isLoaded = true\r\n      })\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.selectedOption_sub.unsubscribe()\r\n    this.trips_sub.unsubscribe()\r\n    this.foursquareCategory_sub.unsubscribe()\r\n    this.mapCenter_sub.unsubscribe()\r\n  }\r\n}\r\n","    <mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title>{{venueIndex != null? 'Edit' : 'Add'}} Venue for Day {{dayIndex + 1}}</mat-card-title>\r\n    </mat-card-header>\r\n    <br>\r\n    <mat-card-content>\r\n        <mat-tab-group dynamicHeight mat-align-tabs=\"center\">\r\n            <!-- Search Venue -->\r\n            <mat-tab id=\"theTab\" *ngIf='venueIndex === null'>\r\n                <!-- <form\r\n                    [formGroup]='searchVenueForm'\r\n                    (ngSubmit)='onSubmitSearch()'>\r\n                    <ng-template mat-tab-label>\r\n                        <label matTooltip=\"Search Venue in Database\" style=\"margin: 0;\">Search</label>\r\n                    </ng-template>\r\n                    <br>\r\n                    <mat-form-field appearance='outline' style=\"margin: 0; padding: 0;\">\r\n                        <mat-label>Search Venue</mat-label>\r\n                        <input formControlName='name' matInput type=\"text\" >\r\n                        <small class=\"text-danger\" *ngIf=\"!searchVenueForm.get('name').valid && searchVenueForm.get('name').touched\">name must be between 1 and 25 characters</small>\r\n                    </mat-form-field>\r\n                    &nbsp;\r\n                    <mat-form-field appearance='fill'>\r\n                        <mat-label>Category</mat-label>\r\n                        <mat-select [(value)]='defaultCategory'>\r\n                            <mat-option value='All'>All</mat-option>\r\n                            <mat-option *ngFor='let category of venueCategories' [value]='category.name'>{{category.name}}</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                    <br>\r\n                    <span class=\"row container-fluid\">\r\n                        <button mat-raised-button class=\"col-auto\" color='primary' [disabled]='isLoading'>Search</button>\r\n                        &nbsp;\r\n                        <mat-spinner *ngIf='isLoading' class=\"col-auto align-self-center\" diameter='30' color='primary'></mat-spinner>                        \r\n                    </span>\r\n                </form> -->\r\n                <form\r\n                    (ngSubmit)='onSubmitSearch()'\r\n                    class=\"container-fluid\" style=\"padding: 0;\">\r\n                    <ng-template mat-tab-label>\r\n                        <label matTooltip=\"Search Venue in Database\" style=\"margin: 0;\">Search</label>\r\n                    </ng-template>\r\n                    <br>\r\n                    <app-search-bar isChild='true' style=\"padding: 0; margin-left: 0; margin-right: 0; width: 100%;\" (submission)='onSubmitSearch()'></app-search-bar>\r\n                </form>\r\n            </mat-tab>\r\n            <!-- Custom Venue -->\r\n            <mat-tab>\r\n                <form \r\n                    #customForm\r\n                    [formGroup]='customVenueForm'\r\n                    (ngSubmit)='onSubmitCustom()'>\r\n                    <ng-template mat-tab-label >\r\n                        <label style=\"margin: 0;\">Custom</label>\r\n                        &nbsp;\r\n                        <mat-icon matTooltip=\"Add Custom Venue\">info</mat-icon>\r\n                    </ng-template>\r\n                    <br>\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Venue Name*</mat-label>\r\n                        <input matInput type=\"text\" autocomplete=\"off\" formControlName='name'>\r\n                        <small class=\"text-danger\" *ngIf=\"!customVenueForm.get('name').valid && customVenueForm.get('name').touched\">Name must be between 1 and 20 characters</small>\r\n                    </mat-form-field>\r\n                    &nbsp;\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Category</mat-label>\r\n                        <mat-select [(value)]='defaultCategory'>\r\n                            <mat-option value='All'>All</mat-option>\r\n                            <mat-option *ngFor='let category of venueCategories' [value]='category.name'>{{category.name}}</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                    <hr style=\"margin-top: 0;\">\r\n                    <app-city-search #citySearch [appearance]='citySearchAppearance' [placeholder]='citySearchPlaceholder'></app-city-search>\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Street Address</mat-label>\r\n                        <input matInput type='text' autocomplete=\"street-address\" formControlName='address'>\r\n                    </mat-form-field>\r\n                    <br>\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Price</mat-label>\r\n                        <input matInput type='number' formControlName='price'>\r\n                    </mat-form-field>\r\n                    &nbsp;\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Website Url</mat-label>\r\n                        <input matInput type='url' formControlName='url'>\r\n                    </mat-form-field>\r\n                    <span class=\"row container-fluid\">\r\n                    <button \r\n                        class=\"col-auto\"\r\n                        mat-raised-button\r\n                        matTooltip='add custom Venue'\r\n                        color='primary'\r\n                        [disabled]='isLoading'>\r\n                        Add\r\n                    </button>\r\n                    &nbsp;\r\n                    <mat-spinner *ngIf='isLoading' class=\"col-auto align-self-center\" diameter='30' color='primary'></mat-spinner>\r\n                    </span>\r\n                    &nbsp;\r\n                    <span>\r\n                        <small *ngIf='isLoaded && !isErr' class=\"text-success\">New Venue added Succesfully!</small>\r\n                    </span>\r\n                </form> \r\n            </mat-tab>\r\n        </mat-tab-group>\r\n    </mat-card-content>\r\n    <mat-card-actions>\r\n    </mat-card-actions>\r\n</mat-card>\r\n","import { environment } from './../../../../environments/environment.dev';\r\nimport { HttpService } from 'src/app/services/http.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { CustomCoordinates } from 'src/app/models/coordinates';\r\nimport { LngLatLike, LngLat } from 'mapbox-gl';\r\nimport { MapService } from 'src/app/services/map/map.service';\r\nimport { MatSort } from '@angular/material/sort';\r\nimport { AddVenuePopoverComponent } from './add-venue-popover/add-venue-popover.component';\r\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\r\nimport { SessionService } from 'src/app/services/session.service';\r\nimport { tripModel } from '../../../models/trip.model';\r\nimport { Subscription } from 'rxjs';\r\nimport { TripService } from './../../../services/trip.service';\r\nimport { TripmodalComponent } from 'src/app/components/tabs/mytrip/tripmodal/tripmodal.component';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport * as moment from 'moment'\r\nimport { MatAccordion } from '@angular/material/expansion';\r\nimport { MatTable, MatTableDataSource, MatTableModule } from '@angular/material/table';\r\nimport {CdkDragDrop, moveItemInArray, transferArrayItem} from '@angular/cdk/drag-drop';\r\nimport * as Mapboxgl from 'mapbox-gl'\r\nimport { last, sample } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-mytrip',\r\n  templateUrl: './mytrip.component.html',\r\n  styleUrls: ['./mytrip.component.scss']\r\n})\r\nexport class MytripComponent implements OnInit, OnDestroy {\r\n  private sessionState_sub: Subscription\r\n  sessionState: boolean\r\n  isLoading: boolean = false\r\n  isErr: boolean = false\r\n  isSuccess: boolean = false\r\n  sharedTrip: tripModel = null\r\n  sharingUrl: URL | string = null\r\n\r\n  // trip accordeon\r\n  @ViewChild(MatAccordion) TripAccordion: MatAccordion\r\n  // onTripAccClose() {\r\n  //   this.TripAccordion.closeAll()\r\n  // }\r\n  // onTripAccOpen() {\r\n  //   this.TripAccordion.openAll()\r\n  // }\r\n\r\n  // dataSource for mat table\r\n  @ViewChild(MatTable) table: MatTable<any>\r\n  @ViewChild(MatSort) sort: MatSort;\r\n  tableDataSource: MatTableDataSource<tripModel> = new MatTableDataSource([])\r\n\r\n  // data for add trip\r\n  name: string\r\n  start: any\r\n  end: any\r\n\r\n  // data for add venue\r\n  venueName: string\r\n  venuePrice: number\r\n  venueCity: string\r\n  venueAddress: string\r\n\r\n  displayedColumns= ['category', 'venueName', 'venueCity', 'venueAddress', 'price', 'url', 'index']\r\n\r\n  dialogRef: MatDialogRef<any>\r\n\r\n  // all trips of user\r\n  private _tripSub: Subscription\r\n  trips: tripModel[] = [] \r\n\r\n  // display day of date\r\n  displayDay(date: Date): string {\r\n    let d = new Date(date)\r\n    let weekday: string[] = new Array(7);\r\n    weekday[0] = \"Sun\";\r\n    weekday[1] = \"Mon\";\r\n    weekday[2] = \"Tue\";\r\n    weekday[3] = \"Wed\";\r\n    weekday[4] = \"Thu\";\r\n    weekday[5] = \"Fri\";\r\n    weekday[6] = \"Sat\";\r\n    let i = d.getDay()\r\n    return weekday[i]\r\n  }\r\n\r\n  // get price for a day w/ schedule obj\r\n  getDayPrice(obj: {[key: string]: any}): number {\r\n    let total: number = 0\r\n    if (obj) {\r\n      let venues: any[] = obj.venues? obj.venues : []\r\n      for (let x = 0; x < venues.length; x++) {\r\n        venues[x].price? total += venues[x].price : total += 0  \r\n      }\r\n    }\r\n    return total\r\n  }\r\n  \r\n  // use trip object to get price for all days\r\n  getTotalPrice(obj: tripModel): number {\r\n    let total: number = 0\r\n    if (obj.schedule) {\r\n      obj.schedule.forEach((element) => {\r\n        total += this.getDayPrice(element)\r\n      })\r\n    }\r\n    return total \r\n  }\r\n\r\n  // get venues for a day w/ schedule obj\r\n  getDayVenues(obj: {[key: string]: any}): number {\r\n    if (obj) {\r\n      let venues: any[] = obj.venues? obj.venues: []\r\n      return venues.length\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  // use trip object to get venues for all days\r\n  getTotalVenues(obj: tripModel): number {\r\n    let total: number = 0\r\n    if (obj.schedule) {\r\n      obj.schedule.forEach((element) => {\r\n        total += this.getDayVenues(element)\r\n      })\r\n    }\r\n    return total\r\n  }\r\n\r\n  getTripDistance(tripIndex: number|null, shared?: boolean): string {\r\n    let dist: number = 0\r\n    let lastCoord: LngLat = null\r\n    let obj = shared? this.sharedTrip : this.trips[tripIndex]\r\n    for (let x = 0; x < obj.schedule.length; x++) {\r\n      obj.schedule[x].venues.forEach((venue) => {\r\n        if (venue.venueCoord) {\r\n          if (lastCoord === null) {\r\n            lastCoord = new LngLat(venue.venueCoord.lng, venue.venueCoord.lat)\r\n          }\r\n          dist += lastCoord.distanceTo(venue.venueCoord)\r\n          lastCoord = new LngLat(venue.venueCoord.lng, venue.venueCoord.lat)\r\n        } \r\n      })\r\n    }\r\n    return (dist/1000).toFixed(2)\r\n  }\r\n\r\n  getDataSource(tripIndex: number, dayIndex: number, shared?: boolean): MatTableDataSource<any> {\r\n    let source = new MatTableDataSource<any>([])\r\n    let obj = shared? this.sharedTrip : this.trips[tripIndex]\r\n    if (obj.schedule) {\r\n      source.data = obj.schedule[dayIndex].venues\r\n      source.sort = this.sort\r\n      return source\r\n    } else {\r\n      return source\r\n    }\r\n  }\r\n\r\n  constructor(private MatDialog: MatDialog,\r\n              private TripService: TripService,\r\n              private SessionService: SessionService,\r\n              private MapService: MapService,\r\n              private ActivatedRoute: ActivatedRoute,\r\n              private HttpService: HttpService) { \r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // if from link\r\n    this.ActivatedRoute.queryParams.subscribe((params) => {\r\n      if (params.tripId) {\r\n        console.log(params)\r\n        this.HttpService.get('/trips', {\r\n          tripId: params.tripId\r\n        })\r\n        .then((res: {trip: tripModel}) => {\r\n          this.sharedTrip = res.trip\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        .finally(() => {\r\n\r\n        })\r\n      }\r\n    })\r\n\r\n    this.isLoading = true\r\n    this._tripSub = this.TripService.trips.subscribe((trips: tripModel[]) => {\r\n      this.trips = trips\r\n      this.isLoading = false\r\n      if (this.table) {\r\n        this.table.renderRows()\r\n      }\r\n    })\r\n    this.sessionState_sub = this.SessionService.sessionState.subscribe((state: boolean) => {\r\n      this.sessionState = state\r\n    })\r\n  }\r\n\r\n  changeSharingLink(id: string) {\r\n    this.sharingUrl = environment.travelnetURL + '/mytrip?' + 'tripId=' + id\r\n  }\r\n\r\n  /** copy shared trip to own trip */\r\n  copyTrip() {\r\n    this.trips.push(this.sharedTrip)\r\n    this.isLoading = true\r\n    this.TripService.modifyBackend(this.trips)\r\n    .then(() => {\r\n      this.isSuccess = true\r\n    })\r\n    .finally(() => {\r\n      this.isLoading = false\r\n    })\r\n  }\r\n\r\n  /** modal for adding a trip */\r\n  openAddTripModal() {\r\n    this.dialogRef = this.MatDialog.open(TripmodalComponent, {\r\n      width: '800px',\r\n      data: {\r\n        name: this.name,\r\n        start: this.start,\r\n        end: this.end\r\n      }\r\n    });\r\n\r\n    this.dialogRef.afterClosed().subscribe((result: tripModel)=> {\r\n      if (result) {\r\n        this.trips.push(result)\r\n        this.TripService.updateLocal(this.trips)\r\n      }\r\n    })\r\n  }\r\n\r\n  /** modal for adding venue */\r\n  openAddVenueModal(tripIndex: number, scheduleIndex: number, venueIndex: number|null) {\r\n    this.dialogRef = this.MatDialog.open(AddVenuePopoverComponent, {\r\n      width: '800px',\r\n      data: {\r\n        tripIndex: tripIndex,\r\n        scheduleIndex: scheduleIndex,\r\n        venueIndex: venueIndex,\r\n        name: this.venueName,\r\n        venuePrice: this.venuePrice,\r\n        venueCity: this.venueCity,\r\n        venueAddress: this.venueAddress\r\n      }\r\n    });\r\n\r\n    this.dialogRef.afterClosed().subscribe((result: any)=> {\r\n      // if (result) {\r\n      //   this.trips.push(result)\r\n      //   this.TripService.update(this.trips)\r\n      // }\r\n    })\r\n  }\r\n\r\n  /** when row are reordered */\r\n  onListDrop(event: CdkDragDrop<string[]>, tripIndex: number, dayIndex: number) {\r\n    moveItemInArray(this.trips[tripIndex].schedule[dayIndex].venues, event.previousIndex, event.currentIndex)\r\n    this.isLoading = true\r\n    this.TripService.modifyBackend(this.trips)\r\n    .then((res) => {\r\n      this.table.renderRows()\r\n      this.isSuccess = true\r\n    })\r\n    .catch(() => {\r\n      this.isErr = true\r\n    })\r\n    .finally(() => {\r\n      this.isLoading = false\r\n      setTimeout(() => {\r\n        this.isSuccess = false\r\n        this.isErr = false\r\n      }, 1000)\r\n    })\r\n  }\r\n\r\n  /** delete one venue  */\r\n  onDeleteVenue(tripIndex: number, dayIndex: number, venueIndex: number) {\r\n    if (confirm(`are you sure you want to delete this venue?`)) {\r\n      console.log( this.trips[tripIndex].schedule[dayIndex].venues[venueIndex])\r\n      this.trips[tripIndex].schedule[dayIndex].venues.splice(venueIndex, 1)\r\n      this.TripService.modifyBackend(this.trips)\r\n      .finally(() => {\r\n        if (this.table) {\r\n          this.table.renderRows()\r\n        }\r\n      })\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  /** delete entire trip */\r\n  onDeleteTrip(name: string, index: number) {\r\n    if (confirm(`are you sure you want to delete ${name}?`)) {\r\n      this.trips.splice(index, 1)\r\n      this.TripService.modifyBackend(this.trips)\r\n      .finally(() => {\r\n        if (this.table) {\r\n          this.table.renderRows()\r\n        }\r\n      })\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  /** show itinerary of trip on map */\r\n  showItinerary(tripIndex: number, shared? : boolean) {\r\n    // already showing itinerary\r\n    if (this.MapService.map.getSource('route')) {\r\n      this.MapService.map.removeLayer('route')\r\n      this.MapService.map.removeSource('route')\r\n      this.MapService.map.removeLayer('points')\r\n      this.MapService.map.removeSource('points')\r\n    } \r\n    let obj = shared? this.sharedTrip : this.trips[tripIndex]\r\n    // push venues in array\r\n    let coord: Array<number[]> = []\r\n    for (let day of obj.schedule) {\r\n      day.venues.forEach((venue) => {\r\n        if (venue.venueCoord) {\r\n          coord.push([venue.venueCoord.lng, venue.venueCoord.lat])\r\n          \r\n          // show point\r\n          this.MapService.showMarker(1, {\r\n            name: venue.name as string,\r\n            content:{\r\n              geometry:{\r\n                coordinates: [venue.venueCoord.lng, venue.venueCoord.lat]\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n\r\n    // display as route\r\n    this.MapService.map.addSource('route', {\r\n      'type': 'geojson',\r\n      'data': {\r\n        'type': 'Feature',\r\n        'properties': {},\r\n        'geometry': {\r\n          'type': 'LineString',\r\n          'coordinates': coord\r\n        }\r\n      }\r\n    })\r\n    this.MapService.map.addLayer({\r\n      'id': 'route',\r\n      'type': 'line',\r\n      'source': 'route',\r\n      'layout': {\r\n      'line-join': 'round',\r\n      'line-cap': 'round'\r\n      },\r\n      'paint': {\r\n      'line-color': '#3bb2d0',\r\n      'line-width': 8\r\n      }\r\n    });\r\n    this.MapService.map.moveLayer('points')\r\n  }\r\n\r\n\r\n  /** display location of venue on map */\r\n  showLocation(tripIndex: number, dayIndex: number, venueIndex: number, shared?: boolean) {\r\n    let obj = shared? this.sharedTrip : this.trips[tripIndex]\r\n    this.MapService.venueOnDestroy()\r\n    let coord: CustomCoordinates = obj.schedule[dayIndex].venues[venueIndex].venueCoord? new CustomCoordinates(obj.schedule[dayIndex].venues[venueIndex].venueCoord.lng, obj.schedule[dayIndex].venues[venueIndex].venueCoord.lat) : null\r\n    if (coord) {\r\n      this.MapService.addMarker(coord)\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.MapService.venueOnDestroy()\r\n    this._tripSub.unsubscribe()\r\n    this.sessionState_sub.unsubscribe()\r\n    this.MapService.removeMarker('', null, true)\r\n    if (this.MapService.map.getSource('route')) {\r\n      this.MapService.map.removeLayer('route')\r\n      this.MapService.map.removeSource('route')\r\n      this.MapService.map.removeLayer('points')\r\n      this.MapService.map.removeSource('points')\r\n    } \r\n  }\r\n}\r\n","<div style=\"position: relative;\" *ngIf='sessionState'>\r\n    <div class=\"container\" style=\"background-color: rgba(255, 200, 200, 1); padding: 1em;\">\r\n        <div class=\"row justify-content-center\">\r\n            <button mat-mini-fab class=\"col-auto align-self-center\" matTooltip='create a new trip' (click)='openAddTripModal()'>\r\n                <mat-icon>add</mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <br>\r\n    <div class=\"\" style=\"max-height: 100%\">\r\n\r\n        <div class=\"\" *ngIf='isLoading && !trips'>\r\n            <mat-spinner diameter='20'></mat-spinner>\r\n        </div>\r\n        <mat-accordion class=\"container-fluid\" style=\"min-height: 750px;\"  >\r\n            <!-- for shared links -->\r\n            <mat-expansion-panel #shared *ngIf='sharedTrip' [expanded]='sharedTrip'>\r\n                <mat-expansion-panel-header>\r\n                    <mat-panel-title class=\"align-self-center\">\r\n                        <span>\r\n                            {{sharedTrip.tripName}}\r\n                            <button mat-button matTooltip='shared trip' (click)='shared.toggle()'>\r\n                                <mat-icon class=\"text-success\" >link</mat-icon>\r\n                            </button>\r\n                        </span>\r\n                    </mat-panel-title>\r\n                    <mat-panel-description class=\"align-self-center\" >{{sharedTrip.dateRange.start|date}} &mdash; {{sharedTrip.dateRange.end|date}}&nbsp;<mat-divider [vertical]=\"true\"></mat-divider>&nbsp;{{ sharedTrip.dateRange.length }} days</mat-panel-description>\r\n                    <span (click)=\"shared.toggle()\" style=\"margin-right: 1em;\">  \r\n                        <button mat-button (click)='changeSharingLink(sharedTrip._id)' color='primary' matTooltip='share this trp' [ngbPopover]='popContent' [autoClose]=\"'outside'\" container=\"body\">    \r\n                            <mat-icon>share</mat-icon>\r\n                        </button>\r\n                        <button mat-button (click)='showItinerary(null, true)' color='accent' matTooltip='show itinerary on map' >    \r\n                            <mat-icon>map</mat-icon>\r\n                        </button>\r\n                        <button mat-button (click)='copyTrip()' matTooltip='copy this trip'>\r\n                            <mat-icon class='text-success'>add</mat-icon>\r\n                        </button>\r\n                    </span>\r\n                </mat-expansion-panel-header>\r\n\r\n                <mat-card>\r\n                    <mat-card-content class=\"\">\r\n                        <div class=\"example-action-buttons\">\r\n                            <button mat-button (click)=\"TripAccordion.openAll()\">Expand All</button>\r\n                            <button mat-button (click)=\"TripAccordion.closeAll()\">Collapse All</button>\r\n                        </div>\r\n                        <mat-accordion #acc multi>\r\n                            <mat-expansion-panel *ngFor='let schedule of sharedTrip.schedule; let j = index'>\r\n                                <mat-expansion-panel-header>\r\n                                    <mat-panel-title>\r\n                                        day {{ j + 1 }}\r\n                                    </mat-panel-title>\r\n                                    <mat-panel-description>\r\n                                        {{ displayDay(schedule.day) }} | {{ schedule.day | date }} &nbsp; &mdash; &nbsp; Locations: {{getDayVenues(schedule)}} &nbsp; &mdash; &nbsp; Price: {{getDayPrice(schedule)}}$\r\n                                    </mat-panel-description>\r\n                                </mat-expansion-panel-header>\r\n                                <div class=\"container-fluid\">\r\n                                    <mat-table [dataSource]='getDataSource(0, j, true)' style=\"width: 100%;\" matSort>\r\n                                         <!-- category -->\r\n                                         <ng-container matColumnDef=\"category\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Category </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">\r\n                                                <button mat-mini-fab color='primary' style=\"box-shadow: none;\" *ngIf='element.category' matTooltip='{{element.category.name}}'>\r\n                                                    <img src=\"{{element.category.url}}\" alt=\"\" style=\"margin-top: -0.3em;\">\r\n                                                </button>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- venueName -->\r\n                                        <ng-container matColumnDef=\"venueName\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Venue Name </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">{{element.name}}</mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- venueCity -->\r\n                                        <ng-container matColumnDef=\"venueCity\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> City </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\"> {{element.venueCity}} </mat-cell>\r\n                                        </ng-container>\r\n                                        \r\n                                        <!-- venueAddress -->\r\n                                        <ng-container matColumnDef=\"venueAddress\" style=\"display: inline-block\">\r\n                                            <mat-header-cell *matHeaderCellDef> Address </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\"><p style=\"display: inline-block; width: 100%;\">{{element.venueAddress}} </p> </mat-cell>\r\n                                        </ng-container>\r\n                                        \r\n                                        <!-- venuePrice -->\r\n                                        <ng-container matColumnDef=\"price\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Price </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\" >\r\n                                                <span class=\"text-center\" style=\"width: 100%;\" *ngIf='element.price == 0'>{{element.price}}$</span> \r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- website -->\r\n                                        <ng-container matColumnDef=\"url\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Website </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">\r\n                                                <a href=\"{{element.url}}\" target=\"_blank\" *ngIf='element.url' matTooltip='{{element.url}}'>\r\n                                                    <button mat-button>\r\n                                                        <mat-icon>open_in_new</mat-icon>\r\n                                                    </button>\r\n                                                </a>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- edit & drag -->\r\n                                        <ng-container matColumnDef=\"index\" stickyEnd>\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let index = index\">\r\n                                                <p class=\"text-right\" style=\"width: 100%;\">\r\n                                                    <button mat-button matTooltip='show location on map' (click)='showLocation(null, j, index, true)'>\r\n                                                        <mat-icon>map</mat-icon>\r\n                                                    </button>\r\n                                                </p>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <mat-header-row *matHeaderRowDef=\"displayedColumns\"></mat-header-row>\r\n                                        <mat-row *matRowDef=\"let row; columns: displayedColumns;\" cdkDrag></mat-row>\r\n                                    </mat-table>\r\n                                </div>\r\n                            </mat-expansion-panel>\r\n                            <br>\r\n                            <!-- trip stats -->\r\n                            <mat-expansion-panel expanded='true'>\r\n                                <mat-expansion-panel-header>\r\n                                    <mat-panel-title>Trip Overview</mat-panel-title>\r\n                                    <mat-panel-description>All your stats are here</mat-panel-description>   \r\n                                </mat-expansion-panel-header>\r\n                                <div class=\"row container-fluid\">\r\n                                    <mat-chip-list>\r\n                                        <mat-chip color=\"primary\" selected>Distance Traveled: {{getTripDistance(null, true)}} km</mat-chip>\r\n                                        <mat-chip color=\"warn\" selected>Places Visited: {{getTotalVenues(sharedTrip)}}</mat-chip>\r\n                                        <mat-chip color=\"accent\" selected>Price: {{getTotalPrice(sharedTrip)}}$</mat-chip>\r\n                                    </mat-chip-list>\r\n                                </div>\r\n                            </mat-expansion-panel>\r\n                        </mat-accordion>\r\n                    </mat-card-content>\r\n                </mat-card>\r\n            </mat-expansion-panel>\r\n            \r\n            <br>\r\n            <!-- no trips -->\r\n            <div *ngIf='!trips && !isLoading' class=\"container-fluid row rounded align--items-center\" style=\"background-color: rgba(255, 255, 255, 1); min-height: 100px;\">\r\n                &nbsp;<h2 class=\"align-self-center\">No trips Yet...</h2>\r\n            </div>\r\n\r\n            <!-- for own trips -->\r\n            <mat-expansion-panel #pan *ngFor='let trip of trips, let i = index, let isFirst = first' [expanded]='isFirst && !sharedTrip'>\r\n                <mat-expansion-panel-header class=\"my-headers-align\">\r\n                    <mat-panel-title class=\"align-self-center\">{{trip.tripName}}</mat-panel-title>\r\n                    <mat-panel-description class=\"align-self-center\" >{{trip.dateRange.start|date}} &mdash; {{trip.dateRange.end|date}}&nbsp;<mat-divider [vertical]=\"true\"></mat-divider>&nbsp;{{ trip.dateRange.length }} days</mat-panel-description>\r\n                    <span (click)=\"pan.toggle()\" style=\"margin-right: 1em;\">  \r\n                        <button mat-button (click)='changeSharingLink(trip._id)' color='primary' matTooltip='share this trp' [ngbPopover]='popContent' [autoClose]=\"'outside'\" container=\"body\">    \r\n                            <mat-icon>share</mat-icon>\r\n                        </button>\r\n                        <button mat-button (click)='showItinerary(i)' color='accent' matTooltip='show itinerary on map' >    \r\n                            <mat-icon>map</mat-icon>\r\n                        </button>\r\n                    </span>\r\n                </mat-expansion-panel-header>\r\n                <mat-card>\r\n                    <mat-card-content class=\"\">\r\n                        <div class=\"example-action-buttons\">\r\n                            <button mat-button (click)=\"TripAccordion.openAll()\">Expand All</button>\r\n                            <button mat-button (click)=\"TripAccordion.closeAll()\">Collapse All</button>\r\n                        </div>\r\n                        <mat-accordion #acc multi>\r\n                            <mat-expansion-panel *ngFor='let schedule of trip.schedule; let j = index'>\r\n                                <mat-expansion-panel-header>\r\n                                    <mat-panel-title>\r\n                                        day {{ j + 1 }}\r\n                                    </mat-panel-title>\r\n                                    <mat-panel-description>\r\n                                        {{ displayDay(schedule.day) }} | {{ schedule.day | date }} &nbsp; &mdash; &nbsp; Locations: {{getDayVenues(schedule)}} &nbsp; &mdash; &nbsp; Price: {{getDayPrice(schedule)}}$\r\n                                    </mat-panel-description>\r\n                                </mat-expansion-panel-header>\r\n                                <div class=\"container-fluid\">\r\n                                    <mat-table [dataSource]='getDataSource(i, j)' style=\"width: 100%;\" matSort cdkDropList [cdkDropListData]='getDataSource(i, j)' (cdkDropListDropped)=\"onListDrop($event, i, j)\">\r\n                                         <!-- category -->\r\n                                         <ng-container matColumnDef=\"category\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Category </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">\r\n                                                <button mat-mini-fab color='primary' style=\"box-shadow: none;\" *ngIf='element.category' matTooltip='{{element.category.name}}'>\r\n                                                    <img src=\"{{element.category.url}}\" alt=\"\" style=\"margin-top: -0.3em;\">\r\n                                                </button>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- venueName -->\r\n                                        <ng-container matColumnDef=\"venueName\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Venue Name </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">{{element.name}}</mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- venueCity -->\r\n                                        <ng-container matColumnDef=\"venueCity\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> City </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\"> {{element.venueCity}} </mat-cell>\r\n                                        </ng-container>\r\n                                        \r\n                                        <!-- venueAddress -->\r\n                                        <ng-container matColumnDef=\"venueAddress\" style=\"display: inline-block\">\r\n                                            <mat-header-cell *matHeaderCellDef> Address </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\"><p style=\"display: inline-block; width: 100%;\">{{element.venueAddress}} </p> </mat-cell>\r\n                                        </ng-container>\r\n                                        \r\n                                        <!-- venuePrice -->\r\n                                        <ng-container matColumnDef=\"price\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Price </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\" >\r\n                                                <span class=\"text-center\" style=\"width: 100%;\" *ngIf='element.price == 0'>{{element.price}}$</span> \r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- website -->\r\n                                        <ng-container matColumnDef=\"url\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Website </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">\r\n                                                <a href=\"{{element.url}}\" target=\"_blank\" *ngIf='element.url' matTooltip='{{element.url}}'>\r\n                                                    <button mat-button>\r\n                                                        <mat-icon>open_in_new</mat-icon>\r\n                                                    </button>\r\n                                                </a>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- edit & drag -->\r\n                                        <ng-container matColumnDef=\"index\" stickyEnd>\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let index = index\">\r\n                                                <p class=\"text-right\" style=\"width: 100%;\">\r\n                                                    <button mat-button matTooltip='edit venue' (click)='openAddVenueModal(i, j, index)'>\r\n                                                        <mat-icon>edit</mat-icon>\r\n                                                    </button>\r\n                                                    <button mat-button matTooltip='delete venue' color='warn' (click)='onDeleteVenue(i, j, index)'>\r\n                                                        <mat-icon>delete</mat-icon>\r\n                                                    </button>\r\n                                                    <button mat-button matTooltip='show location on map' (click)='showLocation(i, j, index)'>\r\n                                                        <mat-icon>map</mat-icon>\r\n                                                    </button>\r\n                                                    <button mat-button matTooltip='drag to reorder schedule' cdkDragHandle>\r\n                                                        <mat-icon>drag_indicator</mat-icon>\r\n                                                    </button>\r\n                                                </p>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <mat-header-row *matHeaderRowDef=\"displayedColumns\"></mat-header-row>\r\n                                        <mat-row *matRowDef=\"let row; columns: displayedColumns;\" cdkDrag></mat-row>\r\n                                    </mat-table>\r\n                                </div>\r\n                                <br>\r\n                                <!-- add venue -->\r\n                                <div class=\"row justify-content-center\">\r\n                                    <button mat-mini-fab id=\"addIcon\" class=\"col-auto align-self-center\" (click)='openAddVenueModal(i, j, null)' matTooltip='add a venue'>\r\n                                        <mat-icon id='addIcon' *ngIf='!isLoading && !isErr && !isSuccess'>add_location</mat-icon>\r\n                                        <mat-icon id='addIcon' *ngIf='!isLoading && !isErr && isSuccess'>done</mat-icon>\r\n                                        <mat-icon id='addIcon' class=\"text-danger\" *ngIf='!isLoading && isErr && !isSuccess'>error</mat-icon>\r\n                                        <mat-spinner *ngIf='isLoading && !isErr && !isSuccess' diameter='20'></mat-spinner>\r\n                                    </button>\r\n                                    &nbsp;\r\n                                    <small class=\"text-success align-self-center\" style=\"vertical-align: middle;\" *ngIf='!isLoading && !isErr && isSuccess'>Schedule Saved Successfully!</small>\r\n                                </div>\r\n                            </mat-expansion-panel>\r\n                            <br>\r\n                            <!-- trip stats -->\r\n                            <mat-expansion-panel expanded='true'>\r\n                                <mat-expansion-panel-header>\r\n                                    <mat-panel-title>Trip Overview</mat-panel-title>\r\n                                    <mat-panel-description>All your stats are here</mat-panel-description>   \r\n                                </mat-expansion-panel-header>\r\n                                <div class=\"row container-fluid\">\r\n                                    <mat-chip-list>\r\n                                        <mat-chip color=\"primary\" selected>Distance Traveled: {{getTripDistance(i)}} km</mat-chip>\r\n                                        <mat-chip color=\"warn\" selected>Places Visited: {{getTotalVenues(trip)}}</mat-chip>\r\n                                        <mat-chip color=\"accent\" selected>Price: {{getTotalPrice(trip)}}$</mat-chip>\r\n                                    </mat-chip-list>\r\n                                </div>\r\n                            </mat-expansion-panel>\r\n                        </mat-accordion>\r\n                    </mat-card-content>\r\n                    \r\n                    <!-- trip actions -->\r\n                    <mat-card-actions class=\"\">\r\n                        <button mat-button color='warn' (click)='onDeleteTrip(trip.tripName, i)'>\r\n                            delete\r\n                        </button>\r\n                        <button mat-button color='primary'>\r\n                            complete!\r\n                        </button>\r\n                    </mat-card-actions>\r\n                </mat-card>    \r\n            </mat-expansion-panel>\r\n        </mat-accordion>\r\n    </div>\r\n</div>\r\n\r\n<mat-grid-list *ngIf='!sessionState' cols='4' >\r\n    <mat-grid-tile colspan='4'>\r\n        <div class=\"container-fluid row justify-content-center rounded\" style=\"background-color: rgba(255, 255, 255, 0.9); margin: 10%; padding: 5%;\">\r\n            <button mat-flat-button color='accent' style=\"align-content: center;\" routerLink='/login'>\r\n                <p style=\"margin: 0;\">You must have an Account to Create a Trip</p>\r\n            </button>   \r\n        </div>\r\n    </mat-grid-tile>\r\n</mat-grid-list>\r\n\r\n<!-- share popover -->\r\n<ng-template #popContent> \r\n    <app-share [UrlLink]='sharingUrl'></app-share>\r\n</ng-template>\r\n","import { HttpService } from 'src/app/services/http.service';\r\nimport { tripModel } from '../../../../models/trip.model';\r\nimport { userModel } from './../../../../models/user.model';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Component, OnInit, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n@Component({\r\n  selector: 'app-tripmodal',\r\n  templateUrl: './tripmodal.component.html',\r\n  styleUrls: ['./tripmodal.component.scss']\r\n})\r\nexport class TripmodalComponent implements OnInit {\r\n\r\n  minDate: Date = new Date()\r\n  \r\n  modalForm: FormGroup\r\n  isLoading: boolean = false\r\n  nameErr: boolean = false\r\n\r\n  trips: tripModel[]\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<TripmodalComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: {\r\n      name: string\r\n      start: any,\r\n      end: any\r\n    },\r\n    private HttpService: HttpService)\r\n  {\r\n    this.modalForm = new FormGroup({\r\n      'name': new FormControl(null, [Validators.required, Validators.minLength(1)], this.checkName.bind(this)),\r\n      'dateRange': new FormGroup({\r\n        'start': new FormControl(null),\r\n        'end': new FormControl(null)\r\n      })\r\n    })\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  checkName(control: {[key: string]: any}): Promise<{err: string} | null> {\r\n    return new Promise((resolve, reject) => {\r\n      this.HttpService.get('/user', {})\r\n      .then((response: {\r\n        [key: string]: any\r\n        user: userModel[]\r\n      }) => {\r\n        let trips: tripModel[] = response.user[0].trips? response.user[0].trips : null\r\n        if (trips) {\r\n          this.trips = trips\r\n          for (let x = 0; x < trips.length; x++) {\r\n            if(trips[x].tripName == control.value) {\r\n              resolve({err: 'name already exists'})\r\n              break\r\n            }\r\n          }\r\n          resolve(null)\r\n        } else {\r\n          resolve(null)\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log('err', err)\r\n        reject(err.message)      \r\n      })\r\n    })\r\n  }\r\n\r\n  onSubmit(data: {\r\n    [key:string]: any\r\n    start: Date\r\n    end: Date}) {\r\n    this.isLoading = true\r\n    let valid = this.checkName({value: data.name})\r\n    if (typeof(valid) == 'string') {\r\n      this.isLoading = false\r\n    } else {\r\n      this.trips.push(\r\n        new tripModel(data.start, data.end, data.name)\r\n      )\r\n      this.HttpService.patch('/user/edit', {\r\n        'username': localStorage.getItem('username'),\r\n        'proprety': 'trips',\r\n        'newProprety': this.trips\r\n      })\r\n      .then((response: any) => {\r\n        if (response.message) {\r\n          this.dialogRef.close(\r\n            new tripModel(data.start, data.end, data.name)\r\n          )\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n      .finally(() => {\r\n        this.isLoading = false\r\n      })\r\n    }\r\n  }\r\n\r\n  onCancel() {\r\n    this.dialogRef.close()\r\n  }\r\n}\r\n","<mat-card class=\"container-fluid\">\r\n    <mat-card-title mat-dialog-title> New Trip </mat-card-title>\r\n    <hr>\r\n    <mat-card-content mat-dialog-content class=\"container-fluid\">\r\n        <form [formGroup]='modalForm'>\r\n            <mat-form-field class=\"example-full-width\">\r\n                <mat-label>Trip Name</mat-label>\r\n                <input matInput formControlName='name' placeholder=\"Ex. Simon va a Prague\" [(ngModel)]=\"data.name\">\r\n                <small *ngIf='this.modalForm.get(\"name\").touched && !this.modalForm.get(\"name\").valid' class=\"text-danger\">please create a name</small>\r\n              </mat-form-field>\r\n            <br>\r\n            <mat-form-field >\r\n                <mat-label>Enter a date range</mat-label>\r\n                <mat-date-range-input [rangePicker]=\"picker\" formGroupName='dateRange' [min]='minDate'>\r\n                    <input matStartDate placeholder=\"Start date\" formControlName='start' [(ngModel)]=\"data.start\" >\r\n                    <input matEndDate placeholder=\"End date\" formControlName='end' [(ngModel)]=\"data.end\">\r\n                </mat-date-range-input>\r\n                <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n                <mat-date-range-picker #picker></mat-date-range-picker>\r\n            </mat-form-field>\r\n        </form>\r\n\r\n    </mat-card-content>\r\n    <mat-card-actions mat-dialog-actions>\r\n        <button mat-button (click)='onCancel()'>Cancel</button>\r\n        <button mat-button *ngIf='!isLoading' color='primary' (click)='onSubmit(data)'>Save</button>\r\n        <button mat-button *ngIf='isLoading'><mat-spinner [diameter]='50'></mat-spinner></button>\r\n    </mat-card-actions>\r\n</mat-card>\r\n","import { MatListOption } from '@angular/material/list';\r\nimport { AddToTripPopoverComponent } from './../add-to-trip-popover/add-to-trip-popover.component';\r\nimport { CustomCoordinates } from 'src/app/models/coordinates';\r\nimport { MapService } from 'src/app/services/map/map.service';\r\nimport { tripModel } from './../../../../models/trip.model';\r\nimport { Subscription } from 'rxjs';\r\nimport { TripService } from './../../../../services/trip.service';\r\nimport { Component, OnInit, Input, OnDestroy, ViewChild } from '@angular/core';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-venueButton',\r\n  templateUrl: './venueButton.component.html',\r\n  styleUrls: ['./venueButton.component.scss']\r\n})\r\nexport class VenueButtonComponent implements OnInit, OnDestroy {\r\n  pathID: string\r\n  searchResult : any\r\n  @Input() select: any\r\n  @Input() result: any\r\n  @ViewChild(AddToTripPopoverComponent) AddToTripPopoverComponent: AddToTripPopoverComponent\r\n  \r\n  // keeps track of user trips\r\n  trips_sub: Subscription\r\n  trips: tripModel[] = null \r\n  \r\n  isLoading: boolean = false\r\n  isSuccess: boolean = false\r\n  isErr: boolean = false\r\n\r\n  constructor (\r\n    private SearchService: SearchService,\r\n    private TripService: TripService,\r\n    private router : Router,\r\n    private MapService: MapService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.searchResult = this.result\r\n    this.pathID = '/search/venue/' + this.result.venue.id\r\n\r\n    this.trips_sub = this.TripService.trips.subscribe((triparr: tripModel[]) => {\r\n      if (triparr) {\r\n        this.trips = triparr\r\n      }\r\n    })\r\n  }\r\n\r\n  navigate(){\r\n    this.router.navigate([this.pathID])\r\n  }\r\n\r\n  /** add venue to specific trips */\r\n  addToTrip(event: MatListOption[]) {\r\n    this.isLoading = true\r\n    this.SearchService.formatDetails(this.result.venue.id)\r\n    .then(result => {\r\n      console.log(result)\r\n      if (event.length && this.trips) {\r\n        event.map((option: MatListOption) => {\r\n          this.trips[option.value.trip].schedule[option.value.day].venues.push({\r\n            name: result.response.venue.name? result.response.venue.name : null,\r\n            venueAddress: result.response.venue.location.formattedAddress? result.response.venue.location.formattedAddress.join(' ') : null,\r\n            venueCoord: result.response.venue.location.lng? {lng: result.response.venue.location.lng, lat: result.response.venue.location.lat} : null,\r\n            venueCity: result.response.venue.location.city? result.response.venue.location.city : null,\r\n            url: result.response.venue.canonicalUrl? result.response.venue.canonicalUrl : null,\r\n            category: result.response.venue.categories[0]? { name: result.response.venue.categories[0].name, url: result.response.venue.categories[0].icon.prefix + '32' + result.response.venue.categories[0].icon.suffix } : null\r\n          })\r\n        })\r\n\r\n        this.TripService.modifyBackend(this.trips)\r\n        .then((val) => {\r\n          this.isSuccess = true\r\n        })\r\n        .catch(err => {\r\n          this.isErr = true\r\n        })\r\n      }\r\n    })\r\n    .catch(() => {\r\n      this.isErr = true\r\n      setTimeout(() => {\r\n        this.isErr = false\r\n      }, 800)\r\n    })\r\n    .finally(() => {\r\n      this.isLoading = false\r\n    })\r\n  }\r\n\r\n  /** show venue location on map */\r\n  showLocation() {\r\n    this.MapService.venueOnDestroy()\r\n    this.MapService.addMarker(new CustomCoordinates(this.result.venue.location.lng, this.result.venue.location.lat))\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.MapService.venueOnDestroy()\r\n    this.trips_sub.unsubscribe()\r\n    this.MapService.venueOnDestroy()\r\n  }\r\n}\r\n","<mat-card *ngIf=\"searchResult.venue\">\r\n  <mat-card-header (click)='navigate()' >\r\n    <mat-card-title>{{searchResult|null:['venue','name']}}</mat-card-title>\r\n    <mat-card-subtitle>\r\n      <p *ngFor=\"let item of (searchResult|null: ['venue','categories'])\" class=\"inline\">{{item.name}}</p>\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n\r\n  <mat-card-content class=\"container-fluid justify-content-end\">\r\n    <p class=\"description text-right d-flex flex-row-reverse\"  (click)='navigate()'>\r\n      {{searchResult|null:['venue','location','address']}}\r\n    </p>\r\n    <hr>\r\n    <!-- quick actions -->\r\n    <span class=\"row justify-content-end\">\r\n      <!-- show on map -->\r\n      <button mat-button class=\"col-auto mr-auto\" (click)='showLocation()'>\r\n        <mat-icon mat-icon-button matTooltip=\"show on map\" matTooltipPosition='above' color='primary'>map</mat-icon>\r\n      </button>\r\n      <!-- add to trip -->\r\n      <button mat-button class=\"col-auto mr-auto\">\r\n        <mat-icon mat-icon-button *ngIf='!isErr && !isLoading && !isSuccess' matTooltipPosition='above' [ngbPopover]=\"popContent\" matTooltip=\"add to trip...\" [autoClose]=\"'outside'\">playlist_add</mat-icon>\r\n        <mat-spinner diameter='20' *ngIf='isLoading'></mat-spinner>\r\n        <mat-icon mat-icon-button class=\"text-success\" *ngIf='isSuccess && !isLoading'>check</mat-icon>\r\n        <mat-icon mat-icon-button class=\"text-danger\" *ngIf='isErr && !isLoading' matTooltip='an error occured'>error</mat-icon>\r\n      </button>\r\n    </span>\r\n  </mat-card-content>\r\n</mat-card>\r\n\r\n<!-- add to trip -->\r\n<ng-template #popContent> \r\n  <app-add-to-trip-popover (onSubmitEvent)='addToTrip($event)'></app-add-to-trip-popover>\r\n</ng-template>\r\n","import { tripModel } from './../../../../models/trip.model';\r\nimport { Subscription } from 'rxjs';\r\nimport { TripService } from './../../../../services/trip.service';\r\nimport { Component, OnInit, OnDestroy, ViewChild, AfterViewInit, Output, EventEmitter } from '@angular/core';\r\nimport { MatSelectionList, MatListOption } from '@angular/material/list';\r\n\r\n@Component({\r\n  selector: 'app-add-to-trip-popover',\r\n  templateUrl: './add-to-trip-popover.component.html',\r\n  styleUrls: ['./add-to-trip-popover.component.scss']\r\n})\r\nexport class AddToTripPopoverComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild(MatSelectionList) MatSelectionList: MatSelectionList\r\n  @Output() onSubmitEvent = new EventEmitter<MatListOption[]>();\r\n  trips: tripModel[] = null\r\n  trip_sub: Subscription\r\n\r\n  constructor(private TripService: TripService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.trip_sub = this.TripService.trips.subscribe((trips: tripModel[]) => {\r\n      this.trips = trips\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  onSubmit() {\r\n    this.onSubmitEvent.emit(this.MatSelectionList.selectedOptions.selected)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.trip_sub.unsubscribe()\r\n  }\r\n\r\n}\r\n","<mat-label>\r\n    <h2>Select Where You Want To Add This Venue</h2>\r\n</mat-label>\r\n<mat-accordion>\r\n    <mat-expansion-panel *ngFor='let trip of trips, let i = index'>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n                {{ trip.tripName }}\r\n            </mat-panel-title>\r\n            <mat-panel-description>\r\n                {{ trip.dateRange.start | date }} &mdash; {{ trip.dateRange.end | date }}\r\n            </mat-panel-description>\r\n        </mat-expansion-panel-header>\r\n        <mat-selection-list #days>\r\n            <mat-accordion>\r\n                <mat-expansion-panel *ngFor='let day of trip.schedule, let j = index' #panel>\r\n                    <mat-expansion-panel-header>\r\n                        <mat-list-option (click)='panel.toggle()' [value]='{trip: i, day: j}' style=\"margin-right: 1em;\">\r\n                            {{ day.day | date}}\r\n                        </mat-list-option>\r\n                    </mat-expansion-panel-header>\r\n                    <mat-table [dataSource]=\"trip.schedule[j].venues\" class=\"mat-elevation-z8\">\r\n                        <!-- category -->\r\n                        <ng-container matColumnDef=\"category\">\r\n                            <mat-header-cell *matHeaderCellDef> Category </mat-header-cell>\r\n                            <mat-cell *matCellDef=\"let element\">\r\n                                <button mat-mini-fab color='primary' style=\"box-shadow: none;\" *ngIf='element.category' matTooltip='{{element.category.name}}'>\r\n                                    <img src=\"{{element.category.url}}\" alt=\"\" style=\"margin-top: -0.3em;\">\r\n                                </button>\r\n                            </mat-cell>\r\n                        </ng-container>\r\n\r\n                        <!-- Name Column -->\r\n                        <ng-container matColumnDef=\"name\">\r\n                          <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>\r\n                          <mat-cell *matCellDef=\"let element\"> {{element.name}} </mat-cell>\r\n                        </ng-container>\r\n                      \r\n                        <!-- Price Column -->\r\n                        <ng-container matColumnDef=\"price\">\r\n                          <mat-header-cell *matHeaderCellDef> price </mat-header-cell>\r\n                          <mat-cell *matCellDef=\"let element\"> {{element.price}} </mat-cell>\r\n                        </ng-container>\r\n\r\n                      \r\n                        <mat-header-row *matHeaderRowDef=\"['category', 'name', 'price']\"></mat-header-row>\r\n                        <mat-row *matRowDef=\"let row; columns: ['category', 'name', 'price']\"></mat-row>\r\n                      </mat-table>\r\n                </mat-expansion-panel>\r\n            </mat-accordion>\r\n        </mat-selection-list>\r\n    </mat-expansion-panel>\r\n</mat-accordion>\r\n<br>\r\n<span class=\"container-fluid justify-content-end\">\r\n    <button mat-raised-button color='primary' (click)='onSubmit()'>\r\n        add\r\n    </button>\r\n</span>","import { SearchParams } from './../../../models/searchParams';\r\nimport { Component, OnInit, OnDestroy, Input } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { tab } from 'src/app/models/tab.model'\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { MapService } from 'src/app/services/map/map.service';\r\nimport { CustomCoordinates } from 'src/app/models/coordinates';\r\n\r\n@Component({\r\n  selector: 'app-searchresults',\r\n  templateUrl: './searchresults.component.html',\r\n  styleUrls: ['./searchresults.component.scss']\r\n})\r\nexport class SearchresultsComponent implements OnInit, OnDestroy {\r\n  queryParams: SearchParams = {}\r\n  openTab: tab\r\n  filterNumber: number\r\n  loading: boolean = null\r\n  @Input() select: number\r\n  categoriesSet: Set<any> = null\r\n\r\n  private _categoriesSet_sub: Subscription\r\n  private returnTab_sub: Subscription\r\n  private filter_sub: Subscription\r\n  \r\n  constructor(\r\n    private map: MapService,\r\n    private SearchService: SearchService,\r\n    private ActivatedRoute: ActivatedRoute\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loading = true\r\n\r\n    // search parameters\r\n    this.ActivatedRoute.queryParams.subscribe((params: SearchParams) => {\r\n      this.queryParams = params\r\n    })\r\n    this.filter_sub = this.SearchService.filterNumber.subscribe((number)=> this.filterNumber = number)\r\n\r\n    // response from http queries\r\n    this.returnTab_sub = this.SearchService.searchTab.subscribe((tab: tab) => {\r\n      this.openTab = tab\r\n      this.loading = false\r\n    })\r\n\r\n    this._categoriesSet_sub= this.SearchService.categorySet.subscribe((set: Set<any>)=> {\r\n      if (set) {\r\n        this.categoriesSet = set\r\n      }\r\n    })\r\n  }\r\n\r\n  /** check if state of venues|users filter */ \r\n  checkFilter(type: number) {\r\n    if (this.filterNumber === 0 || type === this.filterNumber){\r\n      return true\r\n    }\r\n    else{\r\n      return false\r\n    }\r\n  }\r\n  \r\n  checkIfChecked(id:string): boolean {\r\n    if (this.categoriesSet.has(id)) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._categoriesSet_sub.unsubscribe()\r\n    this.filter_sub.unsubscribe()\r\n    this.returnTab_sub.unsubscribe()\r\n  }\r\n}\r\n","<div class=\"container-fluid row\" style=\"margin: 0; padding: 0;\">\r\n    <div class=\"col mr-auto\"*ngIf=\"openTab.content\" style=\"margin-left: 0; padding-left: 0;\">\r\n      <br>\r\n      <mat-card *ngIf=\"openTab.content.venues.length === 0 && openTab.content.users.length === 0\">\r\n        <!-- loading animation -->\r\n        <div *ngIf='queryParams.query && loading' class=\"container-fluid row justify-content-center\" style=\"overflow: hidden; padding-top: 1em;\">\r\n          <mat-spinner class=\"col-auto\"></mat-spinner>\r\n        </div>\r\n        <!-- nothing found -->\r\n        <mat-card-header>\r\n          <mat-card-title *ngIf='queryParams.query && !loading'>\r\n            No Matches Found...\r\n          </mat-card-title>\r\n          <!-- no query param -->\r\n          <mat-card-title *ngIf='!queryParams.query && !loading'>\r\n            Search Something!\r\n          </mat-card-title>\r\n        </mat-card-header>\r\n      </mat-card>\r\n      <!-- display venues -->\r\n      <div *ngIf=\"checkFilter(1)\" style=\"min-height: 600px;\">\r\n        <div *ngFor=\"let result of openTab.content.venues\">\r\n          <div *ngIf=\"categoriesSet && checkIfChecked(result.venue.categories[0].id)\">\r\n            <app-venueButton [result]=\"result\"></app-venueButton>\r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- display users -->\r\n      <div *ngIf=\"checkFilter(2)\" style=\"min-height: 600px;\">\r\n        <div *ngFor=\"let result of openTab.content.users\">\r\n          <app-userbutton [result]=\"result\"></app-userbutton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col justify-content-end\" style=\"padding-right: 0; margin-right: 0;\">\r\n      <app-filter></app-filter>\r\n    </div>\r\n</div>\r\n","import { HttpService } from 'src/app/services/http.service';\r\nimport { userModel } from 'src/app/models/user.model';\r\nimport { Component, OnInit, Input } from '@angular/core';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-userbutton',\r\n  templateUrl: './userbutton.component.html',\r\n  styleUrls: ['./userbutton.component.scss']\r\n})\r\nexport class UserbuttonComponent implements OnInit {\r\n  pathID: string\r\n  searchResult : any\r\n  @Input() result: userModel\r\n  selfUsername: string = localStorage.getItem('username')\r\n\r\n  constructor(\r\n    private searchservice: SearchService,\r\n    private router : Router,\r\n    private HttpService: HttpService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.result)\r\n    this.searchResult = this.result\r\n    this.pathID = '/search/user/' + this.result.username\r\n  }\r\n  \r\n  navigate() {\r\n    console.log(this.result)\r\n    this.router.navigate([this.pathID])\r\n  }\r\n\r\n  // follow button\r\n  onFollow() {\r\n    // update database\r\n    this.HttpService.post('/user/follow', {\r\n      username: localStorage.getItem('username'),\r\n      followed: this.result.username\r\n    }).then((res) => {\r\n      // add the follower in current content\r\n      this.result.followers.push(localStorage.getItem('username'))\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  // unfollow button\r\n  onUnfollow() {\r\n    // update database\r\n    this.HttpService.post('/user/unfollow', {\r\n      username: localStorage.getItem('username'),\r\n      unfollowed: this.result.username\r\n    }).then((res) => {\r\n      // remove the follower from current content\r\n      this.result.followers.splice(this.result.followers.indexOf(localStorage.getItem('username')), 1)\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n}","<mat-card *ngIf=\"searchResult.username\">\r\n  <mat-card-header (click)='navigate()' class='mainCard'>\r\n    <img\r\n    mat-card-avatar\r\n    src=\"data:image/jpeg;base64,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\"\r\n    alt=\"\">\r\n    <mat-card-title>{{searchResult|null: ['username']}}</mat-card-title>\r\n    <mat-card-subtitle>User</mat-card-subtitle>\r\n  </mat-card-header>\r\n\r\n  <mat-card-content (click)='navigate()' class=\"container\" class='mainCard'>\r\n    lol\r\n    <div>\r\n      <!-- dunno why these dont work -->\r\n      <!-- <p *ngFor=\"let item of searchResult|null:['history']\">{{item}}</p> -->\r\n    </div>\r\n    <div>\r\n      <!-- <p *ngFor=\"let item of searchResult|null:['whishlist']\">{{item}}</p> -->\r\n    </div>\r\n  </mat-card-content>\r\n  <mat-card-actions class=\"container\">\r\n    <div class=\"container\">\r\n      <!-- option to follow -->\r\n      <div *ngIf=\"!result.followers.includes(this.selfUsername)\">\r\n        <button mat-raised-button (click)=\"onFollow()\">\r\n          Follow\r\n        </button>\r\n      </div>\r\n\r\n      <!-- already following -->\r\n      <div *ngIf=\"result.followers.includes(this.selfUsername)\">\r\n        <button mat-raised-button (click)=\"onUnfollow()\">\r\n          Unfollow\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </mat-card-actions>\r\n</mat-card>\r\n\r\n","import { HttpService } from './../../services/http.service';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { tab } from '../../models/tab.model';\r\nimport { Subscription } from 'rxjs';\r\nimport { userModel } from 'src/app/models/user.model';\r\n\r\n\r\n@Component({\r\n  selector: 'app-userprofile',\r\n  templateUrl: './userprofile.component.html',\r\n  styleUrls: ['./userprofile.component.scss']\r\n})\r\nexport class UserprofileComponent implements OnInit, OnDestroy {\r\n  url :string = null\r\n  private openTabSub: Subscription\r\n  content: userModel = null\r\n  openTab: tab\r\n  username: string\r\n  selfUsername: string\r\n  windowHeight: number = window.innerHeight\r\n\r\n\r\n  constructor(\r\n    private SearchService: SearchService,\r\n    private router: Router,\r\n    private HttpService: HttpService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.openTabSub = this.SearchService.searchTab.subscribe(x => {\r\n      this.openTab = x\r\n    })\r\n    this.url = this.router.url.replace('/search/user/','')\r\n    this.searchUser(this.url).then(result => this.content = result.users[0])\r\n    this.username = this.router.url.substr(13)\r\n    this.selfUsername = localStorage.getItem('username')\r\n  }\r\n\r\n  goBack(){\r\n    this.router.navigate(['search', this.openTab.query])\r\n  }\r\n\r\n  searchUser(username: string){\r\n    return new Promise<any>((resolve) => {\r\n      this.SearchService.userSearch(username).then(result=>{\r\n      console.log(result)\r\n      resolve(result)\r\n      })\r\n    }\r\n  )}\r\n\r\n  ngOnDestroy(){\r\n    this.openTabSub.unsubscribe()\r\n  }\r\n\r\n  // follow button\r\n  onFollow() {\r\n    // update database\r\n    this.HttpService.post('/user/follow', {\r\n      username: localStorage.getItem('username'),\r\n      followed: this.username\r\n    }).then((res) => {\r\n      // add the follower in current content\r\n      this.content.followers.push(this.selfUsername)\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  // unfollow button\r\n  onUnfollow() {\r\n    // update database\r\n    this.HttpService.post('/user/unfollow', {\r\n      username: localStorage.getItem('username'),\r\n      unfollowed: this.username\r\n    }).then((res) => {\r\n      // remove the follower from current content\r\n      this.content.followers.splice(this.content.followers.indexOf(this.selfUsername), 1)\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n}\r\n","<mat-card class=\"container\"  *ngIf=\"content\">\r\n  <mat-card-title>\r\n    <div class=\"row\">\r\n      <button mat-button (click)='goBack()' *ngIf=\"this.openTab\" class=\"col-auto\" matTooltip=\"back\">\r\n        <mat-icon class=\"\">\r\n          keyboard_backspace\r\n        </mat-icon>\r\n      </button>\r\n      <!-- option to follow -->\r\n      <div *ngIf=\"!this.content.followers.includes(this.selfUsername)\">\r\n        <button mat-raised-button (click)=\"onFollow()\">\r\n          Follow\r\n        </button>\r\n      </div>\r\n      <!-- already following -->\r\n      <div *ngIf=\"this.content.followers.includes(this.selfUsername)\">\r\n        <button mat-raised-button (click)=\"onUnfollow()\">\r\n          Unfollow\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  <!-- User profile -->\r\n  <!-- view username -->\r\n  <div>{{content|null:['username']}}</div>\r\n  <!-- view profile pic -->\r\n  <a href=\"{{content|null:['profilepicture']}}\" class=\"img\"></a>\r\n  <!-- view friends -->\r\n  </mat-card-title>\r\n\r\n  <mat-card-content>\r\n    <!-- view photos -->\r\n    <!-- view posts/blogs,albums -->\r\n    <!-- view trips -->\r\n    <div>\r\n      <div *ngFor=\"let item of content|null:['trips']\">\r\n        {{item}}\r\n      </div>\r\n    </div>\r\n    <!-- view history -->\r\n    <div>\r\n      <p>history: </p>\r\n      <p *ngFor=\"let item of content.history\">{{ (item|null:['continent']) + (item|null:['places'])  }}</p>\r\n    </div>\r\n    <!-- view wishlist -->\r\n    <div>\r\n      <p>wishlist: </p>\r\n      <p *ngFor=\"let item of content.wishlist\">{{  item|null:['places']  }}</p>\r\n    </div>\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { tripModel } from './../../models/trip.model';\r\nimport { TripService } from './../../services/trip.service';\r\nimport { MatListOption } from '@angular/material/list';\r\nimport { environment } from './../../../environments/environment.dev';\r\nimport { MapService } from 'src/app/services/map/map.service';\r\nimport { MatBottomSheetModule } from '@angular/material/bottom-sheet';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { tab } from '../../models/tab.model';\r\nimport { selectedVenueModel } from '../../models/selectedVenue.model';\r\n\r\n@Component({\r\n  selector: 'app-venue',\r\n  templateUrl: './venue.component.html',\r\n  styleUrls: ['./venue.component.scss']\r\n})\r\nexport class VenueComponent implements OnInit,OnDestroy {\r\n  ogUrl: string = null\r\n  url:string = null\r\n  content: selectedVenueModel = null\r\n  rating: number = null\r\n  ratingColor: any = null\r\n  displayContent: Array<{[key: string]: any}> = []\r\n  windowHeight: number = window.innerHeight\r\n\r\n  isLoading: boolean = false\r\n  isSuccess: boolean = false\r\n  isErr: boolean = false\r\n\r\n  private trip_sub: Subscription\r\n  trips: tripModel[] = []\r\n\r\n  private openTabSub: Subscription\r\n  openTab: tab\r\n  constructor(\r\n    private router: Router,\r\n    private SearchService: SearchService,\r\n    private MapService: MapService,\r\n    private TripService: TripService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.trip_sub = this.TripService.trips.subscribe((trips: tripModel[]) => {\r\n      this.trips = trips\r\n    })\r\n\r\n    this.openTabSub = this.SearchService.searchTab.subscribe(x => {\r\n      this.openTab = x\r\n    })\r\n    this.ogUrl = environment.travelnetURL + this.router.url\r\n    this.url = this.router.url.replace('/search/venue/','')\r\n    this.SearchService.formatDetails(this.url).then(result=>{\r\n      console.log(result)\r\n      this.content = result.response.venue\r\n      if (this.content.rating && this.content.ratingColor) {\r\n        this.rating = this.content.rating\r\n        this.ratingColor = `#${this.content.ratingColor}`\r\n      }\r\n    })\r\n  }\r\n    /** add venue to specific trips */\r\n    addToTrip(event: MatListOption[]) {\r\n      this.isLoading = true\r\n      if (event.length && this.trips) {\r\n        event.map((option: MatListOption) => {\r\n          this.trips[option.value.trip].schedule[option.value.day].venues.push({\r\n            name: this.content.name? this.content.name : null,\r\n            venueAddress: this.content.location.formattedAddress? this.content.location.formattedAddress.join(' ') : null,\r\n            venueCoord: this.content.location.lng? {lng: this.content.location.lng, lat: this.content.location.lat} : null,\r\n            venueCity: this.content.location.city? this.content.location.city : null,\r\n            url: this.content.canonicalUrl? this.content.canonicalUrl : null,\r\n            category: this.content.categories[0]? { name: this.content.categories[0].name, url: this.content.categories[0].icon.prefix + '32' + this.content.categories[0].icon.suffix } : null\r\n          })\r\n        })\r\n\r\n        this.TripService.modifyBackend(this.trips)\r\n        .then((val) => {\r\n          this.isSuccess = true\r\n        })\r\n        .catch(err => {\r\n          this.isErr = true\r\n        })\r\n        .finally(() => {\r\n          setTimeout(() => {\r\n            this.isErr = false\r\n          }, 800)\r\n          this.isLoading = false\r\n        })\r\n      }\r\n    }\r\n\r\n  goBack(){\r\n    this.router.navigate(['search'], {queryParams: this.SearchService.currentSearch? this.SearchService.currentSearch : {}})\r\n  }\r\n\r\n  // check if is object\r\n  isObject(val: any): boolean {\r\n    if (typeof(val) == 'object') {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  // for ngIf, filter keys in user reviews\r\n  reviewKeys(key: string): boolean {\r\n    let keys = [\"likes\", \"text\", \"user\"]\r\n    if (keys.includes(key)) {\r\n      return true\r\n    } else  {\r\n      return false\r\n    }\r\n  }\r\n\r\n  showOnMap(location: {[key: string]: any}) {\r\n    this.MapService.addMarker(location)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.openTabSub.unsubscribe()\r\n    this.MapService.venueOnDestroy()\r\n  }\r\n\r\n}\r\n","<mat-card class=\"container\" *ngIf=\"content\">\r\n  <mat-card-title>\r\n    <div class=\"row\">\r\n      <!-- go back -->\r\n      <button mat-button (click)='goBack()' *ngIf=\"this.openTab\" class=\"col-auto\" matTooltip=\"back\">\r\n        <mat-icon class=\"\">\r\n          keyboard_backspace\r\n        </mat-icon>\r\n      </button>\r\n      <!-- venue category icon -->\r\n      <span class=\"col-auto md-auto\">\r\n        <button mat-flat-button color='primary' class=\"align-self-start\" matTooltip='{{content.categories[0].name}}' matTooltipPosition='above'>\r\n          <span style=\"padding: auto; display:inline-block;\"><img src=\"{{content.categories[0].icon.prefix}}32{{content.categories[0].icon.suffix}}\" alt=\"\"></span>\r\n        </button>\r\n      </span>\r\n      <!-- verified user icon -->\r\n      <span class=\"col-auto md-auto align-self-center\">\r\n        {{ content.name }}\r\n        &nbsp;\r\n        <span *ngIf='content.verified' matTooltip=\"Verified Venue\" matTooltipPosition='above'>\r\n          <mat-icon mat-icon-button style=\"vertical-align: middle;\" color='primary'>verified_user</mat-icon>\r\n        </span>\r\n      </span>\r\n      <!-- quick actions -->\r\n      <span class=\"col justify-content-end\">\r\n        <button mat-icon-button matTooltip=\"share\" matTooltipPosition='above' color='accent' [ngbPopover]=\"sharePop\" [autoClose]=\"'outside'\" placement=\"right\">\r\n          <mat-icon>\r\n            share\r\n          </mat-icon>\r\n        </button>\r\n        <button *ngIf=\"(content.location)? true:false\" mat-icon-button matTooltip=\"show on map\" matTooltipPosition='above' color='primary' (click)='showOnMap(content.location)'>\r\n          <mat-icon>\r\n            map\r\n          </mat-icon>\r\n        </button>\r\n        <button mat-icon-button matTooltip=\"add to trip\" matTooltipPosition='above'>\r\n          <mat-icon mat-icon-button *ngIf='!isErr && !isLoading && !isSuccess' matTooltipPosition='above' [ngbPopover]=\"popContent\" matTooltip=\"add to trip...\" [autoClose]=\"'outside'\">playlist_add</mat-icon>\r\n          <mat-spinner diameter='20' *ngIf='isLoading'></mat-spinner>\r\n          <mat-icon mat-icon-button class=\"text-success\" *ngIf='isSuccess && !isLoading'>check</mat-icon>\r\n          <mat-icon mat-icon-button class=\"text-danger\" *ngIf='isErr && !isLoading' matTooltip='an error occured'>error</mat-icon>\r\n        </button>\r\n      </span>\r\n    </div>\r\n  </mat-card-title>\r\n\r\n  <mat-card-content class=\"\">\r\n    <mat-grid-list cols=\"4\" rowHeight='{{windowHeight*.1}}'>\r\n      <!-- pictures -->\r\n      <mat-grid-tile id='imgTile'colspan=\"2\" rowspan=\"4\" >\r\n        <ngb-carousel *ngIf=\"content.photos\">\r\n          <ng-template ngbSlide *ngFor='let photo of content.photos.groups[0].items, let i = index'>\r\n            <div class=\"picsum-img-wrapper\">\r\n              <img class=\"d-inline-flex w-100\" src=\"{{photo|null:['prefix']}}original{{photo|null:['suffix']}}\" alt=\"slide {{i}}\">\r\n            </div>\r\n          </ng-template>\r\n        </ngb-carousel>\r\n        <!-- need button for additional pictures -->\r\n      </mat-grid-tile>\r\n\r\n      <!-- description -->\r\n      <mat-grid-tile colspan=\"2\" rowspan=\"3\" >\r\n        <div class=\"container-fluid\">\r\n          <!-- get page info -->\r\n          <div class=\"div\">\r\n            <p>description: {{content | null:['page','pageInfo','description']}}</p>\r\n          </div>\r\n          <!-- each categories -->\r\n          <div class=\"div\">\r\n            <p>category: <span *ngFor=\"let category of content.categories\">{{category | null:['name']}}</span></p>\r\n          </div>\r\n          <!-- need for each for attributes -->\r\n          <p>attributes:</p>\r\n          <div class=\"div\" *ngFor=\"let attribute of content.attributes.groups\">\r\n             <span>{{attribute|null:['name']}} </span><span *ngIf=\"(attribute|null:['name'])!==(attribute|null:['summary'])\"> | {{attribute|null:['summary']}}</span>\r\n          </div>\r\n          <!-- need price -->\r\n      </div>\r\n      </mat-grid-tile>\r\n\r\n      <!--rating -->\r\n      <mat-grid-tile colspan=\"4\" rowspan='1' class=\"border border-primary\">\r\n        <div class=\"container row\">\r\n          <mat-label class=\"col-auto align-self-center\">Rating: <b>{{ rating | null}}</b></mat-label>\r\n          &nbsp;\r\n          <ngb-rating [(rate)]='rating' [readonly]=\"true\" [max]=\"10\">\r\n            <ng-template #t let-fill=\"fill\">\r\n              <span class=\"star\" [class.full]=\"fill === 100\" >\r\n                <span class=\"half\" [style.width.%]=\"fill\" [style.color]='ratingColor'>&hearts;</span>&hearts;\r\n              </span>\r\n            </ng-template>\r\n          </ngb-rating>\r\n        </div>\r\n      </mat-grid-tile>\r\n\r\n      <mat-grid-tile colspan=\"4\" rowspan=5 >\r\n        <!-- need tips -->\r\n        <div class='container col' class=\"align-self-start d-inline\">\r\n          <br>\r\n          <h3 style=\"margin-bottom: 0;\"><b>Reviews</b></h3>\r\n          <div class=\"row d-inline\" *ngFor=\"let item of content.tips.groups[0].items\">\r\n            <div>\r\n              <span><b>{{ item.user.firstName }} {{ item.user.lastName }}: </b></span>\r\n              <span>{{ item.text }}</span>\r\n            </div>\r\n            <hr>\r\n          </div>\r\n        </div>\r\n      </mat-grid-tile>\r\n    </mat-grid-list>\r\n\r\n  </mat-card-content>\r\n</mat-card>\r\n\r\n<!-- share -->\r\n<ng-template #sharePop> \r\n  <app-share [UrlLink]='ogUrl'></app-share>\r\n</ng-template>\r\n\r\n<!-- add to trip -->\r\n<ng-template #popContent> \r\n  <app-add-to-trip-popover (onSubmitEvent)='addToTrip($event)'></app-add-to-trip-popover>\r\n</ng-template>","export class RoomWidget {\r\n   [prop: string]: any;\r\n   public roomName: string\r\n   public roomId: string\r\n   public unread?: boolean\r\n   public open?: boolean\r\n   \r\n   constructor(roomName: string, roomId: string, unread: boolean) {\r\n      this.roomId= roomId\r\n      this.roomName = roomName\r\n   }\r\n}","export class CustomCoordinates {\r\n    lng: number\r\n    lat: number\r\n\r\n    /** 1: lng,lat | 2: lat,lng */\r\n    toStringReorder(order: number): string {\r\n        if (order === 1) {\r\n            return `${this.lng},${this.lat}`\r\n        } else {\r\n            return `${this.lat},${this.lng}`\r\n        }\r\n    }\r\n\r\n    constructor(lng: number, lat: number) {\r\n        this.lng = lng\r\n        this.lat = lat\r\n    }\r\n\r\n}","import { environment } from 'src/environments/environment';\r\n/** response from openstreetmaps api /search, coord as [lng, lat] */\r\nexport class geocodeResponseModel {\r\n    [key: string]: any\r\n    name: string\r\n    content: {\r\n        [key: string]: any\r\n        geometry: {\r\n            [key: string]: any\r\n            coordinates: number[]\r\n        } \r\n    }\r\n\r\n    constructor(name: string, coord: number[], content?: {[key: string]: any, geometry: any}) {\r\n        this.name = name\r\n        this.content = {\r\n            geometry: {\r\n                coordinates: [environment.montrealCoord.lng, environment.montrealCoord.lat]\r\n            }\r\n        }\r\n        if (content) {\r\n            this.content = content\r\n        } else {\r\n            this.content.geometry.coordinates = coord\r\n        }\r\n    }\r\n}","import { selectedVenueModel } from './selectedVenue.model';\r\nimport { venueModel } from 'src/app/models/venue.model';\r\nimport * as moment from 'moment'\r\nimport { LngLatLike } from 'mapbox-gl';\r\n\r\nexport class tripModel {\r\n    _id: string\r\n    tripName: String\r\n    dateRange: {\r\n        [key: string]: any\r\n        start: Date\r\n        end: Date\r\n        length: Number\r\n    }\r\n    schedule?: Array<{\r\n        day?: Date,\r\n        venues: Array<{\r\n            hour?: any\r\n            name: String\r\n            venueCity?: String\r\n            venueAddress?: String\r\n            venueCoord?: LngLatLike\r\n            price?: Number\r\n            url? : URL | string\r\n            category?: {\r\n                name: string\r\n                url: URL | string\r\n            }\r\n        } | selectedVenueModel>\r\n    }>\r\n    isPrivate: boolean\r\n\r\n    constructor(start: Date, end: Date, name: string, isPrivate?: boolean) {\r\n        let final = moment(end)\r\n       \r\n        this.tripName = name\r\n        this.dateRange = {\r\n            start: start,\r\n            end: end,\r\n            length: final.diff(start, 'days') + 1\r\n        }\r\n        this.schedule = []\r\n        for (let x = 0; x < this.dateRange.length; x++) {\r\n            this.schedule.push({\r\n                day: moment(start).add(x, 'days').toDate(),\r\n                venues: []\r\n            })\r\n        }\r\n        this.isPrivate = isPrivate? isPrivate : false\r\n    }\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'arrayToPipe'\r\n})\r\nexport class ArrayToPipePipe implements PipeTransform {\r\n\r\n  transform(value: unknown, ...args: unknown[]): unknown {\r\n    return Array(value).fill(args[0])\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'listObject'\r\n})\r\nexport class ListObjectPipe implements PipeTransform {\r\n\r\n  transform(value: {[key: string]: any}, ...args: unknown[]): unknown {\r\n    return null;\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'null'\r\n})\r\nexport class NullPipe implements PipeTransform {\r\n\r\n  transform(value: any, parent:any=false, returnNull:boolean = false ): any {\r\n    if (!parent.length){\r\n      return value\r\n    }\r\n    else if(!parent){\r\n      if (returnNull){\r\n        return\r\n      }\r\n      else{\r\n        return \"no results found\"\r\n      }\r\n\r\n    }\r\n    else{\r\n      if (value[parent[0]]){\r\n        return this.transform(value[parent.shift()], parent)\r\n      }\r\n      else{\r\n        if (returnNull){\r\n          return\r\n        }\r\n        else{\r\n          return \"no results found\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { Subject } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\nimport { Router } from \"@angular/router\";\r\n\r\nimport { Post } from \"src/app/models/post.model\";\r\nimport { Comment } from \"src/app/models/comment.model\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class AddPostService {\r\n  url = \"https://travelnet.herokuapp.com/api/posts/\"\r\n  public posts: Post[] = [];\r\n  private postsUpdated = new Subject<Post[]>();\r\n\r\n  constructor(private http: HttpClient, private router: Router) {}\r\n\r\n  getPosts() {\r\n    this.http\r\n      .get<{ message: string; posts: any }>(this.url)\r\n      .pipe(\r\n        map(postData => {\r\n          var formattedComment\r\n          var formattedReply\r\n          return postData.posts.map(post => {\r\n          return{\r\n              _id: post._id,\r\n              date: post.date,\r\n              location: post.location,\r\n              likes: post.likes,\r\n              author: post.author,\r\n              title: post.title,\r\n              content: post.content,\r\n              imagePath: post.imagePath,\r\n              tags: post.tags,\r\n              comments: post.comments\r\n            };\r\n\r\n          });\r\n        })\r\n      )\r\n      .subscribe(transformedPosts => {\r\n        this.posts = transformedPosts;\r\n        this.postsUpdated.next(this.posts);\r\n      });\r\n  }\r\n  getRelevantPosts(UserPref:{author: string, follows: [string],tags: [string], location: [string] }){\r\n    this.http\r\n      .post<{ message: string; posts: any }>(this.url+ 'getSpecific/',UserPref).pipe(\r\n        map(postData => {\r\n          return postData.posts.map(post => {\r\n          return{\r\n              _id: post._id,\r\n              date: post.date,\r\n              location: post.location,\r\n              likes: post.likes,\r\n              author: post.author,\r\n              title: post.title,\r\n              content: post.content,\r\n              imagePath: post.imagePath,\r\n              tags: post.tags,\r\n              comments: post.comments\r\n            };\r\n\r\n          });\r\n        })\r\n      ).subscribe(transformedPosts => {\r\n        this.posts = transformedPosts;\r\n        this.postsUpdated.next(this.posts);\r\n      });\r\n  }\r\n  searchPosts(input:{input: string}){\r\n    this.http\r\n    .post<{ message: string; posts: any }>(this.url+ 'getOne', input).pipe(\r\n      map(postData => {\r\n        return postData.posts.map(post => {\r\n        return{\r\n            _id: post._id,\r\n            date: post.date,\r\n            location: post.location,\r\n            likes: post.likes,\r\n            author: post.author,\r\n            title: post.title,\r\n            content: post.content,\r\n            imagePath: post.imagePath,\r\n            tags: post.tags,\r\n            comments: post.comments\r\n          };\r\n\r\n        });\r\n      })\r\n    ).subscribe(transformedPosts => {\r\n      this.posts = transformedPosts;\r\n      console.log(this.posts)\r\n      this.postsUpdated.next(this.posts);\r\n    });\r\n\r\n  }\r\n\r\n\r\n  getPostUpdateListener() {\r\n    return this.postsUpdated.asObservable();\r\n  }\r\n\r\n  getPost(id: string) {\r\n    return this.http.get<{\r\n      _id: string,\r\n      date: string,\r\n      location: string,\r\n      author: string,\r\n      likes: Array<string>,\r\n      title: string,\r\n      content: string,\r\n      imagePath: string,\r\n      tags: Array<string>,\r\n      comments: Array<Comment>}>(\r\n      this.url + id\r\n    );\r\n  }\r\n\r\n  /**is now implemented inside user */\r\n  addPost(newPost) {\r\n    const postData = new FormData();\r\n    postData.append(\"date\", newPost.date);\r\n    postData.append(\"location\", newPost.location);\r\n    postData.append(\"author\", newPost.author);\r\n    postData.append(\"title\", newPost.title);\r\n    postData.append(\"content\", newPost.content);\r\n    postData.append(\"image\", newPost.image, newPost.title);\r\n    postData.append(\"tags\", newPost.tags);\r\n    this.http\r\n      .post<{ message: string; post: Post }>(\r\n        this.url,\r\n        postData,{\r\n          headers: {\r\n            authorization: localStorage.getItem('token')? localStorage.getItem('token').toString() : 'monkas'\r\n          }\r\n        }\r\n      )\r\n      .subscribe(responseData => {\r\n        const post: Post = {\r\n          _id: responseData.post._id,\r\n          date: responseData.post.date,\r\n          location: responseData.post.location,\r\n          author: responseData.post.author,\r\n          likes: responseData.post.likes,\r\n          title: newPost.Title,\r\n          content: newPost.content,\r\n          imagePath: responseData.post.imagePath,\r\n          tags: responseData.post.tags,\r\n          comments: responseData.post.comments,\r\n        };\r\n        this.posts.push(post);\r\n        this.postsUpdated.next(this.posts);\r\n        this.router.navigate([\"/\"]);\r\n        console.log(this.posts)\r\n      });\r\n  }\r\n\r\n  updatePost(newPost) {\r\n    // id: string, title: string, content: string, image: File | string\r\n    let postData: Post | FormData;\r\n    if (typeof newPost.image === \"object\") {\r\n      postData = new FormData();\r\n      postData.append(\"id\", newPost._id);\r\n      postData.append(\"date\", newPost.date);\r\n      postData.append(\"location\", newPost.location);\r\n      postData.append(\"author\", newPost.author);\r\n      postData.append(\"likes\", newPost.likes);\r\n      postData.append(\"title\", newPost.title);\r\n      postData.append(\"content\", newPost.content);\r\n      postData.append(\"image\", newPost.image, newPost.title);\r\n      postData.append(\"tags\", newPost.tags);\r\n      postData.append(\"comments\", newPost.comments);\r\n    } else {\r\n      postData = {\r\n        _id: newPost._id,\r\n        date: newPost.date,\r\n        location: newPost.location,\r\n        author: newPost.author,\r\n        likes: newPost.likes,\r\n        title: newPost.title,\r\n        content: newPost.content,\r\n        imagePath: newPost.image,\r\n        tags: newPost.tags,\r\n        comments: newPost.comments\r\n      };\r\n    }\r\n    this.http\r\n      .put(this.url + newPost._id, postData)\r\n      .subscribe(response => {\r\n        const updatedPosts = [...this.posts];\r\n        const oldPostIndex = updatedPosts.findIndex(p => p._id === newPost.id);\r\n        const post: Post = {\r\n          _id: newPost._id,\r\n          date: newPost.date,\r\n          location: newPost.location,\r\n          author: newPost.author,\r\n          likes: newPost.likes,\r\n          title: newPost.title,\r\n          content: newPost.content,\r\n          imagePath: \"\",\r\n          tags: newPost.tags,\r\n          comments: newPost.comments\r\n        };\r\n        console.log(post)\r\n        updatedPosts[oldPostIndex] = post;\r\n        this.posts = updatedPosts;\r\n        this.postsUpdated.next(this.posts);\r\n        this.router.navigate([\"/\"]);\r\n      });\r\n  }\r\n\r\n  deletePost(postId: string) {\r\n    this.http\r\n      .delete(this.url + postId)\r\n      .subscribe(() => {\r\n        const updatedPosts = this.posts.filter(post => post._id !== postId);\r\n        this.posts = updatedPosts;\r\n        this.postsUpdated.next(this.posts);\r\n      });\r\n  }\r\n  likePost(postId: string, username: string){\r\n    const updatedPostIndex = this.posts.indexOf(this.posts.find(post => post._id == postId));\r\n      this.http\r\n      .put(this.url +'like/' + postId, {'username': username})\r\n      .subscribe((response:{message:string, likes: string[]})=>{\r\n        (this.posts[updatedPostIndex]).likes= response.likes\r\n        this.postsUpdated.next(this.posts)\r\n      })\r\n  }\r\n  updatePosts(posts){\r\n    this.postsUpdated.next(posts)\r\n  }\r\n}\r\n","import { RoomWidget } from '../../models/Room_Widget.model'\r\nimport { SocketService } from './socket.service';\r\nimport { Injectable, OnDestroy } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class FriendlistService {\r\n\r\n  // lists of variables (eg: chatrooms, open chatWidgets)\r\n  private roomarr: RoomWidget[] = [] //all chatrooms of user\r\n  private widgetarr: any = [] //open chatWidgets roomName(s)\r\n  private idarr: any = [] //open chatWidget roomId(s)\r\n   \r\n\r\n  // creating observable\r\n  private _chatroomList: BehaviorSubject<RoomWidget[]> = new BehaviorSubject(this.roomarr)\r\n  public chatroomList: Observable<RoomWidget[]> = this._chatroomList.asObservable()\r\n\r\n  private _openWidgets: BehaviorSubject<object> = new BehaviorSubject([])\r\n  public openWidgets: Observable<object> = this._openWidgets.asObservable()\r\n\r\n  private _windowSize: BehaviorSubject<number> = new BehaviorSubject(window.innerWidth)\r\n  public windowSize: Observable<number> = this._windowSize.asObservable()\r\n  \r\n  private _roomModel: BehaviorSubject<RoomWidget> = new BehaviorSubject(new RoomWidget(\"asd\", \"asd\", false))\r\n  public roomModel: Observable<RoomWidget> = this._roomModel.asObservable()\r\n\r\n  constructor(private SocketService: SocketService) {\r\n\r\n  }\r\n\r\n  // gets list of chatrooms with corresponding properties than user's query\r\n  getList(array: string[]): any{\r\n    array.push(sessionStorage.getItem('username'))\r\n    let polishedarr = (array.filter((a,b) => array.indexOf(a) === (b))).sort()\r\n    // sends array of users in alphabeltical order \r\n    this.SocketService.emit('searchChatroom', {sender: sessionStorage.getItem('username'), req: polishedarr}, (data) => {\r\n      this.roomarr = []\r\n      this._chatroomList.next(this.roomarr)\r\n      if (data.err) {\r\n        console.log(data.err)\r\n      }\r\n      else if (data.res) {\r\n        (data.res).forEach(element => {\r\n\r\n          let unread: boolean\r\n          if (element.messages.length) { // check if chat is empty and if last message is unread\r\n            let lastIndex = element.messages.length - 1\r\n            if (element.messages[lastIndex].seen.includes(sessionStorage.getItem('username'))) {\r\n              unread = false\r\n            } else {\r\n              unread = true\r\n            }\r\n          } else {\r\n            unread = false\r\n          }\r\n           \r\n          this.roomarr.push({\r\n            roomName: element.roomName,\r\n            roomId: element._id,\r\n            unread: unread\r\n          })\r\n        });\r\n        this._chatroomList.next(this.roomarr)\r\n      }\r\n    })\r\n  }\r\n\r\n  // looks for room model given a roomid\r\n  getRoomWidget(roomId: string) {\r\n    this.roomarr.forEach((room) => {\r\n      if (room.roomId == roomId) {\r\n        this._roomModel.next(room)\r\n      }\r\n    })\r\n  } \r\n\r\n  // looks for users existence and creates chatroom\r\n  CreateChatroom(users: string): any {\r\n    let array: string[] = users.split(' ')\r\n    let polishedarr = (array.filter((a,b) => array.indexOf(a) === (b))).sort()\r\n    this.SocketService.emit('searchUser', polishedarr, (data) => {\r\n      if (data.err) {\r\n        console.log(data.err)\r\n      } else if (data.res) {\r\n        polishedarr.push(sessionStorage.getItem('username')) \r\n        this.SocketService.emit('createChatroom', polishedarr.sort())\r\n      } \r\n      polishedarr = []\r\n    })\r\n  }\r\n\r\n  // selecting a Chatroom from Friendlist component\r\n  toggleChatWidget(friend: RoomWidget) {\r\n    if (this.idarr.includes(friend.roomId)) {\r\n      let i = this.idarr.indexOf(friend.roomId)\r\n      this.widgetarr.splice(i, 1)\r\n      this.idarr.splice(i, 1)\r\n      friend.open = false\r\n    } else {\r\n      this.widgetarr.push(friend.roomName)\r\n      this.idarr.push(friend.roomId)\r\n      friend.open = true\r\n    }\r\n    this._openWidgets.next({\r\n      roomNames: this.widgetarr,\r\n      roomIds: this.idarr\r\n    })\r\n  }\r\n\r\n  // listen for unread messages from backend\r\n  getNotifications() {\r\n    this.SocketService.listen('notification').subscribe((data: any) => {\r\n      if (data.res) {\r\n        let i = this.roomarr.findIndex((e) => e.roomId === data.res.roomId)\r\n        if (data.res.action == 'message') {\r\n          if (i != -1) {\r\n            console.log('i defined ' + i)\r\n            if (data.res.sender == sessionStorage.getItem('username')) {\r\n              this.roomarr[i].unread = false\r\n            } else {\r\n              this.roomarr[i].unread = true\r\n            }\r\n            this._chatroomList.next(this.roomarr)\r\n          } else {\r\n            console.log('i undefined')\r\n          } \r\n        } else if (data.res.action == 'seen') {\r\n          data.res.seen.forEach(element => {\r\n            if(element.includes(sessionStorage.getItem('username'))) {\r\n              this.roomarr[i].unread = false\r\n              this._chatroomList.next(this.roomarr)\r\n            }\r\n          });\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  // user interacted with chatwidget\r\n  // mark as read in angular\r\n  selectChatwidget(roomId: string) {\r\n    this.SocketService.emit('initChatroom', {id: roomId, username: sessionStorage.getItem('username') }, (data) => {\r\n      if (data) {\r\n        let i = this.roomarr.findIndex((e) => e.roomId === roomId)\r\n        this.roomarr[i].unread = false\r\n        this._chatroomList.next(this.roomarr)\r\n      }\r\n    })\r\n  }\r\n\r\n  resizeWindow(width: number) {\r\n    const CHATWIDGETWIDTH: number = 220\r\n    const FRIENDLISTWIDTH: number = 220 + (width*.2) // take in account sidebar of 20%\r\n    const MAXNUM: number = Math.floor((width - FRIENDLISTWIDTH) / CHATWIDGETWIDTH) // take into account friendlist component\r\n    if (this.widgetarr.length > MAXNUM) {\r\n      for (let x = this.widgetarr.length; x > MAXNUM; x--) {\r\n        let removedRoomId = this.idarr[0]\r\n        this.roomarr.forEach((room) => {\r\n          if (room.roomId == removedRoomId) {\r\n            room.open = false\r\n          }\r\n        })\r\n        this.widgetarr.shift()\r\n        this.idarr.shift()\r\n      }\r\n    }\r\n    this._windowSize.next(width)\r\n  }\r\n  \r\n  ngOnDestroy() {\r\n    this.SocketService.remove('notification')\r\n  }\r\n}","import { environment } from 'src/environments/environment';\r\nimport { Injectable } from '@angular/core';\r\nimport * as io from \"socket.io-client/dist/socket.io\";\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class SocketService {\r\n  private socket: any\r\n  room: any\r\n  readonly uri: string = environment.travelnetURL\r\n\r\n  constructor() {\r\n    this.socket = io(this.uri)\r\n  }\r\n\r\n  listen(eventName: string) {\r\n    return new Observable((sub) => {\r\n      this.socket.on(eventName, (data) => {\r\n        sub.next(data)\r\n      })\r\n    })\r\n  }\r\n\r\n  emitO(eventName: string, data: any): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.socket) {\r\n        reject()\r\n      } else {\r\n        this.socket.emit(eventName, data, (ack) => {\r\n          resolve(ack)\r\n      })\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  emit(eventName: string, data: any, ack?: (res?: any) => any) {\r\n    this.socket.emit(eventName, data, ack)\r\n  }\r\n\r\n  once(eventName: string) {\r\n    return new Observable((sub) => {\r\n      this.socket.once(eventName, (data) => {\r\n        sub.next(data)\r\n      })\r\n    })\r\n  }\r\n\r\n  remove(eventName: string) {\r\n    this.socket.removeListener(eventName)\r\n  }\r\n\r\n  //disconnects and reconnects to backend\r\n  close() {\r\n    this.socket.close()\r\n  }\r\n\r\n  //permanent disconnection from backend\r\n  disconnect() {\r\n    this.socket.disconnect()\r\n  }\r\n\r\n  //manually reconnect to backend\r\n  open() {\r\n    this.socket.open()\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { Subject } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\nimport { Router } from \"@angular/router\";\r\n\r\nimport { Post } from \"../models/post.model\";\r\nimport { Comment } from \"../models/comment.model\";\r\nimport { AddPostService } from \"./add-post.service\"\r\nimport { environment } from 'src/environments/environment';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CommentsService {\r\n  url = environment.travelnetCommentURL\r\n  private posts: Post[] = [];\r\n  private postsUpdated = new Subject<Post[]>();\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private router: Router,\r\n    private PostService: AddPostService) {}\r\n\r\n  addComment(newComment,postId: string){\r\n    this.http\r\n    .post<{ message: string; comment: Comment }>(\r\n      this.url,\r\n      {commentData: newComment, postId: postId},{\r\n        headers: {}\r\n      }\r\n    ).subscribe(responseData => {\r\n      const comment: Comment = {\r\n        _id: responseData.comment._id,\r\n        date: responseData.comment.date,\r\n        author: responseData.comment.author,\r\n        likes: responseData.comment.likes,\r\n        content: newComment.content,\r\n        replies: responseData.comment.replies,\r\n        edited: responseData.comment.edited,\r\n      };\r\n      console.log(comment)\r\n      //need to update post\r\n      const postIndex = this.PostService.posts.findIndex(p => p._id === postId);\r\n      this.PostService.posts[postIndex].comments.push(comment)\r\n      this.PostService.updatePosts(this.PostService.posts)\r\n  })\r\n}\r\n  /**get all comments associated to a post*/\r\n  getComments() {\r\n    this.http\r\n      .get<{ message: string; comments: any }>(this.url)\r\n      .pipe(\r\n        map(commentData => {\r\n          return commentData.comments.map(comment => {\r\n            return {\r\n              _id: comment._id,\r\n              date: comment.date,\r\n              author: comment.author,\r\n              content: comment.content,\r\n              likes: comment.likes,\r\n              replies: comment.replies,\r\n              edited: comment.edited\r\n            };\r\n          });\r\n        })\r\n      )\r\n      .subscribe(transformedComments => {\r\n        // this.posts = transformedPosts;\r\n        // this.postsUpdated.next([...this.posts])/;\r\n      });\r\n  }\r\n  //doesnt even exist lul\r\n  /**get specific comment given its id */\r\n  getComment(commentId: string) {\r\n    return this.http.get<{\r\n      _id: string;\r\n      date: string;\r\n      author: string;\r\n      content: string;\r\n      likes: string[];\r\n      replies: Comment[];\r\n      edited: string[]\r\n    }>(\r\n      this.url + commentId\r\n    );\r\n  }\r\n  /**reply to head comment */\r\n  reply(replyContent:{postId: string, commentId: string, reply: any}){\r\n    const postIndex = this.PostService.posts.findIndex(p => p._id === replyContent.postId);\r\n    const commentIndex = this.PostService.posts[postIndex].comments.findIndex(c => c._id === replyContent.commentId)\r\n\r\n    this.http\r\n    .put<{ message: string; reply: Comment }>(\r\n      this.url + replyContent.commentId,\r\n      {commentData: replyContent.reply, postId: replyContent.postId})\r\n    .subscribe(responseData => {\r\n      this.PostService.posts[postIndex].comments[commentIndex].replies.push(responseData.reply)\r\n      this.PostService.updatePosts(this.PostService.posts)\r\n    })\r\n  }\r\n  /**edit  tree comment */\r\n  editComment(editContent:{postId: string, reply:any, comment: any}){\r\n    console.log(editContent)\r\n    const postIndex = this.PostService.posts.findIndex(p => p._id === editContent.postId);\r\n    const commentIndex = this.PostService.posts[postIndex].comments.findIndex(c => c._id === editContent.comment._id)\r\n    if (editContent.reply){\r\n      var replyIndex = this.PostService.posts[postIndex].comments[commentIndex].replies.findIndex(r => r._id === editContent.reply._id)\r\n    }\r\n    this.http\r\n    .put<{ message: string; comment: Comment }>(\r\n      this.url +'edit/' + editContent.comment._id,\r\n    {postId: editContent.postId, replyId: editContent.reply, comment: editContent.comment})\r\n      .subscribe(response =>{\r\n        (this.PostService.posts[postIndex]).comments[commentIndex] = response.comment\r\n        this.PostService.updatePost(this.PostService.posts)\r\n      })\r\n\r\n\r\n  }\r\n  /**like comment */\r\n  likeComment(likeContent:{postId: string, commentId: string, username: string, replyId: string}){\r\n    const postIndex = this.PostService.posts.findIndex(p => p._id === likeContent.postId);\r\n    const commentIndex = this.PostService.posts[postIndex].comments.findIndex(c => c._id === likeContent.commentId)\r\n    if (likeContent.replyId){\r\n      var replyIndex = this.PostService.posts[postIndex].comments[commentIndex].replies.findIndex(r => r._id === likeContent.replyId)\r\n    }\r\n    this.http\r\n    .put<{ message: string; likes: string[] }>(\r\n      this.url +'like/' + likeContent.commentId,\r\n    {postId: likeContent.postId,username: likeContent.username, replyId: likeContent.replyId})\r\n      .subscribe(response =>{\r\n        if(likeContent.replyId){\r\n          (this.PostService.posts[postIndex]).comments[commentIndex].replies[replyIndex].likes = response.likes\r\n        }\r\n        else{\r\n          (this.PostService.posts[postIndex]).comments[commentIndex].likes= response.likes\r\n        }\r\n        this.PostService.updatePost(this.PostService.posts)\r\n      })\r\n  }\r\n  /**delete existing comment */\r\n  deleteComment(deleteContent:{postId: string, commentId: string, replyId: string}){\r\n    const postIndex = this.PostService.posts.findIndex(p => p._id === deleteContent.postId);\r\n    const commentIndex = this.PostService.posts[postIndex].comments.findIndex(c => c._id === deleteContent.commentId)\r\n    if (deleteContent.replyId){\r\n      var replyIndex = this.PostService.posts[postIndex].comments[commentIndex].replies.findIndex(r => r._id === deleteContent.replyId)\r\n    }\r\n    this.http\r\n    .put<{}>(\r\n      this.url +'delete/' + deleteContent.commentId,\r\n      {postId: deleteContent.postId, replyId: deleteContent.replyId})\r\n      .subscribe(() => {\r\n        var newPosts = this.PostService.posts\r\n        if(deleteContent.replyId){\r\n          newPosts[postIndex].comments[commentIndex].replies.splice(replyIndex)\r\n        }\r\n        else{\r\n          newPosts[postIndex].comments.splice(commentIndex)\r\n        }\r\n        this.postsUpdated.next(newPosts);\r\n      })\r\n  }\r\n}\r\n","import { environment } from './../../environments/environment';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable, OnDestroy } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\n// http service that gives httpclient to everything\r\n\r\nexport class HttpService {\r\n  serverURL = environment.travelnetURL\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  delete(route: String, params: any) {\r\n    let serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.delete<any>(serverRoute, {\r\n        headers: {\r\n          authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas'\r\n        },\r\n        params\r\n      }).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  get(route: String, params: any) {\r\n    let serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.get<any>(serverRoute, {\r\n        headers: {\r\n          authorization: localStorage.getItem('token')? localStorage.getItem('token').toString() : 'monkas'\r\n        },\r\n        params\r\n      }).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  post(route: String, params: any) {\r\n    let serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.post<any>(serverRoute,        \r\n        params\r\n      ).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  put(route: String, params: any) {\r\n    let serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.put<any>(serverRoute, {\r\n        headers: {\r\n          authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas'\r\n        },\r\n        params\r\n      }).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  patch(route: string, params: any) {\r\n    let serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.patch<any>(serverRoute, {\r\n        headers: {\r\n          authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas'\r\n        },\r\n        params\r\n      }).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n}","import { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpResponse } from '@angular/common/http';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class FoursquareService {\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /** takes lat,lng */\r\n  searchVenues (query: string, latLng: string, near?: string) {\r\n    return this.http\r\n      .get<{[key: string]: any}>(\r\n        environment.foursquare.venuesExplore,\r\n        {\r\n          headers: {\r\n          },\r\n          params: {\r\n            'client_id': environment.foursquare.clientId,\r\n            'client_secret': environment.foursquare.clientSecret,\r\n            'v': this.getCurrentDate(),\r\n            'll': latLng,\r\n            'query': query\r\n          }\r\n    })\r\n  }\r\n\r\n  getDetails(query: string) {\r\n    return this.http\r\n      .get<{[key: string]: any}>(\r\n        environment.foursquare.venueDetails+'/'+query,\r\n        {\r\n          headers: {\r\n          },\r\n          params: {\r\n            'client_id': environment.foursquare.clientId,\r\n            'client_secret': environment.foursquare.clientSecret,\r\n            'v': this.getCurrentDate(),\r\n          }\r\n    })\r\n  }\r\n\r\n  userAuth() {\r\n    let url = environment.foursquare.userAuth+\r\n    '?client_id='+environment.foursquare.clientId+\r\n    '&response_type='+'code'+\r\n    '&redirect_uri='+'http://localhost:4200/'\r\n    console.log(url)\r\n    window.location.replace(url)\r\n  }\r\n\r\n  updateCategories(): Observable<{[key: string]: any}> {\r\n    return this.http\r\n    .get<{[key: string]: any}>(\r\n      environment.foursquare.getCategories+'/',\r\n      {\r\n        headers: {\r\n        },\r\n        params: {\r\n          'client_id': environment.foursquare.clientId,\r\n          'client_secret': environment.foursquare.clientSecret,\r\n          'v': this.getCurrentDate(),\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  getCurrentDate(): string {\r\n    let dt = new Date();\r\n    let month: string\r\n    let day: string\r\n    if (dt.getMonth.toString().length != 2){\r\n      month = ''+ 0 + dt.getMonth()\r\n    }\r\n    else{\r\n      month = dt.getMonth().toString()\r\n    }\r\n    if (dt.getDay.toString().length !=2){\r\n      day = '' + 0 + dt.getDay()\r\n    }\r\n    else{\r\n      day = dt.getDay().toString()\r\n    }\r\n    return (dt.getFullYear().toString() + month + day)\r\n  }\r\n}\r\n","import * as Mapboxgl  from 'mapbox-gl';\r\nimport { geocodeResponseModel } from './../../models/geocodeResp.model';\r\nimport { OpenstreetmapService } from './openstreetmap.service';\r\nimport { SessionService } from 'src/app/services/session.service';\r\nimport { CustomCoordinates } from './../../models/coordinates';\r\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\r\nimport { Injectable, OnInit, Input, OnDestroy } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { GeoJsonTypes } from 'geojson';\r\n\r\n\r\nexport class featureGEOJSONModel {\r\n  public type: String\r\n  public geometry: {\r\n    type: String,\r\n    coordinates: number[]\r\n  }\r\n  public properties?: {\r\n    [key: string]: any\r\n    title: string\r\n    icon?: string\r\n  }\r\n\r\n  constructor(title: string, coordinates: number[]) {\r\n    this.type = 'Feature'\r\n    this.geometry = {\r\n      'type': 'Point',\r\n      'coordinates': coordinates\r\n    }\r\n    this.properties = {\r\n      title: title,\r\n      'marker-color': '#3c4e5a',\r\n      'marker-symbol': 'marker-15',\r\n      'marker-size': 'large',\r\n    }\r\n  }\r\n}\r\n\r\nexport interface clickLocationCoordinates {\r\n  [key: string]: any\r\n  lng: number\r\n  lat: number\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MapService implements OnDestroy{\r\n  citySearchPresent: boolean = null\r\n\r\n  private _fakeCenter: BehaviorSubject<mapboxgl.LngLatLike | CustomCoordinates> = new BehaviorSubject(null)\r\n  public fakeCenter : Observable<mapboxgl.LngLatLike | CustomCoordinates> = this._fakeCenter.asObservable()\r\n\r\n  private _fakeCenterCity: BehaviorSubject<{[key: string]: any}> = new BehaviorSubject({})\r\n  public fakeCenterCity : Observable<{[key: string]: any}> = this._fakeCenterCity.asObservable()\r\n\r\n\r\n  lngOffset: number\r\n  map: Mapboxgl.Map\r\n  venueLocation: Mapboxgl.Marker\r\n\r\n  private _clickLocation: BehaviorSubject<clickLocationCoordinates> = new BehaviorSubject({\r\n    lat: null,\r\n    lng: null\r\n  })\r\n  clickLocation: Observable<clickLocationCoordinates> = this._clickLocation.asObservable()\r\n\r\n  private Places: Array<featureGEOJSONModel[]> = [[],[]]\r\n\r\n  private sidebarWidth_sub: Subscription\r\n  sidebarWidth: number\r\n\r\n  constructor(private SessionService: SessionService,\r\n              private OpenstreetmapService: OpenstreetmapService) {\r\n    (Mapboxgl as any).accessToken = environment.mapbox.token\r\n\r\n    this.sidebarWidth_sub = this.SessionService.sidebarWidth.subscribe((w: number) => {\r\n      this.sidebarWidth = w\r\n    })\r\n  }\r\n\r\n  buildMap() {\r\n    this.map = new Mapboxgl.Map({\r\n      container: 'mapbox', // container id\r\n      style: 'mapbox://styles/travelnet/ck99afyp80hhu1iqrodjf1brl',\r\n      center: [-71.22, 46.85], // starting position\r\n      zoom: 2, // starting zoom\r\n      failIfMajorPerformanceCaveat:true, //map creation will fail\r\n      //if the performance of Mapbox GL JS\r\n      pitchWithRotate: false,\r\n      dragRotate:false,\r\n    });\r\n    // this._clickLocation = new BehaviorSubject(`${this.map.getCenter().lng},${this.map.getCenter().lat}`)\r\n    // this.clickLocation = this._clickLocation.asObservable()\r\n\r\n    this.map.on('load', () => {\r\n      // init center observable \r\n      this.getCenter()\r\n      this.getFakeCenter()\r\n\r\n      this.map.on('click',(e)=>{\r\n        let lng = e.lngLat.lng\r\n        let lat = e.lngLat.lat\r\n        this._clickLocation.next({\r\n          lng: lng,\r\n          lat: lat\r\n        })\r\n      })\r\n    })\r\n\r\n    // update fake center of map\r\n    this.map\r\n    .on('zoomend',()=>{\r\n      this.getFakeCenter()\r\n    })\r\n    .on('moveend',()=>{\r\n      this.getFakeCenter()\r\n    })\r\n\r\n  }\r\n\r\n  addGeoJsonSource(id: string, type: any, content: any[]) {\r\n    this.map.addSource(id, {\r\n      'type': 'geojson',\r\n      'data': {\r\n        'type': type,\r\n        'features': content\r\n      }\r\n    })\r\n  }\r\n\r\n  addLayer(id: string, type: any, source: string, layout?: {[key: string]: any}, paint?: {[key: string]: any}) {\r\n    this.map.addLayer({\r\n      'id': id,\r\n      'type': type,\r\n      'source': source,\r\n      'layout': layout,\r\n      'paint': paint\r\n    })\r\n  }\r\n\r\n  addMarker(location: {[key: string]: any}) {\r\n    let coord: mapboxgl.LngLatLike = {\r\n      lng: location.lng,\r\n      lat: location.lat\r\n    }\r\n    this.venueLocation = new Mapboxgl.Marker()\r\n    .setLngLat(coord)\r\n    .addTo(this.map);\r\n    coord.lng -= this.lngOffset\r\n    this.map.flyTo({ 'center': coord, 'speed': 0.8, 'curve': 1, 'essential': true });\r\n  }\r\n\r\n  /** gets middle point between sidebar and right side of screen */\r\n  getFakeCenter(sidebar: number = this.sidebarWidth) {\r\n    let centerPoints: any\r\n    if (sidebar < 500) {\r\n      centerPoints = this.map.unproject([window.innerWidth/2, window.innerHeight/2])\r\n    }\r\n    else {\r\n      centerPoints = this.map.unproject([(window.innerWidth - sidebar)/2 + sidebar, window.innerHeight/2])\r\n    }\r\n    let realCenter: mapboxgl.LngLatLike = this.map.getCenter()\r\n    centerPoints = new CustomCoordinates(centerPoints.lng, centerPoints.lat)\r\n    this.lngOffset = centerPoints.lng - realCenter.lng\r\n    // update coord at fake center\r\n    this._fakeCenter.next(centerPoints)\r\n\r\n    if (this.citySearchPresent) {\r\n      // get name of city at fake center\r\n      this.OpenstreetmapService.reverseSearch(centerPoints.lng, centerPoints.lat)\r\n      .subscribe((response) => {\r\n        this._fakeCenterCity.next(response)\r\n      }, err => {\r\n        console.log(err)\r\n        this._fakeCenterCity.next(err)\r\n      })      \r\n    }\r\n  }\r\n\r\n  /** return coordinates [lng, lat] at center of screen if not found -> montreal*/\r\n  getCenter(): CustomCoordinates {\r\n    let lng: number = this.map.getCenter().lng? this.map.getCenter().lng : environment.montrealCoord.lng\r\n    let lat: number = this.map.getCenter().lat? this.map.getCenter().lat : environment.montrealCoord.lat\r\n    return new CustomCoordinates(lng, lat)\r\n  }\r\n\r\n  /** highlight selected coutries when register */\r\n  showMarker(target: number, input?: geocodeResponseModel, style?: URL) {\r\n    if (!input && this.map.getSource('points') && this.Places[target - 1]) {\r\n      (this.map.getSource('points') as Mapboxgl.GeoJSONSource).setData(\r\n        {\r\n          'type': 'FeatureCollection',\r\n          'features': this.Places[target - 1] as any\r\n        }\r\n      )\r\n    } else if (input) {\r\n      this.Places[target - 1].push(new featureGEOJSONModel(input.name, input.content.geometry.coordinates))\r\n      let coord: mapboxgl.LngLatLike = {\r\n        lng: input.content.geometry.coordinates[0],\r\n        lat: input.content.geometry.coordinates[1]\r\n      }\r\n      coord.lng -= this.lngOffset\r\n      this.map.flyTo({ 'center': coord, 'speed': 0.8, 'curve': 1, 'essential': true });\r\n      if (this.map.getSource('points')) {\r\n        // update points\r\n        (this.map.getSource('points') as Mapboxgl.GeoJSONSource).setData(\r\n          {\r\n            'type': 'FeatureCollection',\r\n            'features': this.Places[target - 1] as any\r\n          }\r\n        )\r\n      } else {\r\n        // add first point\r\n        this.map.addSource('points', {\r\n          'type': 'geojson',\r\n          'data': {\r\n            'type': 'FeatureCollection',\r\n            'features': [\r\n              {\r\n                'type': 'Feature',\r\n                'geometry': {\r\n                  'type': 'Point',\r\n                  'coordinates': [\r\n                    input.content.geometry.coordinates[0],\r\n                    input.content.geometry.coordinates[1],\r\n                  ]\r\n                },\r\n                'properties': {\r\n                  'title': input.name,\r\n                  'marker-color': '#3c4e5a',\r\n                  'marker-symbol': 'marker-15',\r\n                  'marker-size': 'large',\r\n                }\r\n              },\r\n            ]\r\n          }\r\n        });\r\n\r\n      }\r\n    }\r\n    if (!this.map.getLayer('points') && this.map.getSource('points')) {\r\n      this.map.addLayer({\r\n        'id': 'points',\r\n        'type': 'symbol',\r\n        'source': 'points',\r\n        'layout': {\r\n          // get the icon name from the source's \"icon\" property\r\n          // concatenate the name to get an icon from the style's sprite sheet\r\n          'icon-image': ['get', 'marker-symbol'],\r\n          // get the title name from the source's \"title\" property\r\n          'text-field': ['get', 'title'],\r\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\r\n          'text-offset': [0, 0.6],\r\n          'text-anchor': 'top'\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  // remove markers on map\r\n  removeMarker(name: string, target: number, all?: boolean) {\r\n    if (all) {\r\n      this.Places[target - 1] = []\r\n      if(this.map.getSource('points')) {\r\n        (this.map.getSource('points') as Mapboxgl.GeoJSONSource).setData(\r\n          {\r\n            'type': 'FeatureCollection',\r\n            'features': []\r\n          }\r\n        )\r\n      }\r\n    } else {\r\n      for (let x = 0; x < this.Places[target - 1].length; x++) {\r\n        if (this.Places[target - 1][x].properties.title == name) {\r\n          this.Places[target - 1].splice(x, 1) as any\r\n          (this.map.getSource('points') as Mapboxgl.GeoJSONSource).setData(\r\n            {\r\n              'type': 'FeatureCollection',\r\n              'features': this.Places[target - 1] as any\r\n            }\r\n          )\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  venueOnDestroy() {\r\n    if (this.venueLocation) {\r\n      this.venueLocation.remove()\r\n    }\r\n  }\r\n  ngOnDestroy() {\r\n    this.sidebarWidth_sub.unsubscribe()\r\n  }\r\n}","import { Observable } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { env } from 'process';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OpenstreetmapService {\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  onSendRequest(bbox){\r\n    return this.http\r\n      .get<{[key: string]: any}>(\r\n        environment.openstreetmap.searchNodes,\r\n        {\r\n          headers: {\r\n          },\r\n          params: {\r\n\r\n            'bbox': bbox,\r\n          }\r\n      })\r\n  }\r\n\r\n  /** search for cities with nominatim (geojson response) coord as [lng, lat] */\r\n  citySearch(city: string): Observable<{[key: string]: any}> {\r\n    return this.http\r\n      .get<{[key: string]: any, name: string, content: {[key: string]: any}}>(\r\n        environment.nominatim.search,\r\n        {\r\n          headers: {},\r\n          params: {\r\n            'city': city,\r\n            'format': 'geojson'\r\n          }\r\n        }\r\n      )\r\n  }\r\n\r\n  /** reverse geocoding */\r\n  reverseSearch(lng: number, lat: number): Observable<{[key: string]: any, features: Array<{[key: string]: any}>}> {\r\n    return this.http\r\n      .get<{[key: string]: any, features: Array<{[key: string]: any}>}>(\r\n        environment.nominatim.reverse,\r\n        {\r\n          params: {\r\n            'format': 'geojson',\r\n            'zoom': '10',\r\n            'lat': lat.toString(),\r\n            'lon': lng.toString()\r\n          }\r\n        }\r\n      )\r\n  }\r\n}","import { foursquareCategory } from './../models/CategoryNode.model';\r\nimport { SearchParams } from './../models/searchParams';\r\nimport { logging } from 'protractor';\r\nimport { CustomCoordinates } from './../models/coordinates';\r\nimport { tab } from 'src/app/models/tab.model';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { FoursquareService } from './map/foursquare.service';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable, OnDestroy } from '@angular/core';\r\nimport { CategoryNode } from '../models/CategoryNode.model';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchService implements OnDestroy {\r\n  /**if user is already searchign something */\r\n  currentSearch: SearchParams = null\r\n\r\n  private search: tab = {query: null, content : {'users':[], 'venues':[]}}\r\n  private _searchTab: BehaviorSubject<tab> = new BehaviorSubject(this.search)\r\n  public searchTab : Observable<tab> = this._searchTab.asObservable()\r\n\r\n  private filter: number = 0\r\n  private _filterNumber: BehaviorSubject<number> = new BehaviorSubject(this.filter)\r\n  public filterNumber : Observable<number> = this._filterNumber.asObservable()\r\n\r\n  private categories: foursquareCategory[] = null\r\n  private _categoryTree: BehaviorSubject<foursquareCategory[] | CategoryNode[]> = new BehaviorSubject(this.categories)\r\n  public categoryTree : Observable<foursquareCategory[] | CategoryNode[]> = this._categoryTree.asObservable()\r\n\r\n  private categoriesCollection: any\r\n  private _categorySet: BehaviorSubject<Set<any>> = new BehaviorSubject(this.categoriesCollection)\r\n  public categorySet : Observable<Set<any>> = this._categorySet.asObservable()\r\n\r\n  treeValues: {\r\n    [key: string]: any\r\n    tree: [],\r\n    categorySet: Set<any>\r\n  } = {\r\n    tree: [],\r\n    categorySet: new Set()\r\n  }\r\n\r\n  constructor(private HttpClient: HttpClient,\r\n              private foursquareService: FoursquareService) {\r\n    this.updateCategories()\r\n    .then((x: foursquareCategory[]) => {\r\n      this._categoryTree.next(x)\r\n      this._categorySet.next(this.treeValues.categorySet)\r\n    })\r\n\r\n    this.currentSearch = null\r\n  }\r\n\r\n  //looks for venues in the area\r\n  foursquareSearchVenues(query: string, latLng: CustomCoordinates): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.foursquareService.searchVenues(query, latLng.toStringReorder(2))\r\n      .subscribe((result) => {\r\n        resolve(result)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    }\r\n  )}\r\n\r\n  /**gets user info with username input, connection to database*/\r\n  userSearch(query: string): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.HttpClient.get<any>(environment.travelnet.searchUsers,\r\n        {\r\n          headers: {\r\n            authorization: localStorage.getItem('token')? localStorage.getItem('token').toString() : 'monkas',\r\n          },\r\n          params: {\r\n            user: query\r\n          }\r\n        }\r\n      )\r\n      .subscribe((result) => {\r\n        resolve(result)\r\n      }, (err) =>{\r\n        reject(err)\r\n      })\r\n    }\r\n  )}\r\n\r\n  /** gets venue data with id in the query */\r\n  formatDetails(query: string){\r\n    return new Promise<any>((resolve,reject)=>{\r\n      this.foursquareService.getDetails(query)\r\n      .subscribe(result=>{\r\n        resolve(result)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**combines both user and venue search*/\r\n  async mainSearch(query: string, coord: CustomCoordinates): Promise<any[]> {\r\n    return await Promise.all([this.foursquareSearchVenues(query, coord), this.userSearch(query)])\r\n  }\r\n\r\n  /**user makes new search in a tab*/\r\n  enterSearch(query: string, searchType: Promise<any>, coord: CustomCoordinates) {\r\n    return new Promise((resolve,reject)=>{\r\n      this.resetSearchContent()\r\n      searchType\r\n      .then(result => {\r\n\r\n        if (result[0].response.totalResults != 0) {\r\n          result[0].response.groups[0].items.forEach(venue =>{\r\n            this.search.content.venues.push(venue)\r\n          })\r\n        } else {\r\n          this.search.content.venues = []\r\n        }\r\n\r\n        if (sessionStorage.getItem('username')) {\r\n          if (result[1].users) {\r\n            result[1].users.forEach(user=>{\r\n              this.search.content.users.push(user)\r\n            })\r\n          }\r\n        } else {\r\n          this.search.content.users.push({'username' : 'warning', 'name' : 'You must be logged in to see users'})\r\n        }\r\n\r\n        this.search = ({\r\n          query: {\r\n            query: query,\r\n            lng: coord.lng,\r\n            lat: coord.lat\r\n          },\r\n          content: this.search.content\r\n        })\r\n        this._searchTab.next(this.search)\r\n        resolve()\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**update foursquare categories*/\r\n  updateCategories(): Promise<foursquareCategory[] | CategoryNode[]> {\r\n    return new Promise((resolve,reject)=>{\r\n      this.foursquareService.updateCategories()\r\n      .subscribe(x=>{\r\n        this.initiateTree(x.response.categories)\r\n        resolve(x.response.categories)\r\n      }, err => {\r\n        console.log(err)\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**makes tree leaves checked and creates array containing category id*/\r\n  initiateTree(data: CategoryNode[]) {\r\n    data.forEach((category: CategoryNode) => {\r\n      if (category.categories.length === 0) {\r\n        category.checked = true\r\n        this.treeValues.categorySet.add(category.id)\r\n      }\r\n      else if (category.categories.length !== 0) {\r\n        this.treeValues.categorySet.add(category.id)\r\n        this.initiateTree(category.categories)\r\n      }\r\n    })\r\n  }\r\n\r\n  updateCategoryTree(newData){\r\n    this._categoryTree.next(newData)\r\n  }\r\n\r\n  updateCategorySet(newData){\r\n    this._categorySet.next(newData)\r\n  }\r\n\r\n  getSearchResult(search){\r\n    if (search.type == 'venue'){\r\n      return ('venue: ' + search.name)\r\n    }\r\n    else{\r\n      return ('User: ' + search.name)\r\n    }\r\n  }\r\n\r\n  resetSearchContent(){\r\n    this.search.content= {venues:[],users:[]}\r\n    this._searchTab.next(this.search)\r\n  }\r\n\r\n  changeFilter(filter: number){\r\n    this._filterNumber.next(filter)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._searchTab.unsubscribe()\r\n    this._categoryTree.unsubscribe()\r\n    this._categorySet.unsubscribe()\r\n    this._filterNumber.unsubscribe()\r\n  }\r\n}","import { SocketService } from './chatsystem/socket.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable} from 'rxjs'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class SessionService {\r\n\r\n  // observable for login state\r\n  private _sessionState: BehaviorSubject<boolean> = new BehaviorSubject(false)\r\n  public sessionState: Observable<boolean> = this._sessionState.asObservable()\r\n\r\n  private _sidebarWidth: BehaviorSubject<number> = new BehaviorSubject(window.innerWidth*.4)\r\n  public sidebarWidth: Observable<number> = this._sidebarWidth.asObservable()\r\n\r\n  constructor(private SocketService: SocketService) { }\r\n\r\n  getRoomName(roomName: string) {\r\n    if (roomName.replace(`${sessionStorage.getItem('username')},`, \"\").includes(roomName)) {\r\n      return roomName.replace(`,${sessionStorage.getItem('username')}`, \"\")\r\n    } else {\r\n      return roomName.replace(`${sessionStorage.getItem('username')},`, \"\")\r\n    }\r\n  }\r\n\r\n  session(): boolean {\r\n    if (sessionStorage.getItem('username')) {\r\n      this._sessionState.next(true)\r\n      return true\r\n    } else {\r\n      this._sessionState.next(false)\r\n      return false\r\n    }\r\n  }\r\n  \r\n  updateSidebarWidth(width: number) {\r\n    this._sidebarWidth.next(width)\r\n  }\r\n}","import { SessionService } from 'src/app/services/session.service';\r\nimport { userModel } from './../models/user.model';\r\nimport { tripModel } from '../models/trip.model';\r\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\r\nimport { HttpService } from './http.service';\r\nimport { Injectable, OnDestroy } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TripService implements OnDestroy {\r\n  private sessionState_sub: Subscription\r\n  sessionState: boolean = this.SessionService.session()\r\n\r\n  // query settings from mytrip add venue\r\n  searchedVenue: string = null\r\n\r\n  private _trips: BehaviorSubject<tripModel[]> = new BehaviorSubject(null)\r\n  public trips: Observable<tripModel[]> = this._trips.asObservable()\r\n\r\n  constructor(private HttpService: HttpService,\r\n              private SessionService: SessionService) {\r\n    // check if user is logged in and retrieve trip data\r\n    this.sessionState_sub = this.SessionService.sessionState.subscribe((state: boolean) => {\r\n      if (state) {\r\n        this.sessionState = state\r\n        this.HttpService.get('/user', {})\r\n        .then((response: {\r\n          [key: string]: any\r\n          user: userModel[]\r\n        }) => {\r\n          if (response.user) {\r\n            this._trips.next(response.user[0].trips)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /** when user searches/finished searching a venue from mytrip -> add venue */ \r\n  changeQuery(query: string | null) {\r\n    this.searchedVenue = query\r\n  }\r\n\r\n  /** modifies trips of user */ \r\n  modifyBackend(triparr: tripModel[]): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.HttpService.patch('/user/edit', {\r\n        username: localStorage.getItem('username'),\r\n        proprety: 'trips',\r\n        newProprety: triparr\r\n      })\r\n      .then((response: {[key: string]: any}) => {\r\n        this._trips.next(triparr)\r\n        resolve(response)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**localy update trips of user (when modification is already done)*/\r\n  updateLocal(triparr: tripModel[]) {\r\n    this._trips.next(triparr)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sessionState_sub.unsubscribe()\r\n  }\r\n}\r\n","import { environment as defaultEnvironment } from './environment.prod';\r\nexport const environment = {\r\n    ...defaultEnvironment,\r\n    production: false,\r\n}","import { CustomCoordinates } from './../app/models/coordinates';\r\nexport const environment = {\r\n\r\n\r\n  production: true,\r\n  language: 'en',\r\n  travelnetURL: 'https://travelnet.herokuapp.com',\r\n  travelnetCommentURL: \"https://travelnet.herokuapp.com/api/comments/\",\r\n\r\n  mapbox: {\r\n    token: 'pk.eyJ1IjoidHJhdmVsbmV0IiwiYSI6ImNrOTk3cHkwaDAzaHkzZHEwMm03ZGN0MG8ifQ.j24u0Q5RbYw7PW4tVpGjmQ',\r\n    geocoding: 'https://api.mapbox.com/geocoding/v5/mapbox.places'\r\n  },\r\n\r\n  foursquare: {\r\n    clientId: 'NYZJ324E5GAY2MSQUNYIYLKIDCMX2ETMQREKQXZLW3S5ZYVG',\r\n    clientSecret: 'K51P2Y1T3TMTCU24LOFHDFOAONPGU44ZBNZCGTWCOJESUW4A',\r\n    v: '',\r\n    venuesSearch: 'https://api.foursquare.com/v2/venues/search',\r\n    venuesExplore: 'https://api.foursquare.com/v2/venues/explore',\r\n    venueDetails: 'https://api.foursquare.com/v2/venues',\r\n    userAuth: 'https://foursquare.com/oauth2/authenticate',\r\n    getCategories: 'https://api.foursquare.com/v2/venues/categories',\r\n\r\n  },\r\n\r\n  nominatim: {\r\n    search: 'https://nominatim.openstreetmap.org/search',\r\n    reverse: 'https://nominatim.openstreetmap.org/reverse'\r\n  },\r\n\r\n  openstreetmap:{\r\n    searchNodes:'https://master.apis.dev.openstreetmap.org/api/0.6/map',\r\n    searchRealNode:' https://api.openstreetmap.org/api/0.6/map'\r\n  },\r\n\r\n  travelnet: {\r\n    getUserInfo: 'https://travelnet.herokuapp.com/user',\r\n    getProfile: 'https://travelnet.herokuapp.com/profile',\r\n    searchUsers:'https://travelnet.herokuapp.com/searchusers',\r\n  },\r\n  montrealCoord: new CustomCoordinates(-73.5633265, 45.5009128)\r\n};\r\n","import { CustomCoordinates } from './../app/models/coordinates';\r\n// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  travelnetURL: 'http://localhost:3000',\r\n  travelnetCommentURL: \"http://localhost:3000/api/comments/\",\r\n\r\n  mapbox: {\r\n    token: 'pk.eyJ1IjoidHJhdmVsbmV0IiwiYSI6ImNrOTk3cHkwaDAzaHkzZHEwMm03ZGN0MG8ifQ.j24u0Q5RbYw7PW4tVpGjmQ',\r\n    geocoding: 'https://api.mapbox.com/geocoding/v5/mapbox.places'\r\n  },\r\n\r\n  foursquare: {\r\n    clientId: 'NYZJ324E5GAY2MSQUNYIYLKIDCMX2ETMQREKQXZLW3S5ZYVG',\r\n    clientSecret: 'K51P2Y1T3TMTCU24LOFHDFOAONPGU44ZBNZCGTWCOJESUW4A',\r\n    v: '',\r\n    venuesSearch: 'https://api.foursquare.com/v2/venues/search',\r\n    venuesExplore: 'https://api.foursquare.com/v2/venues/explore',\r\n    venueDetails: 'https://api.foursquare.com/v2/venues',\r\n    userAuth: 'https://foursquare.com/oauth2/authenticate',\r\n    getCategories: 'https://api.foursquare.com/v2/venues/categories',\r\n\r\n  },\r\n\r\n  nominatim: {\r\n    search: 'https://nominatim.openstreetmap.org/search',\r\n    reverse: 'https://nominatim.openstreetmap.org/reverse'\r\n  },\r\n\r\n  openstreetmap:{\r\n    searchNodes:'https://master.apis.dev.openstreetmap.org/api/0.6/map',\r\n    searchRealNode:' https://api.openstreetmap.org/api/0.6/map'\r\n  },\r\n\r\n  travelnet: {\r\n    getUserInfo: 'http://localhost:3000/user',\r\n    getProfile: 'http://localhost:3000/profile',\r\n    searchUsers:'http://localhost:3000/searchusers',\r\n  },\r\n\r\n  montrealCoord: new CustomCoordinates(-73.5633265, 45.5009128)\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}